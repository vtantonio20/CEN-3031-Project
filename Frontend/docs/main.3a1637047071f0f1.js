(self.webpackChunkThird_Project=self.webpackChunkThird_Project||[]).push([[179],{2011:(ot,Ae,O)=>{"use strict";O.d(Ae,{hO:()=>je,xv:()=>he,Dh:()=>de,GT:()=>ge,cc:()=>De,on:()=>$,pX:()=>te});var a=O(5e3),J=O(127),P=O(5813);ot=O.hmd(ot);const me=["ngOnDestroy"],te=(le,xe,Ne,oe={})=>new Proxy(le,{get:(_e,Ee)=>Ne.runOutsideAngular(()=>{var qe;if(le[Ee])return(null===(qe=null==oe?void 0:oe.spy)||void 0===qe?void 0:qe.get)&&oe.spy.get(Ee,le[Ee]),le[Ee];if(me.indexOf(Ee)>-1)return()=>{};const He=xe.toPromise().then(ne=>{const K=ne&&ne[Ee];return"function"==typeof K?K.bind(ne):K&&K.then?K.then(se=>Ne.run(()=>se)):Ne.run(()=>K)});return new Proxy(()=>{},{get:(ne,K)=>He[K],apply:(ne,K,se)=>He.then(ve=>{var ae;const Pe=ve&&ve(...se);return(null===(ae=null==oe?void 0:oe.spy)||void 0===ae?void 0:ae.apply)&&oe.spy.apply(Ee,se,Pe),Pe})})})}),ge=(le,xe)=>{xe.forEach(Ne=>{Object.getOwnPropertyNames(Ne.prototype||Ne).forEach(oe=>{Object.defineProperty(le.prototype,oe,Object.getOwnPropertyDescriptor(Ne.prototype||Ne,oe))})})};class ie{constructor(xe){return xe}}const de=new a.OlP("angularfire2.app.options"),he=new a.OlP("angularfire2.app.name");function $(le,xe,Ne){const _e="object"==typeof Ne&&Ne||{};_e.name=_e.name||"string"==typeof Ne&&Ne||"[DEFAULT]";const qe=J.Z.apps.filter(He=>He&&He.name===_e.name)[0]||xe.runOutsideAngular(()=>J.Z.initializeApp(le,_e));try{JSON.stringify(le)!==JSON.stringify(qe.options)&&B("error",`${qe.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(He){}return new ie(qe)}const B=(le,...xe)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[le](...xe)},Q={provide:ie,useFactory:$,deps:[de,a.R0b,[new a.FiY,he]]};let je=(()=>{class le{constructor(Ne){J.Z.registerVersion("angularfire",P.q4.full,"core"),J.Z.registerVersion("angularfire",P.q4.full,"app-compat"),J.Z.registerVersion("angular",a.q4F.full,Ne.toString())}static initializeApp(Ne,oe){return{ngModule:le,providers:[{provide:de,useValue:Ne},{provide:he,useValue:oe}]}}}return le.\u0275fac=function(Ne){return new(Ne||le)(a.LFG(a.Lbi))},le.\u0275mod=a.oAB({type:le}),le.\u0275inj=a.cJS({providers:[Q]}),le})();function De(le,xe,Ne,oe,_e){const[,Ee,qe]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===le)||[];if(Ee)return function Re(le,xe){try{return le.toString()===xe.toString()}catch(Ne){return le===xe}}(_e,qe)||(z("error",`${xe} was already initialized on the ${Ne} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),z("warn",{is:_e,was:qe})),Ee;{const He=oe();return globalThis.\u0275AngularfireInstanceCache.push([le,He,_e]),He}}const Ue=!!ot.hot,z=(le,...xe)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[le](...xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Ae,O)=>{"use strict";O.d(Ae,{q4:()=>ma,iC:()=>_n,fc:()=>va,HU:()=>ul,vb:()=>Zd,JM:()=>pc});var a=O(5e3),J=O(5867),P=O(5861),me=O(9681),te=O(2090),ge=O(4859),ie=O(1877),de=O(2940);const he="@firebase/installations",$="0.5.5",Q=`w:${$}`,je="FIS_v2",xe=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ne(T){return T instanceof te.ZR&&T.code.includes("request-failed")}function oe({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function _e(T){return{token:T.token,requestStatus:2,expiresIn:ve(T.expiresIn),creationTime:Date.now()}}function Ee(T,I){return qe.apply(this,arguments)}function qe(){return(qe=(0,P.Z)(function*(T,I){const U=(yield I.json()).error;return xe.create("request-failed",{requestName:T,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function He({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function ne(T,{refreshToken:I}){const R=He(T);return R.append("Authorization",function ae(T){return`${je} ${T}`}(I)),R}function K(T){return se.apply(this,arguments)}function se(){return(se=(0,P.Z)(function*(T){const I=yield T();return I.status>=500&&I.status<600?T():I})).apply(this,arguments)}function ve(T){return Number(T.replace("s","000"))}function Pe(T,I){return fe.apply(this,arguments)}function fe(){return(fe=(0,P.Z)(function*(T,{fid:I}){const R=oe(T),re={method:"POST",headers:He(T),body:JSON.stringify({fid:I,authVersion:je,appId:T.appId,sdkVersion:Q})},Me=yield K(()=>fetch(R,re));if(Me.ok){const Le=yield Me.json();return{fid:Le.fid||I,registrationStatus:2,refreshToken:Le.refreshToken,authToken:_e(Le.authToken)}}throw yield Ee("Create Installation",Me)})).apply(this,arguments)}function Et(T){return new Promise(I=>{setTimeout(I,T)})}const Vn=/^[cdef][\w-]{21}$/;function dt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const R=function qn(T){return function $t(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Vn.test(R)?R:""}catch(T){return""}}function rn(T){return`${T.appName}!${T.appId}`}const Tr=new Map;function Qt(T,I){const R=rn(T);Ot(R,I),function us(T,I){const R=function js(){return!gr&&"BroadcastChannel"in self&&(gr=new BroadcastChannel("[Firebase] FID Change"),gr.onmessage=T=>{Ot(T.data.key,T.data.fid)}),gr}();R&&R.postMessage({key:T,fid:I}),function Lr(){0===Tr.size&&gr&&(gr.close(),gr=null)}()}(R,I)}function Ot(T,I){const R=Tr.get(T);if(R)for(const U of R)U(I)}let gr=null;const ui="firebase-installations-store";let ji=null;function gt(){return ji||(ji=(0,de.openDb)("firebase-installations-database",1,T=>{0===T.oldVersion&&T.createObjectStore(ui)})),ji}function Kr(T,I){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,P.Z)(function*(T,I){const R=rn(T),W=(yield gt()).transaction(ui,"readwrite"),re=W.objectStore(ui),Me=yield re.get(R);return yield re.put(I,R),yield W.complete,(!Me||Me.fid!==I.fid)&&Qt(T,I.fid),I})).apply(this,arguments)}function Pn(T){return _o.apply(this,arguments)}function _o(){return(_o=(0,P.Z)(function*(T){const I=rn(T),U=(yield gt()).transaction(ui,"readwrite");yield U.objectStore(ui).delete(I),yield U.complete})).apply(this,arguments)}function yt(T,I){return tt.apply(this,arguments)}function tt(){return(tt=(0,P.Z)(function*(T,I){const R=rn(T),W=(yield gt()).transaction(ui,"readwrite"),re=W.objectStore(ui),Me=yield re.get(R),Le=I(Me);return void 0===Le?yield re.delete(R):yield re.put(Le,R),yield W.complete,Le&&(!Me||Me.fid!==Le.fid)&&Qt(T,Le.fid),Le})).apply(this,arguments)}function Rt(T){return gn.apply(this,arguments)}function gn(){return(gn=(0,P.Z)(function*(T){let I;const R=yield yt(T,U=>{const W=Ir(U),re=Nt(T,W);return I=re.registrationPromise,re.installationEntry});return""===R.fid?{installationEntry:yield I}:{installationEntry:R,registrationPromise:I}})).apply(this,arguments)}function Ir(T){return Va(T||{fid:dt(),registrationStatus:0})}function Nt(T,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(xe.create("app-offline"))};const R={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},U=function nt(T,I){return ht.apply(this,arguments)}(T,R);return{installationEntry:R,registrationPromise:U}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:Ii(T)}:{installationEntry:I}}function ht(){return(ht=(0,P.Z)(function*(T,I){try{return Kr(T,yield Pe(T,I))}catch(R){throw Ne(R)&&409===R.customData.serverCode?yield Pn(T):yield Kr(T,{fid:I.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Ii(T){return ls.apply(this,arguments)}function ls(){return(ls=(0,P.Z)(function*(T){let I=yield Ft(T);for(;1===I.registrationStatus;)yield Et(100),I=yield Ft(T);if(0===I.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Rt(T);return U||R}return I})).apply(this,arguments)}function Ft(T){return yt(T,I=>{if(!I)throw xe.create("installation-not-found");return Va(I)})}function Va(T){return function Yr(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function li(T,I){return V.apply(this,arguments)}function V(){return(V=(0,P.Z)(function*({appConfig:T,platformLoggerProvider:I},R){const U=q(T,R),W=ne(T,R),re=I.getImmediate({optional:!0});re&&W.append("x-firebase-client",re.getPlatformInfoString());const Le={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:Q}})},Ye=yield K(()=>fetch(U,Le));if(Ye.ok)return _e(yield Ye.json());throw yield Ee("Generate Auth Token",Ye)})).apply(this,arguments)}function q(T,{fid:I}){return`${oe(T)}/${I}/authTokens:generate`}function G(T){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,P.Z)(function*(T,I=!1){let R;const U=yield yt(T.appConfig,re=>{if(!mn(re))throw xe.create("not-registered");const Me=re.authToken;if(!I&&Qr(Me))return re;if(1===Me.requestStatus)return R=ee(T,I),re;{if(!navigator.onLine)throw xe.create("app-offline");const Le=Zn(re);return R=sn(T,Le),Le}});return R?yield R:U.authToken})).apply(this,arguments)}function ee(T,I){return We.apply(this,arguments)}function We(){return(We=(0,P.Z)(function*(T,I){let R=yield mt(T.appConfig);for(;1===R.authToken.requestStatus;)yield Et(100),R=yield mt(T.appConfig);const U=R.authToken;return 0===U.requestStatus?G(T,I):U})).apply(this,arguments)}function mt(T){return yt(T,I=>{if(!mn(I))throw xe.create("not-registered");return function Ur(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function sn(T,I){return hn.apply(this,arguments)}function hn(){return(hn=(0,P.Z)(function*(T,I){try{const R=yield li(T,I),U=Object.assign(Object.assign({},I),{authToken:R});return yield Kr(T.appConfig,U),R}catch(R){if(!Ne(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield Kr(T.appConfig,U)}else yield Pn(T.appConfig);throw R}})).apply(this,arguments)}function mn(T){return void 0!==T&&2===T.registrationStatus}function Qr(T){return 2===T.requestStatus&&!function Mt(T){const I=Date.now();return I<T.creationTime||T.creationTime+T.expiresIn<I+36e5}(T)}function Zn(T){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:I})}function Ba(){return(Ba=(0,P.Z)(function*(T){const I=T,{installationEntry:R,registrationPromise:U}=yield Rt(I.appConfig);return U?U.catch(console.error):G(I).catch(console.error),R.fid})).apply(this,arguments)}function ja(){return(ja=(0,P.Z)(function*(T,I=!1){const R=T;return yield zn(R.appConfig),(yield G(R,I)).token})).apply(this,arguments)}function zn(T){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,P.Z)(function*(T){const{registrationPromise:I}=yield Rt(T);I&&(yield I)})).apply(this,arguments)}function Xo(T){return xe.create("missing-app-config-values",{valueName:T})}const Xr="installations",St=T=>{const I=T.getProvider("app").getImmediate(),R=function mr(T){if(!T||!T.options)throw Xo("App Configuration");if(!T.name)throw Xo("App Name");const I=["projectId","apiKey","appId"];for(const R of I)if(!T.options[R])throw Xo(R);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(I);return{app:I,appConfig:R,platformLoggerProvider:(0,me._getProvider)(I,"platform-logger"),_delete:()=>Promise.resolve()}},un=T=>{const I=T.getProvider("app").getImmediate(),R=(0,me._getProvider)(I,Xr).getImmediate();return{getId:()=>function Hu(T){return Ba.apply(this,arguments)}(R),getToken:W=>function $u(T){return ja.apply(this,arguments)}(R,W)}};(function Br(){(0,me._registerComponent)(new ge.wA(Xr,St,"PUBLIC")),(0,me._registerComponent)(new ge.wA("installations-internal",un,"PRIVATE"))})(),(0,me.registerVersion)(he,$),(0,me.registerVersion)(he,$,"esm2017");const ds="@firebase/remote-config",Dn=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ra{constructor(I,R,U,W){this.client=I,this.storage=R,this.storageCache=U,this.logger=W}isCachedDataFresh(I,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,W=U<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${W}.`),W}fetch(I){var R=this;return(0,P.Z)(function*(){const[U,W]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(W&&R.isCachedDataFresh(I.cacheMaxAgeMillis,U))return W;I.eTag=W&&W.eTag;const re=yield R.client.fetch(I),Me=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&Me.push(R.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(Me),re})()}}function Gu(T=navigator){return T.languages&&T.languages[0]||T.language}class Bn{constructor(I,R,U,W,re,Me){this.firebaseInstallations=I,this.sdkVersion=R,this.namespace=U,this.projectId=W,this.apiKey=re,this.appId=Me}fetch(I){var R=this;return(0,P.Z)(function*(){const[U,W]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Le={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},Ye={sdk_version:R.sdkVersion,app_instance_id:U,app_instance_id_token:W,app_id:R.appId,language_code:Gu()},Lt={method:"POST",headers:Le,body:JSON.stringify(Ye)},jt=fetch(Me,Lt),Rn=new Promise((Yi,ni)=>{I.signal.addEventListener(()=>{const Ea=new Error("The operation was aborted.");Ea.name="AbortError",ni(Ea)})});let ur;try{yield Promise.race([jt,Rn]),ur=yield jt}catch(Yi){let ni="fetch-client-network";throw"AbortError"===Yi.name&&(ni="fetch-timeout"),Dn.create(ni,{originalErrorMessage:Yi.message})}let kn=ur.status;const mu=ur.headers.get("ETag")||void 0;let ti,_i;if(200===ur.status){let Yi;try{Yi=yield ur.json()}catch(ni){throw Dn.create("fetch-client-parse",{originalErrorMessage:ni.message})}ti=Yi.entries,_i=Yi.state}if("INSTANCE_STATE_UNSPECIFIED"===_i?kn=500:"NO_CHANGE"===_i?kn=304:("NO_TEMPLATE"===_i||"EMPTY_CONFIG"===_i)&&(ti={}),304!==kn&&200!==kn)throw Dn.create("fetch-status",{httpStatus:kn});return{status:kn,eTag:mu,config:ti}})()}}class fs{constructor(I,R){this.client=I,this.storage=R}fetch(I){var R=this;return(0,P.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(I,U)})()}attemptFetch(I,{throttleEndTimeMillis:R,backoffCount:U}){var W=this;return(0,P.Z)(function*(){yield function Dd(T,I){return new Promise((R,U)=>{const W=Math.max(I-Date.now(),0),re=setTimeout(R,W);T.addEventListener(()=>{clearTimeout(re),U(Dn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,R);try{const re=yield W.client.fetch(I);return yield W.storage.deleteThrottleMetadata(),re}catch(re){if(!function qg(T){if(!(T instanceof te.ZR&&T.customData))return!1;const I=Number(T.customData.httpStatus);return 429===I||500===I||503===I||504===I}(re))throw re;const Me={throttleEndTimeMillis:Date.now()+(0,te.$s)(U),backoffCount:U+1};return yield W.storage.setThrottleMetadata(Me),W.attemptFetch(I,Me)}})()}}class Zg{constructor(I,R,U,W,re){this.app=I,this._client=R,this._storageCache=U,this._storage=W,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function $a(T,I){const R=T.target.error||void 0;return Dn.create(I,{originalErrorMessage:R&&R.message})}const ia="app_namespace_store";class Sd{constructor(I,R,U,W=function Wg(){return new Promise((T,I)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=U=>{I($a(U,"storage-open"))},R.onsuccess=U=>{T(U.target.result)},R.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(ia,{keyPath:"compositeKey"})}}catch(R){I(Dn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=I,this.appName=R,this.namespace=U,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var R=this;return(0,P.Z)(function*(){const U=yield R.openDbPromise;return new Promise((W,re)=>{const Le=U.transaction([ia],"readonly").objectStore(ia),Ye=R.createCompositeKey(I);try{const Lt=Le.get(Ye);Lt.onerror=jt=>{re($a(jt,"storage-get"))},Lt.onsuccess=jt=>{const Rn=jt.target.result;W(Rn?Rn.value:void 0)}}catch(Lt){re(Dn.create("storage-get",{originalErrorMessage:Lt&&Lt.message}))}})})()}set(I,R){var U=this;return(0,P.Z)(function*(){const W=yield U.openDbPromise;return new Promise((re,Me)=>{const Ye=W.transaction([ia],"readwrite").objectStore(ia),Lt=U.createCompositeKey(I);try{const jt=Ye.put({compositeKey:Lt,value:R});jt.onerror=Rn=>{Me($a(Rn,"storage-set"))},jt.onsuccess=()=>{re()}}catch(jt){Me(Dn.create("storage-set",{originalErrorMessage:jt&&jt.message}))}})})()}delete(I){var R=this;return(0,P.Z)(function*(){const U=yield R.openDbPromise;return new Promise((W,re)=>{const Le=U.transaction([ia],"readwrite").objectStore(ia),Ye=R.createCompositeKey(I);try{const Lt=Le.delete(Ye);Lt.onerror=jt=>{re($a(jt,"storage-delete"))},Lt.onsuccess=()=>{W()}}catch(Lt){re(Dn.create("storage-delete",{originalErrorMessage:Lt&&Lt.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class sa{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,P.Z)(function*(){const R=I.storage.getLastFetchStatus(),U=I.storage.getLastSuccessfulFetchTimestampMillis(),W=I.storage.getActiveConfig(),re=yield R;re&&(I.lastFetchStatus=re);const Me=yield U;Me&&(I.lastSuccessfulFetchTimestampMillis=Me);const Le=yield W;Le&&(I.activeConfig=Le)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function py(){return qa.apply(this,arguments)}function qa(){return(qa=(0,P.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Kg(){(0,me._registerComponent)(new ge.wA("remote-config",function T(I,{instanceIdentifier:R}){const U=I.getProvider("app").getImmediate(),W=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Dn.create("registration-window");if(!(0,te.hl)())throw Dn.create("indexed-db-unavailable");const{projectId:re,apiKey:Me,appId:Le}=U.options;if(!re)throw Dn.create("registration-project-id");if(!Me)throw Dn.create("registration-api-key");if(!Le)throw Dn.create("registration-app-id");const Ye=new Sd(Le,U.name,R=R||"firebase"),Lt=new sa(Ye),jt=new ie.Yd(ds);jt.logLevel=ie.in.ERROR;const Rn=new Bn(W,me.SDK_VERSION,R,re,Me,Le),ur=new fs(Rn,Ye),kn=new ra(ur,Ye,Lt,jt),mu=new Zg(U,kn,Lt,Ye,jt);return function Xt(T){const I=(0,te.m9)(T);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(mu),mu},"PUBLIC").setMultipleInstances(!0)),(0,me.registerVersion)(ds,"0.3.4"),(0,me.registerVersion)(ds,"0.3.4","esm2017")}();const Zs="/firebase-messaging-sw.js",hi="/firebase-cloud-messaging-push-scope",Co="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",aa="google.c.a.c_id",xd="google.c.a.c_l",Yg="google.c.a.ts",Hi="google.c.a.e";var ms=(()=>{return(T=ms||(ms={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",ms;var T})();function fi(T){const I=new Uint8Array(T);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Rd(T){const R=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),W=new Uint8Array(U.length);for(let re=0;re<U.length;++re)W[re]=U.charCodeAt(re);return W}const Dr="fcm_token_details_db",Nd="fcm_token_object_Store";function Pd(T){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,P.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Dr))return null;let I=null;return(yield(0,de.openDb)(Dr,5,function(){var U=(0,P.Z)(function*(W){var re;if(W.oldVersion<2||!W.objectStoreNames.contains(Nd))return;const Me=W.transaction.objectStore(Nd),Le=yield Me.index("fcmSenderId").get(T);if(yield Me.clear(),Le)if(2===W.oldVersion){const Ye=Le;if(!Ye.auth||!Ye.p256dh||!Ye.endpoint)return;I={token:Ye.fcmToken,createTime:null!==(re=Ye.createTime)&&void 0!==re?re:Date.now(),subscriptionOptions:{auth:Ye.auth,p256dh:Ye.p256dh,endpoint:Ye.endpoint,swScope:Ye.swScope,vapidKey:"string"==typeof Ye.vapidKey?Ye.vapidKey:fi(Ye.vapidKey)}}}else if(3===W.oldVersion){const Ye=Le;I={token:Ye.fcmToken,createTime:Ye.createTime,subscriptionOptions:{auth:fi(Ye.auth),p256dh:fi(Ye.p256dh),endpoint:Ye.endpoint,swScope:Ye.swScope,vapidKey:fi(Ye.vapidKey)}}}else if(4===W.oldVersion){const Ye=Le;I={token:Ye.fcmToken,createTime:Ye.createTime,subscriptionOptions:{auth:fi(Ye.auth),p256dh:fi(Ye.p256dh),endpoint:Ye.endpoint,swScope:Ye.swScope,vapidKey:fi(Ye.vapidKey)}}}});return function(W){return U.apply(this,arguments)}}())).close(),yield(0,de.deleteDb)(Dr),yield(0,de.deleteDb)("fcm_vapid_details_db"),yield(0,de.deleteDb)("undefined"),zu(I)?I:null}),Zu.apply(this,arguments)}function zu(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:I}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const _s="firebase-messaging-store";let Jl=null;function on(){return Jl||(Jl=(0,de.openDb)("firebase-messaging-database",1,T=>{0===T.oldVersion&&T.createObjectStore(_s)})),Jl}function Ga(T){return zs.apply(this,arguments)}function zs(){return(zs=(0,P.Z)(function*(T){const I=ir(T),U=yield(yield on()).transaction(_s).objectStore(_s).get(I);if(U)return U;{const W=yield Pd(T.appConfig.senderId);if(W)return yield en(T,W),W}})).apply(this,arguments)}function en(T,I){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,P.Z)(function*(T,I){const R=ir(T),W=(yield on()).transaction(_s,"readwrite");return yield W.objectStore(_s).put(I,R),yield W.complete,I})).apply(this,arguments)}function Za(T){return To.apply(this,arguments)}function To(){return(To=(0,P.Z)(function*(T){const I=ir(T),U=(yield on()).transaction(_s,"readwrite");yield U.objectStore(_s).delete(I),yield U.complete})).apply(this,arguments)}function ir({appConfig:T}){return T.appId}const An=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ys(T,I){return sr.apply(this,arguments)}function sr(){return(sr=(0,P.Z)(function*(T,I){const R=yield Ks(T),U=za(I),W={method:"POST",headers:R,body:JSON.stringify(U)};let re;try{re=yield(yield fetch(Ws(T.appConfig),W)).json()}catch(Me){throw An.create("token-subscribe-failed",{errorInfo:Me})}if(re.error)throw An.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw An.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function ua(T,I){return $i.apply(this,arguments)}function $i(){return($i=(0,P.Z)(function*(T,I){const R=yield Ks(T),U=za(I.subscriptionOptions),W={method:"PATCH",headers:R,body:JSON.stringify(U)};let re;try{re=yield(yield fetch(`${Ws(T.appConfig)}/${I.token}`,W)).json()}catch(Me){throw An.create("token-update-failed",{errorInfo:Me})}if(re.error)throw An.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw An.create("token-update-no-token");return re.token})).apply(this,arguments)}function Xl(T,I){return ei.apply(this,arguments)}function ei(){return(ei=(0,P.Z)(function*(T,I){const U={method:"DELETE",headers:yield Ks(T)};try{const re=yield(yield fetch(`${Ws(T.appConfig)}/${I}`,U)).json();if(re.error)throw An.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(W){throw An.create("token-unsubscribe-failed",{errorInfo:W})}})).apply(this,arguments)}function Ws({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Ks(T){return ft.apply(this,arguments)}function ft(){return(ft=(0,P.Z)(function*({appConfig:T,installations:I}){const R=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function za({p256dh:T,auth:I,endpoint:R,vapidKey:U}){const W={web:{endpoint:R,auth:I,p256dh:T}};return U!==Co&&(W.web.applicationPubKey=U),W}const Wa=6048e5;function Od(T){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,P.Z)(function*(T){const I=yield wn(T.swRegistration,T.vapidKey),R={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:I.endpoint,auth:fi(I.getKey("auth")),p256dh:fi(I.getKey("p256dh"))},U=yield Ga(T.firebaseDependencies);if(U){if(Ja(U.subscriptionOptions,R))return Date.now()>=U.createTime+Wa?Df(T,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield Xl(T.firebaseDependencies,U.token)}catch(W){console.warn(W)}return Pt(T.firebaseDependencies,R)}return Pt(T.firebaseDependencies,R)})).apply(this,arguments)}function ec(T){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,P.Z)(function*(T){const I=yield Ga(T.firebaseDependencies);I&&(yield Xl(T.firebaseDependencies,I.token),yield Za(T.firebaseDependencies));const R=yield T.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Df(T,I){return Te.apply(this,arguments)}function Te(){return(Te=(0,P.Z)(function*(T,I){try{const R=yield ua(T.firebaseDependencies,I),U=Object.assign(Object.assign({},I),{token:R,createTime:Date.now()});return yield en(T.firebaseDependencies,U),R}catch(R){throw yield ec(T),R}})).apply(this,arguments)}function Pt(T,I){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,P.Z)(function*(T,I){const U={token:yield ys(T,I),createTime:Date.now(),subscriptionOptions:I};return yield en(T,U),U.token})).apply(this,arguments)}function wn(T,I){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,P.Z)(function*(T,I){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Rd(I)})})).apply(this,arguments)}function Ja(T,I){return I.vapidKey===T.vapidKey&&I.endpoint===T.endpoint&&I.auth===T.auth&&I.p256dh===T.p256dh}function jr(T){const I={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function tc(T,I){if(!I.notification)return;T.notification={};const R=I.notification.title;R&&(T.notification.title=R);const U=I.notification.body;U&&(T.notification.body=U);const W=I.notification.image;W&&(T.notification.image=W)}(I,T),function nc(T,I){!I.data||(T.data=I.data)}(I,T),function kd(T,I){if(!I.fcmOptions)return;T.fcmOptions={};const R=I.fcmOptions.link;R&&(T.fcmOptions.link=R);const U=I.fcmOptions.analytics_label;U&&(T.fcmOptions.analyticsLabel=U)}(I,T),I}function Fd(T){return"object"==typeof T&&!!T&&aa in T}function Xa(T,I){const R=[];for(let U=0;U<T.length;U++)R.push(T.charAt(U)),U<I.length&&R.push(I.charAt(U));return R.join("")}function Kn(T){return An.create("missing-app-config-values",{valueName:T})}Xa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ai{constructor(I,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function la(T){if(!T||!T.options)throw Kn("App Configuration Object");if(!T.name)throw Kn("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:R}=T;for(const U of I)if(!R[U])throw Kn(U);return{appName:T.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:W,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function rc(T){return qi.apply(this,arguments)}function qi(){return(qi=(0,P.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Zs,{scope:hi}),T.swRegistration.update().catch(()=>{})}catch(I){throw An.create("failed-service-worker-registration",{browserErrorMessage:I.message})}})).apply(this,arguments)}function vs(T,I){return eu.apply(this,arguments)}function eu(){return(eu=(0,P.Z)(function*(T,I){if(!I&&!T.swRegistration&&(yield rc(T)),I||!T.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw An.create("invalid-sw-registration");T.swRegistration=I}})).apply(this,arguments)}function Ld(T,I){return tu.apply(this,arguments)}function tu(){return(tu=(0,P.Z)(function*(T,I){I?T.vapidKey=I:T.vapidKey||(T.vapidKey=Co)})).apply(this,arguments)}function Io(){return(Io=(0,P.Z)(function*(T,I){if(!navigator)throw An.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw An.create("permission-blocked");return yield Ld(T,null==I?void 0:I.vapidKey),yield vs(T,null==I?void 0:I.serviceWorkerRegistration),Od(T)})).apply(this,arguments)}function Qu(T,I,R){return nu.apply(this,arguments)}function nu(){return(nu=(0,P.Z)(function*(T,I,R){const U=ic(I);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[aa],message_name:R[xd],message_time:R[Yg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ic(T){switch(T){case ms.NOTIFICATION_CLICKED:return"notification_open";case ms.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ju(){return(Ju=(0,P.Z)(function*(T,I){const R=I.data;if(!R.isFirebaseMessaging)return;T.onMessageHandler&&R.messageType===ms.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(jr(R)):T.onMessageHandler.next(jr(R)));const U=R.data;Fd(U)&&"1"===U[Hi]&&(yield Qu(T,R.messageType,U))})).apply(this,arguments)}const Do="@firebase/messaging",Ao=T=>{const I=new Ai(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Qg(T,I){return Ju.apply(this,arguments)}(I,R)),I},Vd=T=>{const I=T.getProvider("messaging").getImmediate();return{getToken:U=>function Ud(T,I){return Io.apply(this,arguments)}(I,U)}};function ca(){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,P.Z)(function*(){try{yield(0,te.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Af(){(0,me._registerComponent)(new ge.wA("messaging",Ao,"PUBLIC")),(0,me._registerComponent)(new ge.wA("messaging-internal",Vd,"PRIVATE")),(0,me.registerVersion)(Do,"0.9.8"),(0,me.registerVersion)(Do,"0.9.8","esm2017")}();const Bd="analytics",oc="firebase_id",ac="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xu="https://www.googletagmanager.com/gtag/js",ar=new ie.Yd("@firebase/analytics");function Mf(T){return Promise.all(T.map(I=>I.catch(R=>R)))}function bs(T,I){const R=document.createElement("script");R.src=`${Xu}?l=${T}&id=${I}`,R.async=!0,document.head.appendChild(R)}function Jg(T,I,R,U,W,re){return iu.apply(this,arguments)}function iu(){return(iu=(0,P.Z)(function*(T,I,R,U,W,re){const Me=U[W];try{if(Me)yield I[Me];else{const Ye=(yield Mf(R)).find(Lt=>Lt.measurementId===W);Ye&&(yield I[Ye.appId])}}catch(Le){ar.error(Le)}T("config",W,re)})).apply(this,arguments)}function su(T,I,R,U,W){return el.apply(this,arguments)}function el(){return(el=(0,P.Z)(function*(T,I,R,U,W){try{let re=[];if(W&&W.send_to){let Me=W.send_to;Array.isArray(Me)||(Me=[Me]);const Le=yield Mf(R);for(const Ye of Me){const Lt=Le.find(Rn=>Rn.measurementId===Ye),jt=Lt&&I[Lt.appId];if(!jt){re=[];break}re.push(jt)}}0===re.length&&(re=Object.values(I)),yield Promise.all(re),T("event",U,W||{})}catch(re){ar.error(re)}})).apply(this,arguments)}function X(){const T=window.document.getElementsByTagName("script");for(const I of Object.values(T))if(I.src&&I.src.includes(Xu))return I;return null}const Dt=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),gi=new class Hr{constructor(I={},R=1e3){this.throttleMetadata=I,this.intervalMillis=R}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,R){this.throttleMetadata[I]=R}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function Cs(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function ze(T){return uc.apply(this,arguments)}function uc(){return(uc=(0,P.Z)(function*(T){var I;const{appId:R,apiKey:U}=T,W={method:"GET",headers:Cs(U)},re=ac.replace("{app-id}",R),Me=yield fetch(re,W);if(200!==Me.status&&304!==Me.status){let Le="";try{const Ye=yield Me.json();(null===(I=Ye.error)||void 0===I?void 0:I.message)&&(Le=Ye.error.message)}catch(Ye){}throw Dt.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:Le})}return Me.json()})).apply(this,arguments)}function _r(T){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,P.Z)(function*(T,I=gi,R){const{appId:U,apiKey:W,measurementId:re}=T.options;if(!U)throw Dt.create("no-app-id");if(!W){if(re)return{measurementId:re,appId:U};throw Dt.create("no-api-key")}const Me=I.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Le=new uu;return setTimeout((0,P.Z)(function*(){Le.abort()}),void 0!==R?R:6e4),Ts({appId:U,apiKey:W,measurementId:re},Me,Le,I)})).apply(this,arguments)}function Ts(T,I,R){return wt.apply(this,arguments)}function wt(){return(wt=(0,P.Z)(function*(T,{throttleEndTimeMillis:I,backoffCount:R},U,W=gi){const{appId:re,measurementId:Me}=T;try{yield ou(U,I)}catch(Le){if(Me)return ar.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:re,measurementId:Me};throw Le}try{const Le=yield ze(T);return W.deleteThrottleMetadata(re),Le}catch(Le){if(!au(Le)){if(W.deleteThrottleMetadata(re),Me)return ar.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Le.message}]`),{appId:re,measurementId:Me};throw Le}const Ye=503===Number(Le.customData.httpStatus)?(0,te.$s)(R,W.intervalMillis,30):(0,te.$s)(R,W.intervalMillis),Lt={throttleEndTimeMillis:Date.now()+Ye,backoffCount:R+1};return W.setThrottleMetadata(re,Lt),ar.debug(`Calling attemptFetch again in ${Ye} millis`),Ts(T,Lt,U,W)}})).apply(this,arguments)}function ou(T,I){return new Promise((R,U)=>{const W=Math.max(I-Date.now(),0),re=setTimeout(R,W);T.addEventListener(()=>{clearTimeout(re),U(Dt.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function au(T){if(!(T instanceof te.ZR&&T.customData))return!1;const I=Number(T.customData.httpStatus);return 429===I||500===I||503===I||504===I}class uu{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}function tl(){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,P.Z)(function*(){if(!(0,te.hl)())return ar.warn(Dt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(T){return ar.warn(Dt.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function Js(){return(Js=(0,P.Z)(function*(T,I,R,U,W,re,Me){var Le;const Ye=_r(T);Ye.then(kn=>{R[kn.measurementId]=kn.appId,T.options.measurementId&&kn.measurementId!==T.options.measurementId&&ar.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(kn=>ar.error(kn)),I.push(Ye);const Lt=tl().then(kn=>{if(kn)return U.getId()}),[jt,Rn]=yield Promise.all([Ye,Lt]);X()||bs(re,jt.measurementId),W("js",new Date);const ur=null!==(Le=null==Me?void 0:Me.config)&&void 0!==Le?Le:{};return ur.origin="firebase",ur.update=!0,null!=Rn&&(ur[oc]=Rn),W("config",jt.measurementId,ur),jt.measurementId})).apply(this,arguments)}class nl{constructor(I){this.app=I}_delete(){return delete Gt[this.app.options.appId],Promise.resolve()}}let Gt={},ha=[];const xn={};let rl,fa,mi="dataLayer",il=!1;function lc(T,I,R){!function Si(){const T=[];if((0,te.ru)()&&T.push("This is a browser extension environment."),(0,te.zI)()||T.push("Cookies are not available."),T.length>0){const I=T.map((U,W)=>`(${W+1}) ${U}`).join(" "),R=Dt.create("invalid-analytics-context",{errorInfo:I});ar.warn(R.message)}}();const U=T.options.appId;if(!U)throw Dt.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Dt.create("no-api-key");ar.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gt[U])throw Dt.create("already-exists",{id:U});if(!il){!function da(T){let I=[];Array.isArray(window[T])?I=window[T]:window[T]=I}(mi);const{wrappedGtag:re,gtagCore:Me}=function Xg(T,I,R,U,W){let re=function(...Me){window[U].push(arguments)};return window[W]&&"function"==typeof window[W]&&(re=window[W]),window[W]=function Rf(T,I,R,U){function re(){return(re=(0,P.Z)(function*(Me,Le,Ye){try{"event"===Me?yield su(T,I,R,Le,Ye):"config"===Me?yield Jg(T,I,R,U,Le,Ye):T("set",Le)}catch(Lt){ar.error(Lt)}})).apply(this,arguments)}return function W(Me,Le,Ye){return re.apply(this,arguments)}}(re,T,I,R),{gtagCore:re,wrappedGtag:window[W]}}(Gt,ha,xn,mi,"gtag");fa=re,rl=Me,il=!0}return Gt[U]=function So(T,I,R,U,W,re,Me){return Js.apply(this,arguments)}(T,ha,xn,I,rl,mi,R),new nl(T)}function du(){return(du=(0,P.Z)(function*(T,I,R,U,W){if(W&&W.global)T("event",R,U);else{const re=yield I;T("event",R,Object.assign(Object.assign({},U),{send_to:re}))}})).apply(this,arguments)}function Hd(){return dc.apply(this,arguments)}function dc(){return(dc=(0,P.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(T){return!1}})).apply(this,arguments)}const $d="@firebase/analytics";!function qd(){(0,me._registerComponent)(new ge.wA(Bd,(I,{options:R})=>lc(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,me._registerComponent)(new ge.wA("analytics-internal",function T(I){try{const R=I.getProvider(Bd).getImmediate();return{logEvent:(U,W,re)=>function Of(T,I,R,U){T=(0,te.m9)(T),function cu(T,I,R,U,W){return du.apply(this,arguments)}(fa,Gt[T.app.options.appId],I,R,U).catch(W=>ar.error(W))}(R,U,W,re)}}catch(R){throw Dt.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,me.registerVersion)($d,"0.7.5"),(0,me.registerVersion)($d,"0.7.5","esm2017")}();var Is=O(4408),Mn=O(7565);const Ds=new class hc extends Mn.v{}(class Gd extends Is.o{constructor(I,R){super(I,R),this.scheduler=I,this.work=R}schedule(I,R=0){return R>0?super.schedule(I,R):(this.delay=R,this.state=I,this.scheduler.flush(this),this)}execute(I,R){return R>0||this.closed?super.execute(I,R):this._execute(I,R)}requestAsyncId(I,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(I,R,U):I.flush(this)}});var fc=O(4986),Sr=O(8505),tn=O(5363),ga=O(9468);const ma=new a.GfV("7.2.1"),xr="__angularfire_symbol__analyticsIsSupportedValue",Ki="__angularfire_symbol__analyticsIsSupported",fu="__angularfire_symbol__remoteConfigIsSupportedValue",_a="__angularfire_symbol__remoteConfigIsSupported",pu="__angularfire_symbol__messagingIsSupportedValue",ol="__angularfire_symbol__messagingIsSupported";function pc(T,I,R){if(I){if(1===I.length)return I[0];const re=I.filter(Me=>Me.app===R);if(1===re.length)return re[0]}return R.container.getProvider(T).getImmediate({optional:!0})}globalThis[Ki]||(globalThis[Ki]=Hd().then(T=>globalThis[xr]=T).catch(()=>globalThis[xr]=!1)),globalThis[ol]||(globalThis[ol]=ca().then(T=>globalThis[pu]=T).catch(()=>globalThis[pu]=!1)),globalThis[_a]||(globalThis[_a]=py().then(T=>globalThis[fu]=T).catch(()=>globalThis[fu]=!1));const Zd=(T,I)=>{const R=I?[I]:(0,J.C6)(),U=[];return R.forEach(W=>{W.container.getProvider(T).instances.forEach(Me=>{U.includes(Me)||U.push(Me)})}),U};function As(){}class gc{constructor(I,R=Ds){this.zone=I,this.delegate=R}now(){return this.delegate.now()}schedule(I,R,U){const W=this.zone;return this.delegate.schedule(function(Me){W.runGuarded(()=>{I.apply(this,[Me])})},R,U)}}class gu{constructor(I){this.zone=I,this.task=null}call(I,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",As,{},As,As)),R.pipe((0,Sr.b)({next:U,complete:U,error:U})).subscribe(I).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ul=(()=>{class T{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new gc(Zone.current)),this.insideAngular=R.run(()=>new gc(Zone.current,fc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(R){return new(R||T)(a.LFG(a.R0b))},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Ro(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function va(T){return T.pipe((0,tn.Q)(Ro().outsideAngular))}function _n(T){return Ro(),function to(T){return function(R){return(R=R.lift(new gu(T.ngZone))).pipe((0,ga.R)(T.outsideAngular),(0,tn.Q)(T.insideAngular))}}(Ro())(T)}},2090:(ot,Ae,O)=>{"use strict";O.d(Ae,{BH:()=>je,LL:()=>fe,ZR:()=>Pe,zI:()=>se,US:()=>ge,tV:()=>he,$s:()=>Ft,r3:()=>Vi,Sg:()=>De,ne:()=>ji,vZ:()=>gr,ZB:()=>B,pd:()=>Hs,m9:()=>li,z$:()=>Re,jU:()=>le,ru:()=>xe,d:()=>oe,xb:()=>Ot,w1:()=>_e,hl:()=>ne,uI:()=>Ue,UG:()=>z,b$:()=>Ne,G6:()=>He,Mn:()=>Ee,xO:()=>Lr,zd:()=>Bi,eu:()=>K});const me=function(V){const q=[];let G=0;for(let Ce=0;Ce<V.length;Ce++){let ee=V.charCodeAt(Ce);ee<128?q[G++]=ee:ee<2048?(q[G++]=ee>>6|192,q[G++]=63&ee|128):55296==(64512&ee)&&Ce+1<V.length&&56320==(64512&V.charCodeAt(Ce+1))?(ee=65536+((1023&ee)<<10)+(1023&V.charCodeAt(++Ce)),q[G++]=ee>>18|240,q[G++]=ee>>12&63|128,q[G++]=ee>>6&63|128,q[G++]=63&ee|128):(q[G++]=ee>>12|224,q[G++]=ee>>6&63|128,q[G++]=63&ee|128)}return q},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,q){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let ee=0;ee<V.length;ee+=3){const We=V[ee],mt=ee+1<V.length,sn=mt?V[ee+1]:0,hn=ee+2<V.length,mn=hn?V[ee+2]:0;let Zn=(15&sn)<<2|mn>>6,Ur=63&mn;hn||(Ur=64,mt||(Zn=64)),Ce.push(G[We>>2],G[(3&We)<<4|sn>>4],G[Zn],G[Ur])}return Ce.join("")},encodeString(V,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(V):this.encodeByteArray(me(V),q)},decodeString(V,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(V):function(V){const q=[];let G=0,Ce=0;for(;G<V.length;){const ee=V[G++];if(ee<128)q[Ce++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const We=V[G++];q[Ce++]=String.fromCharCode((31&ee)<<6|63&We)}else if(ee>239&&ee<365){const hn=((7&ee)<<18|(63&V[G++])<<12|(63&V[G++])<<6|63&V[G++])-65536;q[Ce++]=String.fromCharCode(55296+(hn>>10)),q[Ce++]=String.fromCharCode(56320+(1023&hn))}else{const We=V[G++],mt=V[G++];q[Ce++]=String.fromCharCode((15&ee)<<12|(63&We)<<6|63&mt)}}return q.join("")}(this.decodeStringToByteArray(V,q))},decodeStringToByteArray(V,q){this.init_();const G=q?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let ee=0;ee<V.length;){const We=G[V.charAt(ee++)],sn=ee<V.length?G[V.charAt(ee)]:0;++ee;const mn=ee<V.length?G[V.charAt(ee)]:64;++ee;const Mt=ee<V.length?G[V.charAt(ee)]:64;if(++ee,null==We||null==sn||null==mn||null==Mt)throw Error();Ce.push(We<<2|sn>>4),64!==mn&&(Ce.push(sn<<4&240|mn>>2),64!==Mt&&Ce.push(mn<<6&192|Mt))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}},de=function(V){return function(V){const q=me(V);return ge.encodeByteArray(q,!0)}(V).replace(/\./g,"")},he=function(V){try{return ge.decodeString(V,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function B(V,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return q}for(const G in q)!q.hasOwnProperty(G)||!Q(G)||(V[G]=B(V[G],q[G]));return V}function Q(V){return"__proto__"!==V}class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,G)=>{this.resolve=q,this.reject=G})}wrapCallback(q){return(G,Ce)=>{G?this.reject(G):this.resolve(Ce),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(G):q(G,Ce))}}}function De(V,q){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=q||"demo-project",ee=V.iat||0,We=V.sub||V.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:ee,exp:ee+3600,auth_time:ee,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},V);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(mt)),""].join(".")}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function z(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(V){return!1}}function le(){return"object"==typeof self&&self.self===self}function xe(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Ne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function oe(){return Re().indexOf("Electron/")>=0}function _e(){const V=Re();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Ee(){return Re().indexOf("MSAppHost/")>=0}function He(){return!z()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ne(){return"object"==typeof indexedDB}function K(){return new Promise((V,q)=>{try{let G=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(Ce);ee.onsuccess=()=>{ee.result.close(),G||self.indexedDB.deleteDatabase(Ce),V(!0)},ee.onupgradeneeded=()=>{G=!1},ee.onerror=()=>{var We;q((null===(We=ee.error)||void 0===We?void 0:We.message)||"")}}catch(G){q(G)}})}function se(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Pe extends Error{constructor(q,G,Ce){super(G),this.code=q,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,Pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fe.prototype.create)}}class fe{constructor(q,G,Ce){this.service=q,this.serviceName=G,this.errors=Ce}create(q,...G){const Ce=G[0]||{},ee=`${this.service}/${q}`,We=this.errors[q],mt=We?function Et(V,q){return V.replace($t,(G,Ce)=>{const ee=q[Ce];return null!=ee?String(ee):`<${Ce}?>`})}(We,Ce):"Error";return new Pe(ee,`${this.serviceName}: ${mt} (${ee}).`,Ce)}}const $t=/\{\$([^}]+)}/g;function Vi(V,q){return Object.prototype.hasOwnProperty.call(V,q)}function Ot(V){for(const q in V)if(Object.prototype.hasOwnProperty.call(V,q))return!1;return!0}function gr(V,q){if(V===q)return!0;const G=Object.keys(V),Ce=Object.keys(q);for(const ee of G){if(!Ce.includes(ee))return!1;const We=V[ee],mt=q[ee];if(js(We)&&js(mt)){if(!gr(We,mt))return!1}else if(We!==mt)return!1}for(const ee of Ce)if(!G.includes(ee))return!1;return!0}function js(V){return null!==V&&"object"==typeof V}function Lr(V){const q=[];for(const[G,Ce]of Object.entries(V))Array.isArray(Ce)?Ce.forEach(ee=>{q.push(encodeURIComponent(G)+"="+encodeURIComponent(ee))}):q.push(encodeURIComponent(G)+"="+encodeURIComponent(Ce));return q.length?"&"+q.join("&"):""}function Bi(V){const q={};return V.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[ee,We]=Ce.split("=");q[decodeURIComponent(ee)]=decodeURIComponent(We)}}),q}function Hs(V){const q=V.indexOf("?");if(!q)return"";const G=V.indexOf("#",q);return V.substring(q,G>0?G:void 0)}function ji(V,q){const G=new gt(V,q);return G.subscribe.bind(G)}class gt{constructor(q,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{q(this)}).catch(Ce=>{this.error(Ce)})}next(q){this.forEachObserver(G=>{G.next(q)})}error(q){this.forEachObserver(G=>{G.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,G,Ce){let ee;if(void 0===q&&void 0===G&&void 0===Ce)throw new Error("Missing Observer.");ee=function Gn(V,q){if("object"!=typeof V||null===V)return!1;for(const G of q)if(G in V&&"function"==typeof V[G])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:G,complete:Ce},void 0===ee.next&&(ee.next=Pn),void 0===ee.error&&(ee.error=Pn),void 0===ee.complete&&(ee.complete=Pn);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch(mt){}}),this.observers.push(ee),We}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,q)}sendOne(q,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{G(this.observers[q])}catch(Ce){"undefined"!=typeof console&&console.error&&console.error(Ce)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pn(){}function Ft(V,q=1e3,G=2){const Ce=q*Math.pow(G,V),ee=Math.round(.5*Ce*(Math.random()-.5)*2);return Math.min(144e5,Ce+ee)}function li(V){return V&&V._delegate?V._delegate:V}},8035:(ot,Ae,O)=>{"use strict";var a=O(5e3);let J=null;function P(){return J}const ie=new a.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return function he(){return(0,a.LFG)(B)}()},providedIn:"platform"}),n})();const $=new a.OlP("Location Initialized");let B=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie))},n.\u0275prov=a.Yz7({token:n,factory:function(){return function je(){return new B((0,a.LFG)(ie))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function De(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let z=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:function(){return function le(n){const e=(0,a.LFG)(ie).location;return new Ne((0,a.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const xe=new a.OlP("appBaseHref");let Ne=(()=>{class n extends z{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return De(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,l){const d=this.prepareExternalUrl(i+Ue(l));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,l){const d=this.prepareExternalUrl(i+Ue(l));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(de),a.LFG(xe,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),oe=(()=>{class n extends z{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=De(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,l){let d=this.prepareExternalUrl(i+Ue(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,l){let d=this.prepareExternalUrl(i+Ue(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(de),a.LFG(xe,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(He(i)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,He(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=De,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(a.LFG(z),a.LFG(de))},n.\u0275prov=a.Yz7({token:n,factory:function(){return function Ee(){return new _e((0,a.LFG)(z),(0,a.LFG)(de))}()},providedIn:"root"}),n})();function He(n){return n.replace(/\/index.html$/,"")}var se=(()=>((se=se||{})[se.Zero=0]="Zero",se[se.One=1]="One",se[se.Two=2]="Two",se[se.Few=3]="Few",se[se.Many=4]="Many",se[se.Other=5]="Other",se))();const Hs=a.kL8;class qt{}let Dn=(()=>{class n extends qt{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Hs(r||this.locale)(t)){case se.Zero:return"zero";case se.One:return"one";case se.Two:return"two";case se.Few:return"few";case se.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.soG))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function wo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(l)}return null}class na{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,l,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new na(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===l?void 0:l);else if(null!==l){const p=r.get(l);r.move(p,d),qs(p,i)}});for(let i=0,l=r.length;i<l;i++){const p=r.get(i).context;p.index=i,p.count=l,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{qs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function qs(n,e){n.context.$implicit=e.item}let fn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Xt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Td("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Td("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.s_b),a.Y36(a.Rgc))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Xt{constructor(){this.$implicit=null,this.ngIf=null}}function Td(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,a.AaK)(e)}'.`)}let ra=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const r=this._viewContainerRef;this._viewRef&&r.remove(r.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?r.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.s_b))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[a.TTD]}),n})();class Dd{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class qg{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const fs=new qg,Gg=new Dd;let ps=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,a.QGY)(t))return fs;if((0,a.F4k)(t))return Gg;throw function Bn(n,e){return new a.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.sBO,16))},n.\u0275pipe=a.Yjl({name:"async",type:n,pure:!1}),n})(),Hi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[{provide:qt,useClass:Dn}]}),n})();function Ar(n){return"server"===n}let zu=(()=>{class n{}return n.\u0275prov=(0,a.Yz7)({token:n,providedIn:"root",factory:()=>new Wu((0,a.LFG)(ie),window)}),n})();class Wu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function _s(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const l=i.shadowRoot;if(l){const d=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],i-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ql(this.window.history)||Ql(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ql(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class on{}class zs extends class Ga extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function te(n){J||(J=n)}(new zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ku(){return en=en||document.querySelector("base"),en?en.getAttribute("href"):null}();return null==t?null:function To(n){Za=Za||document.createElement("a"),Za.setAttribute("href",n);const e=Za.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){en=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return wo(document.cookie,e)}}let Za,en=null;const ir=new a.OlP("TRANSITION_ID"),An=[{provide:a.ip1,useFactory:function Yu(n,e,t){return()=>{t.get(a.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<i.length;l++)r.remove(i[l])})}},deps:[ir,ie,a.zs3],multi:!0}];class ys{static init(){(0,a.VLi)(new ys)}addToWindow(e){a.dqk.getAngularTestability=(r,i=!0)=>{const l=e.findTestabilityInTree(r,i);if(null==l)throw new Error("Could not find testability for element.");return l},a.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(r=>{const i=a.dqk.getAllAngularTestabilities();let l=i.length,d=!1;const p=function(_){d=d||_,l--,0==l&&r(d)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let sr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const ua=new a.OlP("EventManagerPlugins");let $i=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let l=0;l<i.length;l++){const d=i[l];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ua),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Xl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ei=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Ws=(()=>{class n extends ei{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,i.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ks),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ks))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function Ks(n){P().remove(n)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},za=/%COMP%/g;function Te(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Te(n,i,t):(i=i.replace(za,n),t.push(i))}return t}function Pt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let wn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ys(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case a.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new tc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case a.ifc.ShadowDom:return new nc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Te(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(a.LFG($i),a.LFG(Ws),a.LFG(a.AFp))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Ys{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const l=ft[i];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ft[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(a.JOm.DashCase|a.JOm.Important)?e.style.setProperty(t,r,i&a.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&a.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Pt(r)):this.eventManager.addEventListener(e,t,Pt(r))}}class tc extends Ys{constructor(e,t,r,i){super(e),this.component=r;const l=Te(i+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function Ya(n){return"_ngcontent-%COMP%".replace(za,n)}(i+"-"+r.id),this.hostAttr=function Df(n){return"_nghost-%COMP%".replace(za,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class nc extends Ys{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Te(i.id,i.styles,[]);for(let d=0;d<l.length;d++){const p=document.createElement("style");p.textContent=l[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let kd=(()=>{class n extends Xl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Fd=["alt","control","meta","shift"],la={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ai={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let rc=(()=>{class n extends Xl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,l.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=n._normalizeKey(r.pop());let d="";if(Fd.forEach(_=>{const b=r.indexOf(_);b>-1&&(r.splice(b,1),d+=_+".")}),d+=l,0!=r.length||0===l.length)return null;const p={};return p.domEventName=i,p.fullKey=d,p}static getEventFullKey(t){let r="",i=function qi(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Kn.hasOwnProperty(e)&&(e=Kn[e]))}return la[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Fd.forEach(l=>{l!=i&&Ai[l](t)&&(r+=l+".")}),r+=i,r}static eventCallback(t,r,i){return l=>{n.getEventFullKey(l)===t&&i.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Ud=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:"browser"},{provide:a.g9A,useValue:function vs(){zs.makeCurrent(),ys.init()},multi:!0},{provide:ie,useFactory:function Ld(){return(0,a.RDi)(document),document},deps:[]}]),Io=[{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function eu(){return new a.qLn},deps:[]},{provide:ua,useClass:kd,multi:!0,deps:[ie,a.R0b,a.Lbi]},{provide:ua,useClass:rc,multi:!0,deps:[ie]},{provide:wn,useClass:wn,deps:[$i,Ws,a.AFp]},{provide:a.FYo,useExisting:wn},{provide:ei,useExisting:Ws},{provide:Ws,useClass:Ws,deps:[ie]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:$i,useClass:$i,deps:[ua,a.R0b]},{provide:on,useClass:sr,deps:[]}];let Qu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:a.AFp,useValue:t.appId},{provide:ir,useExisting:a.AFp},An]}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(n,12))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:Io,imports:[Hi,a.hGG]}),n})();"undefined"!=typeof window&&window;var X=O(5861),Qs=O(7669),Dt=O(8996);function Qe(...n){const e=(0,Qs.yG)(n);return(0,Dt.D)(n,e)}var Ke,pi=O(5698),Hr=O(9681),gi=O(4859),Cs=O(1877),ze=O(2090),uc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_r={},Ts=Ts||{},wt=uc||self;function ou(){}function au(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function uu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Zi="closure_uid_"+(1e9*Math.random()>>>0),So=0;function Js(n,e,t){return n.call.apply(n.bind,arguments)}function nl(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Gt(n,e,t){return(Gt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Js:nl).apply(null,arguments)}function ha(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function xn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,l){for(var d=Array(arguments.length-2),p=2;p<arguments.length;p++)d[p-2]=arguments[p];return e.prototype[i].apply(r,d)}}function mi(){this.s=this.s,this.o=this.o}var rl={};mi.prototype.s=!1,mi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function tl(n){return Object.prototype.hasOwnProperty.call(n,Zi)&&n[Zi]||(n[Zi]=++So)}(this);delete rl[n]}},mi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fa=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},il=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in i&&e.call(t,i[l],l,n)};function Si(n){return Array.prototype.concat.apply([],arguments)}function lc(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function cu(n){return/^[\s\xa0]*$/.test(n)}var Yn,du=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function En(n,e){return-1!=n.indexOf(e)}function pa(n,e){return n<e?-1:n>e?1:0}e:{var xo=wt.navigator;if(xo){var Mo=xo.userAgent;if(Mo){Yn=Mo;break e}}Yn=""}function zi(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Wi(n){const e={};for(const t in n)e[t]=n[t];return e}var hu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cc(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let l=0;l<hu.length;l++)t=hu[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Xs(n){return Xs[" "](n),n}Xs[" "]=ou;var sl,n,dc=En(Yn,"Opera"),ln=En(Yn,"Trident")||En(Yn,"MSIE"),Nf=En(Yn,"Edge"),Pf=Nf||ln,em=En(Yn,"Gecko")&&!(En(Yn.toLowerCase(),"webkit")&&!En(Yn,"Edge"))&&!(En(Yn,"Trident")||En(Yn,"MSIE"))&&!En(Yn,"Edge"),Of=En(Yn.toLowerCase(),"webkit")&&!En(Yn,"Edge");function $d(){var n=wt.document;return n?n.documentMode:void 0}e:{var qd="",Is=(n=Yn,em?/rv:([^\);]+)(\)|;)/.exec(n):Nf?/Edge\/([\d\.]+)/.exec(n):ln?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Of?/WebKit\/(\S+)/.exec(n):dc?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Is&&(qd=Is?Is[1]:""),ln){var Gd=$d();if(null!=Gd&&Gd>parseFloat(qd)){sl=String(Gd);break e}}sl=qd}var Mn={};var fc=wt.document&&ln&&($d()||parseInt(sl,10))||void 0,Sr=function(){if(!wt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{wt.addEventListener("test",ou,e),wt.removeEventListener("test",ou,e)}catch(t){}return n}();function tn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function ga(n,e){if(tn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(em){e:{try{Xs(e.nodeName);var i=!0;break e}catch(l){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ma[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ga.Z.h.call(this)}}tn.prototype.h=function(){this.defaultPrevented=!0},xn(ga,tn);var ma={2:"touch",3:"pen",4:"mouse"};ga.prototype.h=function(){ga.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var xr="closure_listenable_"+(1e6*Math.random()|0),Ki=0;function fu(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Ki,this.ca=this.fa=!1}function _a(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function pu(n){this.src=n,this.g={},this.h=0}function ol(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],i=fa(r,e);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(_a(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function eo(n,e,t,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return i}return-1}pu.prototype.add=function(n,e,t,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=eo(n,e,r,i);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new fu(e,this.src,l,!!r,i)).fa=t,n.push(e)),e};var Mr="closure_lm_"+(1e6*Math.random()|0),al={};function ya(n,e,t,r,i){if(r&&r.once)return As(n,e,t,r,i);if(Array.isArray(e)){for(var l=0;l<e.length;l++)ya(n,e[l],t,r,i);return null}return t=va(t),n&&n[xr]?n.N(e,t,uu(r)?!!r.capture:!!r,i):pc(n,e,t,!1,r,i)}function pc(n,e,t,r,i,l){if(!e)throw Error("Invalid event type");var d=uu(i)?!!i.capture:!!i,p=No(n);if(p||(n[Mr]=p=new pu(n)),(t=p.add(e,t,r,d,l)).proxy)return t;if(r=function Zd(){var e=Ro;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Sr||(i=d),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(ul(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function As(n,e,t,r,i){if(Array.isArray(e)){for(var l=0;l<e.length;l++)As(n,e[l],t,r,i);return null}return t=va(t),n&&n[xr]?n.O(e,t,uu(r)?!!r.capture:!!r,i):pc(n,e,t,!0,r,i)}function gc(n,e,t,r,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)gc(n,e[l],t,r,i);else r=uu(r)?!!r.capture:!!r,t=va(t),n&&n[xr]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=eo(l=n.g[e],t,r,i))&&(_a(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=No(n))&&(e=n.g[e.toString()],n=-1,e&&(n=eo(e,t,r,i)),(t=-1<n?e[n]:null)&&gu(t))}function gu(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[xr])ol(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ul(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=No(e))?(ol(t,n),0==t.h&&(t.src=null,e[Mr]=null)):_a(n)}}}function ul(n){return n in al?al[n]:al[n]="on"+n}function Ro(n,e){if(n.ca)n=!0;else{e=new ga(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&gu(n),n=t.call(r,e)}return n}function No(n){return(n=n[Mr])instanceof pu?n:null}var xi="__closure_events_fn_"+(1e9*Math.random()>>>0);function va(n){return"function"==typeof n?n:(n[xi]||(n[xi]=function(e){return n.handleEvent(e)}),n[xi])}function Qn(){mi.call(this),this.i=new pu(this),this.P=this,this.I=null}function _n(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new tn(e,n);else if(e instanceof tn)e.target=e.target||n;else{var i=e;cc(e=new tn(r,n),i)}if(i=!0,t)for(var l=t.length-1;0<=l;l--){var d=e.g=t[l];i=to(d,r,!0,e)&&i}if(i=to(d=e.g=n,r,!0,e)&&i,i=to(d,r,!1,e)&&i,t)for(l=0;l<t.length;l++)i=to(d=e.g=t[l],r,!1,e)&&i}function to(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,l=0;l<e.length;++l){var d=e[l];if(d&&!d.ca&&d.capture==t){var p=d.listener,_=d.ia||d.src;d.fa&&ol(n.i,d),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}xn(Qn,mi),Qn.prototype[xr]=!0,Qn.prototype.removeEventListener=function(n,e,t,r){gc(this,n,e,t,r)},Qn.prototype.M=function(){if(Qn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)_a(t[r]);delete n.g[e],n.h--}}this.I=null},Qn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Qn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var wa=wt.JSON.stringify;function kf(){var n=Ye;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var re,I=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new R,n=>n.reset());class R{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function U(n){wt.setTimeout(()=>{throw n},0)}function W(n,e){re||function Me(){var n=wt.Promise.resolve(void 0);re=function(){n.then(Lt)}}(),Le||(re(),Le=!0),Ye.add(n,e)}var Le=!1,Ye=new class T{constructor(){this.h=this.g=null}add(e,t){const r=I.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Lt(){for(var n;n=kf();){try{n.h.call(n.g)}catch(t){U(t)}var e=I;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Le=!1}function jt(n,e){Qn.call(this),this.h=n||1,this.g=e||wt,this.j=Gt(this.kb,this),this.l=Date.now()}function Rn(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function ur(n,e,t){if("function"==typeof n)t&&(n=Gt(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gt(n.handleEvent,n)}return 2147483647<Number(e)?-1:wt.setTimeout(n,e||0)}function kn(n){n.g=ur(()=>{n.g=null,n.i&&(n.i=!1,kn(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}xn(jt,Qn),(Ke=jt.prototype).da=!1,Ke.S=null,Ke.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),_n(this,"tick"),this.da&&(Rn(this),this.start()))}},Ke.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.M=function(){jt.Z.M.call(this),Rn(this),delete this.g};class mu extends mi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kn(this)}M(){super.M(),this.g&&(wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ti(n){mi.call(this),this.h=n,this.g={}}xn(ti,mi);var _i=[];function Yi(n,e,t,r){Array.isArray(t)||(t&&(_i[0]=t.toString()),t=_i);for(var i=0;i<t.length;i++){var l=ya(e,t[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function ni(n){zi(n.g,function(e,t){this.g.hasOwnProperty(t)&&gu(e)},n),n.g={}}function Ea(){this.g=!0}function Ss(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function my(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<i.length;d++)i[d]=""}}}return wa(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}ti.prototype.M=function(){ti.Z.M.call(this),ni(this)},ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ea.prototype.Aa=function(){this.g=!1},Ea.prototype.info=function(){};var _u={},Po=null;function ba(){return Po=Po||new Qn}function im(n){tn.call(this,_u.Ma,n)}function mc(n){const e=ba();_n(e,new im(e,n))}function Ff(n,e){tn.call(this,_u.STAT_EVENT,n),this.stat=e}function yr(n){const e=ba();_n(e,new Ff(e,n))}function _y(n,e){tn.call(this,_u.Na,n),this.size=e}function _c(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return wt.setTimeout(function(){n()},e)}_u.Ma="serverreachability",xn(im,tn),_u.STAT_EVENT="statevent",xn(Ff,tn),_u.Na="timingevent",xn(_y,tn);var Wd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},sm={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ll(){}function yu(){}ll.prototype.h=null;var cl,yc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function vc(){tn.call(this,"d")}function om(){tn.call(this,"c")}function dl(){}function hl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new ti(this),this.P=Uf,this.W=new jt(n=Pf?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Lf}function Lf(){this.i=null,this.g="",this.h=!1}xn(vc,tn),xn(om,tn),xn(dl,ll),dl.prototype.g=function(){return new XMLHttpRequest},dl.prototype.i=function(){return{}},cl=new dl;var Uf=45e3,Yd={},Qd={};function Vf(n,e,t){n.K=1,n.v=Ec(yi(e)),n.s=t,n.U=!0,am(n,null)}function am(n,e){n.F=Date.now(),Oo(n),n.A=yi(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Cc(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Lf,n.g=ce(n.l,t?e:null,!n.s),0<n.O&&(n.L=new mu(Gt(n.Ia,n,n.g),n.O)),Yi(n.V,n.g,"readystatechange",n.gb),e=n.H?Wi(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),mc(1),function nm(n,e,t,r,i,l){n.info(function(){if(n.g)if(l)for(var d="",p=l.split("&"),_=0;_<p.length;_++){var b=p[_].split("=");if(1<b.length){var A=b[0];b=b[1];var x=A.split("_");d=2<=x.length&&"type"==x[1]?d+(A+"=")+b+"&":d+(A+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Jd(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function um(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=no(n,t),i==Qd){4==e&&(n.o=4,yr(14),r=!1),Ss(n.j,n.m,null,"[Incomplete Response]");break}if(i==Yd){n.o=4,yr(15),Ss(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ss(n.j,n.m,i,null),Hf(n,i)}Jd(n)&&i!=Qd&&i!=Yd&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,yr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),rp(e),e.L=!0,yr(11))):(Ss(n.j,n.m,t,"[Invalid Chunked Response]"),pl(n),fl(n))}function no(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Qd:(t=Number(e.substring(t,r)),isNaN(t)?Yd:(r+=1)+t>e.length?Qd:(e=e.substr(r,t),n.C=r+t,e))}function Oo(n){n.Y=Date.now()+n.P,Bf(n,n.P)}function Bf(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=_c(Gt(n.eb,n),e)}function jf(n){n.B&&(wt.clearTimeout(n.B),n.B=null)}function fl(n){0==n.l.G||n.I||m(n.l,n)}function pl(n){jf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Rn(n.W),ni(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Hf(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||sh(t.i,n)))if(t.I=n.N,!n.J&&sh(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=_c(Gt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;f(t),hh(t)}np(t),yr(18)}if(1>=ih(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else D(t,11)}else if((n.J||t.g==n)&&f(t),!cu(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const x=b[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const k=b[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const H=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(H){var l=r.i;!l.g&&(En(H,"spdy")||En(H,"quic")||En(H,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Wf(l,l.h),l.h=null))}if(r.D){const ue=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.sa=ue,pn(r.F,r.D,ue))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=Z(r,r.H?r.la:null,r.W),d.J){Tc(r.i,d);var p=d,_=r.K;_&&p.setTimeout(_),p.B&&(jf(p),Oo(p)),r.g=d}else tp(r);0<t.l.length&&vl(t)}else"stop"!=b[0]&&"close"!=b[0]||D(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?D(t,7):Ic(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}mc(4)}catch(b){}}function Xd(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(au(n)||"string"==typeof n)il(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(au(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function yy(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(au(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var l=0;l<i;l++)e.call(void 0,r[l],t&&t[l],n)}}function gl(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof gl)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function $f(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ml(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)ml(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function ml(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ke=hl.prototype).setTimeout=function(n){this.P=n},Ke.gb=function(n){n=n.target;const e=this.L;e&&3==Fo(n)?e.l():this.Ia(n)},Ke.Ia=function(n){try{if(n==this.g)e:{const A=Fo(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>A)&&(3!=A||Pf||this.g&&(this.h.h||this.g.ga()||lh(this.g)))){this.I||4!=A||7==e||mc(8==e||0>=x?3:2),jf(this);var t=this.g.ba();this.N=t;t:if(Jd(this)){var r=lh(this.g);n="";var i=r.length,l=4==Fo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){pl(this),fl(this);var d="";break t}this.h.i=new wt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function zd(n,e,t,r,i,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cu(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,yr(12),pl(this),fl(this);break e}Ss(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Hf(this,t)}this.U?(um(this,A,d),Pf&&this.i&&3==A&&(Yi(this.V,this.W,"tick",this.fb),this.W.start())):(Ss(this.j,this.m,d,null),Hf(this,d)),4==A&&pl(this),this.i&&!this.I&&(4==A?m(this.l,this):(this.i=!1,Oo(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,yr(12)):(this.o=0,yr(13)),pl(this),fl(this)}}}catch(A){}},Ke.fb=function(){if(this.g){var n=Fo(this.g),e=this.g.ga();this.C<e.length&&(jf(this),um(this,n,e),this.i&&4!=n&&Oo(this))}},Ke.cancel=function(){this.I=!0,pl(this)},Ke.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function rm(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(mc(3),yr(17)),pl(this),this.o=2,fl(this)):Bf(this,this.Y-n)},(Ke=gl.prototype).R=function(){$f(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ke.T=function(){return $f(this),this.g.concat()},Ke.get=function(n,e){return ml(this.h,n)?this.h[n]:e},Ke.set=function(n,e){ml(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ke.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],l=this.get(i);n.call(e,l,i,this)}};var Ca=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof vu){this.g=void 0!==e?e:n.g,wc(this,n.j),this.s=n.s,ri(this,n.i),Ta(this,n.m),this.l=n.l,e=n.h;var t=new bc;t.i=e.i,e.g&&(t.g=new gl(e.g),t.h=e.h),qf(this,t),this.o=n.o}else n&&(t=String(n).match(Ca))?(this.g=!!e,wc(this,t[1]||"",!0),this.s=eh(t[2]||""),ri(this,t[3]||"",!0),Ta(this,t[4]),this.l=eh(t[5]||"",!0),qf(this,t[6]||"",!0),this.o=eh(t[7]||"")):(this.g=!!e,this.h=new bc(null,this.g))}function yi(n){return new vu(n)}function wc(n,e,t){n.j=t?eh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ri(n,e,t){n.i=t?eh(e,!0):e}function Ta(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function qf(n,e,t){e instanceof bc?(n.h=e,function zf(n,e){e&&!n.j&&(ro(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(rh(this,r),Cc(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=wu(e,nh)),n.h=new bc(e,n.g))}function pn(n,e,t){n.h.set(e,t)}function Ec(n){return pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function eh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function wu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Gf),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Gf(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}vu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(wu(e,th,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(wu(e,th,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(wu(t,"/"==t.charAt(0)?vy:Hw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",wu(t,wy)),n.join("")};var th=/[#\/\?@]/g,Hw=/[#\?:]/g,vy=/[#\?]/g,nh=/[#\?@]/g,wy=/#/g;function bc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ro(n){n.g||(n.g=new gl,n.h=0,n.i&&function Bw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var l=n[t].substring(0,r);i=n[t].substring(r+1)}else l=n[t];e(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function rh(n,e){ro(n),e=ko(n,e),ml(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ml((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&$f(n)))}function Zf(n,e){return ro(n),e=ko(n,e),ml(n.g.h,e)}function Cc(n,e,t){rh(n,e),0<t.length&&(n.i=null,n.g.set(ko(n,e),lc(t)),n.h+=t.length)}function ko(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function jn(n){this.l=n||cm,n=wt.PerformanceNavigationTiming?0<(n=wt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(wt.g&&wt.g.Ea&&wt.g.Ea()&&wt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=bc.prototype).add=function(n,e){ro(this),this.i=null,n=ko(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){ro(this),this.g.forEach(function(t,r){il(t,function(i){n.call(e,i,r,this)},this)},this)},Ke.T=function(){ro(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],l=0;l<i.length;l++)t.push(e[r]);return t},Ke.R=function(n){ro(this);var e=[];if("string"==typeof n)Zf(this,n)&&(e=Si(e,this.g.get(ko(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Si(e,n[t])}return e},Ke.set=function(n,e){return ro(this),this.i=null,Zf(this,n=ko(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var d=i;""!==r[l]&&(d+="="+encodeURIComponent(String(r[l]))),n.push(d)}}return this.i=n.join("&")};var cm=10;function dm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ih(n){return n.h?1:n.g?n.g.size:0}function sh(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Wf(n,e){n.g?n.g.add(e):n.h=e}function Tc(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function hm(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return lc(n.i)}function oh(){}function by(){this.g=new oh}function $w(n,e,t){const r=t||"";try{Xd(n,function(i,l){let d=i;uu(i)&&(d=wa(i)),e.push(r+l+"="+encodeURIComponent(d))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ia(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(l){}}function Jn(n){this.l=n.$b||null,this.j=n.ib||!1}function Da(n,e){Qn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=_l,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jn.prototype.cancel=function(){if(this.i=hm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},oh.prototype.stringify=function(n){return wt.JSON.stringify(n,void 0)},oh.prototype.parse=function(n){return wt.JSON.parse(n,void 0)},xn(Jn,ll),Jn.prototype.g=function(){return new Da(this.l,this.j)},Jn.prototype.i=function(n){return function(){return n}}({}),xn(Da,Qn);var _l=0;function ah(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Xn(n){n.readyState=4,n.l=null,n.j=null,n.A=null,xs(n)}function xs(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=Da.prototype).open=function(n,e){if(this.readyState!=_l)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,xs(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||wt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xn(this)),this.readyState=_l},Ke.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,xs(this)),this.g&&(this.readyState=3,xs(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==wt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ah(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ke.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Xn(this):xs(this),3==this.readyState&&ah(this)}},Ke.Ua=function(n){this.g&&(this.response=this.responseText=n,Xn(this))},Ke.Ta=function(n){this.g&&(this.response=n,Xn(this))},Ke.ha=function(){this.g&&Xn(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Da.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Kf=wt.JSON.parse;function Zt(n){Qn.call(this),this.headers=new gl,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yl,this.K=this.L=!1}xn(Zt,Qn);var yl="",Yf=/^https?$/i,Cy=["POST","PUT"];function Qf(n){return"content-type"==n.toLowerCase()}function Jf(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Xf(n),Mi(n)}function Xf(n){n.D||(n.D=!0,_n(n,"complete"),_n(n,"error"))}function fm(n){if(n.h&&void 0!==Ts&&(!n.C[1]||4!=Fo(n)||2!=n.ba()))if(n.v&&4==Fo(n))ur(n.Fa,0,n);else if(_n(n,"readystatechange"),4==Fo(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(Ca)[1]||null;if(!i&&wt.self&&wt.self.location){var l=wt.self.location.protocol;i=l.substr(0,l.length-1)}r=!Yf.test(i?i.toLowerCase():"")}t=r}if(t)_n(n,"complete"),_n(n,"success");else{n.m=6;try{var d=2<Fo(n)?n.g.statusText:""}catch(_){d=""}n.j=d+" ["+n.ba()+"]",Xf(n)}}finally{Mi(n)}}}function Mi(n,e){if(n.g){ep(n);const t=n.g,r=n.C[0]?ou:null;n.g=null,n.C=null,e||_n(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function ep(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(wt.clearTimeout(n.A),n.A=null)}function Fo(n){return n.g?n.g.readyState:0}function lh(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case yl:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ch(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Ty(n){let e="";return zi(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):pn(n,e,t))}function Fn(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function dh(n){this.za=0,this.l=[],this.h=new Ea,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fn("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fn("baseRetryDelayMs",5e3,n),this.$a=Fn("retryDelaySeedMs",1e4,n),this.Ya=Fn("forwardChannelMaxRetries",2,n),this.ra=Fn("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new jn(n&&n.concurrentRequestLimit),this.Ca=new by,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Ic(n){if(io(n),3==n.G){var e=n.V++,t=yi(n.F);pn(t,"SID",n.J),pn(t,"RID",e),pn(t,"TYPE","terminate"),bu(n,t),(e=new hl(n,n.h,e,void 0)).K=2,e.v=Ec(yi(t)),t=!1,wt.navigator&&wt.navigator.sendBeacon&&(t=wt.navigator.sendBeacon(e.v.toString(),"")),!t&&wt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ce(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Oo(e)}N(n)}function hh(n){n.g&&(rp(n),n.g.cancel(),n.g=null)}function io(n){hh(n),n.u&&(wt.clearTimeout(n.u),n.u=null),f(n),n.i.cancel(),n.m&&("number"==typeof n.m&&wt.clearTimeout(n.m),n.m=null)}function Eu(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&vl(n)}function vl(n){dm(n.i)||n.m||(n.m=!0,W(n.Ha,n),n.C=0)}function gm(n,e){var t;t=e?e.m:n.V++;const r=yi(n.F);pn(r,"SID",n.J),pn(r,"RID",t),pn(r,"AID",n.U),bu(n,r),n.o&&n.s&&ch(r,n.o,n.s),t=new hl(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=mm(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Wf(n.i,t),Vf(t,r,e)}function bu(n,e){n.j&&Xd({},function(t,r){pn(e,r,t)})}function mm(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Gt(n.j.Oa,n.j,n):null;e:{var i=n.l;let l=-1;for(;;){const d=["count="+t];-1==l?0<t?(l=i[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let p=!0;for(let _=0;_<t;_++){let b=i[_].h;const A=i[_].g;if(b-=l,0>b)l=Math.max(0,i[_].h-100),p=!1;else try{$w(A,d,"req"+b+"_")}catch(x){r&&r(A)}}if(p){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function tp(n){n.g||n.u||(n.Y=1,W(n.Ga,n),n.A=0)}function np(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=_c(Gt(n.Ga,n),w(n,n.A)),n.A++,0))}function rp(n){null!=n.B&&(wt.clearTimeout(n.B),n.B=null)}function y(n){n.g=new hl(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=yi(n.oa);pn(e,"RID","rpc"),pn(e,"SID",n.J),pn(e,"CI",n.N?"0":"1"),pn(e,"AID",n.U),bu(n,e),pn(e,"TYPE","xmlhttp"),n.o&&n.s&&ch(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Ec(yi(e)),t.s=null,t.U=!0,am(t,n)}function f(n){null!=n.v&&(wt.clearTimeout(n.v),n.v=null)}function m(n,e){var t=null;if(n.g==e){f(n),rp(n),n.g=null;var r=2}else{if(!sh(n.i,e))return;t=e.D,Tc(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;_n(r=ba(),new _y(r,t,e,i)),vl(n)}else tp(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function pm(n,e){return!(ih(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=_c(Gt(n.Ha,n,e),w(n,n.C)),n.C++,0)))}(n,e)||2==r&&np(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:D(n,5);break;case 4:D(n,10);break;case 3:D(n,6);break;default:D(n,2)}}function w(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function D(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Gt(n.jb,n);t||(t=new vu("//www.google.com/images/cleardot.gif"),wt.location&&"http"==wt.location.protocol||wc(t,"https"),Ec(t)),function qw(n,e){const t=new Ea;if(wt.Image){const r=new Image;r.onload=ha(Ia,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ha(Ia,t,r,"TestLoadImage: error",!1,e),r.onabort=ha(Ia,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ha(Ia,t,r,"TestLoadImage: timeout",!1,e),wt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else yr(2);n.G=0,n.j&&n.j.va(e),N(n),io(n)}function N(n){n.G=0,n.I=-1,n.j&&((0!=hm(n.i).length||0!=n.l.length)&&(n.i.i.length=0,lc(n.l),n.l.length=0),n.j.ua())}function Z(n,e,t){let r=function jw(n){return n instanceof vu?yi(n):new vu(n,void 0)}(t);if(""!=r.i)e&&ri(r,e+"."+r.i),Ta(r,r.m);else{const i=wt.location;r=function lm(n,e,t,r){var i=new vu(null,void 0);return n&&wc(i,n),e&&ri(i,e),t&&Ta(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&zi(n.aa,function(i,l){pn(r,l,i)}),t=n.sa,(e=n.D)&&t&&pn(r,e,t),pn(r,"VER",n.ma),bu(n,r),r}function ce(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zt(t&&n.Ba&&!n.qa?new Jn({ib:!0}):n.qa)).L=n.H,e}function Ve(){}function Je(){if(ln&&!(10<=Number(fc)))throw Error("Environmental error: no available transport.")}function it(n,e){Qn.call(this),this.g=new dh(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!cu(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cu(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Rr(this)}function lt(n){vc.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function bn(){om.call(this),this.status=1}function Rr(n){this.g=n}(Ke=Zt.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cl.g(),this.C=function Kd(n){return n.h||(n.h=n.i())}(this.u?this.u:cl),this.g.onreadystatechange=Gt(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Jf(this,l)}n=t||"";const i=new gl(this.headers);r&&Xd(r,function(l,d){i.set(d,l)}),r=function jd(n){e:{var e=Qf;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=wt.FormData&&n instanceof wt.FormData,!(0<=fa(Cy,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(l,d){this.g.setRequestHeader(d,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ep(this),0<this.B&&((this.K=function uh(n){return ln&&function hc(){return function Hd(n){var e=Mn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=du(String(sl)).split("."),t=du("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var i=e[d]||"",l=t[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==i[0].length&&0==l[0].length)break;n=pa(0==i[1].length?0:parseInt(i[1],10),0==l[1].length?0:parseInt(l[1],10))||pa(0==i[2].length,0==l[2].length)||pa(i[2],l[2]),i=i[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gt(this.pa,this)):this.A=ur(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Jf(this,l)}},Ke.pa=function(){void 0!==Ts&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_n(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_n(this,"complete"),_n(this,"abort"),Mi(this))},Ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mi(this,!0)),Zt.Z.M.call(this)},Ke.Fa=function(){this.s||(this.F||this.v||this.l?fm(this):this.cb())},Ke.cb=function(){fm(this)},Ke.ba=function(){try{return 2<Fo(this)?this.g.status:-1}catch(n){return-1}},Ke.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ke.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Kf(e)}},Ke.Da=function(){return this.m},Ke.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=dh.prototype).ma=8,Ke.G=1,Ke.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ke.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new hl(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=Wi(l),cc(l,this.P)):l=this.P),null===this.o&&(i.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=mm(this,i,e),pn(t=yi(this.F),"RID",n),pn(t,"CVER",22),this.D&&pn(t,"X-HTTP-Session-Id",this.D),bu(this,t),this.o&&l&&ch(t,this.o,l),Wf(this.i,i),this.Ra&&pn(t,"TYPE","init"),this.ja?(pn(t,"$req",e),pn(t,"SID","null"),i.$=!0,Vf(i,t,null)):Vf(i,t,e),this.G=2}}else 3==this.G&&(n?gm(this,n):0==this.l.length||dm(this.i)||gm(this))},Ke.Ga=function(){if(this.u=null,y(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=_c(Gt(this.bb,this),n)}},Ke.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,yr(10),hh(this),y(this))},Ke.ab=function(){null!=this.v&&(this.v=null,hh(this),np(this),yr(19))},Ke.jb=function(n){n?(this.h.info("Successfully pinged google.com"),yr(2)):(this.h.info("Failed to ping google.com"),yr(1))},(Ke=Ve.prototype).xa=function(){},Ke.wa=function(){},Ke.va=function(){},Ke.ua=function(){},Ke.Oa=function(){},Je.prototype.g=function(n,e){return new it(n,e)},xn(it,Qn),it.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),W(Gt(n.hb,n,e))),yr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Z(n,null,n.W),vl(n)},it.prototype.close=function(){Ic(this.g)},it.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Eu(this.g,e)}else this.v?((e={}).__data__=wa(n),Eu(this.g,e)):Eu(this.g,n)},it.prototype.M=function(){this.g.j=null,delete this.j,Ic(this.g),delete this.g,it.Z.M.call(this)},xn(lt,vc),xn(bn,om),xn(Rr,Ve),Rr.prototype.xa=function(){_n(this.g,"a")},Rr.prototype.wa=function(n){_n(this.g,new lt(n))},Rr.prototype.va=function(n){_n(this.g,new bn(n))},Rr.prototype.ua=function(){_n(this.g,"b")},Je.prototype.createWebChannel=Je.prototype.g,it.prototype.send=it.prototype.u,it.prototype.open=it.prototype.m,it.prototype.close=it.prototype.close,Wd.NO_ERROR=0,Wd.TIMEOUT=8,Wd.HTTP_ERROR=6,sm.COMPLETE="complete",yu.EventType=yc,yc.OPEN="a",yc.CLOSE="b",yc.ERROR="c",yc.MESSAGE="d",Qn.prototype.listen=Qn.prototype.N,Zt.prototype.listenOnce=Zt.prototype.O,Zt.prototype.getLastError=Zt.prototype.La,Zt.prototype.getLastErrorCode=Zt.prototype.Da,Zt.prototype.getStatus=Zt.prototype.ba,Zt.prototype.getResponseJson=Zt.prototype.Qa,Zt.prototype.getResponseText=Zt.prototype.ga,Zt.prototype.send=Zt.prototype.ea;var Dc=_r.createWebChannelTransport=function(){return new Je},fh=_r.getStatEventTarget=function(){return ba()},Cu=_r.ErrorCode=Wd,ip=_r.EventType=sm,Iy=_r.Event=_u,Lo=_r.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ph=_r.FetchXmlHttpFactory=Jn,wl=_r.WebChannel=yu,sp=_r.XhrIo=Zt;const Ac="@firebase/firestore";class Nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let Aa="9.6.7";const Sa=new Cs.Yd("@firebase/firestore");function Dy(){return Sa.logLevel}function Fe(n,...e){if(Sa.logLevel<=Cs.in.DEBUG){const t=e.map(_m);Sa.debug(`Firestore (${Aa}): ${n}`,...t)}}function lr(n,...e){if(Sa.logLevel<=Cs.in.ERROR){const t=e.map(_m);Sa.error(`Firestore (${Aa}): ${n}`,...t)}}function Sc(n,...e){if(Sa.logLevel<=Cs.in.WARN){const t=e.map(_m);Sa.warn(`Firestore (${Aa}): ${n}`,...t)}}function _m(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function Ct(n,e){n||st()}function Ge(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends ze.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ay{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nr.UNAUTHENTICATED))}shutdown(){}}class ym{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class MT{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const l=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let d=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Pr,e.enqueueRetryable(()=>l(this.currentUser))};const p=()=>{const b=d;e.enqueueRetryable((0,X.Z)(function*(){yield b.promise,yield l(r.currentUser)}))},_=b=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Pr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new Ay(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Nr(e)}}class Gw{constructor(e,t,r){this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Zw{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Gw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xy{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.p;return this.p=l.token,Fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const i=l=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?i(l):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.p=t.token,new Sy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class vi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function vm(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}vi.A=-1;class My{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=vm(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<t&&(r+=e.charAt(i[l]%e.length))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function xc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function wm(n){return n+"\0"}class Ln{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ln(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new Ln(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ry(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class gh{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===gh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const l=e.get(i),d=t.get(i);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class zt extends gh{construct(e,t,r){return new zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const Ww=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ii extends gh{construct(e,t,r){return new ii(e,t,r)}static isValidIdentifier(e){return Ww.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ii.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ii(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const l=()=>{if(0===r.length)throw new Se(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Se(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Se(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(d=!d,i++):"."!==p||d?(r+=p,i++):(l(),i++)}if(l(),d)throw new Se(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ii(t)}static emptyPath(){return new ii([])}}class Rc{constructor(e){this.fields=e,e.sort(ii.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new vr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(e);return new vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vr.EMPTY_BYTE_STRING=new vr("");const PT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function El(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=PT.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nn(n.seconds),nanos:nn(n.nanos)}}function nn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Nc(n){return"string"==typeof n?vr.fromBase64String(n):vr.fromUint8Array(n)}function Em(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Kw(n){const e=n.mapValue.fields.__previous_value__;return Em(e)?Kw(e):e}function op(n){const e=El(n.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}class OT{constructor(e,t,r,i,l,d,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class Pc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Pc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Pc&&e.projectId===this.projectId&&e.database===this.database}}function bl(n){return null==n}function ap(n){return 0===n&&1/n==-1/0}function Yw(n){return"number"==typeof n&&Number.isInteger(n)&&!ap(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(zt.fromString(e))}static fromName(e){return new Xe(zt.fromString(e).popFirst(5))}static empty(){return new Xe(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new zt(e.slice()))}}const At={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function Cl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Em(n)?4:10:st()}function so(n,e){if(n===e)return!0;const t=Cl(n);if(t!==Cl(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return op(n).isEqual(op(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=El(r.timestampValue),d=El(i.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Nc(n.bytesValue).isEqual(Nc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return nn(r.geoPointValue.latitude)===nn(i.geoPointValue.latitude)&&nn(r.geoPointValue.longitude)===nn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return nn(r.integerValue)===nn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=nn(r.doubleValue),d=nn(i.doubleValue);return l===d?ap(l)===ap(d):isNaN(l)&&isNaN(d)}return!1}(n,e);case 9:return xc(n.arrayValue.values||[],e.arrayValue.values||[],so);case 10:return function(r,i){const l=r.mapValue.fields||{},d=i.mapValue.fields||{};if(Ry(l)!==Ry(d))return!1;for(const p in l)if(l.hasOwnProperty(p)&&(void 0===d[p]||!so(l[p],d[p])))return!1;return!0}(n,e);default:return st()}var i}function mh(n,e){return void 0!==(n.values||[]).find(t=>so(t,e))}function Tu(n,e){if(n===e)return 0;const t=Cl(n),r=Cl(e);if(t!==r)return kt(t,r);switch(t){case 0:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(i,l){const d=nn(i.integerValue||i.doubleValue),p=nn(l.integerValue||l.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return oo(n.timestampValue,e.timestampValue);case 4:return oo(op(n),op(e));case 5:return kt(n.stringValue,e.stringValue);case 6:return function(i,l){const d=Nc(i),p=Nc(l);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,l){const d=i.split("/"),p=l.split("/");for(let _=0;_<d.length&&_<p.length;_++){const b=kt(d[_],p[_]);if(0!==b)return b}return kt(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,l){const d=kt(nn(i.latitude),nn(l.latitude));return 0!==d?d:kt(nn(i.longitude),nn(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,l){const d=i.values||[],p=l.values||[];for(let _=0;_<d.length&&_<p.length;++_){const b=Tu(d[_],p[_]);if(b)return b}return kt(d.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,l){const d=i.fields||{},p=Object.keys(d),_=l.fields||{},b=Object.keys(_);p.sort(),b.sort();for(let A=0;A<p.length&&A<b.length;++A){const x=kt(p[A],b[A]);if(0!==x)return x;const k=Tu(d[p[A]],_[b[A]]);if(0!==k)return k}return kt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function oo(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return kt(n,e);const t=El(n),r=El(e),i=kt(t.seconds,r.seconds);return 0!==i?i:kt(t.nanos,r.nanos)}function Oc(n){return Ny(n)}function Ny(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=El(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Nc(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const d of r.values||[])l?l=!1:i+=",",i+=Ny(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const p of i)d?d=!1:l+=",",l+=`${p}:${Ny(r.fields[p])}`;return l+"}"}(n.mapValue):st();var e}function _h(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Uo(n){return!!n&&"integerValue"in n}function yh(n){return!!n&&"arrayValue"in n}function Py(n){return!!n&&"nullValue"in n}function bm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Oy(n){return!!n&&"mapValue"in n}function vh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Mc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vh(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Oy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vh(t)}setAll(e){let t=ii.emptyPath(),r={},i=[];e.forEach((d,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}d?r[p.lastSegment()]=vh(d):i.push(p.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,i)}delete(e){const t=this.field(e.popLast());Oy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return so(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Oy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Mc(t,(i,l)=>e[i]=l);for(const i of r)delete e[i]}clone(){return new Ri(vh(this.value))}}function up(n){const e=[];return Mc(n.fields,(t,r)=>{const i=new ii([t]);if(Oy(r)){const l=up(r.mapValue).fields;if(0===l.length)e.push(i);else for(const d of l)e.push(i.child(d))}else e.push(i)}),new Rc(e)}class Cn{constructor(e,t,r,i,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Cn(e,0,bt.min(),bt.min(),Ri.empty(),0)}static newFoundDocument(e,t,r){return new Cn(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new Cn(e,2,t,bt.min(),Ri.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,bt.min(),Ri.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let lp=(()=>{class n{constructor(t,r,i,l){this.indexId=t,this.collectionGroup=r,this.fields=i,this.indexState=l}}return n.UNKNOWN_ID=-1,n})();class wh{constructor(e,t){this.fieldPath=e,this.kind=t}}class kc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new kc(0,ky.min())}}class ky{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ky(bt.min(),Xe.empty(),-1)}}class kT{constructor(e,t=null,r=[],i=[],l=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=d,this.endAt=p,this.P=null}}function Qw(n,e=null,t=[],r=[],i=null,l=null,d=null){return new kT(n,e,t,r,i,l,d)}function cp(n){const e=Ge(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Oc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),bl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Oc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Oc(r)).join(",")),e.P=t}return e.P}function dp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!AS(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!so(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UT(n.startAt,e.startAt)&&UT(n.endAt,e.endAt)}function Fy(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ni extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new CS(e,t,r):"array-contains"===t?new Ly(e,r):"in"===t?new TS(e,r):"not-in"===t?new IS(e,r):"array-contains-any"===t?new DS(e,r):new Ni(e,t,r)}static v(e,t,r){return"in"===t?new Jw(e,r):new Xw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(Tu(t,this.value)):null!==t&&Cl(this.value)===Cl(t)&&this.V(Tu(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class CS extends Ni{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.V(t)}}class Jw extends Ni{constructor(e,t){super(e,"in",t),this.keys=eE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Xw extends Ni{constructor(e,t){super(e,"not-in",t),this.keys=eE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class Ly extends Ni{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yh(t)&&mh(t.arrayValue,this.value)}}class TS extends Ni{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&mh(this.value.arrayValue,t)}}class IS extends Ni{constructor(e,t){super(e,"not-in",t)}matches(e){if(mh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!mh(this.value.arrayValue,t)}}class DS extends Ni{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mh(this.value.arrayValue,r))}}class hp{constructor(e,t){this.position=e,this.inclusive=t}}class fp{constructor(e,t="asc"){this.field=e,this.dir=t}}function AS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function LT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const l=e[i],d=n.position[i];if(r=l.field.isKeyField()?Xe.comparator(Xe.fromName(d.referenceValue),t.key):Tu(d,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function UT(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!so(n.position[t],e.position[t]))return!1;return!0}class Tl{constructor(e,t=null,r=[],i=[],l=null,d="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=d,this.startAt=p,this.endAt=_,this.D=null,this.C=null}}function VT(n,e,t,r,i,l,d,p){return new Tl(n,e,t,r,i,l,d,p)}function Ms(n){return new Tl(n)}function Eh(n){return!bl(n.limit)&&"F"===n.limitType}function Cm(n){return!bl(n.limit)&&"L"===n.limitType}function Tm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function pp(n){for(const e of n.filters)if(e.S())return e.field;return null}function Im(n){return null!==n.collectionGroup}function Il(n){const e=Ge(n);if(null===e.D){e.D=[];const t=pp(e),r=Tm(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new fp(t)),e.D.push(new fp(ii.keyField(),"asc"));else{let i=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new fp(ii.keyField(),l))}}}return e.D}function ao(n){const e=Ge(n);if(!e.C)if("F"===e.limitType)e.C=Qw(e.path,e.collectionGroup,Il(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Il(e))t.push(new fp(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new hp(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new hp(e.startAt.position,!e.startAt.inclusive):null;e.C=Qw(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function Iu(n,e,t){return new Tl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bh(n,e){return dp(ao(n),ao(e))&&n.limitType===e.limitType}function tE(n){return`${cp(ao(n))}|lt:${n.limitType}`}function gp(n){return`Query(target=${function FT(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Oc(r.value)}`;var r}).join(", ")}]`),bl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Oc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Oc(t)).join(",")),`Target(${e})`}(ao(n))}; limitType=${n.limitType})`}function Uy(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,l,d){const p=LT(i,l,d);return i.inclusive?p<=0:p<0}(t.startAt,Il(t),r)||t.endAt&&!function(i,l,d){const p=LT(i,l,d);return i.inclusive?p>=0:p>0}(t.endAt,Il(t),r)));var t,r}function Vy(n){return(e,t)=>{let r=!1;for(const i of Il(n)){const l=BT(i,e,t);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function BT(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,l,d){const p=l.data.field(i),_=d.data.field(i);return null!==p&&null!==_?Tu(p,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function nE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ap(e)?"-0":e}}function Ch(n){return{integerValue:""+n}}function Fc(n,e){return Yw(e)?Ch(e):nE(n,e)}class Th{constructor(){this._=void 0}}function Ih(n,e,t){return n instanceof Dh?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(l.fields.__previous_value__=i),{mapValue:l}}(t,e):n instanceof Dl?By(n,e):n instanceof Du?Dm(n,e):function(r,i){const l=Lc(r,i),d=_p(l)+_p(r.k);return Uo(l)&&Uo(r.k)?Ch(d):nE(r.O,d)}(n,e)}function mp(n,e,t){return n instanceof Dl?By(n,e):n instanceof Du?Dm(n,e):t}function Lc(n,e){return n instanceof Uc?Uo(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Dh extends Th{}class Dl extends Th{constructor(e){super(),this.elements=e}}function By(n,e){const t=rE(e);for(const r of n.elements)t.some(i=>so(i,r))||t.push(r);return{arrayValue:{values:t}}}class Du extends Th{constructor(e){super(),this.elements=e}}function Dm(n,e){let t=rE(e);for(const r of n.elements)t=t.filter(i=>!so(i,r));return{arrayValue:{values:t}}}class Uc extends Th{constructor(e,t){super(),this.O=e,this.k=t}}function _p(n){return nn(n.integerValue||n.doubleValue)}function rE(n){return yh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ah{constructor(e,t){this.field=e,this.transform=t}}class iE{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Am(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class yp{}function jT(n,e,t){n instanceof Sm?function(r,i,l){const d=r.value.clone(),p=HT(r.fieldTransforms,i,l.transformResults);d.setAll(p),i.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Sh?function(r,i,l){if(!Am(r.precondition,i))return void i.convertToUnknownDocument(l.version);const d=HT(r.fieldTransforms,i,l.transformResults),p=i.data;p.setAll(Hy(r)),p.setAll(d),i.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function jy(n,e,t){var i;n instanceof Sm?function(r,i,l){if(!Am(r.precondition,i))return;const d=r.value.clone(),p=aE(r.fieldTransforms,l,i);d.setAll(p),i.convertToFoundDocument(oE(i),d).setHasLocalMutations()}(n,e,t):n instanceof Sh?function(r,i,l){if(!Am(r.precondition,i))return;const d=aE(r.fieldTransforms,l,i),p=i.data;p.setAll(Hy(r)),p.setAll(d),i.convertToFoundDocument(oE(i),p).setHasLocalMutations()}(n,e,t):Am(n.precondition,i=e)&&i.convertToNoDocument(bt.min())}function Rs(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),l=Lc(r.transform,i||null);null!=l&&(null==t&&(t=Ri.empty()),t.set(r.field,l))}return t||null}function sE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&xc(t,r,(i,l)=>function SS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Dl&&r instanceof Dl||t instanceof Du&&r instanceof Du?xc(t.elements,r.elements,so):t instanceof Uc&&r instanceof Uc?so(t.k,r.k):t instanceof Dh&&r instanceof Dh);var t,r}(i,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function oE(n){return n.isFoundDocument()?n.version:bt.min()}class Sm extends yp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Sh extends yp{constructor(e,t,r,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}}function Hy(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function HT(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const l=n[i],d=l.transform,p=e.data.field(l.field);r.set(l.field,mp(d,p,t[i]))}return r}function aE(n,e,t){const r=new Map;for(const i of n){const l=i.transform,d=t.data.field(i.field);r.set(i.field,Ih(l,d,e))}return r}class Vc extends yp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class xm extends yp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class $T{constructor(e){this.count=e}}var wr,Wt;function $y(n){switch(n){default:return st();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function uE(n){if(void 0===n)return lr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case wr.OK:return pe.OK;case wr.CANCELLED:return pe.CANCELLED;case wr.UNKNOWN:return pe.UNKNOWN;case wr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case wr.INTERNAL:return pe.INTERNAL;case wr.UNAVAILABLE:return pe.UNAVAILABLE;case wr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case wr.NOT_FOUND:return pe.NOT_FOUND;case wr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case wr.ABORTED:return pe.ABORTED;case wr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case wr.DATA_LOSS:return pe.DATA_LOSS;default:return st()}}(Wt=wr||(wr={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS";class er{constructor(e,t){this.comparator=e,this.root=t||si.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,si.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mm(this.root,e,this.comparator,!0)}}class Mm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class si{constructor(e,t,r,i,l){this.key=e,this.value=t,this.color=null!=r?r:si.RED,this.left=null!=i?i:si.EMPTY,this.right=null!=l?l:si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,l){return new si(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===l?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return si.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}si.EMPTY=null,si.RED=!0,si.BLACK=!1,si.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new si(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qy(this.data.getIterator())}getIteratorFrom(e){return new qy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class qy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xh(n){return n.hasNext()?n.getNext():void 0}const xa=new er(Xe.comparator);function Qi(){return xa}const qT=new er(Xe.comparator);function Gy(){return qT}const xS=new er(Xe.comparator),lE=new Nn(Xe.comparator);function cn(...n){let e=lE;for(const t of n)e=e.add(t);return e}const GT=new Nn(kt);function Rm(){return GT}class Bc{constructor(e,t,r,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,vp.createSynthesizedTargetChangeForCurrentChange(e,t)),new Bc(bt.min(),r,Rm(),Qi(),cn())}}class vp{constructor(e,t,r,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new vp(vr.EMPTY_BYTE_STRING,t,cn(),cn(),cn())}}class Nm{constructor(e,t,r,i){this.M=e,this.removedTargetIds=t,this.key=r,this.$=i}}class wp{constructor(e,t){this.targetId=e,this.F=t}}class Pm{constructor(e,t,r=vr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class cE{constructor(){this.B=0,this.L=zy(),this.U=vr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=cn(),t=cn(),r=cn();return this.L.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new vp(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=zy()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Zy{constructor(e){this.nt=e,this.st=new Map,this.it=Qi(),this.rt=Om(),this.ot=new Nn(kt)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.F.count,i=this.wt(t);if(i){const l=i.target;if(Fy(l))if(0===r){const d=new Xe(l.path);this.at(t,d,Cn.newNoDocument(d,bt.min()))}else Ct(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,d)=>{const p=this.wt(d);if(p){if(l.current&&Fy(p.target)){const _=new Xe(p.target.path);null!==this.it.get(_)||this.It(d,_)||this.at(d,_,Cn.newNoDocument(_,e))}l.j&&(t.set(d,l.H()),l.J())}});let r=cn();this.rt.forEach((l,d)=>{let p=!0;d.forEachWhile(_=>{const b=this.wt(_);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(l))}),this.it.forEach((l,d)=>d.setReadTime(e));const i=new Bc(e,t,this.ot,this.it,r);return this.it=Qi(),this.rt=Om(),this.ot=new Nn(kt),i}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new cE,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new Nn(kt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new cE),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Om(){return new er(Xe.comparator)}function zy(){return new er(Xe.comparator)}const ZT={asc:"ASCENDING",desc:"DESCENDING"},zT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Wy{constructor(e,t){this.databaseId=e,this.N=t}}function km(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dE(n,e){return n.N?e.toBase64():e.toUint8Array()}function hE(n,e){return km(n,e.toTimestamp())}function Or(n){return Ct(!!n),bt.fromTimestamp(function(e){const t=El(e);return new Ln(t.seconds,t.nanos)}(n))}function Fm(n,e){return(t=n,new zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Ky(n){const e=zt.fromString(n);return Ct(yE(e)),e}function Mh(n,e){return Fm(n.databaseId,e.path)}function $r(n,e){const t=Ky(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(WT(t))}function Rh(n,e){return Fm(n.databaseId,e)}function fE(n){const e=Ky(n);return 4===e.length?zt.emptyPath():WT(e)}function Ep(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WT(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Lm(n,e,t){return{name:Mh(n,e),fields:t.value.mapValue.fields}}function Yy(n,e,t){const r=$r(n,e.name),i=Or(e.updateTime),l=new Ri({mapValue:{fields:e.fields}}),d=Cn.newFoundDocument(r,i,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Cp(n,e){let t;if(e instanceof Sm)t={update:Lm(n,e.key,e.value)};else if(e instanceof Vc)t={delete:Mh(n,e.key)};else if(e instanceof Sh)t={update:Lm(n,e.key,e.data),updateMask:Nh(e.fieldMask)};else{if(!(e instanceof xm))return st();t={verify:Mh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const d=l.transform;if(d instanceof Dh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Dl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Du)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Uc)return{fieldPath:l.field.canonicalString(),increment:d.k};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:hE(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function Tp(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?cr.updateTime(Or(i.updateTime)):void 0!==i.exists?cr.exists(i.exists):cr.none():cr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,d){let p=null;"setToServerValue"in d?(Ct("REQUEST_TIME"===d.setToServerValue),p=new Dh):"appendMissingElements"in d?p=new Dl(d.appendMissingElements.values||[]):"removeAllFromArray"in d?p=new Du(d.removeAllFromArray.values||[]):"increment"in d?p=new Uc(l,d.increment):st();const _=ii.fromServerFormat(d.fieldPath);return new Ah(_,p)}(n,i)):[];var i;if(e.update){const i=$r(n,e.update.name),l=new Ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Rc((e.updateMask.fieldPaths||[]).map(b=>ii.fromServerFormat(b)));return new Sh(i,l,d,t,r)}return new Sm(i,l,t,r)}if(e.delete){const i=$r(n,e.delete);return new Vc(i,t)}if(e.verify){const i=$r(n,e.verify);return new xm(i,t)}return st()}function Jy(n,e){return{documents:[Rh(n,e.path)]}}function Xy(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Rh(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Rh(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const b=_.map(A=>function(x){if("=="===x.op){if(bm(x.value))return{unaryFilter:{field:Vo(x.field),op:"IS_NAN"}};if(Py(x.value))return{unaryFilter:{field:Vo(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(bm(x.value))return{unaryFilter:{field:Vo(x.field),op:"IS_NOT_NAN"}};if(Py(x.value))return{unaryFilter:{field:Vo(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(x.field),op:_E(x.op),value:x.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const l=function(_){if(0!==_.length)return _.map(b=>{return{field:Vo((A=b).field),direction:KT(A.dir)};var A})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=(b=e.limit,n.N||bl(b)?b:{value:b});var b,p,_;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function gE(n){let e=fE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let l=[];t.where&&(l=mE(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new fp(jc((x=A).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let p=null;t.limit&&(p=function(A){let x;return x="object"==typeof A?A.value:A,bl(x)?null:x}(t.limit));let _=null;var A;t.startAt&&(_=new hp((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new hp(A.values||[],!A.before)}(t.endAt)),VT(e,i,d,l,p,"F",_,b)}function mE(n){return n?void 0!==n.unaryFilter?[QT(n)]:void 0!==n.fieldFilter?[YT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>mE(e)).reduce((e,t)=>e.concat(t)):st():[]}function KT(n){return ZT[n]}function _E(n){return zT[n]}function Vo(n){return{fieldPath:n.canonicalString()}}function jc(n){return ii.fromServerFormat(n.fieldPath)}function YT(n){return Ni.create(jc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function QT(n){switch(n.unaryFilter.op){case"IS_NAN":const e=jc(n.unaryFilter.field);return Ni.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=jc(n.unaryFilter.field);return Ni.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=jc(n.unaryFilter.field);return Ni.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=jc(n.unaryFilter.field);return Ni.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function Nh(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function qr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vE(e)),e=JT(n.get(t),e);return vE(e)}function JT(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function vE(n){return n+"\x01\x01"}function dr(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),zt.emptyPath();const t=e-2,r=[];let i="";for(let l=0;l<e;){const d=n.indexOf("\x01",l);switch((d<0||d>t)&&st(),n.charAt(d+1)){case"\x01":const p=n.substring(l,d);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(l,d),i+="\0";break;case"\x11":i+=n.substring(l,d+1);break;default:st()}l=d+2}return new zt(r)}class tv{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Ji{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Ji.store="owner",Ji.key="owner";class Au{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Au.store="mutationQueues",Au.keyPath="userId";class Tn{constructor(e,t,r,i,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=l}}Tn.store="mutations",Tn.keyPath="batchId",Tn.userMutationsIndex="userMutationsIndex",Tn.userMutationsKeyPath=["userId","batchId"];class oi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,qr(t)]}static key(e,t,r){return[e,qr(t),r]}}oi.store="documentMutations",oi.PLACEHOLDER=new oi;class XT{constructor(e,t){this.path=e,this.readTime=t}}class eI{constructor(e,t){this.path=e,this.version=t}}class tr{constructor(e,t,r,i,l,d){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=l,this.parentPath=d}}tr.store="remoteDocuments",tr.readTimeIndex="readTimeIndex",tr.readTimeIndexPath="readTime",tr.collectionReadTimeIndex="collectionReadTimeIndex",tr.collectionReadTimeIndexPath=["parentPath","readTime"];class Ma{constructor(e){this.byteSize=e}}Ma.store="remoteDocumentGlobal",Ma.key="remoteDocumentGlobalKey";class Pi{constructor(e,t,r,i,l,d,p){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=d,this.query=p}}Pi.store="targets",Pi.keyPath="targetId",Pi.queryTargetsIndexName="queryTargetsIndex",Pi.queryTargetsKeyPath=["canonicalId","targetId"];class wi{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}wi.store="targetDocuments",wi.keyPath=["targetId","path"],wi.documentTargetsIndex="documentTargetsIndex",wi.documentTargetsKeyPath=["path","targetId"];class Xi{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}Xi.key="targetGlobalKey",Xi.store="targetGlobal";class Hc{constructor(e,t){this.collectionId=e,this.parent=t}}Hc.store="collectionParents",Hc.keyPath=["collectionId","parent"];class Su{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Su.store="clientMetadata",Su.keyPath="clientId";class Ip{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Ip.store="bundles",Ip.keyPath="bundleId";class Dp{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Dp.store="namedQueries",Dp.keyPath="name";class Oi{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}Oi.store="indexConfiguration",Oi.keyPath="indexId",Oi.collectionGroupIndex="collectionGroupIndex",Oi.collectionGroupIndexPath="collectionGroup";class uo{constructor(e,t,r,i,l,d){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=i,this.documentKey=l,this.largestBatchId=d}}uo.store="indexState",uo.keyPath=["indexId","uid"],uo.sequenceNumberIndex="sequenceNumberIndex",uo.sequenceNumberIndexPath=["uid","sequenceNumber"];class Ns{constructor(e,t,r,i,l){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=i,this.documentKey=l}}Ns.store="indexEntries",Ns.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Ns.documentKeyIndex="documentKeyIndex",Ns.documentKeyIndexPath=["indexId","uid","documentKey"];class kr{constructor(e,t,r,i,l,d){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=i,this.largestBatchId=l,this.overlayMutation=d}}kr.store="documentOverlays",kr.keyPath=["userId","collectionPath","documentId"],kr.collectionPathOverlayIndex="collectionPathOverlayIndex",kr.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],kr.collectionGroupOverlayIndex="collectionGroupOverlayIndex",kr.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const tI=[Au.store,Tn.store,oi.store,tr.store,Pi.store,Ji.store,Xi.store,wi.store,Su.store,Ma.store,Hc.store,Ip.store,Dp.store],lo=[...tI,kr.store],MS=[...lo,Oi.store,uo.store,Ns.store],nI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.reject(t)}static resolve(e){return new ye((t,r)=>{t(e)})}static reject(e){return new ye((t,r)=>{r(e)})}static waitFor(e){return new ye((t,r)=>{let i=0,l=0,d=!1;e.forEach(p=>{++i,p.next(()=>{++l,d&&l===i&&t()},_=>r(_))}),d=!0,l===i&&t()})}static or(e){let t=ye.resolve(!1);for(const r of e)t=t.next(i=>i?ye.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,l)=>{r.push(t.call(this,i,l))}),this.waitFor(r)}}class Ap{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Pr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Ph(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=rv(r.target.error);this.At.reject(new Ph(e,i))}}static open(e,t,r,i){try{return new Ap(t,e.transaction(i,r))}catch(l){throw new Ph(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new rI(t)}}class Bo{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Bo.vt((0,ze.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Mu(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,ze.hl)())return!1;if(Bo.St())return!0;const e=(0,ze.z$)(),t=Bo.vt(e),r=0<t&&t<10,i=Bo.Dt(e),l=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,X.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{i(new Ph(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const p=d.target.error;i("VersionError"===p.name?new Se(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Se(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Ph(e,p))},l.onupgradeneeded=d=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.bt.kt(d.target.result,l.transaction,d.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var l=this;return(0,X.Z)(function*(){const d="readonly"===t;let p=0;for(;;){++p;try{l.db=yield l.xt(e);const _=Ap.open(l.db,e,d?"readonly":"readwrite",r),b=i(_).next(A=>(_.Pt(),A)).catch(A=>(_.abort(A),ye.reject(A))).toPromise();return b.catch(()=>{}),yield _.Rt,b}catch(_){const b="FirebaseError"!==_.name&&p<3;if(Fe("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),l.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class RS{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return Mu(this.$t.delete())}}class Ph extends Se{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xu(n){return"IndexedDbTransactionError"===n.name}class rI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mu(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Mu(this.store.add(e))}get(e){return Mu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Mu(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Mu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.Kt(i,(d,p)=>{l.push(p)}).next(()=>l)}{const i=this.store.getAll(r.range);return new ye((l,d)=>{i.onerror=p=>{d(p.target.error)},i.onsuccess=p=>{l(p.target.result)}})}}Gt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(l,d,p)=>p.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}Wt(e){const t=this.cursor({});return new ye((r,i)=>{t.onerror=l=>{const d=rv(l.target.error);i(d)},t.onsuccess=l=>{const d=l.target.result;d?e(d.primaryKey,d.value).next(p=>{p?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new ye((i,l)=>{e.onerror=d=>{l(d.target.error)},e.onsuccess=d=>{const p=d.target.result;if(!p)return void i();const _=new RS(p),b=t(p.primaryKey,p.value,_);if(b instanceof ye){const A=b.catch(x=>(_.done(),ye.reject(x)));r.push(A)}_.isDone?i():null===_.Lt?p.continue():p.continue(_.Lt)}}).next(()=>ye.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Mu(n){return new ye((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=rv(r.target.error);t(i)}})}let wE=!1;function rv(n){const e=Bo.vt((0,ze.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wE||(wE=!0,setTimeout(()=>{throw r},0)),r}}return n}class EE extends nv{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function Gr(n,e){const t=Ge(n);return Bo.Nt(t.zt,e)}class iv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&jT(l,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&jy(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&jy(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(bt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cn())}isEqual(e){return this.batchId===e.batchId&&xc(this.mutations,e.mutations,(t,r)=>sE(t,r))&&xc(this.baseMutations,e.baseMutations,(t,r)=>sE(t,r))}}class sv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=xS;const l=e.mutations;for(let d=0;d<l.length;d++)i=i.insert(l[d].key,r[d].version);return new sv(e,t,r,i)}}class Oh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ps{constructor(e,t,r,i,l=bt.min(),d=bt.min(),p=vr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p}withSequenceNumber(e){return new Ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class bE{constructor(e){this.Ht=e}}function kh(n,e){let t;if(e.document)t=Yy(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=jo(e.noDocument.readTime);t=Cn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Xe.fromSegments(e.unknownDocument.path),i=jo(e.unknownDocument.version);t=Cn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(Sp(e.readTime)),t}function CE(n,e){const t=ov(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const i={name:Mh(d=n.Ht,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:km(d,p.version.toTimestamp())};return new tr(null,null,i,e.hasCommittedMutations,t,r)}var d,p;if(e.isNoDocument()){const i=e.key.path.toArray(),l=Ei(e.version),d=e.hasCommittedMutations;return new tr(null,new XT(i,l),null,d,t,r)}if(e.isUnknownDocument()){const i=e.key.path.toArray(),l=Ei(e.version);return new tr(new eI(i,l),null,null,!0,t,r)}return st()}function ov(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Sp(n){const e=new Ln(n[0],n[1]);return bt.fromTimestamp(e)}function Ei(n){const e=n.toTimestamp();return new tv(e.seconds,e.nanoseconds)}function jo(n){const e=new Ln(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function hr(n,e){const t=(e.baseMutations||[]).map(l=>Tp(n.Ht,l));for(let l=0;l<e.mutations.length-1;++l){const d=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(d.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>Tp(n.Ht,l)),i=Ln.fromMillis(e.localWriteTimeMs);return new iv(e.batchId,i,t,r)}function Ho(n){const e=jo(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jo(n.lastLimboFreeSnapshotVersion):bt.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=ao(Ms(fE(i.documents[0])))):r=ao(gE(n.query)),new Ps(r,n.targetId,0,n.lastListenSequenceNumber,e,t,vr.fromBase64String(n.resumeToken))}function xp(n,e){const t=Ei(e.snapshotVersion),r=Ei(e.lastLimboFreeSnapshotVersion);let i;i=Fy(e.target)?Jy(n.Ht,e.target):Xy(n.Ht,e.target);const l=e.resumeToken.toBase64();return new Pi(e.targetId,cp(e.target),t,l,e.sequenceNumber,r,i)}function es(n){const e=gE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Iu(e,e.limit,"L"):e}function Mp(n,e){return new Oh(e.largestBatchId,Tp(n.Ht,e.overlayMutation))}function $c(n,e){const t=e.path.lastSegment();return[n,qr(e.path.popLast()),t]}class Fh{getBundleMetadata(e,t){return qc(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:jo(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return qc(e).put({bundleId:(r=t).id,createTime:Ei(Or(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Gc(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:es(i.bundledQuery),readTime:jo(i.readTime)};var i})}saveNamedQuery(e,t){return Gc(e).put({name:(r=t).name,readTime:Ei(Or(r.readTime)),bundledQuery:r.bundledQuery});var r}}function qc(n){return Gr(n,Ip.store)}function Gc(n){return Gr(n,Dp.store)}class Al{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new Al(e,t.uid||"")}getOverlay(e,t){return Ra(e).get($c(this.userId,t)).next(r=>r?Mp(this.O,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach(l=>{const d=new Oh(t,l);i.push(this.Yt(e,d))}),ye.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(d=>i.add(qr(d.getCollectionPath())));const l=[];return i.forEach(d=>{const p=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);l.push(Ra(e).Gt(kr.collectionPathOverlayIndex,p))}),ye.waitFor(l)}getOverlaysForCollection(e,t,r){const i=new Map,l=qr(t),d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Ra(e).qt(kr.collectionPathOverlayIndex,d).next(p=>{for(const _ of p){const b=Mp(this.O,_);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const l=new Map;let d;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ra(e).Qt({index:kr.collectionGroupOverlayIndex,range:p},(_,b,A)=>{const x=Mp(this.O,b);l.size<i||x.largestBatchId===d?(l.set(x.getKey(),x),d=x.largestBatchId):A.done()}).next(()=>l)}Yt(e,t){return Ra(e).put(function(r,i,l){const[d,p,_]=$c(i,l.mutation.key);return new kr(i,p,_,l.mutation.key.getCollectionGroup(),l.largestBatchId,Cp(r.Ht,l.mutation))}(this.O,this.userId,t))}}function Ra(n){return Gr(n,kr.store)}class Ru{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(nn(e.integerValue));else if("doubleValue"in e){const r=nn(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),ap(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(Nc(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?so(e,At)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):st()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const i of Object.keys(r))this.ie(i,t),this.Zt(r[i],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const i of r)this.Zt(i,t)}ce(e,t){this.ee(t,37),Xe.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function Lh(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Zc(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const l=Lh(255&t[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}Ru.le=new Ru;class TE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const i=t.codePointAt(0);this.de(240|i>>>18),this.de(128|63&i>>>12),this.de(128|63&i>>>6),this.de(128|63&i)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const i=t.codePointAt(0);this.me(240|i>>>18),this.me(128|63&i>>>12),this.me(128|63&i>>>6),this.me(128|63&i)}}this.ge()}Ie(e){const t=this.Ee(e),r=Zc(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ae(e){const t=this.Ee(e),r=Zc(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class IE{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class DE{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class av{constructor(){this.Se=new TE,this.De=new IE(this.Se),this.Ce=new DE(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class Um{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}}function Vm(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:(t=uv(n.arrayValue,e.arrayValue),0!==t?t:uv(n.directionalValue,e.directionalValue)))}function uv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class AE{constructor(){this.xe=new Bm}addToCollectionParentIndex(e,t){return this.xe.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t,r){return ye.resolve(cn())}getFieldIndex(e,t){return ye.resolve(null)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}updateCollectionGroup(e,t,r){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class Bm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Nn(zt.comparator),l=!i.has(r);return this.index[t]=i.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nn(zt.comparator)).toArray()}}class iI{constructor(e){this.user=e,this.ke=new Bm,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const l={collectionId:r,parent:qr(i)};return lv(e).put(l)}return ye.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[wm(t),""],!1,!0);return lv(e).qt(i).next(l=>{for(const d of l){if(d.collectionId!==t)break;r.push(dr(d.parent))}return r})}addFieldIndex(e,t){const r=Rp(e),i=new Oi((l=t).indexId,l.collectionGroup,l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind]));var l;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Rp(e),i=Np(e),l=jm(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return ye.resolve(cn())}getFieldIndex(e,t){return ye.resolve(null)}Oe(e,t){const r=new av;for(const i of e.fields.filter(d=>2!==d.kind)){const l=t.data.field(i.fieldPath);if(null==l)return null;const d=r.Ne(i.kind);Ru.le.Xt(l,d)}return r.Ve()}Me(e){const t=new av;return Ru.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=Rp(e),i=Np(e);return(t?r.qt(Oi.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(l=>{const d=[];return ye.forEach(l,p=>i.get([p.indexId,this.uid]).next(_=>{d.push(function(b,A){const x=A?new kc(A.sequenceNumber,new ky(jo(A.readTime),new Xe(dr(A.documentKey)),A.largestBatchId)):kc.empty(),k=b.fields.map(([L,H])=>new wh(ii.fromServerFormat(L),H));return new lp(b.indexId,b.collectionGroup,k,x)}(p,_))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>r.indexState.sequenceNumber-i.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Rp(e),l=Np(e);return this.$e(e).next(d=>i.qt(Oi.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(p=>ye.forEach(p,_=>{return l.put(new uo(_.indexId,this.user.uid||"",d,Ei((k=r).readTime),qr(k.documentKey.path),k.largestBatchId));var k})))}updateIndexEntries(e,t){const r=new Map;return ye.forEach(t,(i,l)=>{const d=r.get(i.collectionGroup);return(d?ye.resolve(d):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),ye.forEach(p,_=>this.Fe(e,i,_).next(b=>{const A=this.Be(l,_);return b.isEqual(A)?ye.resolve():this.Le(e,l,b,A)}))))})}Ue(e,t,r){return jm(e).put(new Ns(r.indexId,this.uid,r.arrayValue,r.directionalValue,qr(t.key.path)))}qe(e,t,r){return jm(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,qr(t.key.path)])}Fe(e,t,r){const i=jm(e);let l=new Nn(Vm);return i.Qt({index:Ns.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,qr(t.path)])},(d,p)=>{l=l.add(new Um(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>l)}Be(e,t){let r=new Nn(Vm);const i=this.Oe(t,e);if(null==i)return r;const l=t.fields.find(p=>2===p.kind);if(null!=l){const d=e.data.field(l.fieldPath);if(yh(d))for(const p of d.arrayValue.values||[])r=r.add(new Um(t.indexId,e.key,this.Me(p),i))}else r=r.add(new Um(t.indexId,e.key,new Uint8Array,i));return r}Le(e,t,r,i){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,p,_,b,A){const x=d.getIterator(),k=p.getIterator();let L=xh(x),H=xh(k);for(;L||H;){let ue=!1,be=!1;if(L&&H){const Be=_(L,H);Be<0?be=!0:Be>0&&(ue=!0)}else null!=L?be=!0:ue=!0;ue?(b(H),H=xh(k)):be?(A(L),L=xh(x)):(L=xh(x),H=xh(k))}}(r,i,Vm,d=>{l.push(this.Ue(e,t,d))},d=>{l.push(this.qe(e,t,d))}),ye.waitFor(l)}$e(e){let t=1;return Np(e).Qt({index:uo.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),t=i.sequenceNumber+1}).next(()=>t)}}function lv(n){return Gr(n,Hc.store)}function jm(n){return Gr(n,Ns.store)}function Rp(n){return Gr(n,Oi.store)}function Np(n){return Gr(n,uo.store)}const SE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ts{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cv(n,e,t){const r=n.store(Tn.store),i=n.store(oi.store),l=[],d=IDBKeyRange.only(t.batchId);let p=0;const _=r.Qt({range:d},(A,x,k)=>(p++,k.delete()));l.push(_.next(()=>{Ct(1===p)}));const b=[];for(const A of t.mutations){const x=oi.key(e,A.key.path,t.batchId);l.push(i.delete(x)),b.push(A.key)}return ye.waitFor(l).next(()=>b)}function Hm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(41943040,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class $m{constructor(e,t,r,i){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}static Jt(e,t,r,i){Ct(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new $m(l,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sl(e).Qt({index:Tn.userMutationsIndex,range:r},(i,l,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const l=Pp(e),d=Sl(e);return d.add({}).next(p=>{Ct("number"==typeof p);const _=new iv(p,t,r,i),b=function(k,L,H){const ue=H.baseMutations.map(Be=>Cp(k.Ht,Be)),be=H.mutations.map(Be=>Cp(k.Ht,Be));return new Tn(L,H.batchId,H.localWriteTime.toMillis(),ue,be)}(this.O,this.userId,_),A=[];let x=new Nn((k,L)=>kt(k.canonicalString(),L.canonicalString()));for(const k of i){const L=oi.key(this.userId,k.key.path,p);x=x.add(k.key.path.popLast()),A.push(d.put(b)),A.push(l.put(L,oi.PLACEHOLDER))}return x.forEach(k=>{A.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.Ke[p]=_.keys()}),ye.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return Sl(e).get(t).next(r=>r?(Ct(r.userId===this.userId),hr(this.O,r)):null)}Ge(e,t){return this.Ke[t]?ye.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Ke[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Sl(e).Qt({index:Tn.userMutationsIndex,range:i},(d,p,_)=>{p.userId===this.userId&&(Ct(p.batchId>=r),l=hr(this.O,p)),_.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Sl(e).Qt({index:Tn.userMutationsIndex,range:t,reverse:!0},(i,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sl(e).qt(Tn.userMutationsIndex,t).next(r=>r.map(i=>hr(this.O,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=oi.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),l=[];return Pp(e).Qt({range:i},(d,p,_)=>{const[b,A,x]=d,k=dr(A);if(b===this.userId&&t.path.isEqual(k))return Sl(e).get(x).next(L=>{if(!L)throw st();Ct(L.userId===this.userId),l.push(hr(this.O,L))});_.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(kt);const i=[];return t.forEach(l=>{const d=oi.prefixForPath(this.userId,l.path),p=IDBKeyRange.lowerBound(d),_=Pp(e).Qt({range:p},(b,A,x)=>{const[k,L,H]=b,ue=dr(L);k===this.userId&&l.path.isEqual(ue)?r=r.add(H):x.done()});i.push(_)}),ye.waitFor(i).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,l=oi.prefixForPath(this.userId,r),d=IDBKeyRange.lowerBound(l);let p=new Nn(kt);return Pp(e).Qt({range:d},(_,b,A)=>{const[x,k,L]=_,H=dr(k);x===this.userId&&r.isPrefixOf(H)?H.length===i&&(p=p.add(L)):A.done()}).next(()=>this.je(e,p))}je(e,t){const r=[],i=[];return t.forEach(l=>{i.push(Sl(e).get(l).next(d=>{if(null===d)throw st();Ct(d.userId===this.userId),r.push(hr(this.O,d))}))}),ye.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return cv(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),ye.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ye.resolve();const r=IDBKeyRange.lowerBound(oi.prefixForUser(this.userId)),i=[];return Pp(e).Qt({range:r},(l,d,p)=>{if(l[0]===this.userId){const _=dr(l[1]);i.push(_)}else p.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return xE(e,this.userId,t)}We(e){return ME(e).get(this.userId).next(t=>t||new Au(this.userId,-1,""))}}function xE(n,e,t){const r=oi.prefixForPath(e,t.path),i=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return Pp(n).Qt({range:l,jt:!0},(p,_,b)=>{const[A,x,k]=p;A===e&&x===i&&(d=!0),b.done()}).next(()=>d)}function Sl(n){return Gr(n,Tn.store)}function Pp(n){return Gr(n,oi.store)}function ME(n){return Gr(n,Au.store)}class Nu{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new Nu(0)}static Je(){return new Nu(-1)}}class dv{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new Nu(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>bt.fromTimestamp(new Ln(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Xe(e,i)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Uh(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let i=0;const l=[];return Uh(e).Qt((d,p)=>{const _=Ho(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,l.push(this.removeTargetData(e,_)))}).next(()=>ye.waitFor(l)).next(()=>i)}forEachTarget(e,t){return Uh(e).Qt((r,i)=>{const l=Ho(i);t(l)})}Ye(e){return sI(e).get(Xi.key).next(t=>(Ct(null!==t),t))}Xe(e,t){return sI(e).put(Xi.key,t)}Ze(e,t){return Uh(e).put(xp(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=cp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Uh(e).Qt({range:i,index:Pi.queryTargetsIndexName},(d,p,_)=>{const b=Ho(p);dp(t,b.target)&&(l=b,_.done())}).next(()=>l)}addMatchingKeys(e,t,r){const i=[],l=zc(e);return t.forEach(d=>{const p=qr(d.path);i.push(l.put(new wi(r,p))),i.push(this.referenceDelegate.addReference(e,r,d))}),ye.waitFor(i)}removeMatchingKeys(e,t,r){const i=zc(e);return ye.forEach(t,l=>{const d=qr(l.path);return ye.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=zc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=zc(e);let l=cn();return i.Qt({range:r,jt:!0},(d,p,_)=>{const b=dr(d[1]),A=new Xe(b);l=l.add(A)}).next(()=>l)}containsKey(e,t){const r=qr(t.path),i=IDBKeyRange.bound([r],[wm(r)],!1,!0);let l=0;return zc(e).Qt({index:wi.documentTargetsIndex,jt:!0,range:i},([d,p],_,b)=>{0!==d&&(l++,b.done())}).next(()=>l>0)}Tt(e,t){return Uh(e).get(t).next(r=>r?Ho(r):null)}}function Uh(n){return Gr(n,Pi.store)}function sI(n){return Gr(n,Xi.store)}function zc(n){return Gr(n,wi.store)}function Vh(n){return hv.apply(this,arguments)}function hv(){return hv=(0,X.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==nI)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),hv.apply(this,arguments)}function fv([n,e],[t,r]){const i=kt(n,t);return 0===i?kt(e,r):i}class NS{constructor(e){this.en=e,this.buffer=new Nn(fv),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oI{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,X.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){xu(i)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Vh(i)}yield t.un(e)}))}}class Bh{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ye.resolve(vi.A);const r=new NS(t);return this.an.forEachTarget(e,i=>r.rn(i.sequenceNumber)).next(()=>this.an.ln(e,i=>r.rn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(SE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SE):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,i,l,d,p,_,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,d=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,p=Date.now(),this.removeTargets(e,r,t))).next(x=>(l=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(b=Date.now(),Dy()<=Cs.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${i} in `+(p-d)+`ms\n\tRemoved ${l} targets in `+(_-p)+`ms\n\tRemoved ${x} documents in `+(b-_)+`ms\nTotal Duration: ${b-A}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:x})))}}class aI{constructor(e,t){this.db=e,this.garbageCollector=new Bh(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,i)=>t(i))}addReference(e,t,r){return Op(e,r)}removeReference(e,t,r){return Op(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Op(e,t)}wn(e,t){return function(r,i){let l=!1;return ME(r).Wt(d=>xE(r,d,i).next(p=>(p&&(l=!0),ye.resolve(!p)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this._n(e,(d,p)=>{if(p<=t){const _=this.wn(e,d).next(b=>{if(!b)return l++,r.getEntry(e,d).next(()=>(r.removeEntry(d,bt.min()),zc(e).delete([0,qr(d.path)])))});i.push(_)}}).next(()=>ye.waitFor(i)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Op(e,t)}_n(e,t){const r=zc(e);let i,l=vi.A;return r.Qt({index:wi.documentTargetsIndex},([d,p],{path:_,sequenceNumber:b})=>{0===d?(l!==vi.A&&t(new Xe(dr(i)),l),l=b,i=_):l=vi.A}).next(()=>{l!==vi.A&&t(new Xe(dr(i)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Op(n,e){return zc(n).put((r=n.currentSequenceNumber,new wi(0,qr(e.path),r)));var r}class jh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){Mc(this.inner,(t,r)=>{for(const[i,l]of r)e(i,l)})}isEmpty(){return zw(this.inner)}}class pv{constructor(){this.changes=new jh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qm{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xl(e).put(Gm(t),r)}removeEntry(e,t){const r=xl(e),i=Gm(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return xl(e).get(Gm(t)).next(r=>this.gn(t,r))}yn(e,t){return xl(e).get(Gm(t)).next(r=>({document:this.gn(t,r),size:Hm(r)}))}getEntries(e,t){let r=Qi();return this.pn(e,t,(i,l)=>{const d=this.gn(i,l);r=r.insert(i,d)}).next(()=>r)}In(e,t){let r=Qi(),i=new er(Xe.comparator);return this.pn(e,t,(l,d)=>{const p=this.gn(l,d);r=r.insert(l,p),i=i.insert(l,Hm(d))}).next(()=>({documents:r,En:i}))}pn(e,t,r){if(t.isEmpty())return ye.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let d=l.getNext();return xl(e).Qt({range:i},(p,_,b)=>{const A=Xe.fromSegments(p);for(;d&&Xe.comparator(d,A)<0;)r(d,null),d=l.getNext();d&&d.isEqual(A)&&(r(d,_),d=l.hasNext()?l.getNext():null),d?b.Ut(d.path.toArray()):b.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getAll(e,t,r){let i=Qi();const l=t.length+1,d={};if(r.isEqual(bt.min())){const p=t.toArray();d.range=IDBKeyRange.lowerBound(p)}else{const p=t.toArray(),_=ov(r);d.range=IDBKeyRange.lowerBound([p,_],!0),d.index=tr.collectionReadTimeIndex}return xl(e).Qt(d,(p,_,b)=>{if(p.length!==l)return;const A=this.gn(Xe.fromSegments(p),_);t.isPrefixOf(A.key.path)?i=i.insert(A.key,A):b.done()}).next(()=>i)}newChangeBuffer(e){return new uI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gv(e).get(Ma.key).next(t=>(Ct(!!t),t))}mn(e,t){return gv(e).put(Ma.key,t)}gn(e,t){if(t){const r=kh(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return Cn.newInvalidDocument(e)}}class uI extends pv{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new jh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Nn((l,d)=>kt(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const p=this.An.get(l);if(d.isValidDocument()){const _=CE(this.Tn.O,d);i=i.add(l.path.popLast()),r+=Hm(_)-p,t.push(this.Tn.addEntry(e,l,_))}else if(r-=p,this.trackRemovals){const _=CE(this.Tn.O,d.convertToNoDocument(bt.min()));t.push(this.Tn.addEntry(e,l,_))}else t.push(this.Tn.removeEntry(e,l))}),i.forEach(l=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Tn.updateMetadata(e,r)),ye.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:i})=>(i.forEach((l,d)=>{this.An.set(l,d)}),r))}}function gv(n){return Gr(n,Ma.store)}function xl(n){return Gr(n,tr.store)}function Gm(n){return n.path.toArray()}class lI{constructor(e){this.O=e}kt(e,t,r,i){const l=new Ap("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore(Ji.store),(p=e).createObjectStore(Au.store,{keyPath:Au.keyPath}),p.createObjectStore(Tn.store,{keyPath:Tn.keyPath,autoIncrement:!0}).createIndex(Tn.userMutationsIndex,Tn.userMutationsKeyPath,{unique:!0}),p.createObjectStore(oi.store),RE(e),function(p){p.createObjectStore(tr.store)}(e));let d=ye.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore(wi.store),p.deleteObjectStore(Pi.store),p.deleteObjectStore(Xi.store)}(e),RE(e)),d=d.next(()=>function(p){const _=p.store(Xi.store),b=new Xi(0,0,bt.min().toTimestamp(),0);return _.put(Xi.key,b)}(l))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(p,_){return _.store(Tn.store).qt().next(b=>{p.deleteObjectStore(Tn.store),p.createObjectStore(Tn.store,{keyPath:Tn.keyPath,autoIncrement:!0}).createIndex(Tn.userMutationsIndex,Tn.userMutationsKeyPath,{unique:!0});const A=_.store(Tn.store),x=b.map(k=>A.put(k));return ye.waitFor(x)})}(e,l))),d=d.next(()=>{!function(p){p.createObjectStore(Su.store,{keyPath:Su.keyPath})}(e)})),r<5&&i>=5&&(d=d.next(()=>this.Rn(l))),r<6&&i>=6&&(d=d.next(()=>(function(p){p.createObjectStore(Ma.store)}(e),this.Pn(l)))),r<7&&i>=7&&(d=d.next(()=>this.bn(l))),r<8&&i>=8&&(d=d.next(()=>this.vn(e,l))),r<9&&i>=9&&(d=d.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e),function(p){const _=p.objectStore(tr.store);_.createIndex(tr.readTimeIndex,tr.readTimeIndexPath,{unique:!1}),_.createIndex(tr.collectionReadTimeIndex,tr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(d=d.next(()=>this.Vn(l))),r<11&&i>=11&&(d=d.next(()=>{(function(p){p.createObjectStore(Ip.store,{keyPath:Ip.keyPath})})(e),function(p){p.createObjectStore(Dp.store,{keyPath:Dp.keyPath})}(e)})),r<12&&i>=12&&(d=d.next(()=>{!function(p){const _=p.createObjectStore(kr.store,{keyPath:kr.keyPath});_.createIndex(kr.collectionPathOverlayIndex,kr.collectionPathOverlayIndexPath,{unique:!1}),_.createIndex(kr.collectionGroupOverlayIndex,kr.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&i>=13&&(d=d.next(()=>{!function(p){p.createObjectStore(Oi.store,{keyPath:Oi.keyPath,autoIncrement:!0}).createIndex(Oi.collectionGroupIndex,Oi.collectionGroupIndexPath,{unique:!1}),p.createObjectStore(uo.store,{keyPath:uo.keyPath}).createIndex(uo.sequenceNumberIndex,uo.sequenceNumberIndexPath,{unique:!1}),p.createObjectStore(Ns.store,{keyPath:Ns.keyPath}).createIndex(Ns.documentKeyIndex,Ns.documentKeyIndexPath,{unique:!1})}(e)})),d}Pn(e){let t=0;return e.store(tr.store).Qt((r,i)=>{t+=Hm(i)}).next(()=>{const r=new Ma(t);return e.store(Ma.store).put(Ma.key,r)})}Rn(e){const t=e.store(Au.store),r=e.store(Tn.store);return t.qt().next(i=>ye.forEach(i,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt(Tn.userMutationsIndex,d).next(p=>ye.forEach(p,_=>{Ct(_.userId===l.userId);const b=hr(this.O,_);return cv(e,l.userId,b).next(()=>{})}))}))}bn(e){const t=e.store(wi.store),r=e.store(tr.store);return e.store(Xi.store).get(Xi.key).next(i=>{const l=[];return r.Qt((d,p)=>{const _=new zt(d),b=[0,qr(_)];l.push(t.get(b).next(A=>A?ye.resolve():t.put(new wi(0,qr(_),i.highestListenSequenceNumber))))}).next(()=>ye.waitFor(l))})}vn(e,t){e.createObjectStore(Hc.store,{keyPath:Hc.keyPath});const r=t.store(Hc.store),i=new Bm,l=d=>{if(i.add(d)){const p=d.lastSegment(),_=d.popLast();return r.put({collectionId:p,parent:qr(_)})}};return t.store(tr.store).Qt({jt:!0},(d,p)=>{const _=new zt(d);return l(_.popLast())}).next(()=>t.store(oi.store).Qt({jt:!0},([d,p,_],b)=>{const A=dr(p);return l(A.popLast())}))}Vn(e){const t=e.store(Pi.store);return t.Qt((r,i)=>{const l=Ho(i),d=xp(this.O,l);return t.put(d)})}}function RE(n){n.createObjectStore(wi.store,{keyPath:wi.keyPath}).createIndex(wi.documentTargetsIndex,wi.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Pi.store,{keyPath:Pi.keyPath}).createIndex(Pi.queryTargetsIndexName,Pi.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Xi.store)}const mv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zm{constructor(e,t,r,i,l,d,p,_,b,A,x=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=l,this.window=d,this.document=p,this.Dn=b,this.Cn=A,this.schemaVersion=x,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=k=>Promise.resolve(),!Zm.Vt())throw new Se(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aI(this,i),this.Bn=t+"main",this.O=new bE(_),this.Ln=new Bo(this.Bn,this.schemaVersion,new lI(this.O)),this.Un=new dv(this.referenceDelegate,this.O),this.qn=new qm(this.O),this.Kn=new Fh,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===A&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(pe.FAILED_PRECONDITION,mv);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new vi(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,X.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,X.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,X.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Fp(e).put(new Su(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(xu(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return kp(e).get(Ji.key).next(t=>ye.resolve(this.ts(t)))}es(e){return Fp(e).delete(this.clientId)}ns(){var e=this;return(0,X.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Gr(r,Su.store);return i.qt().next(l=>{const d=e.rs(l,18e5),p=l.filter(_=>-1===d.indexOf(_));return ye.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?ye.resolve(!0):kp(e).get(Ji.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Se(pe.FAILED_PRECONDITION,mv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fp(e).qt().next(r=>void 0===this.rs(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,X.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[Ji.store,Su.store],t=>{const r=new EE(t,vi.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>Fp(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return $m.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new iI(e)}getDocumentOverlayCache(e){return Al.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",l=13===(d=this.schemaVersion)?MS:12===d?lo:11===d?tI:void st();var d;let p;return this.Ln.runTransaction(e,i,l,_=>(p=new EE(_,this.Nn?this.Nn.next():vi.A),"readwrite-primary"===t?this.Jn(p).next(b=>!!b||this.Yn(p)).next(b=>{if(!b)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Se(pe.FAILED_PRECONDITION,nI);return r(p)}).next(b=>this.Zn(p).next(()=>b)):this._s(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}_s(e){return kp(e).get(Ji.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(pe.FAILED_PRECONDITION,mv)})}Zn(e){const t=new Ji(this.clientId,this.allowTabSynchronization,Date.now());return kp(e).put(Ji.key,t)}static Vt(){return Bo.Vt()}Xn(e){const t=kp(e);return t.get(Ji.key).next(r=>this.ts(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete(Ji.key)):ye.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,ze.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kp(n){return Gr(n,Ji.store)}function Fp(n){return Gr(n,Su.store)}function zm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class _v{constructor(e,t){this.progress=e,this.ws=t}}class PS{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(i=>{for(const l of r)l.applyToLocalView(i);return i})}Is(e,t){e.forEach((r,i)=>{for(const l of t)l.applyToLocalView(i)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Rs(e,t.path):Im(t)?this.Ps(e,t,r):this.bs(e,t,r);var i}Rs(e,t){return this.ys(e,new Xe(t)).next(r=>{let i=Gy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ps(e,t,r){const i=t.collectionGroup;let l=Gy();return this.indexManager.getCollectionParents(e,i).next(d=>ye.forEach(d,p=>{const _=(b=t,A=p.child(i),new Tl(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.bs(e,_,r).next(b=>{b.forEach((A,x)=>{l=l.insert(A,x)})})}).next(()=>l))}bs(e,t,r){let i;return this.qn.getAll(e,t.path,r).next(l=>(i=l,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const d of l)for(const p of d.mutations){const _=p.key;let b=i.get(_);null==b&&(b=Cn.newInvalidDocument(_),i=i.insert(_,b)),jy(p,b,d.localWriteTime),b.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((l,d)=>{Uy(t,d)||(i=i.remove(l))}),i))}}class Lp{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=i}static Ss(e,t){let r=cn(),i=cn();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new Lp(e,t.fromCache,r,i)}}class NE{Ds(e){this.Cs=e}As(e,t,r,i){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(bt.min())?this.Ns(e,t):this.Cs.Es(e,i).next(l=>{const d=this.xs(t,l);return(Eh(t)||Cm(t))&&this.ks(t.limitType,d,i,r)?this.Ns(e,t):(Dy()<=Cs.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gp(t)),this.Cs.As(e,t,r).next(p=>(d.forEach(_=>{p=p.insert(_.key,_)}),p)))});var l}xs(e,t){let r=new Nn(Vy(e));return t.forEach((i,l)=>{Uy(e,l)&&(r=r.add(l))}),r}ks(e,t,r,i){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Ns(e,t){return Dy()<=Cs.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",gp(t)),this.Cs.As(e,t,bt.min())}}class OS{constructor(e,t,r,i){this.persistence=e,this.Os=t,this.O=i,this.Ms=new er(kt),this.$s=new jh(l=>cp(l),dp),this.Fs=bt.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new PS(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Hh(n,e,t,r){return new OS(n,e,t,r)}function yv(n,e){return Up.apply(this,arguments)}function Up(){return Up=(0,X.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.gs.getAllMutationBatches(r).next(l=>(i=l,t.Ls(e),t.gs.getAllMutationBatches(r))).next(l=>{const d=[],p=[];let _=cn();for(const b of i){d.push(b.batchId);for(const A of b.mutations)_=_.add(A.key)}for(const b of l){p.push(b.batchId);for(const A of b.mutations)_=_.add(A.key)}return t.Us.Es(r,_).next(b=>({qs:b,removedBatchIds:d,addedBatchIds:p}))})})}),Up.apply(this,arguments)}function vv(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),l=t.Bs.newChangeBuffer({trackRemovals:!0});return function(d,p,_,b){const A=_.batch,x=A.keys();let k=ye.resolve();return x.forEach(L=>{k=k.next(()=>b.getEntry(p,L)).next(H=>{const ue=_.docVersions.get(L);Ct(null!==ue),H.version.compareTo(ue)<0&&(A.applyToRemoteDocument(H,_),H.isValidDocument()&&(H.setReadTime(_.commitVersion),b.addEntry(H)))})}),k.next(()=>d.gs.removeMutationBatch(p,A))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,i))})}function PE(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function Wm(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.Ms;const p=[];e.targetChanges.forEach((b,A)=>{const x=i.get(A);if(!x)return;p.push(t.Un.removeMatchingKeys(l,b.removedDocuments,A).next(()=>t.Un.addMatchingKeys(l,b.addedDocuments,A)));let k=x.withSequenceNumber(l.currentSequenceNumber);var L,H,ue;e.targetMismatches.has(A)?k=k.withResumeToken(vr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):b.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(b.resumeToken,r)),i=i.insert(A,k),H=k,ue=b,(0===(L=x).resumeToken.approximateByteSize()||H.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8||ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0)&&p.push(t.Un.updateTargetData(l,k))});let _=Qi();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))}),p.push(Vp(l,d,e.documentUpdates).next(b=>{_=b})),!r.isEqual(bt.min())){const b=t.Un.getLastRemoteSnapshotVersion(l).next(A=>t.Un.setTargetsMetadata(l,l.currentSequenceNumber,r));p.push(b)}return ye.waitFor(p).next(()=>d.apply(l)).next(()=>t.Us.Ts(l,_)).next(()=>_)}).then(l=>(t.Ms=i,l))}function Vp(n,e,t){let r=cn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let l=Qi();return t.forEach((d,p)=>{const _=i.get(d);p.isNoDocument()&&p.version.isEqual(bt.min())?(e.removeEntry(d,p.readTime),l=l.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),l=l.insert(d,p)):Fe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),l})}function wv(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function Bp(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Un.getTargetData(r,e).next(l=>l?(i=l,ye.resolve(i)):t.Un.allocateTargetId(r).next(d=>(i=new Ps(e,d,0,r.currentSequenceNumber),t.Un.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function $h(n,e,t){return jp.apply(this,arguments)}function jp(){return jp=(0,X.Z)(function*(n,e,t){const r=Ge(n),i=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!xu(d))throw d;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.$s.delete(i.target)}),jp.apply(this,arguments)}function qh(n,e,t){const r=Ge(n);let i=bt.min(),l=cn();return r.persistence.runTransaction("Execute query","readonly",d=>function(p,_,b){const A=Ge(p),x=A.$s.get(b);return void 0!==x?ye.resolve(A.Ms.get(x)):A.Un.getTargetData(_,b)}(r,d,ao(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(d,p.targetId).next(_=>{l=_})}).next(()=>r.Os.As(d,e,t?i:bt.min(),t?l:cn())).next(p=>({documents:p,Ks:l})))}function Km(n,e){const t=Ge(n),r=Ge(t.Un),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Tt(l,e).next(d=>d?d.target:null))}function Ev(n){const e=Ge(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,l){const d=Ge(r);let p=Qi(),_=ov(l);const b=xl(i),A=IDBKeyRange.lowerBound(_,!0);return b.Qt({index:tr.readTimeIndex,range:A},(x,k)=>{const L=kh(d.O,k);p=p.insert(L.key,L),_=k.readTime}).next(()=>({ws:p,readTime:Sp(_)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function Ym(){return Ym=(0,X.Z)(function*(n){const e=Ge(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=xl(r);let l=bt.min();return i.Qt({index:tr.readTimeIndex,reverse:!0},(d,p,_)=>{p.readTime&&(l=Sp(p.readTime)),_.done()}).next(()=>l)}(t)).then(t=>{e.Fs=t})}),Ym.apply(this,arguments)}function Hp(){return Hp=(0,X.Z)(function*(n,e,t,r){const i=Ge(n);let l=cn(),d=Qi();for(const b of t){const A=e.Gs(b.metadata.name);b.document&&(l=l.add(A));const x=e.js(b);x.setReadTime(e.Qs(b.metadata.readTime)),d=d.insert(A,x)}const p=i.Bs.newChangeBuffer({trackRemovals:!0}),_=yield Bp(i,(b=r,ao(Ms(zt.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>Vp(b,p,d).next(A=>(p.apply(b),A)).next(A=>i.Un.removeMatchingKeysForTargetId(b,_.targetId).next(()=>i.Un.addMatchingKeys(b,l,_.targetId)).next(()=>i.Us.Ts(b,A)).next(()=>A)))}),Hp.apply(this,arguments)}function kE(n,e){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,X.Z)(function*(n,e,t=cn()){const r=yield Bp(n,ao(es(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const d=Or(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i.Kn.saveNamedQuery(l,e);const p=r.withResumeToken(vr.EMPTY_BYTE_STRING,d);return i.Ms=i.Ms.insert(p.targetId,p),i.Un.updateTargetData(l,p).next(()=>i.Un.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.Un.addMatchingKeys(l,t,r.targetId)).next(()=>i.Kn.saveNamedQuery(l,e))})}),Cv.apply(this,arguments)}class FE{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return ye.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:Or(r.createTime)}),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:es(r.bundledQuery),readTime:Or(r.readTime)}),ye.resolve();var r}}class LE{constructor(){this.overlays=new er(Xe.comparator),this.Hs=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(i=>{this.Yt(e,t,i)}),ye.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Hs.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.Hs.delete(r)),ye.resolve()}getOverlaysForCollection(e,t,r){const i=new Map,l=t.length+1,d=new Xe(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const _=p.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===l&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ye.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let l=new er((b,A)=>b-A);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=l.get(b.largestBatchId);null===A&&(A=new Map,l=l.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const p=new Map,_=l.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,A)=>p.set(A,b)),!(p.size>=i)););return ye.resolve(p)}Yt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);null!==i&&this.Hs.get(i.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new Oh(t,r));let l=this.Hs.get(t);void 0===l&&(l=new Set,this.Hs.set(t,l)),l.add(r.key)}}class $p{constructor(){this.Js=new Nn(Fr.Ys),this.Xs=new Nn(Fr.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new Fr(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new Fr(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new Xe(new zt([])),r=new Fr(t,e),i=new Fr(t,e+1),l=[];return this.Xs.forEachInRange([r,i],d=>{this.ei(d),l.push(d.key)}),l}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new Xe(new zt([])),r=new Fr(t,e),i=new Fr(t,e+1);let l=cn();return this.Xs.forEachInRange([r,i],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new Fr(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Fr{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return Xe.comparator(e.key,t.key)||kt(e.oi,t.oi)}static Zs(e,t){return kt(e.oi,t.oi)||Xe.comparator(e.key,t.key)}}class cI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new Nn(Fr.Ys)}checkEmpty(e){return ye.resolve(0===this.gs.length)}addMutationBatch(e,t,r,i){const l=this.ci;this.ci++;const d=new iv(l,t,r,i);this.gs.push(d);for(const p of i)this.ui=this.ui.add(new Fr(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ye.resolve(d)}lookupMutationBatch(e,t){return ye.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.hi(t+1),l=i<0?0:i;return ye.resolve(this.gs.length>l?this.gs[l]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return ye.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Fr(t,0),i=new Fr(t,Number.POSITIVE_INFINITY),l=[];return this.ui.forEachInRange([r,i],d=>{const p=this.ai(d.oi);l.push(p)}),ye.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(kt);return t.forEach(i=>{const l=new Fr(i,0),d=new Fr(i,Number.POSITIVE_INFINITY);this.ui.forEachInRange([l,d],p=>{r=r.add(p.oi)})}),ye.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let l=r;Xe.isDocumentKey(l)||(l=l.child(""));const d=new Fr(new Xe(l),0);let p=new Nn(kt);return this.ui.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(_.oi)),!0)},d),ye.resolve(this.li(p))}li(e){const t=[];return e.forEach(r=>{const i=this.ai(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return ye.forEach(t.mutations,i=>{const l=new Fr(i.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new Fr(t,0),i=this.ui.firstAfterOrEqual(r);return ye.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ye.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class dI{constructor(e){this.di=e,this.docs=new er(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),l=i?i.size:0,d=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ye.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=Qi();return t.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():Cn.newInvalidDocument(i))}),ye.resolve(r)}getAll(e,t,r){let i=Qi();const l=new Xe(t.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:p,value:{document:_}}=d.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||_.readTime.compareTo(r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ye.resolve(i)}_i(e,t){return ye.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new hI(this)}getSize(e){return ye.resolve(this.size)}}class hI extends pv{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(r)}),ye.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class Tv{constructor(e){this.persistence=e,this.wi=new jh(t=>cp(t),dp),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.mi=0,this.gi=new $p,this.targetCount=0,this.yi=Nu.He()}forEachTarget(e,t){return this.wi.forEach((r,i)=>t(i)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),ye.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new Nu(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.Ze(t),ye.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,r){let i=0;const l=[];return this.wi.forEach((d,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.wi.delete(d),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),ye.waitFor(l).next(()=>i)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return ye.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),ye.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach(d=>{l.push(i.markPotentiallyOrphaned(e,d))}),ye.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return ye.resolve(r)}containsKey(e,t){return ye.resolve(this.gi.containsKey(t))}}class Iv{constructor(e,t){this.pi={},this.overlays={},this.Nn=new vi(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new Tv(this),this.indexManager=new AE,this.qn=new dI(r=>this.referenceDelegate.Ii(r)),this.O=new bE(t),this.Kn=new FE(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new cI(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new UE(this.Nn.next());return this.referenceDelegate.Ei(),r(i).next(l=>this.referenceDelegate.Ti(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Ai(e,t){return ye.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class UE extends nv{constructor(e){super(),this.currentSequenceNumber=e}}class Qm{constructor(e){this.persistence=e,this.Ri=new $p,this.Pi=null}static bi(e){return new Qm(e)}get vi(){if(this.Pi)return this.Pi;throw st()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),ye.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(i=>this.vi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(l=>this.vi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.vi,r=>{const i=Xe.fromPath(r);return this.Vi(e,i).next(l=>{l||t.removeEntry(i,bt.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return ye.or([()=>ye.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function Dv(n,e){return`firestore_clients_${n}_${e}`}function Av(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Jm(n,e){return`firestore_targets_${n}_${e}`}class qp{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Si(e,t,r){const i=JSON.parse(r);let l,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(l=new Se(i.error.code,i.error.message))),d?new qp(e,t,i.state,l):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new Se(r.error.code,r.error.message))),l?new Gh(e,r.state,i):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=Rm();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=Yw(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return i?new Gp(e,l):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class VE{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new VE(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Sv{constructor(){this.activeTargetIds=Rm()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xv{constructor(e,t,r,i,l){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new er(kt),this.started=!1,this.$i=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Fi=Dv(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new Sv),this.Li=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(p){return`firestore_bundle_loaded_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,X.Z)(function*(){const t=yield e.syncEngine.ds();for(const i of t){if(i===e.xi)continue;const l=e.getItem(Dv(e.persistenceKey,i));if(l){const d=Gp.Si(i,l);d&&(e.Mi=e.Mi.insert(d.clientId,d))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const i=e.Qi(r);i&&e.Wi(i)}for(const i of e.$i)e.Oi(i);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Jm(this.persistenceKey,e));if(r){const i=Gh.Si(e,r);i&&(t=i.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jm(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ji(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,X.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const i=t.er(r.key);return t.nr(i,null)}{const i=t.sr(r.key,r.newValue);if(i)return t.nr(i.clientId,i)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const i=t.ir(r.key,r.newValue);if(i)return t.rr(i)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const i=t.cr(r.key,r.newValue);if(i)return t.ur(i)}}else if(r.key===t.Ki){if(null!==r.newValue){const i=t.Qi(r.newValue);if(i)return t.Wi(i)}}else if(r.key===t.Bi){const i=function(l){let d=vi.A;if(null!=l)try{const p=JSON.parse(l);Ct("number"==typeof p),d=p}catch(p){lr("SharedClientState","Failed to read sequence number from WebStorage",p)}return d}(r.newValue);i!==vi.A&&t.sequenceNumberHandler(i)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const i=new qp(this.currentUser,e,t,r),l=Av(this.persistenceKey,this.currentUser,e);this.setItem(l,i.Di())}Ji(e){const t=Av(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const i=Jm(this.persistenceKey,e),l=new Gh(e,t,r);this.setItem(i,l.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return Gp.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),i=Number(r[1]);return qp.Si(new Nr(void 0!==r[2]?r[2]:null),i,t)}cr(e,t){const r=this.qi.exec(e),i=Number(r[1]);return Gh.Si(i,t)}Qi(e){return VE.Si(e)}rr(e){var t=this;return(0,X.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),l=this.zi(r),d=[],p=[];return l.forEach(_=>{i.has(_)||d.push(_)}),i.forEach(_=>{l.has(_)||p.push(_)}),this.syncEngine.dr(d,p).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=Rm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Mv{constructor(){this._r=new Sv,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new Sv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class fI{mr(e){}shutdown(){}}class Er{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const BE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class pI{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class gI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,i,l){const d=this.$r(e,t);Fe("RestConnection","Sending: ",d,r);const p={};return this.Fr(p,i,l),this.Br(e,d,p,r).then(_=>(Fe("RestConnection","Received: ",_),_),_=>{throw Sc("RestConnection",`${e} failed with error: `,_,"url: ",d,"request:",r),_})}Lr(e,t,r,i,l){return this.Mr(e,t,r,i,l)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Aa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,l)=>e[l]=i),r&&r.headers.forEach((i,l)=>e[l]=i)}$r(e,t){return`${this.kr}/v1/${t}:${BE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,i){return new Promise((l,d)=>{const p=new sp;p.listenOnce(ip.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Cu.NO_ERROR:const b=p.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(b)),l(b);break;case Cu.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),d(new Se(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Cu.HTTP_ERROR:const A=p.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",p.getResponseText()),A>0){const x=p.getResponseJson().error;if(x&&x.status&&x.message){const k=function(L){const H=L.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(H)>=0?H:pe.UNKNOWN}(x.status);d(new Se(k,x.message))}else d(new Se(pe.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Se(pe.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}Ur(e,t,r){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Dc(),d=fh(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new ph({})),this.Fr(p.initMessageHeaders,t,r),(0,ze.uI)()||(0,ze.b$)()||(0,ze.d)()||(0,ze.w1)()||(0,ze.Mn)()||(0,ze.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Fe("Connection","Creating WebChannel: "+_,p);const b=l.createWebChannel(_,p);let A=!1,x=!1;const k=new pI({Ar:H=>{x?Fe("Connection","Not sending because WebChannel is closed:",H):(A||(Fe("Connection","Opening WebChannel transport."),b.open(),A=!0),Fe("Connection","WebChannel sending:",H),b.send(H))},Rr:()=>b.close()}),L=(H,ue,be)=>{H.listen(ue,Be=>{try{be(Be)}catch(rt){setTimeout(()=>{throw rt},0)}})};return L(b,wl.EventType.OPEN,()=>{x||Fe("Connection","WebChannel transport opened.")}),L(b,wl.EventType.CLOSE,()=>{x||(x=!0,Fe("Connection","WebChannel transport closed"),k.Cr())}),L(b,wl.EventType.ERROR,H=>{x||(x=!0,Sc("Connection","WebChannel transport errored:",H),k.Cr(new Se(pe.UNAVAILABLE,"The operation could not be completed")))}),L(b,wl.EventType.MESSAGE,H=>{var ue;if(!x){const be=H.data[0];Ct(!!be);const Be=be,rt=Be.error||(null===(ue=Be[0])||void 0===ue?void 0:ue.error);if(rt){Fe("Connection","WebChannel received error:",rt);const ct=rt.status;let Ze=function(yn){const rr=wr[yn];if(void 0!==rr)return uE(rr)}(ct),Ut=rt.message;void 0===Ze&&(Ze=pe.INTERNAL,Ut="Unknown error status: "+ct+" with message "+rt.message),x=!0,k.Cr(new Se(Ze,Ut)),b.close()}else Fe("Connection","WebChannel received:",be),k.Nr(be)}}),L(d,Iy.STAT_EVENT,H=>{H.stat===Lo.PROXY?Fe("Connection","Detected buffering proxy"):H.stat===Lo.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.Dr()},0),k}}function Rv(){return"undefined"!=typeof window?window:null}function Xm(){return"undefined"!=typeof document?document:null}function Zh(n){return new Wy(n,!0)}class e_{constructor(e,t,r=1e3,i=1.5,l=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=i,this.Gr=l,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class Wc{constructor(e,t,r,i,l,d,p,_){this.Sn=e,this.Xr=r,this.Zr=i,this.eo=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new e_(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,X.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,X.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,X.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.no===t&&this.po(r,i)},r=>{e(()=>{const i=new Se(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(i)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(i=>{r(()=>this.Io(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}uo(){var e=this;this.state=5,this.ro.Hr((0,X.Z)(function*(){e.state=0,e.start()}))}Io(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mI extends Wc{constructor(e,t,r,i,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,d),this.O=l}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function bp(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),i=e.targetChange.targetIds||[],l=function(_,b){return _.N?(Ct(void 0===b||"string"==typeof b),vr.fromBase64String(b||"")):(Ct(void 0===b||b instanceof Uint8Array),vr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&function(_){const b=void 0===_.code?pe.UNKNOWN:uE(_.code);return new Se(b,_.message||"")}(d);t=new Pm(r,i,l,p||null)}else if("documentChange"in e){const r=e.documentChange,i=$r(n,r.document.name),l=Or(r.document.updateTime),d=new Ri({mapValue:{fields:r.document.fields}}),p=Cn.newFoundDocument(i,l,d);t=new Nm(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=$r(n,r.document),l=r.readTime?Or(r.readTime):bt.min(),d=Cn.newNoDocument(i,l);t=new Nm([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,i=$r(n,r.document);t=new Nm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,l=new $T(r.count||0);t=new wp(r.targetId,l)}}var _;return t}(this.O,e),r=function(i){if(!("targetChange"in i))return bt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?bt.min():l.readTime?Or(l.readTime):bt.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=Ep(this.O),t.addTarget=function(i,l){let d;const p=l.target;return d=Fy(p)?{documents:Jy(i,p)}:{query:Xy(i,p)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=dE(i,l.resumeToken):l.snapshotVersion.compareTo(bt.min())>0&&(d.readTime=km(i,l.snapshotVersion.toTimestamp())),d}(this.O,e);const r=function ev(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=Ep(this.O),t.removeTarget=e,this.fo(t)}}class _I extends Wc{constructor(e,t,r,i,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,d),this.O=l,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function pE(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let l=Or(r.updateTime?r.updateTime:i);return l.isEqual(bt.min())&&(l=Or(i)),new iE(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Or(e.commitTime);return this.listener.Vo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=Ep(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Cp(this.O,r))};this.fo(t)}}class jE extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=i,this.Co=!1}No(){if(this.Co)throw new Se(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.eo.Mr(e,t,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Se(pe.UNKNOWN,i.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.eo.Lr(e,t,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Se(pe.UNKNOWN,i.toString())})}terminate(){this.Co=!0}}class yI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(lr(t),this.Oo=!1):Fe("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class HE{constructor(e,t,r,i,l){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=l,this.jo.mr(p=>{r.enqueueAndForget((0,X.Z)(function*(){var _;Pu(d)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,X.Z)(function*(b){const A=Ge(b);A.Ko.add(4),yield Ml(A),A.Qo.set("Unknown"),A.Ko.delete(4),yield t_(A)}),function(b){return _.apply(this,arguments)})(d))}))}),this.Qo=new yI(r,i)}}function t_(n){return n_.apply(this,arguments)}function n_(){return n_=(0,X.Z)(function*(n){if(Pu(n))for(const e of n.Go)yield e(!0)}),n_.apply(this,arguments)}function Ml(n){return co.apply(this,arguments)}function co(){return co=(0,X.Z)(function*(n){for(const e of n.Go)yield e(!1)}),co.apply(this,arguments)}function r_(n,e){const t=Ge(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),i_(t)?Os(t):Wh(t).co()&&ho(t,e))}function Zp(n,e){const t=Ge(n),r=Wh(t);t.qo.delete(e),r.co()&&fo(t,e),0===t.qo.size&&(r.co()?r.ho():Pu(t)&&t.Qo.set("Unknown"))}function ho(n,e){n.Wo.Z(e.targetId),Wh(n).Ao(e)}function fo(n,e){n.Wo.Z(e),Wh(n).Ro(e)}function Os(n){n.Wo=new Zy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),Wh(n).start(),n.Qo.Mo()}function i_(n){return Pu(n)&&!Wh(n).oo()&&n.qo.size>0}function Pu(n){return 0===Ge(n).Ko.size}function $E(n){n.Wo=void 0}function vI(n){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,X.Z)(function*(n){n.qo.forEach((e,t)=>{ho(n,e)})}),Nv.apply(this,arguments)}function wI(n,e){return zp.apply(this,arguments)}function zp(){return zp=(0,X.Z)(function*(n,e){$E(n),i_(n)?(n.Qo.Bo(e),Os(n)):n.Qo.set("Unknown")}),zp.apply(this,arguments)}function Wp(n,e,t){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,X.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof Pm&&2===e.state&&e.cause)try{yield(r=(0,X.Z)(function*(i,l){const d=l.cause;for(const p of l.targetIds)i.qo.has(p)&&(yield i.remoteSyncer.rejectListen(p,d),i.qo.delete(p),i.Wo.removeTarget(p))}),function(i,l){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Kp(n,r)}else if(e instanceof Nm?n.Wo.ct(e):e instanceof wp?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(bt.min()))try{const r=yield PE(n.localStore);t.compareTo(r)>=0&&(yield function(i,l){const d=i.Wo.yt(l);return d.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const b=i.qo.get(_);b&&i.qo.set(_,b.withResumeToken(p.resumeToken,l))}}),d.targetMismatches.forEach(p=>{const _=i.qo.get(p);if(!_)return;i.qo.set(p,_.withResumeToken(vr.EMPTY_BYTE_STRING,_.snapshotVersion)),fo(i,p);const b=new Ps(_.target,p,1,_.sequenceNumber);ho(i,b)}),i.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield Kp(n,r)}var r}),Pv.apply(this,arguments)}function Kp(n,e,t){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,X.Z)(function*(n,e,t){if(!xu(e))throw e;n.Ko.add(1),yield Ml(n),n.Qo.set("Offline"),t||(t=()=>PE(n.localStore)),n.asyncQueue.enqueueRetryable((0,X.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield t_(n)}))}),Ov.apply(this,arguments)}function kv(n,e){return e().catch(t=>Kp(n,t,e))}function Kc(n){return zh.apply(this,arguments)}function zh(){return zh=(0,X.Z)(function*(n){const e=Ge(n),t=Rl(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;EI(e);)try{const i=yield wv(e.localStore,r);if(null===i){0===e.Uo.length&&t.ho();break}r=i.batchId,qE(e,i)}catch(i){yield Kp(e,i)}Fv(e)&&s_(e)}),zh.apply(this,arguments)}function EI(n){return Pu(n)&&n.Uo.length<10}function qE(n,e){n.Uo.push(e);const t=Rl(n);t.co()&&t.bo&&t.vo(e.mutations)}function Fv(n){return Pu(n)&&!Rl(n).oo()&&n.Uo.length>0}function s_(n){Rl(n).start()}function o_(n){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,X.Z)(function*(n){Rl(n).Do()}),Yp.apply(this,arguments)}function GE(n){return a_.apply(this,arguments)}function a_(){return a_=(0,X.Z)(function*(n){const e=Rl(n);for(const t of n.Uo)e.vo(t.mutations)}),a_.apply(this,arguments)}function ZE(n,e,t){return u_.apply(this,arguments)}function u_(){return u_=(0,X.Z)(function*(n,e,t){const r=n.Uo.shift(),i=sv.from(r,e,t);yield kv(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Kc(n)}),u_.apply(this,arguments)}function zE(n,e){return l_.apply(this,arguments)}function l_(){return l_=(0,X.Z)(function*(n,e){var t;e&&Rl(n).bo&&(yield(t=(0,X.Z)(function*(r,i){if($y(l=i.code)&&l!==pe.ABORTED){const d=r.Uo.shift();Rl(r).ao(),yield kv(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield Kc(r)}var l}),function(r,i){return t.apply(this,arguments)})(n,e)),Fv(n)&&s_(n)}),l_.apply(this,arguments)}function Lv(n,e){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,X.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Pu(t);t.Ko.add(3),yield Ml(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield t_(t)}),Uv.apply(this,arguments)}function Vv(n,e){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,X.Z)(function*(n,e){const t=Ge(n);e?(t.Ko.delete(2),yield t_(t)):e||(t.Ko.add(2),yield Ml(t),t.Qo.set("Unknown"))}),Bv.apply(this,arguments)}function Wh(n){return n.zo||(n.zo=function(e,t,r){const i=Ge(e);return i.No(),new mI(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:vI.bind(null,n),vr:wI.bind(null,n),To:Wp.bind(null,n)}),n.Go.push(function(){var e=(0,X.Z)(function*(t){t?(n.zo.ao(),i_(n)?Os(n):n.Qo.set("Unknown")):(yield n.zo.stop(),$E(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function Rl(n){return n.Ho||(n.Ho=function(e,t,r){const i=Ge(e);return i.No(),new _I(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:o_.bind(null,n),vr:zE.bind(null,n),So:GE.bind(null,n),Vo:ZE.bind(null,n)}),n.Go.push(function(){var e=(0,X.Z)(function*(t){t?(n.Ho.ao(),yield Kc(n)):(yield n.Ho.stop(),n.Uo.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class jv{constructor(e,t,r,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,i,l){const d=Date.now()+r,p=new jv(e,t,d,i,l);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kh(n,e){if(lr("AsyncQueue",`${e}: ${n}`),xu(n))return new Se(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Yh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=Gy(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new Yh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Yh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class WE{constructor(){this.Jo=new er(Xe.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):st():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class Qh{constructor(e,t,r,i,l,d,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new Qh(e,t,Yh.emptySet(t),l,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class bI{constructor(){this.Xo=void 0,this.listeners=[]}}class CI{constructor(){this.queries=new jh(e=>tE(e),bh),this.onlineState="Unknown",this.Zo=new Set}}function Hv(n,e){return $v.apply(this,arguments)}function $v(){return $v=(0,X.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1,l=t.queries.get(r);if(l||(i=!0,l=new bI),i)try{l.Xo=yield t.onListen(r)}catch(d){const p=Kh(d,`Initialization of query '${gp(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,l),l.listeners.push(e),e.tc(t.onlineState),l.Xo&&e.ec(l.Xo)&&c_(t)}),$v.apply(this,arguments)}function qv(n,e){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,X.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1;const l=t.queries.get(r);if(l){const d=l.listeners.indexOf(e);d>=0&&(l.listeners.splice(d,1),i=0===l.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Gv.apply(this,arguments)}function TI(n,e){const t=Ge(n);let r=!1;for(const i of e){const d=t.queries.get(i.query);if(d){for(const p of d.listeners)p.ec(i)&&(r=!0);d.Xo=i}}r&&c_(t)}function II(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const l of i.listeners)l.onError(t);r.queries.delete(e)}function c_(n){n.Zo.forEach(e=>{e.next()})}class d_{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Qh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=Qh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class KE{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class Zv{constructor(e){this.O=e}Gs(e){return $r(this.O,e)}js(e){return e.metadata.exists?Yy(this.O,e.document,!1):Cn.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return Or(e)}}class YE{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=zv(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new Zv(this.O);for(const i of e)if(i.metadata.queries){const l=r.Gs(i.metadata.name);for(const d of i.metadata.queries){const p=(t.get(d)||cn()).add(l);t.set(d,p)}}return t}complete(){var e=this;return(0,X.Z)(function*(){const t=yield function OE(n,e,t,r){return Hp.apply(this,arguments)}(e.localStore,new Zv(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const i of e.queries)yield kE(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new _v(Object.assign({},e.progress),t)})()}}function zv(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Wv{constructor(e){this.key=e}}class Kv{constructor(e){this.key=e}}class Yv{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=cn(),this.mutatedKeys=cn(),this.mc=Vy(e),this.gc=new Yh(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new WE,i=t?t.gc:this.gc;let l=t?t.mutatedKeys:this.mutatedKeys,d=i,p=!1;const _=Eh(this.query)&&i.size===this.query.limit?i.last():null,b=Cm(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,x)=>{const k=i.get(A),L=Uy(this.query,x)?x:null,H=!!k&&this.mutatedKeys.has(k.key),ue=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let be=!1;k&&L?k.data.isEqual(L.data)?H!==ue&&(r.track({type:3,doc:L}),be=!0):this.Tc(k,L)||(r.track({type:2,doc:L}),be=!0,(_&&this.mc(L,_)>0||b&&this.mc(L,b)<0)&&(p=!0)):!k&&L?(r.track({type:0,doc:L}),be=!0):k&&!L&&(r.track({type:1,doc:k}),be=!0,(_||b)&&(p=!0)),be&&(L?(d=d.add(L),l=ue?l.add(A):l.delete(A)):(d=d.delete(A),l=l.delete(A)))}),Eh(this.query)||Cm(this.query))for(;d.size>this.query.limit;){const A=Eh(this.query)?d.last():d.first();d=d.delete(A.key),l=l.delete(A.key),r.track({type:1,doc:A})}return{gc:d,Ec:r,ks:p,mutatedKeys:l}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const l=e.Ec.Yo();l.sort((b,A)=>function(x,k){const L=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return L(x)-L(k)}(b.type,A.type)||this.mc(b.doc,A.doc)),this.Ac(r);const d=t?this.Rc():[],p=0===this.wc.size&&this.current?1:0,_=p!==this._c;return this._c=p,0!==l.length||_?{snapshot:new Qh(this.query,e.gc,i,l,e.mutatedKeys,0===p,_,!1),Pc:d}:{Pc:d}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new WE,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=cn(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new Kv(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new Wv(r))}),t}vc(e){this.dc=e.Ks,this.wc=cn();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return Qh.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class QE{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class JE{constructor(e){this.key=e,this.Sc=!1}}class Yc{constructor(e,t,r,i,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Dc={},this.Cc=new jh(p=>tE(p),bh),this.Nc=new Map,this.xc=new Set,this.kc=new er(Xe.comparator),this.Oc=new Map,this.Mc=new $p,this.$c={},this.Fc=new Map,this.Bc=Nu.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function DI(n,e){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,X.Z)(function*(n,e){const t=b_(n);let r,i;const l=t.Cc.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),i=l.view.Vc();else{const d=yield Bp(t.localStore,ao(e));t.isPrimaryClient&&r_(t.remoteStore,d);const p=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield Nl(t,e,r,"current"===p)}return i}),Qv.apply(this,arguments)}function Nl(n,e,t,r){return XE.apply(this,arguments)}function XE(){return XE=(0,X.Z)(function*(n,e,t,r){n.Uc=(A,x,k)=>{return(L=(0,X.Z)(function*(H,ue,be,Be){let rt=ue.view.Ic(be);rt.ks&&(rt=yield qh(H.localStore,ue.query,!1).then(({documents:Ut})=>ue.view.Ic(Ut,rt)));const ct=Be&&Be.targetChanges.get(ue.targetId),Ze=ue.view.applyChanges(rt,H.isPrimaryClient,ct);return m_(H,ue.targetId,Ze.Pc),Ze.snapshot}),function(H,ue,be,Be){return L.apply(this,arguments)})(n,A,x,k);var L};const i=yield qh(n.localStore,e,!0),l=new Yv(e,i.Ks),d=l.Ic(i.documents),p=vp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=l.applyChanges(d,n.isPrimaryClient,p);m_(n,t,_.Pc);const b=new QE(e,t,l);return n.Cc.set(e,b),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),_.snapshot}),XE.apply(this,arguments)}function Jv(n,e){return eb.apply(this,arguments)}function eb(){return eb=(0,X.Z)(function*(n,e){const t=Ge(n),r=t.Cc.get(e),i=t.Nc.get(r.targetId);if(i.length>1)return t.Nc.set(r.targetId,i.filter(l=>!bh(l,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $h(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Zp(t.remoteStore,r.targetId),Xh(t,r.targetId)}).catch(Vh))):(Xh(t,r.targetId),yield $h(t.localStore,r.targetId,!0))}),eb.apply(this,arguments)}function h_(){return h_=(0,X.Z)(function*(n,e,t){const r=u0(n);try{const i=yield function(l,d){const p=Ge(l),_=Ln.now(),b=d.reduce((x,k)=>x.add(k.key),cn());let A;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>p.Us.Es(x,b).next(k=>{A=k;const L=[];for(const H of d){const ue=Rs(H,A.get(H.key));null!=ue&&L.push(new Sh(H.key,ue,up(ue.value.mapValue),cr.exists(!0)))}return p.gs.addMutationBatch(x,_,L,d)})).then(x=>(x.applyToLocalDocumentSet(A),{batchId:x.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,d,p){let _=l.$c[l.currentUser.toKey()];_||(_=new er(kt)),_=_.insert(d,p),l.$c[l.currentUser.toKey()]=_}(r,i.batchId,t),yield Ou(r,i.changes),yield Kc(r.remoteStore)}catch(i){const l=Kh(i,"Failed to persist write");t.reject(l)}}),h_.apply(this,arguments)}function AI(n,e){return _t.apply(this,arguments)}function _t(){return _t=(0,X.Z)(function*(n,e){const t=Ge(n);try{const r=yield Wm(t.localStore,e);e.targetChanges.forEach((i,l)=>{const d=t.Oc.get(l);d&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Sc=!0:i.modifiedDocuments.size>0?Ct(d.Sc):i.removedDocuments.size>0&&(Ct(d.Sc),d.Sc=!1))}),yield Ou(t,r,e)}catch(r){yield Vh(r)}}),_t.apply(this,arguments)}function nb(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Cc.forEach((l,d)=>{const p=d.view.tc(e);p.snapshot&&i.push(p.snapshot)}),function(l,d){const p=Ge(l);p.onlineState=d;let _=!1;p.queries.forEach((b,A)=>{for(const x of A.listeners)x.tc(d)&&(_=!0)}),_&&c_(p)}(r.eventManager,e),i.length&&r.Dc.To(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function SI(n,e,t){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,X.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oc.get(e),l=i&&i.key;if(l){let d=new er(Xe.comparator);d=d.insert(l,Cn.newNoDocument(l,bt.min()));const p=cn().add(l),_=new Bc(bt.min(),new Map,new Nn(kt),d,p);yield AI(r,_),r.kc=r.kc.remove(l),r.Oc.delete(e),__(r)}else yield $h(r.localStore,e,!1).then(()=>Xh(r,e,t)).catch(Vh)}),Xv.apply(this,arguments)}function f_(n,e){return e0.apply(this,arguments)}function e0(){return e0=(0,X.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield vv(t.localStore,e);t0(t,r,null),g_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ou(t,i)}catch(i){yield Vh(i)}}),e0.apply(this,arguments)}function p_(n,e,t){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,X.Z)(function*(n,e,t){const r=Ge(n);try{const i=yield function(l,d){const p=Ge(l);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return p.gs.lookupMutationBatch(_,d).next(A=>(Ct(null!==A),b=A.keys(),p.gs.removeMutationBatch(_,A))).next(()=>p.gs.performConsistencyCheck(_)).next(()=>p.Us.Es(_,b))})}(r.localStore,e);t0(r,e,t),g_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ou(r,i)}catch(i){yield Vh(i)}}),Jh.apply(this,arguments)}function rb(){return rb=(0,X.Z)(function*(n,e){const t=Ge(n);Pu(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=Ge(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>d.gs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Fc.get(r)||[];i.push(e),t.Fc.set(r,i)}catch(r){const i=Kh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),rb.apply(this,arguments)}function g_(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function t0(n,e,t){const r=Ge(n);let i=r.$c[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),r.$c[r.currentUser.toKey()]=i}}function Xh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||n0(n,r)})}function n0(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(Zp(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),__(n))}function m_(n,e,t){for(const r of t)r instanceof Wv?(n.Mc.addReference(r.key,e),ib(n,r)):r instanceof Kv?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||n0(n,r.key)):st()}function ib(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.xc.add(r),__(n))}function __(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new Xe(zt.fromString(e)),r=n.Bc.next();n.Oc.set(r,new JE(t)),n.kc=n.kc.insert(t,r),r_(n.remoteStore,new Ps(ao(Ms(t.path)),r,2,vi.A))}}function Ou(n,e,t){return r0.apply(this,arguments)}function r0(){return r0=(0,X.Z)(function*(n,e,t){const r=Ge(n),i=[],l=[],d=[];var p;r.Cc.isEmpty()||(r.Cc.forEach((p,_)=>{d.push(r.Uc(_,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b.fromCache?"not-current":"current"),i.push(b);const A=Lp.Ss(_.targetId,b);l.push(A)}}))}),yield Promise.all(d),r.Dc.To(i),yield(p=(0,X.Z)(function*(_,b){const A=Ge(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ye.forEach(b,k=>ye.forEach(k.vs,L=>A.persistence.referenceDelegate.addReference(x,k.targetId,L)).next(()=>ye.forEach(k.Vs,L=>A.persistence.referenceDelegate.removeReference(x,k.targetId,L)))))}catch(x){if(!xu(x))throw x;Fe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of b){const k=x.targetId;if(!x.fromCache){const L=A.Ms.get(k),ue=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);A.Ms=A.Ms.insert(k,ue)}}}),function(_,b){return p.apply(this,arguments)})(r.localStore,l))}),r0.apply(this,arguments)}function xI(n,e){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,X.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield yv(t.localStore,e);t.currentUser=e,(i=t).Fc.forEach(d=>{d.forEach(p=>{p.reject(new Se(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ou(t,r.qs)}var i}),Qc.apply(this,arguments)}function MI(n,e){const t=Ge(n),r=t.Oc.get(e);if(r&&r.Sc)return cn().add(r.key);{let i=cn();const l=t.Nc.get(e);if(!l)return i;for(const d of l){const p=t.Cc.get(d);i=i.unionWith(p.view.yc)}return i}}function RI(n,e){return s0.apply(this,arguments)}function s0(){return s0=(0,X.Z)(function*(n,e){const t=Ge(n),r=yield qh(t.localStore,e.query,!0),i=e.view.vc(r);return t.isPrimaryClient&&m_(t,e.targetId,i.Pc),i}),s0.apply(this,arguments)}function y_(n){return v_.apply(this,arguments)}function v_(){return v_=(0,X.Z)(function*(n){const e=Ge(n);return Ev(e.localStore).then(t=>Ou(e,t))}),v_.apply(this,arguments)}function sb(n,e,t,r){return w_.apply(this,arguments)}function w_(){return w_=(0,X.Z)(function*(n,e,t,r){const i=Ge(n),l=yield function(d,p){const _=Ge(d),b=Ge(_.gs);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.Ge(A,p).next(x=>x?_.Us.Es(A,x):ye.resolve(null)))}(i.localStore,e);var p;null!==l?("pending"===t?yield Kc(i.remoteStore):"acknowledged"===t||"rejected"===t?(t0(i,e,r||null),g_(i,e),p=e,Ge(Ge(i.localStore).gs).Qe(p)):st(),yield Ou(i,l)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),w_.apply(this,arguments)}function Jc(){return Jc=(0,X.Z)(function*(n,e){const t=Ge(n);if(b_(t),u0(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield ef(t,r.toArray());t.Lc=!0,yield Vv(t.remoteStore,!0);for(const l of i)r_(t.remoteStore,l)}else if(!1===e&&!1!==t.Lc){const r=[];let i=Promise.resolve();t.Nc.forEach((l,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(Xh(t,d),$h(t.localStore,d,!0))),Zp(t.remoteStore,d)}),yield i,yield ef(t,r),function(l){const d=Ge(l);d.Oc.forEach((p,_)=>{Zp(d.remoteStore,_)}),d.Mc.ii(),d.Oc=new Map,d.kc=new er(Xe.comparator)}(t),t.Lc=!1,yield Vv(t.remoteStore,!1)}}),Jc.apply(this,arguments)}function ef(n,e,t){return o0.apply(this,arguments)}function o0(){return o0=(0,X.Z)(function*(n,e,t){const r=Ge(n),i=[],l=[];for(const d of e){let p;const _=r.Nc.get(d);if(_&&0!==_.length){p=yield Bp(r.localStore,ao(_[0]));for(const b of _){const A=r.Cc.get(b),x=yield RI(r,A);x.snapshot&&l.push(x.snapshot)}}else{const b=yield Km(r.localStore,d);p=yield Bp(r.localStore,b),yield Nl(r,ob(b),d,!1)}i.push(p)}return r.Dc.To(l),i}),o0.apply(this,arguments)}function ob(n){return VT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function PI(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).ds()}function ab(n,e,t,r){return E_.apply(this,arguments)}function E_(){return E_=(0,X.Z)(function*(n,e,t,r){const i=Ge(n);if(i.Lc)Fe("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(e))switch(t){case"current":case"not-current":{const l=yield Ev(i.localStore),d=Bc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ou(i,l,d);break}case"rejected":yield $h(i.localStore,e,!0),Xh(i,e,r);break;default:st()}}),E_.apply(this,arguments)}function ub(n,e,t){return a0.apply(this,arguments)}function a0(){return a0=(0,X.Z)(function*(n,e,t){const r=b_(n);if(r.Lc){for(const i of e){if(r.Nc.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const l=yield Km(r.localStore,i),d=yield Bp(r.localStore,l);yield Nl(r,ob(l),d.targetId,!1),r_(r.remoteStore,d)}for(const i of t)r.Nc.has(i)&&(yield $h(r.localStore,i,!1).then(()=>{Zp(r.remoteStore,i),Xh(r,i)}).catch(Vh))}}),a0.apply(this,arguments)}function b_(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SI.bind(null,e),e.Dc.To=TI.bind(null,e.eventManager),e.Dc.qc=II.bind(null,e.eventManager),e}function u0(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p_.bind(null,e),e}class kI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,X.Z)(function*(){t.O=Zh(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return Hh(this.persistence,new NE,e.initialUser,this.O)}jc(e){return new Iv(Qm.bi,this.O)}Gc(e){return new Mv}terminate(){var e=this;return(0,X.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class FI extends kI{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,X.Z)(function*(){yield t().call(r,e),yield function bv(n){return Ym.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield u0(r.zc.syncEngine),yield Kc(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return Hh(this.persistence,new NE,e.initialUser,this.O)}Qc(e){return new oI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=zm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new Zm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Rv(),Xm(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new Mv}}class kS extends FI{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,X.Z)(function*(){yield t().call(r,e);const i=r.zc.syncEngine;r.sharedClientState instanceof xv&&(r.sharedClientState.syncEngine={hr:sb.bind(null,i),lr:ab.bind(null,i),dr:ub.bind(null,i),ds:PI.bind(null,i),ar:y_.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var l=(0,X.Z)(function*(d){yield function NI(n,e){return Jc.apply(this,arguments)}(r.zc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}Gc(e){const t=Rv();if(!xv.Vt(t))throw new Se(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class lb{initialize(e,t){var r=this;return(0,X.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>nb(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=xI.bind(null,r.syncEngine),yield Vv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new CI}createDatastore(e){const t=Zh(e.databaseInfo.databaseId),r=new gI(e.databaseInfo);return new jE(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,l=p=>nb(this.syncEngine,p,0),d=Er.Vt()?new Er:new fI,new HE(t,r,i,l,d);var t,r,i,l,d}createSyncEngine(e,t){return function(r,i,l,d,p,_,b){const A=new Yc(r,i,l,d,p,_);return b&&(A.Lc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,X.Z)(function*(t){const r=Ge(t);Fe("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield Ml(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function l0(n,e=10240){let t=0;return{read:()=>(0,X.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,X.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Xc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class LI{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new Pr,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,X.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,X.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,X.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),i=Number(r);isNaN(i)&&e.eu(`length string (${r}) is not valid number`);const l=yield e.nu(i);return new KE(JSON.parse(l),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,X.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,X.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,X.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class UI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,X.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,X.Z)(function*(l,d){const p=Ge(l),_=Ep(p.O)+"/documents",b={documents:d.map(L=>Mh(p.O,L))},A=yield p.Lr("BatchGetDocuments",_,b),x=new Map;A.forEach(L=>{const H=function Qy(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=$r(t,r.found.name),l=Or(r.found.updateTime),d=new Ri({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(i,l,d)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=$r(t,r.missing),l=Or(r.readTime);return Cn.newNoDocument(i,l)}(n,e):st()}(p.O,L);x.set(H.key.toString(),H)});const k=[];return d.forEach(L=>{const H=x.get(L.toString());Ct(!!H),k.push(H)}),k}),function(l,d){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,X.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const l=Xe.fromPath(i);e.mutations.push(new xm(l,e.precondition(l)))}),yield(r=(0,X.Z)(function*(i,l){const d=Ge(i),p=Ep(d.O)+"/documents",_={writes:l.map(b=>Cp(d.O,b))};yield d.Mr("Commit",p,_)}),function(i,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?cr.updateTime(t):cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Se(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cr.updateTime(t)}return cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class cb{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new e_(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,X.Z)(function*(){const t=new UI(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(l=>{e.uu(l)}))}).catch(i=>{e.uu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!bl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!$y(t)}return!1}}class Qp{constructor(e,t,r,i){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Nr.UNAUTHENTICATED,this.clientId=My.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,X.Z)(function*(p){Fe("FirestoreClient","Received user=",p.uid),yield l.authCredentialListener(p),l.user=p});return function(p){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Fe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,X.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,X.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Kh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function db(n,e){return c0.apply(this,arguments)}function c0(){return c0=(0,X.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,X.Z)(function*(l){r.isEqual(l)||(yield yv(e.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),c0.apply(this,arguments)}function hb(n,e){return d0.apply(this,arguments)}function d0(){return d0=(0,X.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield h0(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Lv(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>Lv(e.remoteStore,l)),n.onlineComponents=e}),d0.apply(this,arguments)}function h0(n){return C_.apply(this,arguments)}function C_(){return C_=(0,X.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield db(n,new kI)),n.offlineComponents}),C_.apply(this,arguments)}function T_(n){return f0.apply(this,arguments)}function f0(){return f0=(0,X.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield hb(n,new lb)),n.onlineComponents}),f0.apply(this,arguments)}function ed(n){return h0(n).then(e=>e.persistence)}function p0(n){return h0(n).then(e=>e.localStore)}function g0(n){return T_(n).then(e=>e.remoteStore)}function m0(n){return T_(n).then(e=>e.syncEngine)}function td(n){return _0.apply(this,arguments)}function _0(){return _0=(0,X.Z)(function*(n){const e=yield T_(n),t=e.eventManager;return t.onListen=DI.bind(null,e.syncEngine),t.onUnlisten=Jv.bind(null,e.syncEngine),t}),_0.apply(this,arguments)}function pb(n,e,t={}){const r=new Pr;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return function(i,l,d,p,_){const b=new Xc({next:x=>{l.enqueueAndForget(()=>qv(i,A));const k=x.docs.has(d);!k&&x.fromCache?_.reject(new Se(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&x.fromCache&&p&&"server"===p.source?_.reject(new Se(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new d_(Ms(d.path),b,{includeMetadataChanges:!0,uc:!0});return Hv(i,A)}(yield td(n),n.asyncQueue,e,t,r)})),r.promise}function v0(n,e,t={}){const r=new Pr;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return function(i,l,d,p,_){const b=new Xc({next:x=>{l.enqueueAndForget(()=>qv(i,A)),x.fromCache&&"server"===p.source?_.reject(new Se(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new d_(d,b,{includeMetadataChanges:!0,uc:!0});return Hv(i,A)}(yield td(n),n.asyncQueue,e,t,r)})),r.promise}const mb=new Map;function I_(n,e,t){if(!t)throw new Se(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _b(n,e,t,r){if(!0===e&&!0===r)throw new Se(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yb(n){if(!Xe.isDocumentKey(n))throw new Se(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vb(n){if(Xe.isDocumentKey(n))throw new Se(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function D_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function Ht(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=D_(n);throw new Se(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wb(n,e){if(e<=0)throw new Se(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Eb{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,_b("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jp{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eb({}),this._settingsFrozen=!1,e instanceof Pc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Se(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pc(i.options.projectId)}(e))}get app(){if(!this._app)throw new Se(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eb(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new xT;switch(t.type){case"gapi":const r=t.client;return Ct(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Zw(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Se(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mb.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),mb.delete(e),t.terminate())}(this),Promise.resolve()}}class In{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bi(this.firestore,e,this._query)}}class Na extends bi{constructor(e,t,r){super(e,t,Ms(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new Xe(e))}withConverter(e){return new Na(this.firestore,e,this._path)}}function E0(n,e,...t){if(n=(0,ze.m9)(n),I_("collection","path",e),n instanceof Jp){const r=zt.fromString(e,...t);return vb(r),new Na(n,null,r)}{if(!(n instanceof In||n instanceof Na))throw new Se(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return vb(r),new Na(n.firestore,null,r)}}function A_(n,e,...t){if(n=(0,ze.m9)(n),1===arguments.length&&(e=My.R()),I_("doc","path",e),n instanceof Jp){const r=zt.fromString(e,...t);return yb(r),new In(n,null,new Xe(r))}{if(!(n instanceof In||n instanceof Na))throw new Se(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return yb(r),new In(n.firestore,n instanceof Na?n.converter:null,new Xe(r))}}function Cb(n,e){return n=(0,ze.m9)(n),e=(0,ze.m9)(e),(n instanceof In||n instanceof Na)&&(e instanceof In||e instanceof Na)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function S_(n,e){return n=(0,ze.m9)(n),e=(0,ze.m9)(e),n instanceof bi&&e instanceof bi&&n.firestore===e.firestore&&bh(n._query,e._query)&&n.converter===e.converter}class b0{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new e_(this,"async_queue_retry"),this.yu=()=>{const t=Xm();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=Xm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=Xm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new Pr;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,X.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!xu(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,lr("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const i=jv.createAndSchedule(this,e,t,r,l=>this.Tu(l));return this.du.push(i),i}pu(){this._u&&st()}verifyOperationInProgress(){}Au(){var e=this;return(0,X.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function x_(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class C0{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Un extends Jp{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new b0,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Ib(this),this._firestoreClient.terminate()}}function fr(n){return n._firestoreClient||Ib(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Ib(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new OT(n._databaseId,l,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var l,p;n._firestoreClient=new Qp(n._authCredentials,n._appCheckCredentials,n._queue,r)}function T0(n,e,t){const r=new Pr;return n.asyncQueue.enqueue((0,X.Z)(function*(){try{yield db(n,t),yield hb(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(l=i).name?l.code===pe.FAILED_PRECONDITION||l.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var l})).then(()=>r.promise)}function KI(n){if(n._initialized||n._terminated)throw new Se(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oa(vr.fromBase64String(e))}catch(t){throw new Se(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Oa(vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class nd{constructor(e){this._methodName=e}}class M_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}const Ab=/^__.*__$/;class Sb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Sh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sm(e,this.data,t,this.fieldTransforms)}}class R_{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ng(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class Pl{constructor(e,t,r,i,l,d){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=i,void 0===l&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new Pl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.Nu(e),i}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return M0(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(ng(this.Vu)&&Ab.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class YI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||Zh(e)}Fu(e,t,r,i=!1){return new Pl({Vu:e,methodName:t,$u:r,path:ii.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function Ol(n){const e=n._freezeSettings(),t=Zh(n._databaseId);return new YI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rg(n,e,t,r,i,l={}){const d=n.Fu(l.merge||l.mergeFields?2:0,e,t,i);N_("Data must be an object, but it was:",d,r);const p=id(r,d);let _,b;if(l.merge)_=new Rc(d.fieldMask),b=d.fieldTransforms;else if(l.mergeFields){const A=[];for(const x of l.mergeFields){const k=x0(e,x,t);if(!d.contains(k))throw new Se(pe.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);R0(A,k)||A.push(k)}_=new Rc(A),b=d.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,b=d.fieldTransforms;return new Sb(new Ri(p),_,b)}class ig extends nd{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ig}}function xb(n,e,t){return new Pl({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class I0 extends nd{_toFieldTransform(e){return new Ah(e.path,new Dh)}isEqual(e){return e instanceof I0}}class D0 extends nd{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=xb(this,e,!0),r=this.Bu.map(l=>kl(l,t)),i=new Dl(r);return new Ah(e.path,i)}isEqual(e){return this===e}}class QI extends nd{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=xb(this,e,!0),r=this.Bu.map(l=>kl(l,t)),i=new Du(r);return new Ah(e.path,i)}isEqual(e){return this===e}}class VS extends nd{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Uc(e.O,Fc(e.O,this.Lu));return new Ah(e.path,t)}isEqual(e){return this===e}}function A0(n,e,t,r){const i=n.Fu(1,e,t);N_("Data must be an object, but it was:",i,r);const l=[],d=Ri.empty();Mc(r,(_,b)=>{const A=sg(e,_,t);b=(0,ze.m9)(b);const x=i.xu(A);if(b instanceof ig)l.push(A);else{const k=kl(b,x);null!=k&&(l.push(A),d.set(A,k))}});const p=new Rc(l);return new R_(d,p,i.fieldTransforms)}function S0(n,e,t,r,i,l){const d=n.Fu(1,e,t),p=[x0(e,r,t)],_=[i];if(l.length%2!=0)throw new Se(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<l.length;k+=2)p.push(x0(e,l[k])),_.push(l[k+1]);const b=[],A=Ri.empty();for(let k=p.length-1;k>=0;--k)if(!R0(b,p[k])){const L=p[k];let H=_[k];H=(0,ze.m9)(H);const ue=d.xu(L);if(H instanceof ig)b.push(L);else{const be=kl(H,ue);null!=be&&(b.push(L),A.set(L,be))}}const x=new Rc(b);return new R_(A,x,d.fieldTransforms)}function rd(n,e,t,r=!1){return kl(t,n.Fu(r?4:3,e))}function kl(n,e){if(JI(n=(0,ze.m9)(n)))return N_("Unsupported field value:",e,n),id(n,e);if(n instanceof nd)return function(t,r){if(!ng(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const i=[];let l=0;for(const d of t){let p=kl(d,r.ku(l));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),l++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,ze.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Fc(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ln.fromDate(t);return{timestampValue:km(r.O,i)}}if(t instanceof Ln){const i=new Ln(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:km(r.O,i)}}if(t instanceof M_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Oa)return{bytesValue:dE(r.O,t._byteString)};if(t instanceof In){const i=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(i))throw r.Ou(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${D_(t)}`)}(n,e)}function id(n,e){const t={};return zw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mc(n,(r,i)=>{const l=kl(i,e.Du(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function JI(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof M_||n instanceof Oa||n instanceof In||n instanceof nd)}function N_(n,e,t){if(!JI(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=D_(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function x0(n,e,t){if((e=(0,ze.m9)(e))instanceof Pa)return e._internalPath;if("string"==typeof e)return sg(n,e);throw M0("Field path arguments must be of type string or ",n,!1,void 0,t)}const BS=new RegExp("[~\\*/\\[\\]]");function sg(n,e,t){if(e.search(BS)>=0)throw M0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pa(...e.split("."))._internalPath}catch(r){throw M0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function M0(n,e,t,r,i){const l=r&&!r.isEmpty(),d=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(l||d)&&(_+=" (found",l&&(_+=` in field ${r}`),d&&(_+=` in document ${i}`),_+=")"),new Se(pe.INVALID_ARGUMENT,p+n+_)}function R0(n,e){return n.some(t=>t.isEqual(e))}class sd{constructor(e,t,r,i,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new XI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(P_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class XI extends sd{data(){return super.data()}}function P_(n,e){return"string"==typeof e?sg(n,e):e instanceof Pa?e._internalPath:e._delegate._internalPath}class od{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ku extends sd{constructor(e,t,r,i,l,d){super(e,t,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new og(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(P_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class og extends ku{data(e={}){return super.data(e)}}class Fl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new od(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new og(this._firestore,this._userDataWriter,r.key,r,new od(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new og(r._firestore,r._userDataWriter,d.doc.key,d.doc,new od(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const p=new og(r._firestore,r._userDataWriter,d.doc.key,d.doc,new od(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==d.type&&(_=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),b=l.indexOf(d.doc.key)),{type:eD(d.type),doc:p,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function eD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function Mb(n,e){return n instanceof ku&&e instanceof ku?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Fl&&e instanceof Fl&&n._firestore===e._firestore&&S_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Rb(n){if(Cm(n)&&0===n.explicitOrderBy.length)throw new Se(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ag{}function po(n,...e){for(const t of e)n=t._apply(n);return n}class Nb extends ag{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=Ol(e.firestore),r=function(i,l,d,p,_,b,A){let x;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Se(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){$o(A,b);const L=[];for(const H of A)L.push(O_(p,i,H));x={arrayValue:{values:L}}}else x=O_(p,i,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||$o(A,b),x=rd(d,"where",A,"in"===b||"not-in"===b);const k=Ni.create(_,b,x);return function(L,H){if(H.S()){const be=pp(L);if(null!==be&&!be.isEqual(H.field))throw new Se(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${be.toString()}' and '${H.field.toString()}'`);const Be=Tm(L);null!==Be&&Vb(0,H.field,Be)}const ue=function(be,Be){for(const rt of be.filters)if(Be.indexOf(rt.op)>=0)return rt.op;return null}(L,function(be){switch(be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(H.op));if(null!==ue)throw new Se(pe.INVALID_ARGUMENT,ue===H.op?`Invalid query. You cannot use more than one '${H.op.toString()}' filter.`:`Invalid query. You cannot use '${H.op.toString()}' filters with '${ue.toString()}' filters.`)}(i,k),k}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new bi(e.firestore,e.converter,function(i,l){const d=i.filters.concat([l]);return new Tl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class Ob extends ag{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,i,l){if(null!==r.startAt)throw new Se(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Se(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new fp(i,l);return function(p,_){if(null===Tm(p)){const b=pp(p);null!==b&&Vb(0,b,_.field)}}(r,d),d}(e._query,this.Uu,this.Gu);return new bi(e.firestore,e.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new Tl(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class N0 extends ag{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new bi(e.firestore,e.converter,Iu(e._query,this.ju,this.Qu))}}class P0 extends ag{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=Ub(e,this.type,this.Wu,this.zu);return new bi(e.firestore,e.converter,(i=t,new Tl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Lb extends ag{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=Ub(e,this.type,this.Wu,this.zu);return new bi(e.firestore,e.converter,(i=t,new Tl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Ub(n,e,t,r){if(t[0]=(0,ze.m9)(t[0]),t[0]instanceof sd)return function(i,l,d,p,_){if(!p)throw new Se(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const A of Il(i))if(A.field.isKeyField())b.push(_h(l,p.key));else{const x=p.data.field(A.field);if(Em(x))throw new Se(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const k=A.field.canonicalString();throw new Se(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}b.push(x)}return new hp(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Ol(n.firestore);return function(l,d,p,_,b,A){const x=l.explicitOrderBy;if(b.length>x.length)throw new Se(pe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let L=0;L<b.length;L++){const H=b[L];if(x[L].field.isKeyField()){if("string"!=typeof H)throw new Se(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof H}`);if(!Im(l)&&-1!==H.indexOf("/"))throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${H}' contains a slash.`);const ue=l.path.child(zt.fromString(H));if(!Xe.isDocumentKey(ue))throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const be=new Xe(ue);k.push(_h(d,be))}else{const ue=rd(p,_,H);k.push(ue)}}return new hp(k,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function O_(n,e,t){if("string"==typeof(t=(0,ze.m9)(t))){if(""===t)throw new Se(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Im(e)&&-1!==t.indexOf("/"))throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(zt.fromString(t));if(!Xe.isDocumentKey(r))throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _h(n,new Xe(r))}if(t instanceof In)return _h(n,t._key);throw new Se(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${D_(t)}.`)}function $o(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Se(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Vb(n,e,t){if(!t.isEqual(e))throw new Se(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class lg{convertValue(e,t="none"){switch(Cl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Mc(e.fields,(i,l)=>{r[i]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new M_(nn(e.latitude),nn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Kw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(op(e));default:return null}}convertTimestamp(e){const t=El(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=zt.fromString(e);Ct(yE(r));const i=new Pc(r.get(1),r.get(3)),l=new Xe(r.popFirst(5));return i.isEqual(t)||lr(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Ll(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class sD extends lg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}class Bb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ol(e)}set(e,t,r){this._verifyNotCommitted();const i=Ul(e,this._firestore),l=Ll(i.converter,t,r),d=rg(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,cr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const l=Ul(e,this._firestore);let d;return d="string"==typeof(t=(0,ze.m9)(t))||t instanceof Pa?S0(this._dataReader,"WriteBatch.update",l._key,t,r,i):A0(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ul(e,this._firestore);return this._mutations=this._mutations.concat(new Vc(t._key,cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ul(n,e){if((n=(0,ze.m9)(n)).firestore!==e)throw new Se(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ka extends lg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}function k0(n,e,t){n=Ht(n,In);const r=Ht(n.firestore,Un),i=Ll(n.converter,e,t);return ad(r,[rg(Ol(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,cr.none())])}function $b(n,e,t,...r){n=Ht(n,In);const i=Ht(n.firestore,Un),l=Ol(i);let d;return d="string"==typeof(e=(0,ze.m9)(e))||e instanceof Pa?S0(l,"updateDoc",n._key,e,t,r):A0(l,"updateDoc",n._key,e),ad(i,[d.toMutation(n._key,cr.exists(!0))])}function F_(n,...e){var t,r,i;n=(0,ze.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||x_(e[d])||(l=e[d],d++);const p={includeMetadataChanges:l.includeMetadataChanges};if(x_(e[d])){const x=e[d];e[d]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[d+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[d+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let _,b,A;if(n instanceof In)b=Ht(n.firestore,Un),A=Ms(n._key.path),_={next:x=>{e[d]&&e[d](cg(b,n,x))},error:e[d+1],complete:e[d+2]};else{const x=Ht(n,bi);b=Ht(x.firestore,Un),A=x._query;const k=new ka(b);_={next:L=>{e[d]&&e[d](new Fl(b,k,x,L))},error:e[d+1],complete:e[d+2]},Rb(n._query)}return function(x,k,L,H){const ue=new Xc(H),be=new d_(k,ue,L);return x.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return Hv(yield td(x),be)})),()=>{ue.Jc(),x.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return qv(yield td(x),be)}))}}(fr(b),A,p,_)}function ad(n,e){return function(t,r){const i=new Pr;return t.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return function tb(n,e,t){return h_.apply(this,arguments)}(yield m0(t),r,i)})),i.promise}(fr(n),e)}function cg(n,e,t){const r=t.docs.get(e._key),i=new ka(n);return new ku(n,i,e._key,r,new od(t.hasPendingWrites,t.fromCache),e.converter)}class L0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ol(e)}get(e){const t=Ul(e,this._firestore),r=new sD(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const l=i[0];if(l.isFoundDocument())return new sd(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new sd(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=Ul(e,this._firestore),l=Ll(i.converter,t,r),d=rg(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(e,t,r,...i){const l=Ul(e,this._firestore);let d;return d="string"==typeof(t=(0,ze.m9)(t))||t instanceof Pa?S0(this._dataReader,"Transaction.update",l._key,t,r,i):A0(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,d),this}delete(e){const t=Ul(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ul(e,this._firestore),r=new ka(this._firestore);return super.get(e).then(i=>new ku(this._firestore,r,t._key,i._document,new od(!1,!1),t.converter))}}function U0(...n){return new D0("arrayUnion",n)}function dg(...n){return new QI("arrayRemove",n)}!function(n,e=!0){Aa=Hr.SDK_VERSION,(0,Hr._registerComponent)(new gi.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),l=new Un(i,new MT(t.getProvider("auth-internal")),new xy(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,Hr.registerVersion)(Ac,"3.4.5",n),(0,Hr.registerVersion)(Ac,"3.4.5","esm2017")}();var j0=O(4986),ns=O(8306),Hn=O(5813),hg=O(8189);function L_(...n){return function pD(){return(0,hg.J)(1)}()((0,Dt.D)(n,(0,Qs.yG)(n)))}var ki=O(4482);function Zr(...n){const e=(0,Qs.yG)(n);return(0,ki.e)((t,r)=>{(e?L_(n,t,e):L_(n,t)).subscribe(r)})}var br=O(5403);function H0(){return(0,ki.e)((n,e)=>{let t,r=!1;n.subscribe((0,br.x)(e,i=>{const l=t;t=i,r&&e.next([l,i]),r=!0}))})}var xt=O(4004);function HS(n,e,t,r,i){return(l,d)=>{let p=t,_=e,b=0;l.subscribe((0,br.x)(d,A=>{const x=b++;_=p?n(_,A,x):(p=!0,A),r&&d.next(_)},i&&(()=>{p&&d.next(_),d.complete()})))}}function Fu(n,e){return(0,ki.e)(HS(n,e,arguments.length>=2,!0))}var fg=O(4671);function gD(n,e){return n===e}function qo(n,e){return(0,ki.e)((t,r)=>{let i=0;t.subscribe((0,br.x)(r,l=>n.call(e,l,i++)&&r.next(l)))})}var Fi=O(2011),U_=(O(3059),O(3942));function tf(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function V_(){if("undefined"==typeof Uint8Array)throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function mD(){if(!function NT(){return"undefined"!=typeof atob}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}class nf{constructor(e){this._delegate=e}static fromBase64String(e){return mD(),new nf(Oa.fromBase64String(e))}static fromUint8Array(e){return V_(),new nf(Oa.fromUint8Array(e))}toBase64(){return mD(),this._delegate.toBase64()}toUint8Array(){return V_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function q0(n){return function Zb(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class B_{enableIndexedDbPersistence(e,t){return function Db(n,e){KI(n=Ht(n,Un));const t=fr(n),r=n._freezeSettings(),i=new lb;return T0(t,i,new FI(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function GI(n){KI(n=Ht(n,Un));const e=fr(n),t=n._freezeSettings(),r=new lb;return T0(e,r,new kS(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function LS(n){if(n._initialized&&!n._terminated)throw new Se(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Pr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,X.Z)(function*(){try{yield(t=(0,X.Z)(function*(r){if(!Bo.Vt())return Promise.resolve();const i=r+"main";yield Bo.delete(i)}),function(r){return t.apply(this,arguments)})(zm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class G0{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Sc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function bb(n,e,t,r={}){var i;const l=(n=Ht(n,Jp))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Sc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,p;if("string"==typeof r.mockUserToken)d=r.mockUserToken,p=Nr.MOCK_USER;else{d=(0,ze.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Se(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Nr(_)}n._authCredentials=new ym(new Ay(d,p))}}(this._delegate,e,t,r)}enableNetwork(){return function Xp(n){return function fb(n){return n.asyncQueue.enqueue((0,X.Z)(function*(){const e=yield ed(n),t=yield g0(n);return e.setNetworkEnabled(!0),function(r){const i=Ge(r);return i.Ko.delete(0),t_(i)}(t)}))}(fr(n=Ht(n,Un)))}(this._delegate)}disableNetwork(){return function zI(n){return function VI(n){return n.asyncQueue.enqueue((0,X.Z)(function*(){const e=yield ed(n),t=yield g0(n);return e.setNetworkEnabled(!1),(r=(0,X.Z)(function*(i){const l=Ge(i);l.Ko.add(0),yield Ml(l),l.Qo.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(fr(n=Ht(n,Un)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_b("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ZI(n){return function(e){const t=new Pr;return e.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return function nr(n,e){return rb.apply(this,arguments)}(yield m0(e),t)})),t.promise}(fr(n=Ht(n,Un)))}(this._delegate)}onSnapshotsInSync(e){return function F0(n,e){return function BI(n,e){const t=new Xc(e);return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return r=yield td(n),i=t,Ge(r).Zo.add(i),void i.next();var r,i})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return r=yield td(n),i=t,void Ge(r).Zo.delete(i);var r,i}))}}(fr(n=Ht(n,Un)),x_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new af(this,E0(this._delegate,e))}catch(t){throw Ci(t,"collection()","Firestore.collection()")}}doc(e){try{return new go(this,A_(this._delegate,e))}catch(t){throw Ci(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Li(this,function $I(n,e){if(n=Ht(n,Jp),I_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bi(n,null,(t=e,new Tl(zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ci(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function lD(n,e){return function jI(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){const r=yield(i=n,T_(i).then(l=>l.datastore));var i;new cb(n.asyncQueue,r,e,t).run()})),t.promise}(fr(n=Ht(n,Un)),t=>e(new L0(n,t)))}(this._delegate,t=>e(new H_(this,t)))}batch(){return fr(this._delegate),new _D(new Bb(this._delegate,e=>ad(this._delegate,e)))}loadBundle(e){return function tg(n,e){const t=fr(n=Ht(n,Un)),r=new C0;return function HI(n,e,t,r){const i=function(l,d){let p;return p="string"==typeof l?(new TextEncoder).encode(l):l,_=function(_,b){if(_ instanceof Uint8Array)return l0(_,b);if(_ instanceof ArrayBuffer)return l0(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new LI(_,d);var _}(t,Zh(e));n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){!function OI(n,e,t){const r=Ge(n);var i;(i=(0,X.Z)(function*(l,d,p){try{const _=yield d.getMetadata();if(yield function(k,L){const H=Ge(k),ue=Or(L.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",be=>H.Kn.getBundleMetadata(be,L.id)).then(be=>!!be&&be.createTime.compareTo(ue)>=0)}(l.localStore,_))return yield d.close(),void p._completeWith((k=_,{taskState:"Success",documentsLoaded:k.totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}));p._updateProgress(zv(_));const b=new YE(_,l.localStore,d.O);let A=yield d.Kc();for(;A;){const k=yield b.lc(A);k&&p._updateProgress(k),A=yield d.Kc()}const x=yield b.complete();yield Ou(l,x.ws,void 0),yield function(k,L){const H=Ge(k);return H.persistence.runTransaction("Save bundle","readwrite",ue=>H.Kn.saveBundleMetadata(ue,L))}(l.localStore,_),p._completeWith(x.progress)}catch(_){Sc("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_)}var k}),function(l,d,p){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield m0(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function WI(n,e){return function w0(n,e){return n.asyncQueue.enqueue((0,X.Z)(function*(){return function(t,r){const i=Ge(t);return i.persistence.runTransaction("Get named query","readonly",l=>i.Kn.getNamedQuery(l,r))}(yield p0(n),e)}))}(fr(n=Ht(n,Un)),e).then(t=>t?new bi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Li(this,t):null)}}class j_ extends lg{constructor(e){super(),this.firestore=e}convertBytes(e){return new nf(new Oa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return go.forKey(t,this.firestore,null)}}class H_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new j_(e)}get(e){const t=Vl(e);return this._delegate.get(t).then(r=>new rf(this._firestore,new ku(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Vl(e);return r?(tf("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=Vl(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=Vl(e);return this._delegate.delete(t),this}}class _D{constructor(e){this._delegate=e}set(e,t,r){const i=Vl(e);return r?(tf("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=Vl(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=Vl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ud{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new og(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sf(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ud.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let l=i.get(t);return l||(l=new ud(e,new j_(e),t),i.set(t,l)),l}}ud.INSTANCES=new WeakMap;class go{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new j_(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new go(t,new In(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new go(t,new In(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new af(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new af(this.firestore,E0(this._delegate,e))}catch(t){throw Ci(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ze.m9)(e))instanceof In&&Cb(this._delegate,e)}set(e,t){t=tf("DocumentReference.set",t);try{return t?k0(this._delegate,e,t):k0(this._delegate,e)}catch(r){throw Ci(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$b(this._delegate,e):$b(this._delegate,e,t,...r)}catch(i){throw Ci(i,"updateDoc()","DocumentReference.update()")}}delete(){return function uD(n){return ad(Ht(n.firestore,Un),[new Vc(n._key,cr.none())])}(this._delegate)}onSnapshot(...e){const t=z0(e),r=zb(e,i=>new rf(this.firestore,new ku(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return F_(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function oD(n){n=Ht(n,In);const e=Ht(n.firestore,Un),t=fr(e),r=new ka(e);return function y0(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return(r=(0,X.Z)(function*(i,l,d){try{const p=yield function(_,b){const A=Ge(_);return A.persistence.runTransaction("read document","readonly",x=>A.Us.ys(x,b))}(i,l);p.isFoundDocument()?d.resolve(p):p.isNoDocument()?d.resolve(null):d.reject(new Se(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Kh(p,`Failed to get document '${l} from cache`);d.reject(_)}}),function(i,l,d){return r.apply(this,arguments)})(yield p0(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ku(e,r,n._key,i,new od(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function aD(n){n=Ht(n,In);const e=Ht(n.firestore,Un);return pb(fr(e),n._key,{source:"server"}).then(t=>cg(e,n,t))}(this._delegate):function k_(n){n=Ht(n,In);const e=Ht(n.firestore,Un);return pb(fr(e),n._key).then(t=>cg(e,n,t))}(this._delegate),t.then(r=>new rf(this.firestore,new ku(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new go(this.firestore,this._delegate.withConverter(e?ud.getInstance(this.firestore,e):null))}}function Ci(n,e,t){return n.message=n.message.replace(e,t),n}function z0(n){for(const e of n)if("object"==typeof e&&!q0(e))return e;return{}}function zb(n,e){var t,r;let i;return i=q0(n[0])?n[0]:q0(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(e(l))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class rf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new go(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Mb(this._delegate,e._delegate)}}class sf extends rf{data(e){const t=this._delegate.data(e);return function ST(n,e){n||st()}(void 0!==t),t}}class Li{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new j_(e)}where(e,t,r){try{return new Li(this.firestore,po(this._delegate,function Pb(n,e,t){const r=e,i=P_("where",n);return new Nb(i,r,t)}(e,t,r)))}catch(i){throw Ci(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Li(this.firestore,po(this._delegate,function kb(n,e="asc"){const t=e,r=P_("orderBy",n);return new Ob(r,t)}(e,t)))}catch(r){throw Ci(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Li(this.firestore,po(this._delegate,function Fb(n){return wb("limit",n),new N0("limit",n,"F")}(e)))}catch(t){throw Ci(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Li(this.firestore,po(this._delegate,function tD(n){return wb("limitToLast",n),new N0("limitToLast",n,"L")}(e)))}catch(t){throw Ci(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Li(this.firestore,po(this._delegate,function nD(...n){return new P0("startAt",n,!0)}(...e)))}catch(t){throw Ci(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Li(this.firestore,po(this._delegate,function rD(...n){return new P0("startAfter",n,!1)}(...e)))}catch(t){throw Ci(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Li(this.firestore,po(this._delegate,function iD(...n){return new Lb("endBefore",n,!1)}(...e)))}catch(t){throw Ci(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Li(this.firestore,po(this._delegate,function ug(...n){return new Lb("endAt",n,!0)}(...e)))}catch(t){throw Ci(t,"endAt()","Query.endAt()")}}isEqual(e){return S_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Hb(n){n=Ht(n,bi);const e=Ht(n.firestore,Un),t=fr(e),r=new ka(e);return function gb(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return(r=(0,X.Z)(function*(i,l,d){try{const p=yield qh(i,l,!0),_=new Yv(l,p.Ks),b=_.Ic(p.documents),A=_.applyChanges(b,!1);d.resolve(A.snapshot)}catch(p){const _=Kh(p,`Failed to execute query '${l} against cache`);d.reject(_)}}),function(i,l,d){return r.apply(this,arguments)})(yield p0(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Fl(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function O0(n){n=Ht(n,bi);const e=Ht(n.firestore,Un),t=fr(e),r=new ka(e);return v0(t,n._query,{source:"server"}).then(i=>new Fl(e,r,n,i))}(this._delegate):function jb(n){n=Ht(n,bi);const e=Ht(n.firestore,Un),t=fr(e),r=new ka(e);return Rb(n._query),v0(t,n._query).then(i=>new Fl(e,r,n,i))}(this._delegate),t.then(r=>new $_(this.firestore,new Fl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=z0(e),r=zb(e,i=>new $_(this.firestore,new Fl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return F_(this._delegate,t,r)}withConverter(e){return new Li(this.firestore,this._delegate.withConverter(e?ud.getInstance(this.firestore,e):null))}}class yD{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new sf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Li(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new sf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new yD(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new sf(this._firestore,r))})}isEqual(e){return Mb(this._delegate,e._delegate)}}class af extends Li{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new go(this.firestore,e):null}doc(e){try{return new go(this.firestore,void 0===e?A_(this._delegate):A_(this._delegate,e))}catch(t){throw Ci(t,"doc()","CollectionReference.doc()")}}add(e){return function jS(n,e){const t=Ht(n.firestore,Un),r=A_(n),i=Ll(n.converter,e);return ad(t,[rg(Ol(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new go(this.firestore,t))}isEqual(e){return Cb(this._delegate,e._delegate)}withConverter(e){return new af(this.firestore,this._delegate.withConverter(e?ud.getInstance(this.firestore,e):null))}}function Vl(n){return Ht(n,In)}class q_{constructor(...e){this._delegate=new Pa(...e)}static documentId(){return new q_(ii.keyField().canonicalString())}isEqual(e){return(e=(0,ze.m9)(e))instanceof Pa&&this._delegate._internalPath.isEqual(e._internalPath)}}class Bl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dD(){return new I0("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Bl(e)}static delete(){const e=function cD(){return new ig("deleteField")}();return e._methodName="FieldValue.delete",new Bl(e)}static arrayUnion(...e){const t=U0(...e);return t._methodName="FieldValue.arrayUnion",new Bl(t)}static arrayRemove(...e){const t=dg(...e);return t._methodName="FieldValue.arrayRemove",new Bl(t)}static increment(e){const t=function V0(n){return new VS("increment",n)}(e);return t._methodName="FieldValue.increment",new Bl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Wb={Firestore:G0,GeoPoint:M_,Timestamp:Ln,Blob:nf,Transaction:H_,WriteBatch:_D,DocumentReference:go,DocumentSnapshot:rf,Query:Li,QueryDocumentSnapshot:sf,QuerySnapshot:$_,CollectionReference:af,FieldPath:q_,FieldValue:Bl,setLogLevel:function Z0(n){!function AT(n){Sa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function wD(n){(function vD(n,e){n.INTERNAL.registerComponent(new gi.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Wb)))})(n,(e,t)=>new G0(e,t,new B_)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(U_.Z);var ld=O(7579),Kb=O(6451),W0=O(5363),K0=O(8421);function ai(n,e){return(0,ki.e)((t,r)=>{let i=null,l=0,d=!1;const p=()=>d&&!i&&r.complete();t.subscribe((0,br.x)(r,_=>{null==i||i.unsubscribe();let b=0;const A=l++;(0,K0.Xf)(n(_,A)).subscribe(i=(0,br.x)(r,x=>r.next(e?e(_,x,A,b++):x),()=>{i=null,p()}))},()=>{d=!0,p()}))})}var qS=O(6063);class GS extends ld.x{constructor(e=1/0,t=1/0,r=qS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:l,_windowTime:d}=this;t||(r.push(e),!i&&r.push(l.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,l=i.slice();for(let d=0;d<l.length&&!e.closed;d+=r?1:2)e.next(l[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,l=(i?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!i){const d=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=d;_+=2)p=_;p&&r.splice(0,p+1)}}}var ZS=O(3099);function ED(n,e,t){var r,i;let l,d=!1;return n&&"object"==typeof n?(l=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,d=!!n.refCount,t=n.scheduler):l=null!=n?n:1/0,(0,ZS.B)({connector:()=>new GS(l,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}const cd=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function bD(n){return(0,ki.e)((e,t)=>{let r=!1;e.subscribe((0,br.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function G_(n=uf){return(0,ki.e)((e,t)=>{let r=!1;e.subscribe((0,br.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function uf(){return new cd}function jl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qo((i,l)=>n(i,l,r)):fg.y,(0,pi.q)(1),t?bD(e):G_(()=>new cd))}var Yb=O(576);function Qb(n,e){return(0,Yb.m)(e)?ai(()=>n,e):ai(()=>n)}var pg=O(9468);O(5867);const nC=new Map,Q0={activated:!1,tokenObservers:[]},TD={initialized:!1,enabled:!1};function zr(n){return nC.get(n)||Q0}function ks(n,e){nC.set(n,e)}function mg(){return TD}class J0{constructor(e,t,r,i,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,X.Z)(function*(){t.stop();try{t.pending=new ze.BH,yield function Go(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ze.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const rs=new ze.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function X0(n){if(!zr(n).activated)throw rs.create("use-before-activation",{appName:n.name})}function tw(n,e){return oC.apply(this,arguments)}function oC(){return oC=(0,X.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:r};let d,p;try{d=yield fetch(n,l)}catch(x){throw rs.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==d.status)throw rs.create("fetch-status-error",{httpStatus:d.status});try{p=yield d.json()}catch(x){throw rs.create("fetch-parse-error",{originalErrorMessage:x.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw rs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(_[1]),A=Date.now();return{token:p.attestationToken,expireTimeMillis:A+b,issuedAtTimeMillis:A}}),oC.apply(this,arguments)}function xD(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Lu="firebase-app-check-store";let yg=null;function cC(){return yg||(yg=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(rs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Lu,{keyPath:"compositeKey"})}}catch(t){e(rs.create("storage-open",{originalErrorMessage:t.message}))}}),yg)}function fC(){return fC=(0,X.Z)(function*(n,e){const r=(yield cC()).transaction(Lu,"readwrite"),l=r.objectStore(Lu).put({compositeKey:n,value:e});return new Promise((d,p)=>{l.onsuccess=_=>{d()},r.onerror=_=>{var b;p(rs.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})}),fC.apply(this,arguments)}const vg=new Cs.Yd("@firebase/app-check");function OD(n,e){return(0,ze.hl)()?function hC(n,e){return function PD(n,e){return fC.apply(this,arguments)}(function pC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{vg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function _C(){return mg().enabled}function wg(){return iw.apply(this,arguments)}function iw(){return iw=(0,X.Z)(function*(){const n=mg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),iw.apply(this,arguments)}const yC={error:"UNKNOWN_ERROR"};function dd(n){return ze.US.encodeString(JSON.stringify(n),!1)}function Eg(n){return bg.apply(this,arguments)}function bg(){return bg=(0,X.Z)(function*(n,e=!1){const t=n.app;X0(t);const r=zr(t);let l,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&aw(_)&&(i=_)}if(!e&&i&&aw(i))return{token:i.token};let p,d=!1;if(_C()){r.exchangeTokenPromise||(r.exchangeTokenPromise=tw(xD(t,yield wg()),n.platformLoggerProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const _=yield r.exchangeTokenPromise;return yield OD(t,_),ks(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),d=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?vg.warn(_.message):vg.error(_),l=_}return i?(p={token:i.token},ks(t,Object.assign(Object.assign({},r),{token:i})),yield OD(t,i)):p=nx(l),d&&Tg(t,p),p}),bg.apply(this,arguments)}function sw(n,e){const t=zr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ks(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function K_(n){const{app:e}=n,t=zr(e);let r=t.tokenRefresher;r||(r=function ow(n){const{app:e}=n;return new J0((0,X.Z)(function*(){let r;if(r=zr(e).token?yield Eg(n,!0):yield Eg(n),r.error)throw r.error}),()=>!0,()=>{const t=zr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ks(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Tg(n,e){const t=zr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function aw(n){return n.expireTimeMillis-Date.now()>0}function nx(n){return{token:dd(yC),error:n}}class rx{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=zr(this.app);for(const t of e)sw(this.app,t.next);return Promise.resolve()}}const qD="app-check-internal";!function lx(){(0,Hr._registerComponent)(new gi.wA("app-check",n=>function ix(n,e){return new rx(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qD).initialize()})),(0,Hr._registerComponent)(new gi.wA(qD,n=>function vC(n){return{getToken:e=>Eg(n,e),addTokenListener:e=>function Cg(n,e,t,r){const{app:i}=n,l=zr(i),d={next:t,error:r,type:e};if(ks(i,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&aw(l.token)){const p=l.token;Promise.resolve().then(()=>{t({token:p.token}),K_(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>K_(n))}(n,"INTERNAL",e),removeTokenListener:e=>sw(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Hr.registerVersion)("@firebase/app-check","0.5.3")}();class cw{constructor(){return(0,Hn.vb)("app-check")}}"undefined"!=typeof window&&window;var M=O(127);const j=new a.OlP("angularfire2.auth.use-emulator"),Y=new a.OlP("angularfire2.auth.settings"),we=new a.OlP("angularfire2.auth.tenant-id"),ke=new a.OlP("angularfire2.auth.langugage-code"),$e=new a.OlP("angularfire2.auth.use-device-language"),et=new a.OlP("angularfire.auth.persistence"),Ie=(n,e,t,r,i,l,d,p)=>(0,Fi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,l&&_.useDeviceLanguage(),d)for(const[b,A]of Object.entries(d))_.settings[b]=A;return p&&_.setPersistence(p),_},[t,r,i,l,d,p]);let pt=(()=>{class n{constructor(t,r,i,l,d,p,_,b,A,x,k,L){const H=new ld.x,ue=Qe(void 0).pipe((0,W0.Q)(d.outsideAngular),ai(()=>l.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,3059)))),(0,xt.U)(()=>(0,Fi.on)(t,l,r)),(0,xt.U)(be=>Ie(be,l,p,b,A,x,_,k)),ED({bufferSize:1,refCount:!1}));if(Ar(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Qe(null);else{ue.pipe(jl()).subscribe();const Be=ue.pipe(ai(Ze=>Ze.getRedirectResult().then(Ut=>Ut,()=>null)),Hn.iC,ED({bufferSize:1,refCount:!1})),rt=ue.pipe(ai(Ze=>new ns.y(Ut=>({unsubscribe:l.runOutsideAngular(()=>Ze.onAuthStateChanged(yn=>Ut.next(yn),yn=>Ut.error(yn),()=>Ut.complete()))})))),ct=ue.pipe(ai(Ze=>new ns.y(Ut=>({unsubscribe:l.runOutsideAngular(()=>Ze.onIdTokenChanged(yn=>Ut.next(yn),yn=>Ut.error(yn),()=>Ut.complete()))}))));this.authState=Be.pipe(Qb(rt),(0,pg.R)(d.outsideAngular),(0,W0.Q)(d.insideAngular)),this.user=Be.pipe(Qb(ct),(0,pg.R)(d.outsideAngular),(0,W0.Q)(d.insideAngular)),this.idToken=this.user.pipe(ai(Ze=>Ze?(0,Dt.D)(Ze.getIdToken()):Qe(null))),this.idTokenResult=this.user.pipe(ai(Ze=>Ze?(0,Dt.D)(Ze.getIdTokenResult()):Qe(null))),this.credential=(0,Kb.T)(Be,H,this.authState.pipe(qo(Ze=>!Ze))).pipe((0,xt.U)(Ze=>(null==Ze?void 0:Ze.user)?Ze:null),(0,pg.R)(d.outsideAngular),(0,W0.Q)(d.insideAngular))}return(0,Fi.pX)(this,ue,l,{spy:{apply:(be,Be,rt)=>{(be.startsWith("signIn")||be.startsWith("createUser"))&&rt.then(ct=>H.next(ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Fi.Dh),a.LFG(Fi.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Hn.HU),a.LFG(j,8),a.LFG(Y,8),a.LFG(we,8),a.LFG(ke,8),a.LFG($e,8),a.LFG(et,8),a.LFG(cw,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function is(n,e){return function dn(n,e=j0.z){return new ns.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Dg(n,e){return is(n,e).pipe((0,xt.U)(t=>({payload:t,type:"query"})))}function cf(n,e){return Dg(n,e).pipe(Zr(void 0),H0(),(0,xt.U)(([t,r])=>{const i=r.payload.docChanges(),l=i.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,p)=>{const _=i.find(A=>A.doc.ref.isEqual(d.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(d.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(d.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:d}})}),l}))}function J_(n,e,t){return cf(n,t).pipe(Fu((r,i)=>function dw(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hw(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ag(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Ag(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ag(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),e),[]),function $0(n,e=fg.y){return n=null!=n?n:gD,(0,ki.e)((t,r)=>{let i,l=!0;t.subscribe((0,br.x)(r,d=>{const p=e(d);(l||!n(i,p))&&(l=!1,i=p,r.next(d))}))})}(),(0,xt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Ag(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function X_(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ey{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=cf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,xt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Zr(void 0),H0(),qo(([r,i])=>i.length>0||!r),(0,xt.U)(([r,i])=>i),Hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Fu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=X_(e);return J_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hn.iC)}valueChanges(e={}){return Dg(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Hn.iC)}get(e){return(0,Dt.D)(this.query.get(e)).pipe(Hn.iC)}add(e){return this.ref.add(e)}doc(e){return new ty(this.ref.doc(e),this.afs)}}class ty{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:l}=hx(r,t);return new ey(i,l,this.afs)}snapshotChanges(){return function hd(n,e){return is(n,e).pipe(Zr(void 0),H0(),(0,xt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Hn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,xt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Dt.D)(this.ref.get(e)).pipe(Hn.iC)}}class IN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?cf(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),qo(t=>t.length>0),Hn.iC):cf(this.query,this.afs.schedulers.outsideAngular).pipe(Hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Fu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=X_(e);return J_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hn.iC)}valueChanges(e={}){return Dg(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Hn.iC)}get(e){return(0,Dt.D)(this.query.get(e)).pipe(Hn.iC)}}const DN=new a.OlP("angularfire2.enableFirestorePersistence"),AN=new a.OlP("angularfire2.firestore.persistenceSettings"),SN=new a.OlP("angularfire2.firestore.settings"),xN=new a.OlP("angularfire2.firestore.use-emulator");function hx(n,e=(t=>t)){return{query:e(n),ref:n}}let fx=(()=>{class n{constructor(t,r,i,l,d,p,_,b,A,x,k,L,H,ue,be,Be,rt){this.schedulers=_;const ct=(0,Fi.on)(t,p,r),Ze=A;x&&Ie(ct,p,k,H,ue,be,L,Be),[this.firestore,this.persistenceEnabled$]=(0,Fi.cc)(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const Ut=p.runOutsideAngular(()=>ct.firestore());if(l&&Ut.settings(l),Ze&&Ut.useEmulator(...Ze),i&&!Ar(d)){const yn=()=>{try{return(0,Dt.D)(Ut.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(rr){return"undefined"!=typeof console&&console.warn(rr),Qe(!1)}};return[Ut,p.runOutsideAngular(yn)]}return[Ut,Qe(!1)]},[l,Ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:d}=hx(i,r),p=this.schedulers.ngZone.run(()=>l);return new ey(p,d,this)}collectionGroup(t,r){const i=r||(d=>d),l=this.firestore.collectionGroup(t);return new IN(i(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new ty(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Fi.Dh),a.LFG(Fi.xv,8),a.LFG(DN,8),a.LFG(SN,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Hn.HU),a.LFG(AN,8),a.LFG(xN,8),a.LFG(pt,8),a.LFG(j,8),a.LFG(Y,8),a.LFG(we,8),a.LFG(ke,8),a.LFG($e,8),a.LFG(et,8),a.LFG(cw,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class Uu extends ld.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:MN}=Array,{getPrototypeOf:RN,prototype:NN,keys:PN}=Object;function px(n){if(1===n.length){const e=n[0];if(MN(e))return{args:e,keys:null};if(function ON(n){return n&&"object"==typeof n&&RN(n)===NN}(e)){const t=PN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:kN}=Array;function gx(n){return(0,xt.U)(e=>function FN(n,e){return kN(e)?n(...e):n(e)}(n,e))}function mx(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var LN=O(9672);function _x(n,e,t){n?(0,LN.f)(t,n,e):e()}function yx(n){return new ns.y(e=>{(0,K0.Xf)(n()).subscribe(e)})}var ny=O(515),vx=O(727);function wx(){return(0,ki.e)((n,e)=>{let t=null;n._refCount++;const r=(0,br.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,l=t;t=null,i&&(!l||i===l)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class BN extends ns.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ki.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vx.w0;const t=this.getSubject();e.add(this.source.subscribe((0,br.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vx.w0.EMPTY)}return e}refCount(){return wx()(this)}}function df(n){return(0,ki.e)((e,t)=>{let l,r=null,i=!1;r=e.subscribe((0,br.x)(t,void 0,void 0,d=>{l=(0,K0.Xf)(n(d,df(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,l.subscribe(t))})}var ss=O(5577);function ry(n,e){return(0,Yb.m)(e)?(0,ss.z)(n,e,1):(0,ss.z)(n,1)}function ZD(n){return n<=0?()=>ny.E:(0,ki.e)((e,t)=>{let r=[];e.subscribe((0,br.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var Zo=O(8505);class fd{constructor(e,t){this.id=e,this.url=t}}class zD extends fd{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fw extends fd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ex extends fd{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $N extends fd{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qN extends fd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GN extends fd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZN extends fd{constructor(e,t,r,i,l){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zN extends fd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WN extends fd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bx{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Cx{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class KN{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YN{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QN{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JN{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Bt="primary";class XN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function iy(n){return new XN(n)}const Ix="ngNavigationCancelingError";function WD(n){const e=Error("NavigationCancelingError: "+n);return e[Ix]=!0,e}function tP(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let l=0;l<r.length;l++){const d=r[l],p=n[l];if(d.startsWith(":"))i[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Hl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let l=0;l<t.length;l++)if(i=t[l],!Dx(n[i],e[i]))return!1;return!0}function Dx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,l)=>r[l]===i)}return n===e}function Ax(n){return Array.prototype.concat.apply([],n)}function Sx(n){return n.length>0?n[n.length-1]:null}function Ui(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function $l(n){return(0,a.CqO)(n)?n:(0,a.QGY)(n)?(0,Dt.D)(Promise.resolve(n)):Qe(n)}const iP={exact:function Rx(n,e,t){if(!xg(n.segments,e.segments)||!xC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Rx(n.children[r],e.children[r],t))return!1;return!0},subset:Nx},xx={exact:function sP(n,e){return Hl(n,e)},subset:function oP(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Dx(n[t],e[t]))},ignored:()=>!0};function Mx(n,e,t){return iP[t.paths](n.root,e.root,t.matrixParams)&&xx[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Nx(n,e,t){return Px(n,e,e.segments,t)}function Px(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!xg(i,t)||e.hasChildren()||!xC(i,t,r))}if(n.segments.length===t.length){if(!xg(n.segments,t)||!xC(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Nx(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(xg(n.segments,i)&&xC(n.segments,i,r)&&n.children[Bt])&&Px(n.children[Bt],e,l,r)}}function xC(n,e,t){return e.every((r,i)=>xx[t](n[i].parameters,r.parameters))}class Sg{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iy(this.queryParams)),this._queryParamMap}toString(){return lP.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ui(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return MC(this)}}class pw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=iy(this.parameters)),this._parameterMap}toString(){return Ux(this)}}function xg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ox{}class kx{parse(e){const t=new yP(e);return new Sg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${gw(e.root,!0)}`,r=function hP(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${RC(t)}=${RC(i)}`).join("&"):`${RC(t)}=${RC(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function cP(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const lP=new kx;function MC(n){return n.segments.map(e=>Ux(e)).join("/")}function gw(n,e){if(!n.hasChildren())return MC(n);if(e){const t=n.children[Bt]?gw(n.children[Bt],!1):"",r=[];return Ui(n.children,(i,l)=>{l!==Bt&&r.push(`${l}:${gw(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function uP(n,e){let t=[];return Ui(n.children,(r,i)=>{i===Bt&&(t=t.concat(e(r,i)))}),Ui(n.children,(r,i)=>{i!==Bt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Bt?[gw(n.children[Bt],!1)]:[`${i}:${gw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Bt]?`${MC(n)}/${t[0]}`:`${MC(n)}/(${t.join("//")})`}}function Fx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function RC(n){return Fx(n).replace(/%3B/gi,";")}function KD(n){return Fx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function NC(n){return decodeURIComponent(n)}function Lx(n){return NC(n.replace(/\+/g,"%20"))}function Ux(n){return`${KD(n.path)}${function dP(n){return Object.keys(n).map(e=>`;${KD(e)}=${KD(n[e])}`).join("")}(n.parameters)}`}const fP=/^[^\/()?;=#]+/;function PC(n){const e=n.match(fP);return e?e[0]:""}const pP=/^[^=?&#]+/,mP=/^[^&#]+/;class yP{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Bt]=new Kt(e,t)),r}parseSegment(){const e=PC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new pw(NC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=PC(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=PC(this.remaining);i&&(r=i,this.capture(r))}e[NC(t)]=NC(r)}parseQueryParam(e){const t=function gP(n){const e=n.match(pP);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function _P(n){const e=n.match(mP);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=Lx(t),l=Lx(r);if(e.hasOwnProperty(i)){let d=e[i];Array.isArray(d)||(d=[d],e[i]=d),d.push(l)}else e[i]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=PC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=Bt);const d=this.parseChildren();t[l]=1===Object.keys(d).length?d[Bt]:new Kt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Vx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=YD(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=YD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=QD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return QD(e,this._root).map(t=>t.value)}}function YD(n,e){if(n===e.value)return e;for(const t of e.children){const r=YD(n,t);if(r)return r}return null}function QD(n,e){if(n===e.value)return[e];for(const t of e.children){const r=QD(n,t);if(r.length)return r.unshift(e),r}return[]}class pd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function sy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Bx extends Vx{constructor(e,t){super(e),this.snapshot=t,JD(this,e)}toString(){return this.snapshot.toString()}}function jx(n,e){const t=function vP(n,e){const d=new OC([],{},{},"",{},Bt,e,null,n.root,-1,{});return new $x("",new pd(d,[]))}(n,e),r=new Uu([new pw("",{})]),i=new Uu({}),l=new Uu({}),d=new Uu({}),p=new Uu(""),_=new hf(r,i,d,p,l,Bt,e,t.root);return _.snapshot=t.root,new Bx(new pd(_,[]),t)}class hf{constructor(e,t,r,i,l,d,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xt.U)(e=>iy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xt.U)(e=>iy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],l=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(l.component)break;r--}}return function wP(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class OC{constructor(e,t,r,i,l,d,p,_,b,A,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=p,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=A,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=iy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $x extends Vx{constructor(e,t){super(t),this.url=e,JD(this,t)}toString(){return qx(this._root)}}function JD(n,e){e.value._routerState=n,e.children.forEach(t=>JD(n,t))}function qx(n){const e=n.children.length>0?` { ${n.children.map(qx).join(", ")} } `:"";return`${n.value}${e}`}function XD(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Hl(e.params,t.params)||n.params.next(t.params),function nP(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Hl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function eA(n,e){const t=Hl(n.params,e.params)&&function aP(n,e){return xg(n,e)&&n.every((t,r)=>Hl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||eA(n.parent,e.parent))}function mw(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function bP(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return mw(n,r,i);return mw(n,r)})}(n,e,t);return new pd(r,i)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const d=l.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(p=>mw(n,p)),d}}const r=function CP(n){return new hf(new Uu(n.url),new Uu(n.params),new Uu(n.queryParams),new Uu(n.fragment),new Uu(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(l=>mw(n,l));return new pd(r,i)}}function kC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function _w(n){return"object"==typeof n&&null!=n&&n.outlets}function tA(n,e,t,r,i){let l={};return r&&Ui(r,(d,p)=>{l[p]=Array.isArray(d)?d.map(_=>`${_}`):`${d}`}),new Sg(t.root===n?e:Gx(t.root,n,e),l,i)}function Gx(n,e,t){const r={};return Ui(n.children,(i,l)=>{r[l]=i===e?t:Gx(i,e,t)}),new Kt(n.segments,r)}class Zx{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&kC(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(_w);if(i&&i!==Sx(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nA{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function zx(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return FC(n,e,t);const r=function xP(n,e,t){let r=0,i=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return l;const d=n.segments[i],p=t[r];if(_w(p))break;const _=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!Kx(_,b,d))return l;r+=2}else{if(!Kx(_,{},d))return l;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Kt(n.segments.slice(0,r.pathIndex),{});return l.children[Bt]=new Kt(n.segments.slice(r.pathIndex),n.children),FC(l,0,i)}return r.match&&0===i.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?rA(n,e,t):r.match?FC(n,0,i):rA(n,e,t)}function FC(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function SP(n){return _w(n[0])?n[0].outlets:{[Bt]:n}}(t),i={};return Ui(r,(l,d)=>{"string"==typeof l&&(l=[l]),null!==l&&(i[d]=zx(n.children[d],e,l))}),Ui(n.children,(l,d)=>{void 0===r[d]&&(i[d]=l)}),new Kt(n.segments,i)}}function rA(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const l=t[i];if(_w(l)){const _=MP(l.outlets);return new Kt(r,_)}if(0===i&&kC(t[0])){r.push(new pw(n.segments[e].path,Wx(t[0]))),i++;continue}const d=_w(l)?l.outlets[Bt]:`${l}`,p=i<t.length-1?t[i+1]:null;d&&p&&kC(p)?(r.push(new pw(d,Wx(p))),i+=2):(r.push(new pw(d,{})),i++)}return new Kt(r,{})}function MP(n){const e={};return Ui(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=rA(new Kt([],{}),0,t))}),e}function Wx(n){const e={};return Ui(n,(t,r)=>e[r]=`${t}`),e}function Kx(n,e,t){return n==t.path&&Hl(e,t.parameters)}class NP{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),XD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=sy(t);e.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,i[d],r),delete i[d]}),Ui(i,(l,d)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const i=e.value,l=t?t.value:null;if(i===l)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,l=sy(e);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],i);if(r&&r.outlet){const d=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,l=sy(e);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=sy(t);e.children.forEach(l=>{this.activateRoutes(l,i[l.value.outlet],r),this.forwardEvent(new JN(l.value.snapshot))}),e.children.length&&this.forwardEvent(new YN(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,l=t?t.value:null;if(XD(i),i===l)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),XD(p.route.value),this.activateChildRoutes(e,null,d.children)}else{const p=function PP(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=_,d.outlet&&d.outlet.activateWith(i,_),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class iA{constructor(e,t){this.routes=e,this.module=t}}function ff(n){return"function"==typeof n}function Mg(n){return n instanceof Sg}const yw=Symbol("INITIAL_VALUE");function vw(){return ai(n=>function UN(...n){const e=(0,Qs.yG)(n),t=(0,Qs.jO)(n),{args:r,keys:i}=px(n);if(0===r.length)return(0,Dt.D)([],e);const l=new ns.y(function VN(n,e,t=fg.y){return r=>{_x(e,()=>{const{length:i}=n,l=new Array(i);let d=i,p=i;for(let _=0;_<i;_++)_x(e,()=>{const b=(0,Dt.D)(n[_],e);let A=!1;b.subscribe((0,br.x)(r,x=>{l[_]=x,A||(A=!0,p--),p||r.next(t(l.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,i?d=>mx(i,d):fg.y));return t?l.pipe(gx(t)):l}(n.map(e=>e.pipe((0,pi.q)(1),Zr(yw)))).pipe(Fu((e,t)=>{let r=!1;return t.reduce((i,l,d)=>i!==yw?i:(l===yw&&(r=!0),r||!1!==l&&d!==t.length-1&&!Mg(l)?i:l),e)},yw),qo(e=>e!==yw),(0,xt.U)(e=>Mg(e)?e:!0===e),(0,pi.q)(1)))}class VP{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ww,this.attachRef=null}}class ww{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new VP,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let sA=(()=>{class n{constructor(t,r,i,l,d){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.name=l||Bt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new BP(t,p,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(ww),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},n.\u0275dir=a.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class BP{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===hf?this.route:e===ww?this.childContexts:this.parent.get(e,t)}}let Yx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&a._UZ(0,"router-outlet")},directives:[sA],encapsulation:2}),n})();function Qx(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];jP(r,HP(e,r))}}function jP(n,e){n.children&&Qx(n.children,e)}function HP(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function oA(n){const e=n.children&&n.children.map(oA),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Bt&&(t.component=Yx),t}function Fa(n){return n.outlet||Bt}function Jx(n,e){const t=n.filter(r=>Fa(r)===e);return t.push(...n.filter(r=>Fa(r)!==e)),t}const Xx={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function LC(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Xx):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||tP)(t,n,e);if(!l)return Object.assign({},Xx);const d={};Ui(l.posParams,(_,b)=>{d[b]=_.path});const p=l.consumed.length>0?Object.assign(Object.assign({},d),l.consumed[l.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:p,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function UC(n,e,t,r,i="corrected"){if(t.length>0&&function GP(n,e,t){return t.some(r=>VC(n,e,r)&&Fa(r)!==Bt)}(n,t,r)){const d=new Kt(e,function qP(n,e,t,r){const i={};i[Bt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Fa(l)!==Bt){const d=new Kt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,i[Fa(l)]=d}return i}(n,e,r,new Kt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function ZP(n,e,t){return t.some(r=>VC(n,e,r))}(n,t,r)){const d=new Kt(n.segments,function $P(n,e,t,r,i,l){const d={};for(const p of r)if(VC(n,t,p)&&!i[Fa(p)]){const _=new Kt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===l?n.segments.length:e.length,d[Fa(p)]=_}return Object.assign(Object.assign({},i),d)}(n,e,t,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const l=new Kt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function VC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function e1(n,e,t,r){return!!(Fa(n)===r||r!==Bt&&VC(e,t,n))&&("**"===n.path||LC(e,n,t).matched)}function t1(n,e,t){return 0===e.length&&!n.children[t]}class Ew{constructor(e){this.segmentGroup=e||null}}class n1{constructor(e){this.urlTree=e}}function BC(n){return new ns.y(e=>e.error(new Ew(n)))}function r1(n){return new ns.y(e=>e.error(new n1(n)))}function zP(n){return new ns.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class YP{constructor(e,t,r,i,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(a.h0i)}apply(){const e=UC(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Bt).pipe((0,xt.U)(l=>this.createUrlTree(aA(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(df(l=>{if(l instanceof n1)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof Ew?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Bt).pipe((0,xt.U)(i=>this.createUrlTree(aA(i),e.queryParams,e.fragment))).pipe(df(i=>{throw i instanceof Ew?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Kt([],{[Bt]:e}):e;return new Sg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,xt.U)(l=>new Kt([],l))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const l of Object.keys(r.children))"primary"===l?i.unshift(l):i.push(l);return(0,Dt.D)(i).pipe(ry(l=>{const d=r.children[l],p=Jx(t,l);return this.expandSegmentGroup(e,p,d,l).pipe((0,xt.U)(_=>({segment:_,outlet:l})))}),Fu((l,d)=>(l[d.outlet]=d.segment,l),{}),function jN(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qo((i,l)=>n(i,l,r)):fg.y,ZD(1),t?bD(e):G_(()=>new cd))}())}expandSegment(e,t,r,i,l,d){return(0,Dt.D)(r).pipe(ry(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,l,d).pipe(df(b=>{if(b instanceof Ew)return Qe(null);throw b}))),jl(p=>!!p),df((p,_)=>{if(p instanceof cd||"EmptyError"===p.name){if(t1(t,i,l))return Qe(new Kt([],{}));throw new Ew(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,i,l,d,p){return e1(i,t,l,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,l,d):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,l,d):BC(t):BC(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,l,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?r1(l):this.lineralizeSegments(r,l).pipe((0,ss.z)(d=>{const p=new Kt(d,{});return this.expandSegment(e,p,t,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,l,d){const{matched:p,consumedSegments:_,lastChild:b,positionalParamSegments:A}=LC(t,i,l);if(!p)return BC(t);const x=this.applyRedirectCommands(_,i.redirectTo,A);return i.redirectTo.startsWith("/")?r1(x):this.lineralizeSegments(i,x).pipe((0,ss.z)(k=>this.expandSegment(e,t,r,k.concat(l.slice(b)),d,!1)))}matchSegmentAgainstRoute(e,t,r,i,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Qe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,xt.U)(k=>(r._loadedConfig=k,new Kt(i,{})))):Qe(new Kt(i,{}));const{matched:d,consumedSegments:p,lastChild:_}=LC(t,r,i);if(!d)return BC(t);const b=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,ss.z)(x=>{const k=x.module,L=x.routes,{segmentGroup:H,slicedSegments:ue}=UC(t,p,b,L),be=new Kt(H.segments,H.children);if(0===ue.length&&be.hasChildren())return this.expandChildren(k,L,be).pipe((0,xt.U)(Ze=>new Kt(p,Ze)));if(0===L.length&&0===ue.length)return Qe(new Kt(p,{}));const Be=Fa(r)===l;return this.expandSegment(k,be,L,ue,Be?Bt:l,!0).pipe((0,xt.U)(ct=>new Kt(p.concat(ct.segments),ct.children)))}))}getChildConfig(e,t,r){return t.children?Qe(new iA(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Qe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,ss.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,xt.U)(l=>(t._loadedConfig=l,l))):function WP(n){return new ns.y(e=>e.error(WD(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Qe(new iA([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return Qe(!0);const l=i.map(d=>{const p=e.get(d);let _;if(function kP(n){return n&&ff(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!ff(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return $l(_)});return Qe(l).pipe(vw(),(0,Zo.b)(d=>{if(!Mg(d))return;const p=WD(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw p.url=d,p}),(0,xt.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Qe(r);if(i.numberOfChildren>1||!i.children[Bt])return zP(e.redirectTo);i=i.children[Bt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const l=this.createSegmentGroup(e,t.root,r,i);return new Sg(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ui(e,(i,l)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[l]=t[p]}else r[l]=i}),r}createSegmentGroup(e,t,r,i){const l=this.createSegments(e,t.segments,r,i);let d={};return Ui(t.children,(p,_)=>{d[_]=this.createSegmentGroup(e,p,r,i)}),new Kt(l,d)}createSegments(e,t,r,i){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,i):this.findOrReturn(l,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function aA(n){const e={};for(const r of Object.keys(n.children)){const l=aA(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function QP(n){if(1===n.numberOfChildren&&n.children[Bt]){const e=n.children[Bt];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}class i1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class jC{constructor(e,t){this.component=e,this.route=t}}function XP(n,e,t){const r=n._root;return bw(r,e?e._root:null,t,[r.value])}function HC(n,e,t){const r=function tO(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function bw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=sy(e);return n.children.forEach(d=>{(function nO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,d=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const _=function rO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!xg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xg(n.url,e.url)||!Hl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eA(n,e)||!Hl(n.queryParams,e.queryParams);default:return!eA(n,e)}}(d,l,l.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new i1(r)):(l.data=d.data,l._resolvedData=d._resolvedData),bw(n,e,l.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new jC(p.outlet.component,d))}else d&&Cw(e,p,i),i.canActivateChecks.push(new i1(r)),bw(n,null,l.component?p?p.children:null:t,r,i)})(d,l[d.value.outlet],t,r.concat([d.value]),i),delete l[d.value.outlet]}),Ui(l,(d,p)=>Cw(d,t.getContext(p),i)),i}function Cw(n,e,t){const r=sy(n),i=n.value;Ui(r,(l,d)=>{Cw(l,i.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new jC(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class hO{}function s1(n){return new ns.y(e=>e.error(n))}class pO{constructor(e,t,r,i,l,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d}recognize(){const e=UC(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Bt);if(null===t)return null;const r=new OC([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Bt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new pd(r,t),l=new $x(this.url,i);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=Hx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const d=t.children[l],p=Jx(e,l),_=this.processSegmentGroup(p,d,l);if(null===_)return null;r.push(..._)}const i=o1(r);return function gO(n){n.sort((e,t)=>e.value.outlet===Bt?-1:t.value.outlet===Bt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const l of e){const d=this.processSegmentAgainstRoute(l,t,r,i);if(null!==d)return d}return t1(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!e1(e,t,r,i))return null;let l,d=[],p=[];if("**"===e.path){const L=r.length>0?Sx(r).parameters:{};l=new OC(r,L,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,l1(e),Fa(e),e.component,e,a1(t),u1(t)+r.length,c1(e))}else{const L=LC(t,e,r);if(!L.matched)return null;d=L.consumedSegments,p=r.slice(L.lastChild),l=new OC(d,L.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,l1(e),Fa(e),e.component,e,a1(t),u1(t)+d.length,c1(e))}const _=function mO(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:A}=UC(t,d,p,_.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);if(0===A.length&&b.hasChildren()){const L=this.processChildren(_,b);return null===L?null:[new pd(l,L)]}if(0===_.length&&0===A.length)return[new pd(l,[])];const x=Fa(e)===i,k=this.processSegment(_,b,A,x?Bt:i);return null===k?null:[new pd(l,k)]}}function _O(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function o1(n){const e=[],t=new Set;for(const r of n){if(!_O(r)){e.push(r);continue}const i=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=o1(r.children);e.push(new pd(r.value,i))}return e.filter(r=>!t.has(r))}function a1(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function u1(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function l1(n){return n.data||{}}function c1(n){return n.resolve||{}}function d1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function uA(n){return ai(e=>{const t=n(e);return t?(0,Dt.D)(t).pipe((0,xt.U)(()=>e)):Qe(e)})}class IO extends class TO{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const lA=new a.OlP("ROUTES");class h1{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,xt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=l.create(e);return new iA(Ax(d.injector.get(lA,void 0,a.XFs.Self|a.XFs.Optional)).map(oA),d)}),df(l=>{throw t._loader$=void 0,l}));return t._loader$=new BN(i,()=>new ld.x).pipe(wx()),t._loader$}loadModuleFactory(e){return $l(e()).pipe((0,ss.z)(t=>t instanceof a.YKP?Qe(t):(0,Dt.D)(this.compiler.compileModuleAsync(t))))}}class AO{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function SO(n){throw n}function xO(n,e,t){return e.parse("/")}function f1(n,e){return Qe(null)}const MO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $n=(()=>{class n{constructor(t,r,i,l,d,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=l,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ld.x,this.errorHandler=SO,this.malformedUriErrorHandler=xO,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:f1,afterPreactivation:f1},this.urlHandlingStrategy=new AO,this.routeReuseStrategy=new IO,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(a.h0i),this.console=d.get(a.c2e);const x=d.get(a.R0b);this.isNgZoneEnabled=x instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function rP(){return new Sg(new Kt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new h1(d,p,k=>this.triggerEvent(new bx(k)),k=>this.triggerEvent(new Cx(k))),this.routerState=jx(this.currentUrlTree,this.rootComponentType),this.transitions=new Uu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(qo(i=>0!==i.id),(0,xt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ai(i=>{let l=!1,d=!1;return Qe(i).pipe((0,Zo.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ai(p=>{const _=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return $C(p.source)&&(this.browserUrlTree=p.extractedUrl),Qe(p).pipe(ai(x=>{const k=this.transitions.getValue();return r.next(new zD(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),k!==this.transitions.getValue()?ny.E:Promise.resolve(x)}),function JP(n,e,t,r){return ai(i=>function KP(n,e,t,r,i){return new YP(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,xt.U)(l=>Object.assign(Object.assign({},i),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Zo.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function yO(n,e,t,r,i){return(0,ss.z)(l=>function fO(n,e,t,r,i="emptyOnly",l="legacy"){try{const d=new pO(n,e,t,r,i,l).recognize();return null===d?s1(new hO):Qe(d)}catch(d){return s1(d)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,i).pipe((0,xt.U)(d=>Object.assign(Object.assign({},l),{targetSnapshot:d}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Zo.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(L,x)}this.browserUrlTree=x.urlAfterRedirects}const k=new qN(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(k)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:L,source:H,restoredState:ue,extras:be}=p,Be=new zD(k,this.serializeUrl(L),H,ue);r.next(Be);const rt=jx(L,this.rootComponentType).snapshot;return Qe(Object.assign(Object.assign({},p),{targetSnapshot:rt,urlAfterRedirects:L,extras:Object.assign(Object.assign({},be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),ny.E}),uA(p=>{const{targetSnapshot:_,id:b,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:k,replaceUrl:L}}=p;return this.hooks.beforePreactivation(_,{navigationId:b,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!k,replaceUrl:!!L})}),(0,Zo.b)(p=>{const _=new GN(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,xt.U)(p=>Object.assign(Object.assign({},p),{guards:XP(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function iO(n,e){return(0,ss.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:d}}=t;return 0===d.length&&0===l.length?Qe(Object.assign(Object.assign({},t),{guardsResult:!0})):function sO(n,e,t,r){return(0,Dt.D)(n).pipe((0,ss.z)(i=>function dO(n,e,t,r,i){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?Qe(l.map(p=>{const _=HC(p,e,i);let b;if(function UP(n){return n&&ff(n.canDeactivate)}(_))b=$l(_.canDeactivate(n,e,t,r));else{if(!ff(_))throw new Error("Invalid CanDeactivate guard");b=$l(_(n,e,t,r))}return b.pipe(jl())})).pipe(vw()):Qe(!0)}(i.component,i.route,t,e,r)),jl(i=>!0!==i,!0))}(d,r,i,n).pipe((0,ss.z)(p=>p&&function OP(n){return"boolean"==typeof n}(p)?function oO(n,e,t,r){return(0,Dt.D)(e).pipe(ry(i=>L_(function uO(n,e){return null!==n&&e&&e(new KN(n)),Qe(!0)}(i.route.parent,r),function aO(n,e){return null!==n&&e&&e(new QN(n)),Qe(!0)}(i.route,r),function cO(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(d=>function eO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>yx(()=>Qe(d.guards.map(_=>{const b=HC(_,d.node,t);let A;if(function LP(n){return n&&ff(n.canActivateChild)}(b))A=$l(b.canActivateChild(r,n));else{if(!ff(b))throw new Error("Invalid CanActivateChild guard");A=$l(b(r,n))}return A.pipe(jl())})).pipe(vw())));return Qe(l).pipe(vw())}(n,i.path,t),function lO(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Qe(!0);const i=r.map(l=>yx(()=>{const d=HC(l,e,t);let p;if(function FP(n){return n&&ff(n.canActivate)}(d))p=$l(d.canActivate(e,n));else{if(!ff(d))throw new Error("Invalid CanActivate guard");p=$l(d(e,n))}return p.pipe(jl())}));return Qe(i).pipe(vw())}(n,i.route,t))),jl(i=>!0!==i,!0))}(r,l,n,e):Qe(p)),(0,xt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Zo.b)(p=>{if(Mg(p.guardsResult)){const b=WD(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const _=new ZN(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),qo(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),uA(p=>{if(p.guards.canActivateChecks.length)return Qe(p).pipe((0,Zo.b)(_=>{const b=new zN(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),ai(_=>{let b=!1;return Qe(_).pipe(function vO(n,e){return(0,ss.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Qe(t);let l=0;return(0,Dt.D)(i).pipe(ry(d=>function wO(n,e,t,r){return function EO(n,e,t,r){const i=d1(n);if(0===i.length)return Qe({});const l={};return(0,Dt.D)(i).pipe((0,ss.z)(d=>function bO(n,e,t,r){const i=HC(n,e,r);return $l(i.resolve?i.resolve(e,t):i(e,t))}(n[d],e,t,r).pipe((0,Zo.b)(p=>{l[d]=p}))),ZD(1),(0,ss.z)(()=>d1(l).length===i.length?Qe(l):ny.E))}(n._resolve,n,e,r).pipe((0,xt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),Hx(n,t).resolve),null)))}(d.route,r,n,e)),(0,Zo.b)(()=>l++),ZD(1),(0,ss.z)(d=>l===i.length?Qe(t):ny.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Zo.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Zo.b)(_=>{const b=new WN(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),uA(p=>{const{targetSnapshot:_,id:b,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:k,replaceUrl:L}}=p;return this.hooks.afterPreactivation(_,{navigationId:b,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!k,replaceUrl:!!L})}),(0,xt.U)(p=>{const _=function EP(n,e,t){const r=mw(n,e._root,t?t._root:void 0);return new Bx(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,Zo.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,xt.U)(r=>(new NP(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Zo.b)({next(){l=!0},complete(){l=!0}}),function HN(n){return(0,ki.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;l||d||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),df(p=>{if(d=!0,function eP(n){return n&&n[Ix]}(p)){const _=Mg(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const b=new Ex(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(b),_?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||$C(i.source)};this.scheduleNavigation(A,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new $N(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(b){i.reject(b)}}return ny.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const l={replaceUrl:!0},d=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(d){const _=Object.assign({},d);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(l.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,d,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Qx(t),this.config=t.map(oA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:l,fragment:d,queryParamsHandling:p,preserveFragment:_}=r,b=i||this.routerState.root,A=_?this.currentUrlTree.fragment:d;let x=null;switch(p){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=l||null}return null!==x&&(x=this.removeEmptyProps(x)),function TP(n,e,t,r,i){if(0===t.length)return tA(e.root,e.root,e,r,i);const l=function IP(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Zx(!0,0,n);let e=0,t=!1;const r=n.reduce((i,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const p={};return Ui(l.outlets,(_,b)=>{p[b]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(l.segmentPath)return[...i,l.segmentPath]}return"string"!=typeof l?[...i,l]:0===d?(l.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,l]},[]);return new Zx(t,e,r)}(t);if(l.toRoot())return tA(e.root,new Kt([],{}),e,r,i);const d=function DP(n,e,t){if(n.isAbsolute)return new nA(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new nA(l,l===e.root,0)}const r=kC(n.commands[0])?0:1;return function AP(n,e,t){let r=n,i=e,l=t;for(;l>i;){if(l-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new nA(r,!1,i-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),p=d.processChildren?FC(d.segmentGroup,d.index,l.commands):zx(d.segmentGroup,d.index,l.commands);return tA(d.segmentGroup,p,e,r,i)}(b,this.currentUrlTree,t,x,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Mg(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function NO(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},MO):!1===r?Object.assign({},RO):r,Mg(t))return Mx(this.currentUrlTree,t,i);const l=this.parseUrl(t);return Mx(this.currentUrlTree,l,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const l=t[i];return null!=l&&(r[i]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new fw(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,l,d){var p,_,b;if(this.disposed)return Promise.resolve(!1);const A=this.transitions.value,x=$C(r)&&A&&!$C(A.source),k=A.rawUrl.toString()===t.toString(),L=A.id===(null===(p=this.currentNavigation)||void 0===p?void 0:p.id);if(x&&k&&L)return Promise.resolve(!0);let ue,be,Be;d?(ue=d.resolve,be=d.reject,Be=d.promise):Be=new Promise((Ze,Ut)=>{ue=Ze,be=Ut});const rt=++this.navigationId;let ct;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),ct=i&&i.\u0275routerPageId?i.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(b=this.browserPageId)&&void 0!==b?b:0)+1):ct=0,this.setTransition({id:rt,targetPageId:ct,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:ue,reject:be,promise:Be,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Be.catch(Ze=>Promise.reject(Ze))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",l):this.location.go(i,"",l)}restoreHistory(t,r=!1){var i,l;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Ex(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){a.$Z()},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function $C(n){return"imperative"!==n}let oy=(()=>{class n{constructor(t,r,i,l,d){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=l,this.el=d,this.commands=null,this.onChanges=new ld.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ay(this.skipLocationChange),replaceUrl:ay(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ay(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36($n),a.Y36(hf),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&a.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[a.TTD]}),n})(),qC=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new ld.x,this.subscription=t.events.subscribe(l=>{l instanceof fw&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,l,d){if(0!==t||r||i||l||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:ay(this.skipLocationChange),replaceUrl:ay(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ay(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36($n),a.Y36(hf),a.Y36(z))},n.\u0275dir=a.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&a.NdJ("click",function(l){return r.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&t&&a.uIk("target",r.target)("href",r.href,a.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[a.TTD]}),n})();function ay(n){return""===n||!!n}class p1{}class g1{preload(e,t){return Qe(null)}}let m1=(()=>{class n{constructor(t,r,i,l){this.router=t,this.injector=i,this.preloadingStrategy=l,this.loader=new h1(i,r,_=>t.triggerEvent(new bx(_)),_=>t.triggerEvent(new Cx(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(qo(t=>t instanceof fw),ry(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(a.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const d=l._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else l.loadChildren&&!l.canLoad?i.push(this.preloadConfig(t,l)):l.children&&i.push(this.processRoutes(t,l.children));return(0,Dt.D)(i).pipe((0,hg.J)(),(0,xt.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Qe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,ss.z)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG($n),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(p1))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),cA=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fw&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Tx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Tx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){a.$Z()},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Rg=new a.OlP("ROUTER_CONFIGURATION"),_1=new a.OlP("ROUTER_FORROOT_GUARD"),FO=[_e,{provide:Ox,useClass:kx},{provide:$n,useFactory:function jO(n,e,t,r,i,l,d={},p,_){const b=new $n(null,n,e,t,r,i,Ax(l));return p&&(b.urlHandlingStrategy=p),_&&(b.routeReuseStrategy=_),function HO(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,b),d.enableTracing&&b.events.subscribe(A=>{var x,k;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(k=console.groupEnd)||void 0===k||k.call(console)}),b},deps:[Ox,ww,_e,a.zs3,a.Sil,lA,Rg,[class DO{},new a.FiY],[class CO{},new a.FiY]]},ww,{provide:hf,useFactory:function $O(n){return n.routerState.root},deps:[$n]},m1,g1,class kO{preload(e,t){return t().pipe(df(()=>Qe(null)))}},{provide:Rg,useValue:{enableTracing:!1}}];function LO(){return new a.PXZ("Router",$n)}let dA=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[FO,y1(t),{provide:_1,useFactory:BO,deps:[[$n,new a.FiY,new a.tp0]]},{provide:Rg,useValue:r||{}},{provide:z,useFactory:VO,deps:[de,[new a.tBr(xe),new a.FiY],Rg]},{provide:cA,useFactory:UO,deps:[$n,zu,Rg]},{provide:p1,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:g1},{provide:a.PXZ,multi:!0,useFactory:LO},[hA,{provide:a.ip1,multi:!0,useFactory:qO,deps:[hA]},{provide:v1,useFactory:GO,deps:[hA]},{provide:a.tb,multi:!0,useExisting:v1}]]}}static forChild(t){return{ngModule:n,providers:[y1(t)]}}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(_1,8),a.LFG($n,8))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();function UO(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new cA(n,e,t)}function VO(n,e,t={}){return t.useHash?new oe(n,e):new Ne(n,e)}function BO(n){return"guarded"}function y1(n){return[{provide:a.deG,multi:!0,useValue:n},{provide:lA,multi:!0,useValue:n}]}let hA=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ld.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),l=this.injector.get($n),d=this.injector.get(Rg);return"disabled"===d.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?Qe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Rg),i=this.injector.get(m1),l=this.injector.get(cA),d=this.injector.get($n),p=this.injector.get(a.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),l.init(),d.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function qO(n){return n.appInitializer.bind(n)}function GO(n){return n.bootstrapListener.bind(n)}const v1=new a.OlP("Router Initializer"),w1="firebasestorage.googleapis.com",E1="storageBucket";class Cr extends ze.ZR{constructor(e,t){super(fA(e),`Firebase Storage: ${t} (${fA(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cr.prototype)}_codeEquals(e){return fA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function fA(n){return"storage/"+n}function pA(){return new Cr("unknown","An unknown error occurred, please check the error payload for server response.")}function b1(){return new Cr("canceled","User canceled the upload/download.")}function C1(){return new Cr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function uy(n){return new Cr("invalid-argument",n)}function T1(){return new Cr("app-deleted","The Firebase app was deleted.")}function I1(n){return new Cr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tw(n,e){return new Cr("invalid-format","String does not match format '"+n+"': "+e)}function Iw(n){throw new Cr("internal-error","Internal error: "+n)}class os{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=os.makeFromUrl(e,t)}catch(i){return new os(e,"")}if(""===r.path)return r;throw function rk(n){return new Cr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(Ze){Ze.path_=decodeURIComponent(Ze.path)}const x=t.replace(/[.]/g,"\\."),ct=[{regex:p,indices:{bucket:1,path:3},postModify:function l(Ze){"/"===Ze.path.charAt(Ze.path.length-1)&&(Ze.path_=Ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===w1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let Ze=0;Ze<ct.length;Ze++){const Ut=ct[Ze],yn=Ut.regex.exec(e);if(yn){let Vs=yn[Ut.indices.path];Vs||(Vs=""),r=new os(yn[Ut.indices.bucket],Vs),Ut.postModify(r);break}}if(null==r)throw function nk(n){return new Cr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class ak{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function GC(n){return"string"==typeof n||n instanceof String}function D1(n){return gA()&&n instanceof Blob}function gA(){return"undefined"!=typeof Blob}function mA(n,e,t,r){if(r<e)throw uy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw uy(`Invalid value for '${n}'. Expected ${t} or less.`)}function gd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function A1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var pf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(pf||(pf={})),pf))();class fk{constructor(e,t,r,i,l,d,p,_,b,A,x){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=_,this.timeout_=b,this.progressCallback_=A,this.connectionFactory_=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,L)=>{this.resolve_=k,this.reject_=L,this.start_()})}start_(){const t=(r,i)=>{const l=this.resolve_,d=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());!function ck(n){return void 0!==n}(_)?l():l(_)}catch(_){d(_)}else if(null!==p){const _=pA();_.serverResponse=p.getErrorText(),d(this.errorCallback_?this.errorCallback_(p,_):_)}else d(i.canceled?this.appDelete_?T1():b1():function tk(){return new Cr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new ZC(!1,null,!0)):this.backoffId_=function uk(n,e,t){let r=1,i=null,l=null,d=!1,p=0;function _(){return 2===p}let b=!1;function A(...be){b||(b=!0,e.apply(null,be))}function x(be){i=setTimeout(()=>{i=null,n(L,_())},be)}function k(){l&&clearTimeout(l)}function L(be,...Be){if(b)return void k();if(be)return k(),void A.call(null,be,...Be);if(_()||d)return k(),void A.call(null,be,...Be);let ct;r<64&&(r*=2),1===p?(p=2,ct=0):ct=1e3*(r+Math.random()),x(ct)}let H=!1;function ue(be){H||(H=!0,k(),!b&&(null!==i?(be||(p=2),clearTimeout(i),x(0)):be||(p=1)))}return x(0),l=setTimeout(()=>{d=!0,ue(!0)},t),ue}((r,i)=>{if(i)return void r(!1,new ZC(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const d=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const p=l.getErrorCode()===pf.NO_ERROR,_=l.getStatus();if(!p||this.isRetryStatusCode_(_)){const A=l.getErrorCode()===pf.ABORT;return void r(!1,new ZC(!1,null,A))}const b=-1!==this.successCodes_.indexOf(_);r(!0,new ZC(b,l))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function lk(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),l=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||l}}class ZC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function wk(...n){const e=function vk(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(gA())return new Blob(n);throw new Cr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const zo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _A{constructor(e,t){this.data=e,this.contentType=t||null}}function yA(n,e){switch(n){case zo.RAW:return new _A(S1(e));case zo.BASE64:case zo.BASE64URL:return new _A(x1(n,e));case zo.DATA_URL:return new _A(function Tk(n){const e=new M1(n);return e.base64?x1(zo.BASE64,e.rest):function Ck(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Tw(zo.DATA_URL,"Malformed data URL.")}return S1(e)}(e.rest)}(e),function Ik(n){return new M1(n).contentType}(e))}throw pA()}function S1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function x1(n,e){switch(n){case zo.BASE64:{const i=-1!==e.indexOf("-"),l=-1!==e.indexOf("_");if(i||l)throw Tw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case zo.BASE64URL:{const i=-1!==e.indexOf("+"),l=-1!==e.indexOf("/");if(i||l)throw Tw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function bk(n){return atob(n)}(e)}catch(i){throw Tw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class M1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Tw(zo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Dk(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ql{constructor(e,t){let r=0,i="";D1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(D1(this.data_)){const i=function Ek(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ql(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ql(r,!0)}}static getBlob(...e){if(gA()){const t=e.map(r=>r instanceof ql?r.data_:r);return new ql(wk.apply(null,t))}{const t=e.map(d=>GC(d)?yA(zo.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let l=0;return t.forEach(d=>{for(let p=0;p<d.length;p++)i[l++]=d[p]}),new ql(i,!0)}}uploadData(){return this.data_}}function vA(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function hk(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function R1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function xk(n,e){return e}class Fs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||xk}}let zC=null;function Dw(){if(zC)return zC;const n=[];n.push(new Fs("bucket")),n.push(new Fs("generation")),n.push(new Fs("metageneration")),n.push(new Fs("name","fullPath",!0));const t=new Fs("name");t.xform=function e(l,d){return function Mk(n){return!GC(n)||n.length<2?n:R1(n)}(d)},n.push(t);const i=new Fs("size");return i.xform=function r(l,d){return void 0!==d?Number(d):d},n.push(i),n.push(new Fs("timeCreated")),n.push(new Fs("updated")),n.push(new Fs("md5Hash",null,!0)),n.push(new Fs("cacheControl",null,!0)),n.push(new Fs("contentDisposition",null,!0)),n.push(new Fs("contentEncoding",null,!0)),n.push(new Fs("contentLanguage",null,!0)),n.push(new Fs("contentType",null,!0)),n.push(new Fs("metadata","customMetadata",!0)),zC=n,zC}function N1(n,e,t){const r=vA(e);return null===r?null:function Nk(n,e,t){const r={type:"file"},i=t.length;for(let l=0;l<i;l++){const d=t[l];r[d.local]=d.xform(r,e[d.server])}return function Rk(n,e){Object.defineProperty(n,"ref",{get:function t(){const l=new os(n.bucket,n.fullPath);return e._makeStorageReference(l)}})}(r,n),r}(n,r,t)}function wA(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const l=e[i];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}const P1="prefixes";class Gl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Zl(n){if(!n)throw pA()}function WC(n,e){return function t(r,i){const l=N1(n,i,e);return Zl(null!==l),l}}function ly(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function XO(){return new Cr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function JO(){return new Cr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function QO(n){return new Cr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function ek(n){return new Cr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Aw(n){const e=ly(n);return function t(r,i){let l=e(r,i);return 404===r.getStatus()&&(l=function YO(n){return new Cr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=i.serverResponse,l}}function k1(n,e,t){const i=gd(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,p=new Gl(i,"GET",WC(n,t),d);return p.errorHandler=Aw(e),p}function Uk(n,e,t,r,i){const l={};l.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(l.delimiter=t),r&&(l.pageToken=r),i&&(l.maxResults=i);const p=gd(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,A=new Gl(p,"GET",function Fk(n,e){return function t(r,i){const l=function kk(n,e,t){const r=vA(t);return null===r?null:function Ok(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[P1])for(const i of t[P1]){const l=i.replace(/\/$/,""),d=n._makeStorageReference(new os(e,l));r.prefixes.push(d)}if(t.items)for(const i of t.items){const l=n._makeStorageReference(new os(e,i.name));r.items.push(l)}return r}(n,e,r)}(n,e,i);return Zl(null!==l),l}}(n,e.bucket),b);return A.urlParams=l,A.errorHandler=ly(e),A}function L1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Hk(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class KC{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function EA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Zl(!1)}return Zl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Zk={STATE_CHANGED:"state_changed"},Ls={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bA(n){switch(n){case"running":case"pausing":case"canceling":return Ls.RUNNING;case"paused":return Ls.PAUSED;case"success":return Ls.SUCCESS;case"canceled":return Ls.CANCELED;default:return Ls.ERROR}}class zk{constructor(e,t,r){if(function dk(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function cy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Kk extends class Wk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Iw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Iw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Iw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Iw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Iw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Vu(){return new Kk}class j1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Dw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,l)=>{this._resolve=i,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function $k(n,e,t,r,i){const l=e.bucketOnlyServerUrl(),d=L1(e,r,i),p={name:d.fullPath},_=gd(l,n.host,n._protocol),A={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},x=wA(d,t),H=new Gl(_,"POST",function L(ue){let be;EA(ue);try{be=ue.getResponseHeader("X-Goog-Upload-URL")}catch(Be){Zl(!1)}return Zl(GC(be)),be},n.maxUploadRetryTime);return H.urlParams=p,H.headers=A,H.body=x,H.errorHandler=ly(e),H}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Vu,e,t);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function qk(n,e,t,r){const _=new Gl(t,"POST",function l(b){const A=EA(b,["active","final"]);let x=null;try{x=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(L){Zl(!1)}x||Zl(!1);const k=Number(x);return Zl(!isNaN(k)),new KC(k,r.size(),"final"===A)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=ly(e),_}(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(i,Vu,t,r);this._request=l,l.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new KC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,l)=>{let d;try{d=function Gk(n,e,t,r,i,l,d,p){const _=new KC(0,0);if(d?(_.current=d.current,_.total=d.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function sk(){return new Cr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=_.total-_.current;let A=b;i>0&&(A=Math.min(A,i));const x=_.current,H={"X-Goog-Upload-Command":A===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},ue=r.slice(x,x+A);if(null===ue)throw C1();const ct=new Gl(t,"POST",function be(Ze,Ut){const yn=EA(Ze,["active","final"]),rr=_.current+A,Vs=r.size();let Qo;return Qo="final"===yn?WC(e,l)(Ze,Ut):null,new KC(rr,Vs,"final"===yn,Qo)},e.maxUploadRetryTime);return ct.headers=H,ct.body=ue.uploadData(),ct.progressCallback=p||null,ct.errorHandler=ly(n),ct}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const p=this._ref.storage._makeRequest(d,Vu,i,l);this._request=p,p.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=k1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Vu,e,t);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function U1(n,e,t,r,i){const l=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},_=function p(){let ct="";for(let Ze=0;Ze<2;Ze++)ct+=Math.random().toString().slice(2);return ct}();d["Content-Type"]="multipart/related; boundary="+_;const b=L1(e,r,i),A=wA(b,t),L=ql.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+A+"\r\n--"+_+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===L)throw C1();const H={name:b.fullPath},ue=gd(l,n.host,n._protocol),Be=n.maxUploadRetryTime,rt=new Gl(ue,"POST",WC(n,t),Be);return rt.urlParams=H,rt.headers=d,rt.body=L.uploadData(),rt.errorHandler=ly(e),rt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Vu,e,t);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=b1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=bA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const l=new zk(t||void 0,r||void 0,i||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(bA(this._state)){case Ls.SUCCESS:cy(this._resolve.bind(null,this.snapshot))();break;case Ls.CANCELED:case Ls.ERROR:cy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(bA(this._state)){case Ls.RUNNING:case Ls.PAUSED:e.next&&cy(e.next.bind(e,this.snapshot))();break;case Ls.SUCCESS:e.complete&&cy(e.complete.bind(e))();break;default:e.error&&cy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ng{constructor(e,t){this._service=e,this._location=t instanceof os?t:os.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ng(e,t)}get root(){const e=new os(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return R1(this._location.path)}get storage(){return this._service}get parent(){const e=function Ak(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new os(this._location.bucket,e);return new Ng(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw I1(e)}}function $1(n,e,t){return CA.apply(this,arguments)}function CA(){return CA=(0,X.Z)(function*(n,e,t){const i=yield q1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield $1(n,e,i.nextPageToken))}),CA.apply(this,arguments)}function q1(n,e){null!=e&&"number"==typeof e.maxResults&&mA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Uk(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Vu)}function aF(n){n._throwIfRoot("getDownloadURL");const e=function Vk(n,e,t){const i=gd(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,p=new Gl(i,"GET",function Lk(n,e){return function t(r,i){const l=N1(n,i,e);return Zl(null!==l),function Pk(n,e,t,r){const i=vA(e);if(null===i||!GC(i.downloadTokens))return null;const l=i.downloadTokens;if(0===l.length)return null;const d=encodeURIComponent;return l.split(",").map(b=>{const x=n.fullPath;return gd("/b/"+d(n.bucket)+"/o/"+d(x),t,r)+A1({alt:"media",token:b})})[0]}(l,i,n.host,n._protocol)}}(n,t),d);return p.errorHandler=Aw(e),p}(n.storage,n._location,Dw());return n.storage.makeRequestWithTokens(e,Vu).then(t=>{if(null===t)throw function ok(){return new Cr("no-download-url","The given file does not have any download URLs.")}();return t})}function G1(n,e){const t=function Sk(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new os(n._location.bucket,t);return new Ng(n.storage,r)}function Z1(n,e){if(n instanceof TA){const t=n;if(null==t._bucket)throw function ik(){return new Cr("no-default-bucket","No default bucket found. Did you set the '"+E1+"' property when initializing the app?")}();const r=new Ng(t,t._bucket);return null!=e?Z1(r,e):r}return void 0!==e?G1(n,e):n}function dF(n,e){if(e&&function lF(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof TA)return function cF(n,e){return new Ng(n,e)}(n,e);throw uy("To use ref(service, url), the first argument must be a Storage instance.")}return Z1(n,e)}function z1(n,e){const t=null==e?void 0:e[E1];return null==t?null:os.makeFromBucketSpec(t,n)}class TA{constructor(e,t,r,i,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=w1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?os.makeFromBucketSpec(i,this._host):z1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?os.makeFromBucketSpec(this._url,e):z1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,X.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,X.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ng(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new ak(T1());{const l=function yk(n,e,t,r,i,l){const d=A1(n.urlParams),p=n.url+d,_=Object.assign({},n.headers);return function mk(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function pk(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function gk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,l),function _k(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new fk(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,X.Z)(function*(){const[i,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,l).getPromise()})()}}const W1="@firebase/storage";function Q1(n,e){return dF(n=(0,ze.m9)(n),e)}function bF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new TA(t,r,i,e,Hr.SDK_VERSION)}!function CF(){(0,Hr._registerComponent)(new gi.wA("storage",bF,"PUBLIC").setMultipleInstances(!0)),(0,Hr.registerVersion)(W1,"0.9.2",""),(0,Hr.registerVersion)(W1,"0.9.2","esm2017")}();class YC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class J1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new YC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new YC(r,this,this._ref))},t)}on(e,t,r,i){let l;return t&&(l="function"==typeof t?d=>t(new YC(d,this,this._ref)):{next:t.next?d=>t.next(new YC(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,l,r||void 0,i||void 0)}}class X1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new md(e,this._service))}get items(){return this._delegate.items.map(e=>new md(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class md{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function wF(n,e){return G1(n,e)}(this._delegate,e);return new md(t,this.storage)}get root(){return new md(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new md(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new J1(function fF(n,e,t){return function nF(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new j1(n,new ql(e),t)}(n=(0,ze.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=zo.RAW,r){this._throwIfRoot("putString");const i=yA(t,e),l=Object.assign({},r);return null==l.contentType&&null!=i.contentType&&(l.contentType=i.contentType),new J1(new j1(this._delegate,new ql(i.data,!0),l),this)}listAll(){return function _F(n){return function iF(n){const e={prefixes:[],items:[]};return $1(n,e).then(()=>e)}(n=(0,ze.m9)(n))}(this._delegate).then(e=>new X1(e,this.storage))}list(e){return function mF(n,e){return q1(n=(0,ze.m9)(n),e)}(this._delegate,e||void 0).then(t=>new X1(t,this.storage))}getMetadata(){return function pF(n){return function sF(n){n._throwIfRoot("getMetadata");const e=k1(n.storage,n._location,Dw());return n.storage.makeRequestWithTokens(e,Vu)}(n=(0,ze.m9)(n))}(this._delegate)}updateMetadata(e){return function gF(n,e){return function oF(n,e){n._throwIfRoot("updateMetadata");const t=function Bk(n,e,t,r){const l=gd(e.fullServerUrl(),n.host,n._protocol),p=wA(t,r),b=n.maxOperationRetryTime,A=new Gl(l,"PATCH",WC(n,r),b);return A.headers={"Content-Type":"application/json; charset=utf-8"},A.body=p,A.errorHandler=Aw(e),A}(n.storage,n._location,e,Dw());return n.storage.makeRequestWithTokens(t,Vu)}(n=(0,ze.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function yF(n){return aF(n=(0,ze.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function vF(n){return function uF(n){n._throwIfRoot("deleteObject");const e=function jk(n,e){const r=gd(e.fullServerUrl(),n.host,n._protocol),p=new Gl(r,"DELETE",function d(_,b){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=Aw(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Vu)}(n=(0,ze.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw I1(e)}}class eM{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(tM(e))throw uy("ref() expected a child path but got a URL, use refFromURL instead.");return new md(Q1(this._delegate,e),this)}refFromURL(e){if(!tM(e))throw uy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{os.makeFromUrl(e,this._delegate.host)}catch(t){throw uy("refFromUrl() expected a valid full URL but got an invalid one.")}return new md(Q1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function EF(n,e,t,r={}){!function hF(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,ze.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function tM(n){return/^[A-Za-z]+:\/\//.test(n)}function AF(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new eM(t,r)}function nM(n){const e=function xF(n){return new ns.y(e=>{const t=d=>e.next(d);t(n.snapshot);const l=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){l()}}).pipe(function zO(n,e=j0.z){return(0,ki.e)((t,r)=>{let i=null,l=null,d=null;const p=()=>{if(i){i.unsubscribe(),i=null;const b=l;l=null,r.next(b)}};function _(){const b=d+n,A=e.now();if(A<b)return i=this.schedule(void 0,b-A),void r.add(i);p()}t.subscribe((0,br.x)(r,b=>{l=b,d=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{l=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,xt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function QC(n){return{getDownloadURL:()=>Qe(void 0).pipe(Hn.fc,ai(()=>n.getDownloadURL()),Hn.iC),getMetadata:()=>Qe(void 0).pipe(Hn.fc,ai(()=>n.getMetadata()),Hn.iC),delete:()=>(0,Dt.D)(n.delete()),child:e=>QC(n.child(e)),updateMetadata:e=>(0,Dt.D)(n.updateMetadata(e)),put:(e,t)=>nM(n.put(e,t)),putString:(e,t,r)=>nM(n.putString(e,t,r)),list:e=>(0,Dt.D)(n.list(e)),listAll:()=>(0,Dt.D)(n.listAll())}}!function SF(n){const e={TaskState:Ls,TaskEvent:Zk,StringFormat:zo,Storage:eM,Reference:md};n.INTERNAL.registerComponent(new gi.wA("storage-compat",AF,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.10")}(U_.Z);const MF=new a.OlP("angularfire2.storageBucket"),RF=new a.OlP("angularfire2.storage.maxUploadRetryTime"),NF=new a.OlP("angularfire2.storage.maxOperationRetryTime"),PF=new a.OlP("angularfire2.storage.use-emulator");let Pg=(()=>{class n{constructor(t,r,i,l,d,p,_,b,A,x){const k=(0,Fi.on)(t,d,r);this.storage=(0,Fi.cc)(`${k.name}.storage.${i}`,"AngularFireStorage",k.name,()=>{const L=d.runOutsideAngular(()=>k.storage(i||void 0)),H=A;return H&&L.useEmulator(...H),_&&L.setMaxUploadRetryTime(_),b&&L.setMaxOperationRetryTime(b),L},[_,b])}ref(t){return QC(this.storage.ref(t))}refFromURL(t){return QC(this.storage.refFromURL(t))}upload(t,r,i){return QC(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Fi.Dh),a.LFG(Fi.xv,8),a.LFG(MF,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Hn.HU),a.LFG(RF,8),a.LFG(NF,8),a.LFG(PF,8),a.LFG(cw,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),OF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),kF=(()=>{class n{constructor(){M.Z.registerVersion("angularfire",Hn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[Pg],imports:[OF]}),n})(),Wo=(()=>{class n{constructor(t,r,i,l){this.auth=t,this.router=r,this.db=i,this.storage=l,this.user$=this.auth.authState.pipe(ai(d=>d?this.db.doc(`users/${d.uid}`).valueChanges({idField:"id"}):Qe(null)))}ngOnInit(){}login(t,r){var i=this;return(0,X.Z)(function*(){return yield i.auth.signInWithEmailAndPassword(t,r).then(l=>{l&&i.router.navigate(["/dashboard"])})})()}register(t,r,i,l,d,p){var _=this;return(0,X.Z)(function*(){return yield _.auth.createUserWithEmailAndPassword(t,l).then(function(){var b=(0,X.Z)(function*(A){var x,k,L;p&&_.storage.upload("users/"+(null===(x=A.user)||void 0===x?void 0:x.uid)+"_thumb",p),yield _.db.collection("users").doc(null===(k=A.user)||void 0===k?void 0:k.uid).set({email:t,fname:r,lname:i,role:d,imgSrc:p?"users/"+(null===(L=A.user)||void 0===L?void 0:L.uid)+"_thumb":"default"}).then(()=>{_.router.navigate(["/dashboard"])})});return function(A){return b.apply(this,arguments)}}())})()}updateEmail(t,r,i){var l=this;return(0,X.Z)(function*(){return new Promise(function(){var p=(0,X.Z)(function*(_,b){yield l.auth.signInWithEmailAndPassword(t,r).then(function(){var A=(0,X.Z)(function*(x){var k;yield null===(k=x.user)||void 0===k?void 0:k.updateEmail(i).then(L=>{var H;l.db.collection("users").doc(null===(H=x.user)||void 0===H?void 0:H.uid).update({email:i}),_("success")}).catch(L=>{b("Invalid Email")})});return function(x){return A.apply(this,arguments)}}()).catch(A=>{b("Invalid Password")})});return function(_,b){return p.apply(this,arguments)}}())})()}updatePassword(t,r,i){var l=this;return(0,X.Z)(function*(){return new Promise(function(){var d=(0,X.Z)(function*(p,_){yield l.auth.signInWithEmailAndPassword(t,r).then(function(){var b=(0,X.Z)(function*(A){var x;yield null===(x=A.user)||void 0===x?void 0:x.updatePassword(i).then(k=>{p("success")}).catch(k=>{_("Invalid New Password")})});return function(A){return b.apply(this,arguments)}}()).catch(b=>{_("Incorrect Password")})});return function(p,_){return d.apply(this,arguments)}}())})()}deleteAccount(t,r){var i=this;return(0,X.Z)(function*(){return new Promise(function(){var d=(0,X.Z)(function*(p,_){yield i.auth.signInWithEmailAndPassword(t,r).then(b=>{var A;null===(A=b.user)||void 0===A||A.delete().then(()=>{i.router.navigate(["/home"]),p("success")}).catch(x=>{_("Could not delete account")})}).catch(b=>{_("Invalid Password")})});return function(p,_){return d.apply(this,arguments)}}())})()}logout(){var t=this;return(0,X.Z)(function*(){yield t.auth.signOut(),t.router.navigate(["/home"])})()}isLoggedIn(){return new Promise((r,i)=>{this.user$.pipe((0,pi.q)(1)).subscribe(l=>{r(l)})})}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(pt),a.LFG($n),a.LFG(fx),a.LFG(Pg))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gf=(()=>{class n{constructor(t,r,i){this.db=t,this.auth=r,this.storage=i}getUser(t){return t?this.db.collection("users").doc(t).valueChanges():Qe(void 0)}editUser(t,r,i,l){var d=this;return(0,X.Z)(function*(){r&&(yield d.db.collection("users").doc(t).update({fname:r}).catch(p=>{console.log(p)})),i&&(yield d.db.collection("users").doc(t).update({lname:i})),l&&(d.storage.upload("users/"+t+"_thumb",l),d.db.collection("users").doc(t).update({imgSrc:"users/"+t+"_thumb"}))})()}deleteUser(t,r,i){var l=this;this.getUser(t).pipe((0,pi.q)(1)).subscribe(d=>{"Teacher"==(null==d?void 0:d.role)?this.getTeacherCourses(t).pipe((0,pi.q)(1)).subscribe(p=>{p.forEach(function(){var _=(0,X.Z)(function*(b){yield l.deleteCourse(b.id)});return function(b){return _.apply(this,arguments)}}());try{this.storage.ref("users/"+t+"_thumb").delete()}catch(_){console.log(_)}this.db.collection("users").doc(t).delete(),this.auth.deleteAccount(r,i)}):this.getStudentCourses(t).pipe((0,pi.q)(1)).subscribe(p=>{p.forEach(function(){var _=(0,X.Z)(function*(b){yield l.removeStudent(b.id,t)});return function(b){return _.apply(this,arguments)}}()),this.storage.ref("users/"+t+"_thumb").delete(),this.db.collection("users").doc(t).delete(),this.auth.deleteAccount(r,i)})})}createCourse(t){var r=this;return(0,X.Z)(function*(){return yield r.db.collection("courses").add(t)})()}editCourse(t,r,i){var l=this;return(0,X.Z)(function*(){r&&(yield l.db.collection("courses").doc(t).update({title:r})),i&&l.storage.upload(t+"/thumb",i)})()}deleteCourse(t){let r=this.db.collection("courses").doc(t);try{this.storage.ref(t+"thumb").delete()}catch(i){console.log(i)}this.getCourse(t).pipe((0,pi.q)(1)).subscribe(i=>{null==i||i.lectures.forEach(l=>{this.deleteLecture(l,t)}),r.delete();try{this.storage.ref(t).delete()}catch(l){console.log(l)}})}getTeacherCourses(t){return this.db.collection("courses",r=>r.where("owner","==",t)).valueChanges({idField:"id"})}getStudentCourses(t){return this.db.collection("courses",r=>r.where("students","array-contains",t)).valueChanges({idField:"id"})}addStudent(t,r){var i=this;return(0,X.Z)(function*(){return yield i.db.collection("courses").doc(t).update({students:U0(r)})})()}removeStudent(t,r){var i=this;return(0,X.Z)(function*(){return yield i.db.collection("courses").doc(t).update({students:dg(r)})})()}getCourse(t){return t?this.db.collection("courses").doc(t).valueChanges({idField:"id"}):Qe(void 0)}createLecture(t,r,i,l){var d=this;return new Promise(function(){var p=(0,X.Z)(function*(_,b){yield d.db.collection("lectures").add(t).then(function(){var A=(0,X.Z)(function*(x){let k;yield d.db.collection("courses").doc(r).update({lectures:U0(x.id)}),i?(k=r+"/"+x.id+"_thumb",d.storage.upload(k,i)):k="DEFAULTIMAGE";let L=r+"/"+x.id;x.update({id:x.id,thumbnailUrl:k,videoUrl:L}),d.storage.upload(L,l),_(!0)});return function(x){return A.apply(this,arguments)}}()).catch(()=>{b()})});return function(_,b){return p.apply(this,arguments)}}())}editLecture(t,r,i,l,d){var p=this;return(0,X.Z)(function*(){i&&(yield p.db.collection("lectures").doc(t).update({title:i})),l&&(yield p.db.collection("lectures").doc(t).update({description:l})),d&&p.storage.upload(r+"/"+t+"_thumb",d)})()}deleteLecture(t,r){var i=this;return(0,X.Z)(function*(){let l=i.db.collection("lectures").doc(t);i.db.collection("courses").doc(r).update({lectures:dg(t)});try{i.storage.ref(r+"/"+t).delete()}catch(d){console.log(d)}try{i.storage.ref(r+"/"+t+"_thumb").delete()}catch(d){console.log(d)}return i.getLecture(t).pipe((0,pi.q)(1)).subscribe(d=>{}),yield l.delete()})()}removeLecture(t){var r=this;return(0,X.Z)(function*(){return yield r.db.collection("lectures").doc(t).update({students:dg(t)})})()}getCourseLectures(t){return t?this.db.collection("lectures",r=>r.where("courseID","==",t)).valueChanges({idField:"id"}):Qe(void 0)}getLecture(t){return this.db.collection("lectures").doc(t).valueChanges({idField:"id"})}createThread(t){var r=this;return(0,X.Z)(function*(){return yield r.db.collection("threads").add(t).then(i=>{i.update({id:i.id})})})()}addThreadToLecture(t){}getLectureThreads(t){return t?this.db.collection("threads",r=>r.where("lectureID","==",t)).valueChanges({idField:"id"}):Qe(void 0)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(fx),a.LFG(Wo),a.LFG(Pg))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[],imports:[[Hi]]}),n})();class iM{}const _d="*";function sM(n,e=null){return{type:2,steps:n,options:e}}function oM(n){return{type:6,styles:n,offset:null}}function aM(n){Promise.resolve(null).then(n)}class Sw{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){aM(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class uM{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const l=this.players.length;0==l?aM(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++t==l&&this._onFinish()}),d.onDestroy(()=>{++r==l&&this._onDestroy()}),d.onStart(()=>{++i==l&&this._onStart()})}),this.totalTime=this.players.reduce((d,p)=>Math.max(d,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Yt=!1;function lM(n){return new a.vHH(3e3,Yt)}function _L(){return"undefined"!=typeof window&&void 0!==window.document}function DA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function mf(n){switch(n.length){case 0:return new Sw;case 1:return n[0];default:return new uM(n)}}function cM(n,e,t,r,i={},l={}){const d=[],p=[];let _=-1,b=null;if(r.forEach(A=>{const x=A.offset,k=x==_,L=k&&b||{};Object.keys(A).forEach(H=>{let ue=H,be=A[H];if("offset"!==H)switch(ue=e.normalizePropertyName(ue,d),be){case"!":be=i[H];break;case _d:be=l[H];break;default:be=e.normalizeStyleValue(H,ue,be,d)}L[ue]=be}),k||p.push(L),b=L,_=x}),d.length)throw function oL(n){return new a.vHH(3502,Yt)}();return p}function AA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&SA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&SA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&SA(t,"destroy",n)))}}function SA(n,e,t){const r=t.totalTime,l=xA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),d=n._data;return null!=d&&(l._data=d),l}function xA(n,e,t,r,i="",l=0,d){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:l,disabled:!!d}}function Ko(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function dM(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let MA=(n,e)=>!1,hM=(n,e,t)=>[],fM=null;function RA(n){const e=n.parentNode||n.host;return e===fM?null:e}(DA()||"undefined"!=typeof Element)&&(_L()?(fM=(()=>document.documentElement)(),MA=(n,e)=>{for(;e;){if(e===n)return!0;e=RA(e)}return!1}):MA=(n,e)=>n.contains(e),hM=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Og=null,pM=!1;function gM(n){Og||(Og=function vL(){return"undefined"!=typeof document?document.body:null}()||{},pM=!!Og.style&&"WebkitAppearance"in Og.style);let e=!0;return Og.style&&!function yL(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Og.style,!e&&pM&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Og.style)),e}const mM=MA,_M=hM;let yM=(()=>{class n{validateStyleProperty(t){return gM(t)}matchesElement(t,r){return!1}containsElement(t,r){return mM(t,r)}getParentElement(t){return RA(t)}query(t,r,i){return _M(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,l,d,p=[],_){return new Sw(i,l)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),NA=(()=>{class n{}return n.NOOP=new yM,n})();const PA="ng-enter",XC="ng-leave",eT="ng-trigger",tT=".ng-trigger",wM="ng-animating",OA=".ng-animating";function kg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:kA(parseFloat(e[1]),e[2])}function kA(n,e){return"s"===e?1e3*n:n}function nT(n,e,t){return n.hasOwnProperty("duration")?n:function bL(n,e,t){let i,l=0,d="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(lM()),{duration:0,delay:0,easing:""};i=kA(parseFloat(p[1]),p[2]);const _=p[3];null!=_&&(l=kA(parseFloat(_),p[4]));const b=p[5];b&&(d=b)}else i=n;if(!t){let p=!1,_=e.length;i<0&&(e.push(function LF(){return new a.vHH(3100,Yt)}()),p=!0),l<0&&(e.push(function UF(){return new a.vHH(3101,Yt)}()),p=!0),p&&e.splice(_,0,lM())}return{duration:i,delay:l,easing:d}}(n,e,t)}function dy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function _f(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else dy(n,t);return t}function bM(n,e,t){return t?e+":"+t+";":""}function CM(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=bM(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=bM(0,IL(t),n.style[t]));n.setAttribute("style",e)}function zl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=LA(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),DA()&&CM(n))}function Fg(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=LA(t);n.style[r]=""}),DA()&&CM(n))}function xw(n){return Array.isArray(n)?1==n.length?n[0]:sM(n):n}const FA=new RegExp("{{\\s*(.+?)\\s*}}","g");function TM(n){let e=[];if("string"==typeof n){let t;for(;t=FA.exec(n);)e.push(t[1]);FA.lastIndex=0}return e}function rT(n,e,t){const r=n.toString(),i=r.replace(FA,(l,d)=>{let p=e[d];return e.hasOwnProperty(d)||(t.push(function BF(n){return new a.vHH(3003,Yt)}()),p=""),p.toString()});return i==r?n:i}function iT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const TL=/-+([a-z0-9])/g;function LA(n){return n.replace(TL,(...e)=>e[1].toUpperCase())}function IL(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Yo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function jF(n){return new a.vHH(3004,Yt)}()}}function IM(n,e){return window.getComputedStyle(n)[e]}function SL(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function xL(n,e,t){if(":"==n[0]){const _=function ML(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function nL(n){return new a.vHH(3016,Yt)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function tL(n){return new a.vHH(3015,Yt)}()),e;const i=r[1],l=r[2],d=r[3];e.push(DM(i,d));"<"==l[0]&&!("*"==i&&"*"==d)&&e.push(DM(d,i))}(r,t,e)):t.push(n),t}const oT=new Set(["true","1"]),aT=new Set(["false","0"]);function DM(n,e){const t=oT.has(n)||aT.has(n),r=oT.has(e)||aT.has(e);return(i,l)=>{let d="*"==n||n==i,p="*"==e||e==l;return!d&&t&&"boolean"==typeof i&&(d=i?oT.has(n):aT.has(n)),!p&&r&&"boolean"==typeof l&&(p=l?oT.has(e):aT.has(e)),d&&p}}const RL=new RegExp("s*:selfs*,?","g");function UA(n,e,t){return new NL(n).build(e,t)}class NL{constructor(e){this._driver=e}build(e,t){const r=new kL(t);return this._resetContextStyleTimingState(r),Yo(this,xw(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const l=[],d=[];return"@"==e.name.charAt(0)&&t.errors.push(function $F(){return new a.vHH(3006,Yt)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const _=p,b=_.name;b.toString().split(/\s*,\s*/).forEach(A=>{_.name=A,l.push(this.visitState(_,t))}),_.name=b}else if(1==p.type){const _=this.visitTransition(p,t);r+=_.queryCount,i+=_.depCount,d.push(_)}else t.errors.push(function qF(){return new a.vHH(3007,Yt)}())}),{type:7,name:e.name,states:l,transitions:d,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const l=new Set,d=i||{};r.styles.forEach(p=>{if(uT(p)){const _=p;Object.keys(_).forEach(b=>{TM(_[b]).forEach(A=>{d.hasOwnProperty(A)||l.add(A)})})}}),l.size&&(iT(l.values()),t.errors.push(function GF(n,e){return new a.vHH(3008,Yt)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Yo(this,xw(e.animation),t);return{type:1,matchers:SL(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Lg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Yo(this,r,t)),options:Lg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const l=e.steps.map(d=>{t.currentTime=r;const p=Yo(this,d,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:l,options:Lg(e.options)}}visitAnimate(e,t){const r=function LL(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return VA(nT(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=VA(0,0,"");return l.dynamic=!0,l.strValue=r,l}return t=t||nT(r,e),VA(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,l=e.styles?e.styles:oM({});if(5==l.type)i=this.visitKeyframes(l,t);else{let d=e.styles,p=!1;if(!d){p=!0;const b={};r.easing&&(b.easing=r.easing),d=oM(b)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(d,t);_.isEmptyStep=p,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(d=>{"string"==typeof d?d==_d?r.push(d):t.errors.push(function ZF(n){return new a.vHH(3002,Yt)}()):r.push(d)}):r.push(e.styles);let i=!1,l=null;return r.forEach(d=>{if(uT(d)){const p=d,_=p.easing;if(_&&(l=_,delete p.easing),!i)for(let b in p)if(p[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,l=t.currentTime;r&&l>0&&(l-=r.duration+r.delay),e.styles.forEach(d=>{"string"!=typeof d&&Object.keys(d).forEach(p=>{if(!this._driver.validateStyleProperty(p))return void t.errors.push(function zF(n){return new a.vHH(3009,Yt)}());const _=t.collectedStyles[t.currentQuerySelector],b=_[p];let A=!0;b&&(l!=i&&l>=b.startTime&&i<=b.endTime&&(t.errors.push(function WF(n,e,t,r,i){return new a.vHH(3010,Yt)}()),A=!1),l=b.startTime),A&&(_[p]={startTime:l,endTime:i}),t.options&&function CL(n,e,t){const r=e.params||{},i=TM(n);i.length&&i.forEach(l=>{r.hasOwnProperty(l)||t.push(function VF(n){return new a.vHH(3001,Yt)}())})}(d[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function KF(){return new a.vHH(3011,Yt)}()),r;let l=0;const d=[];let p=!1,_=!1,b=0;const A=e.steps.map(Be=>{const rt=this._makeStyleAst(Be,t);let ct=null!=rt.offset?rt.offset:function FL(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(uT(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(uT(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(rt.styles),Ze=0;return null!=ct&&(l++,Ze=rt.offset=ct),_=_||Ze<0||Ze>1,p=p||Ze<b,b=Ze,d.push(Ze),rt});_&&t.errors.push(function YF(){return new a.vHH(3012,Yt)}()),p&&t.errors.push(function QF(){return new a.vHH(3200,Yt)}());const x=e.steps.length;let k=0;l>0&&l<x?t.errors.push(function JF(){return new a.vHH(3202,Yt)}()):0==l&&(k=1/(x-1));const L=x-1,H=t.currentTime,ue=t.currentAnimateTimings,be=ue.duration;return A.forEach((Be,rt)=>{const ct=k>0?rt==L?1:k*rt:d[rt],Ze=ct*be;t.currentTime=H+ue.delay+Ze,ue.duration=Ze,this._validateStyleAst(Be,t),Be.offset=ct,r.styles.push(Be)}),r}visitReference(e,t){return{type:8,animation:Yo(this,xw(e.animation),t),options:Lg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Lg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Lg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[l,d]=function PL(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(RL,"")),n=n.replace(/@\*/g,tT).replace(/@\w+/g,t=>tT+"-"+t.substr(1)).replace(/:animating/g,OA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+l:l,Ko(t.collectedStyles,t.currentQuerySelector,{});const p=Yo(this,xw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:l,limit:i.limit||0,optional:!!i.optional,includeSelf:d,animation:p,originalSelector:e.selector,options:Lg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function XF(){return new a.vHH(3013,Yt)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:nT(e.timings,t.errors,!0);return{type:12,animation:Yo(this,xw(e.animation),t),timings:r,options:null}}}class kL{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function uT(n){return!Array.isArray(n)&&"object"==typeof n}function Lg(n){return n?(n=dy(n)).params&&(n.params=function OL(n){return n?dy(n):null}(n.params)):n={},n}function VA(n,e,t){return{duration:n,delay:e,easing:t}}function BA(n,e,t,r,i,l,d=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:l,totalTime:i+l,easing:d,subTimeline:p}}class lT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const BL=new RegExp(":enter","g"),HL=new RegExp(":leave","g");function jA(n,e,t,r,i,l={},d={},p,_,b=[]){return(new $L).buildKeyframes(n,e,t,r,i,l,d,p,_,b)}class $L{buildKeyframes(e,t,r,i,l,d,p,_,b,A=[]){b=b||new lT;const x=new HA(e,t,b,i,l,A,[]);x.options=_,x.currentTimeline.setStyles([d],null,x.errors,_),Yo(this,r,x);const k=x.timelines.filter(L=>L.containsAnimation());if(Object.keys(p).length){let L;for(let H=k.length-1;H>=0;H--){const ue=k[H];if(ue.element===t){L=ue;break}}L&&!L.allowOnlyTimelineStyles()&&L.setStyles([p],null,x.errors,_)}return k.length?k.map(L=>L.buildKeyframes()):[BA(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),l=t.currentTimeline.currentTime,d=this._visitSubInstructions(r,i,i.options);l!=d&&t.transformIntoNewTimeline(d)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let l=t.currentTimeline.currentTime;const d=null!=r.duration?kg(r.duration):null,p=null!=r.delay?kg(r.delay):null;return 0!==d&&e.forEach(_=>{const b=t.appendInstructionToTimeline(_,d,p);l=Math.max(l,b.duration+b.delay)}),l}visitReference(e,t){t.updateOptions(e.options,!0),Yo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const l=e.options;if(l&&(l.params||l.delay)&&(i=t.createSubContext(l),i.transformIntoNewTimeline(),null!=l.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=cT);const d=kg(l.delay);i.delayNextStep(d)}e.steps.length&&(e.steps.forEach(d=>Yo(this,d,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const l=e.options&&e.options.delay?kg(e.options.delay):0;e.steps.forEach(d=>{const p=t.createSubContext(e.options);l&&p.delayNextStep(l),Yo(this,d,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(d=>t.currentTimeline.mergeTimelineCollectedStyles(d)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return nT(t.params?rT(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const l=e.style;5==l.type?this.visitKeyframes(l,t):(t.incrementTime(r.duration),this.visitStyle(l,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const l=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(l):r.setStyles(e.styles,l,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,l=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(_=>{p.forwardTime((_.offset||0)*l),p.setStyles(_.styles,_.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+l),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},l=i.delay?kg(i.delay):0;l&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=cT);let d=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let _=null;p.forEach((b,A)=>{t.currentQueryIndex=A;const x=t.createSubContext(e.options,b);l&&x.delayNextStep(l),b===t.element&&(_=x.currentTimeline),Yo(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(d),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,l=e.timings,d=Math.abs(l.duration),p=d*(t.currentQueryTotal-1);let _=d*t.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":_=p-_;break;case"full":_=r.currentStaggerTime}const A=t.currentTimeline;_&&A.delayNextStep(_);const x=A.currentTime;Yo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const cT={};class HA{constructor(e,t,r,i,l,d,p,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=l,this.errors=d,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=cT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new dT(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=kg(r.duration)),null!=r.delay&&(i.delay=kg(r.delay));const l=r.params;if(l){let d=i.params;d||(d=this.options.params={}),Object.keys(l).forEach(p=>{(!t||!d.hasOwnProperty(p))&&(d[p]=rT(l[p],d,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,l=new HA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(e),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(e){return this.previousNode=cT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},l=new qL(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(l),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,l,d){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(BL,"."+this._enterClassName)).replace(HL,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!l&&0==p.length&&d.push(function eL(n){return new a.vHH(3014,Yt)}()),p}}class dT{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new dT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||_d,this._currentKeyframe[t]=_d}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const l=i&&i.params||{},d=function GL(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(l=>{t[l]=_d})):_f(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(d).forEach(p=>{const _=rT(d[p],l,r);this._pendingStyles[p]=_,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:_d),this._updateStyle(p,_)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,_)=>{const b=_f(p,!0);Object.keys(b).forEach(A=>{const x=b[A];"!"==x?e.add(A):x==_d&&t.add(A)}),r||(b.offset=_/this.duration),i.push(b)});const l=e.size?iT(e.values()):[],d=t.size?iT(t.values()):[];if(r){const p=i[0],_=dy(p);p.offset=0,_.offset=1,i=[p,_]}return BA(this.element,i,l,d,this.duration,this.startTime,this.easing,!1)}}class qL extends dT{constructor(e,t,r,i,l,d,p=!1){super(e,t,d.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=l,this._stretchStartingKeyframe=p,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const l=[],d=r+t,p=t/d,_=_f(e[0],!1);_.offset=0,l.push(_);const b=_f(e[0],!1);b.offset=xM(p),l.push(b);const A=e.length-1;for(let x=1;x<=A;x++){let k=_f(e[x],!1);k.offset=xM((t+k.offset*r)/d),l.push(k)}r=d,t=0,i="",e=l}return BA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function xM(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class $A{}class ZL extends $A{normalizePropertyName(e,t){return LA(e)}normalizeStyleValue(e,t,r,i){let l="";const d=r.toString().trim();if(zL[t]&&0!==r&&"0"!==r)if("number"==typeof r)l="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function HF(n,e){return new a.vHH(3005,Yt)}())}return d+l}}const zL=(()=>function WL(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function MM(n,e,t,r,i,l,d,p,_,b,A,x,k){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:l,toState:r,toStyles:d,timelines:p,queriedElements:_,preStyleProps:b,postStyleProps:A,totalTime:x,errors:k}}const qA={};class RM{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function KL(n,e,t,r,i){return n.some(l=>l(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],l=this._stateStyles[e],d=i?i.buildStyles(t,r):{};return l?l.buildStyles(t,r):d}build(e,t,r,i,l,d,p,_,b,A){const x=[],k=this.ast.options&&this.ast.options.params||qA,H=this.buildStyles(r,p&&p.params||qA,x),ue=_&&_.params||qA,be=this.buildStyles(i,ue,x),Be=new Set,rt=new Map,ct=new Map,Ze="void"===i,Ut={params:Object.assign(Object.assign({},k),ue)},yn=A?[]:jA(e,t,this.ast.animation,l,d,H,be,Ut,b,x);let rr=0;if(yn.forEach(Qo=>{rr=Math.max(Qo.duration+Qo.delay,rr)}),x.length)return MM(t,this._triggerName,r,i,Ze,H,be,[],[],rt,ct,rr,x);yn.forEach(Qo=>{const bd=Qo.element,gN=Ko(rt,bd,{});Qo.preStyleProps.forEach(jg=>gN[jg]=!0);const Lw=Ko(ct,bd,{});Qo.postStyleProps.forEach(jg=>Lw[jg]=!0),bd!==t&&Be.add(bd)});const Vs=iT(Be.values());return MM(t,this._triggerName,r,i,Ze,H,be,yn,Vs,rt,ct,rr)}}class YL{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=dy(this.defaultParams);return Object.keys(e).forEach(l=>{const d=e[l];null!=d&&(i[l]=d)}),this.styles.styles.forEach(l=>{if("string"!=typeof l){const d=l;Object.keys(d).forEach(p=>{let _=d[p];_.length>1&&(_=rT(_,i,t));const b=this.normalizer.normalizePropertyName(p,t);_=this.normalizer.normalizeStyleValue(p,b,_,t),r[b]=_})}}),r}}class JL{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new YL(i.style,i.options&&i.options.params||{},r)}),NM(this.states,"true","1"),NM(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new RM(e,i,this.states))}),this.fallbackTransition=function XL(n,e,t){return new RM(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(d=>d.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function NM(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const e2=new lT;class t2{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=UA(this._driver,t,r);if(r.length)throw function aL(n){return new a.vHH(3503,Yt)}();this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,l=cM(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,l,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],l=this._animations[e];let d;const p=new Map;if(l?(d=jA(this._driver,t,l,PA,XC,{},{},r,e2,i),d.forEach(A=>{const x=Ko(p,A.element,{});A.postStyleProps.forEach(k=>x[k]=null)})):(i.push(function uL(){return new a.vHH(3300,Yt)}()),d=[]),i.length)throw function lL(n){return new a.vHH(3504,Yt)}();p.forEach((A,x)=>{Object.keys(A).forEach(k=>{A[k]=this._driver.computeStyle(x,k,_d)})});const b=mf(d.map(A=>{const x=p.get(A.element);return this._buildPlayer(A,{},x)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function cL(n){return new a.vHH(3301,Yt)}();return t}listen(e,t,r,i){const l=xA(t,"","","");return AA(this._getPlayer(e),r,l,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const l=this._getPlayer(e);switch(r){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const PM="ng-animate-queued",GA="ng-animate-disabled",o2=[],OM={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},a2={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},La="__ng_removed";class ZA{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function d2(n){return null!=n?n:null}(r?e.value:e),r){const l=dy(e);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Mw="void",zA=new ZA(Mw);class u2{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ua(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function dL(n,e){return new a.vHH(3302,Yt)}();if(null==r||0==r.length)throw function hL(n){return new a.vHH(3303,Yt)}();if(!function h2(n){return"start"==n||"done"==n}(r))throw function fL(n,e){return new a.vHH(3400,Yt)}();const l=Ko(this._elementListeners,e,[]),d={name:t,phase:r,callback:i};l.push(d);const p=Ko(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(Ua(e,eT),Ua(e,eT+"-"+t),p[t]=zA),()=>{this._engine.afterFlush(()=>{const _=l.indexOf(d);_>=0&&l.splice(_,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function pL(n){return new a.vHH(3401,Yt)}();return t}trigger(e,t,r,i=!0){const l=this._getTrigger(t),d=new WA(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Ua(e,eT),Ua(e,eT+"-"+t),this._engine.statesByElement.set(e,p={}));let _=p[t];const b=new ZA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&b.absorbOptions(_.options),p[t]=b,_||(_=zA),b.value!==Mw&&_.value===b.value){if(!function g2(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const l=t[i];if(!e.hasOwnProperty(l)||n[l]!==e[l])return!1}return!0}(_.params,b.params)){const ue=[],be=l.matchStyles(_.value,_.params,ue),Be=l.matchStyles(b.value,b.params,ue);ue.length?this._engine.reportError(ue):this._engine.afterFlush(()=>{Fg(e,be),zl(e,Be)})}return}const k=Ko(this._engine.playersByElement,e,[]);k.forEach(ue=>{ue.namespaceId==this.id&&ue.triggerName==t&&ue.queued&&ue.destroy()});let L=l.matchTransition(_.value,b.value,e,b.params),H=!1;if(!L){if(!i)return;L=l.fallbackTransition,H=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:L,fromState:_,toState:b,player:d,isFallbackTransition:H}),H||(Ua(e,PM),d.onStart(()=>{hy(e,PM)})),d.onDone(()=>{let ue=this.players.indexOf(d);ue>=0&&this.players.splice(ue,1);const be=this._engine.playersByElement.get(e);if(be){let Be=be.indexOf(d);Be>=0&&be.splice(Be,1)}}),this.players.push(d),k.push(d),d}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,tT,!0);r.forEach(i=>{if(i[La])return;const l=this._engine.fetchNamespacesByElement(i);l.size?l.forEach(d=>d.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const l=this._engine.statesByElement.get(e),d=new Map;if(l){const p=[];if(Object.keys(l).forEach(_=>{if(d.set(_,l[_].value),this._triggers[_]){const b=this.trigger(e,_,Mw,i);b&&p.push(b)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,d),r&&mf(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(l=>{const d=l.name;if(i.has(d))return;i.add(d);const _=this._triggers[d].fallbackTransition,b=r[d]||zA,A=new ZA(Mw),x=new WA(this.id,d,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:d,transition:_,fromState:b,toState:A,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const l=r.players.length?r.playersByQueriedElement.get(e):[];if(l&&l.length)i=!0;else{let d=e;for(;d=d.parentNode;)if(r.statesByElement.get(d)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const l=e[La];(!l||l===OM)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ua(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const l=r.element,d=this._elementListeners.get(l);d&&d.forEach(p=>{if(p.name==r.triggerName){const _=xA(l,r.triggerName,r.fromState.value,r.toState.value);_._data=e,AA(r.player,p.phase,_,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const l=r.transition.ast.depCount,d=i.transition.ast.depCount;return 0==l||0==d?l-d:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class l2{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,l)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new u2(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,l=r.length-1;if(l>=0){let d=!1;if(void 0!==this.driver.getParentElement){let p=this.driver.getParentElement(t);for(;p;){const _=i.get(p);if(_){const b=r.indexOf(_);r.splice(b+1,0,e),d=!0;break}p=this.driver.getParentElement(p)}}else for(let p=l;p>=0;p--)if(this.driver.containsElement(r[p].hostElement,t)){r.splice(p+1,0,e),d=!0;break}d||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let l=0;l<i.length;l++){const d=r[i[l]].namespaceId;if(d){const p=this._fetchNamespace(d);p&&t.add(p)}}}return t}trigger(e,t,r,i){if(hT(t)){const l=this._fetchNamespace(e);if(l)return l.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!hT(t))return;const l=t[La];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const d=this.collectedLeaveElements.indexOf(t);d>=0&&this.collectedLeaveElements.splice(d,1)}if(e){const d=this._fetchNamespace(e);d&&d.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ua(e,GA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),hy(e,GA))}removeNode(e,t,r,i){if(hT(t)){const l=e?this._fetchNamespace(e):null;if(l?l.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const d=this.namespacesByHostElement.get(t);d&&d.id!==e&&d.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,l){this.collectedLeaveElements.push(t),t[La]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:l}}listen(e,t,r,i,l){return hT(t)?this._fetchNamespace(e).listen(t,r,i,l):()=>{}}_buildInstruction(e,t,r,i,l){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,l)}destroyInnerAnimations(e){let t=this.driver.query(e,tT,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,OA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return mf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[La];if(r&&r.setForRemoval){if(e[La]=OM,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(GA))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ua(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?mf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function gL(n){return new a.vHH(3402,Yt)}()}_flushAnimations(e,t){const r=new lT,i=[],l=new Map,d=[],p=new Map,_=new Map,b=new Map,A=new Set;this.disabledNodes.forEach(at=>{A.add(at);const vt=this.driver.query(at,".ng-animate-queued",!0);for(let Tt=0;Tt<vt.length;Tt++)A.add(vt[Tt])});const x=this.bodyNode,k=Array.from(this.statesByElement.keys()),L=LM(k,this.collectedEnterElements),H=new Map;let ue=0;L.forEach((at,vt)=>{const Tt=PA+ue++;H.set(vt,Tt),at.forEach(an=>Ua(an,Tt))});const be=[],Be=new Set,rt=new Set;for(let at=0;at<this.collectedLeaveElements.length;at++){const vt=this.collectedLeaveElements[at],Tt=vt[La];Tt&&Tt.setForRemoval&&(be.push(vt),Be.add(vt),Tt.hasAnimation?this.driver.query(vt,".ng-star-inserted",!0).forEach(an=>Be.add(an)):rt.add(vt))}const ct=new Map,Ze=LM(k,Array.from(Be));Ze.forEach((at,vt)=>{const Tt=XC+ue++;ct.set(vt,Tt),at.forEach(an=>Ua(an,Tt))}),e.push(()=>{L.forEach((at,vt)=>{const Tt=H.get(vt);at.forEach(an=>hy(an,Tt))}),Ze.forEach((at,vt)=>{const Tt=ct.get(vt);at.forEach(an=>hy(an,Tt))}),be.forEach(at=>{this.processLeaveNode(at)})});const Ut=[],yn=[];for(let at=this._namespaceList.length-1;at>=0;at--)this._namespaceList[at].drainQueuedTransitions(t).forEach(Tt=>{const an=Tt.player,Ti=Tt.element;if(Ut.push(an),this.collectedEnterElements.length){const Bs=Ti[La];if(Bs&&Bs.setForMove){if(Bs.previousTriggersValues&&Bs.previousTriggersValues.has(Tt.triggerName)){const Hg=Bs.previousTriggersValues.get(Tt.triggerName),Cf=this.statesByElement.get(Tt.element);Cf&&Cf[Tt.triggerName]&&(Cf[Tt.triggerName].value=Hg)}return void an.destroy()}}const Yl=!x||!this.driver.containsElement(x,Ti),Jo=ct.get(Ti),bf=H.get(Ti),pr=this._buildInstruction(Tt,r,bf,Jo,Yl);if(pr.errors&&pr.errors.length)return void yn.push(pr);if(Yl)return an.onStart(()=>Fg(Ti,pr.fromStyles)),an.onDestroy(()=>zl(Ti,pr.toStyles)),void i.push(an);if(Tt.isFallbackTransition)return an.onStart(()=>Fg(Ti,pr.fromStyles)),an.onDestroy(()=>zl(Ti,pr.toStyles)),void i.push(an);const yN=[];pr.timelines.forEach(Bs=>{Bs.stretchStartingKeyframe=!0,this.disabledNodes.has(Bs.element)||yN.push(Bs)}),pr.timelines=yN,r.append(Ti,pr.timelines),d.push({instruction:pr,player:an,element:Ti}),pr.queriedElements.forEach(Bs=>Ko(p,Bs,[]).push(an)),pr.preStyleProps.forEach((Bs,Hg)=>{const Cf=Object.keys(Bs);if(Cf.length){let $g=_.get(Hg);$g||_.set(Hg,$g=new Set),Cf.forEach(bS=>$g.add(bS))}}),pr.postStyleProps.forEach((Bs,Hg)=>{const Cf=Object.keys(Bs);let $g=b.get(Hg);$g||b.set(Hg,$g=new Set),Cf.forEach(bS=>$g.add(bS))})});if(yn.length){const at=[];yn.forEach(vt=>{at.push(function mL(n,e){return new a.vHH(3505,Yt)}())}),Ut.forEach(vt=>vt.destroy()),this.reportError(at)}const rr=new Map,Vs=new Map;d.forEach(at=>{const vt=at.element;r.has(vt)&&(Vs.set(vt,vt),this._beforeAnimationBuild(at.player.namespaceId,at.instruction,rr))}),i.forEach(at=>{const vt=at.element;this._getPreviousPlayers(vt,!1,at.namespaceId,at.triggerName,null).forEach(an=>{Ko(rr,vt,[]).push(an),an.destroy()})});const Qo=be.filter(at=>VM(at,_,b)),bd=new Map;FM(bd,this.driver,rt,b,_d).forEach(at=>{VM(at,_,b)&&Qo.push(at)});const Lw=new Map;L.forEach((at,vt)=>{FM(Lw,this.driver,new Set(at),_,"!")}),Qo.forEach(at=>{const vt=bd.get(at),Tt=Lw.get(at);bd.set(at,Object.assign(Object.assign({},vt),Tt))});const jg=[],mN=[],_N={};d.forEach(at=>{const{element:vt,player:Tt,instruction:an}=at;if(r.has(vt)){if(A.has(vt))return Tt.onDestroy(()=>zl(vt,an.toStyles)),Tt.disabled=!0,Tt.overrideTotalTime(an.totalTime),void i.push(Tt);let Ti=_N;if(Vs.size>1){let Jo=vt;const bf=[];for(;Jo=Jo.parentNode;){const pr=Vs.get(Jo);if(pr){Ti=pr;break}bf.push(Jo)}bf.forEach(pr=>Vs.set(pr,Ti))}const Yl=this._buildAnimation(Tt.namespaceId,an,rr,l,Lw,bd);if(Tt.setRealPlayer(Yl),Ti===_N)jg.push(Tt);else{const Jo=this.playersByElement.get(Ti);Jo&&Jo.length&&(Tt.parentPlayer=mf(Jo)),i.push(Tt)}}else Fg(vt,an.fromStyles),Tt.onDestroy(()=>zl(vt,an.toStyles)),mN.push(Tt),A.has(vt)&&i.push(Tt)}),mN.forEach(at=>{const vt=l.get(at.element);if(vt&&vt.length){const Tt=mf(vt);at.setRealPlayer(Tt)}}),i.forEach(at=>{at.parentPlayer?at.syncPlayerEvents(at.parentPlayer):at.destroy()});for(let at=0;at<be.length;at++){const vt=be[at],Tt=vt[La];if(hy(vt,XC),Tt&&Tt.hasAnimation)continue;let an=[];if(p.size){let Yl=p.get(vt);Yl&&Yl.length&&an.push(...Yl);let Jo=this.driver.query(vt,OA,!0);for(let bf=0;bf<Jo.length;bf++){let pr=p.get(Jo[bf]);pr&&pr.length&&an.push(...pr)}}const Ti=an.filter(Yl=>!Yl.destroyed);Ti.length?f2(this,vt,Ti):this.processLeaveNode(vt)}return be.length=0,jg.forEach(at=>{this.players.push(at),at.onDone(()=>{at.destroy();const vt=this.players.indexOf(at);this.players.splice(vt,1)}),at.play()}),jg}elementContainsData(e,t){let r=!1;const i=t[La];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,l){let d=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(d=p)}else{const p=this.playersByElement.get(e);if(p){const _=!l||l==Mw;p.forEach(b=>{b.queued||!_&&b.triggerName!=i||d.push(b)})}}return(r||i)&&(d=d.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),d}_beforeAnimationBuild(e,t,r){const l=t.element,d=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const b=_.element,A=b!==l,x=Ko(r,b,[]);this._getPreviousPlayers(b,A,d,p,t.toState).forEach(L=>{const H=L.getRealPlayer();H.beforeDestroy&&H.beforeDestroy(),L.destroy(),x.push(L)})}Fg(l,t.fromStyles)}_buildAnimation(e,t,r,i,l,d){const p=t.triggerName,_=t.element,b=[],A=new Set,x=new Set,k=t.timelines.map(H=>{const ue=H.element;A.add(ue);const be=ue[La];if(be&&be.removedBeforeQueried)return new Sw(H.duration,H.delay);const Be=ue!==_,rt=function p2(n){const e=[];return UM(n,e),e}((r.get(ue)||o2).map(rr=>rr.getRealPlayer())).filter(rr=>!!rr.element&&rr.element===ue),ct=l.get(ue),Ze=d.get(ue),Ut=cM(0,this._normalizer,0,H.keyframes,ct,Ze),yn=this._buildPlayer(H,Ut,rt);if(H.subTimeline&&i&&x.add(ue),Be){const rr=new WA(e,p,ue);rr.setRealPlayer(yn),b.push(rr)}return yn});b.forEach(H=>{Ko(this.playersByQueriedElement,H.element,[]).push(H),H.onDone(()=>function c2(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,H.element,H))}),A.forEach(H=>Ua(H,wM));const L=mf(k);return L.onDestroy(()=>{A.forEach(H=>hy(H,wM)),zl(_,t.toStyles)}),x.forEach(H=>{Ko(i,H,[]).push(L)}),L}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Sw(e.duration,e.delay)}}class WA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Sw,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>AA(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ko(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function hT(n){return n&&1===n.nodeType}function kM(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function FM(n,e,t,r,i){const l=[];t.forEach(_=>l.push(kM(_)));const d=[];r.forEach((_,b)=>{const A={};_.forEach(x=>{const k=A[x]=e.computeStyle(b,x,i);(!k||0==k.length)&&(b[La]=a2,d.push(b))}),n.set(b,A)});let p=0;return t.forEach(_=>kM(_,l[p++])),d}function LM(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),l=new Map;function d(p){if(!p)return 1;let _=l.get(p);if(_)return _;const b=p.parentNode;return _=t.has(b)?b:i.has(b)?1:d(b),l.set(p,_),_}return e.forEach(p=>{const _=d(p);1!==_&&t.get(_).push(p)}),t}function Ua(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function hy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function f2(n,e,t){mf(t).onDone(()=>n.processLeaveNode(e))}function UM(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof uM?UM(r.players,e):e.push(r)}}function VM(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(l=>i.add(l)):e.set(n,r),t.delete(n),!0}class fT{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,l)=>{},this._transitionEngine=new l2(e,t,r),this._timelineEngine=new t2(e,t,r),this._transitionEngine.onRemovalComplete=(i,l)=>this.onRemovalComplete(i,l)}registerTrigger(e,t,r,i,l){const d=e+"-"+i;let p=this._triggerCache[d];if(!p){const _=[],b=UA(this._driver,l,_);if(_.length)throw function sL(n,e){return new a.vHH(3404,Yt)}();p=function QL(n,e,t){return new JL(n,e,t)}(i,b,this._normalizer),this._triggerCache[d]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[l,d]=dM(r);this._timelineEngine.command(l,t,d,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,l){if("@"==r.charAt(0)){const[d,p]=dM(r);return this._timelineEngine.listen(d,t,p,l)}return this._transitionEngine.listen(e,t,r,i,l)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let _2=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let l=n.initialStylesByElement.get(t);l||n.initialStylesByElement.set(t,l={}),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&zl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(zl(this._element,this._initialStyles),this._endStyles&&(zl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Fg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Fg(this._element,this._endStyles),this._endStyles=null),zl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function KA(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];y2(i)&&(e=e||{},e[i]=n[i])}return e}function y2(n){return"display"===n||"position"===n}class BM{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:IM(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class v2{validateStyleProperty(e){return gM(e)}matchesElement(e,t){return!1}containsElement(e,t){return mM(e,t)}getParentElement(e){return RA(e)}query(e,t,r){return _M(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,l,d=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};l&&(_.easing=l);const b={},A=d.filter(k=>k instanceof BM);(function DL(n,e){return 0===n||0===e})(r,i)&&A.forEach(k=>{let L=k.currentSnapshot;Object.keys(L).forEach(H=>b[H]=L[H])}),t=function AL(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let l=e[0],d=[];if(r.forEach(p=>{l.hasOwnProperty(p)||d.push(p),l[p]=t[p]}),d.length)for(var i=1;i<e.length;i++){let p=e[i];d.forEach(function(_){p[_]=IM(n,_)})}}return e}(e,t=t.map(k=>_f(k,!1)),b);const x=function m2(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=KA(e[0]),e.length>1&&(r=KA(e[e.length-1]))):e&&(t=KA(e)),t||r?new _2(n,t,r):null}(e,t);return new BM(e,t,_,x)}}let w2=(()=>{class n extends iM{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:a.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?sM(t):t;return jM(this._renderer,null,r,"register",[i]),new E2(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.FYo),a.LFG(ie))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class E2 extends class FF{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new b2(this._id,e,t||{},this._renderer)}}class b2{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return jM(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function jM(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const HM="@.disabled";let C2=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(l,d)=>{const p=null==d?void 0:d.parentNode(l);p&&d.removeChild(p,l)}}createRenderer(t,r){const l=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let A=this._rendererCache.get(l);return A||(A=new $M("",l,this.engine),this._rendererCache.set(l,A)),A}const d=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const _=A=>{Array.isArray(A)?A.forEach(_):this.engine.registerTrigger(d,p,t,A.name,A)};return r.data.animation.forEach(_),new T2(this,p,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[d,p]=l;d(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(a.FYo),a.LFG(fT),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class $M{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==HM?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class T2 extends $M{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==HM?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function I2(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let l=t.substr(1),d="";return"@"!=l.charAt(0)&&([l,d]=function D2(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(l)),this.engine.listen(this.namespaceId,i,l,d,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let A2=(()=>{class n extends fT{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie),a.LFG(NA),a.LFG($A))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const qM=new a.OlP("AnimationModuleType"),GM=[{provide:iM,useClass:w2},{provide:$A,useFactory:function S2(){return new ZL}},{provide:fT,useClass:A2},{provide:a.FYo,useFactory:function x2(n,e,t){return new C2(n,e,t)},deps:[wn,fT,a.R0b]}],ZM=[{provide:NA,useFactory:()=>new v2},{provide:qM,useValue:"BrowserAnimations"},...GM],M2=[{provide:NA,useClass:yM},{provide:qM,useValue:"NoopAnimations"},...GM];let zM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?M2:ZM}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:ZM,imports:[Qu]}),n})(),WM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n}),n})(),Ug=(()=>{class n extends WM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();const Wl=new a.OlP("NgValueAccessor"),P2={provide:Wl,useExisting:(0,a.Gpc)(()=>Bu),multi:!0},k2=new a.OlP("CompositionEventMode");let Bu=(()=>{class n extends WM{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function O2(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(k2,8))},n.\u0275dir=a.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&a.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[a._Bn([P2]),a.qOj]}),n})();const as=new a.OlP("NgValidators"),vf=new a.OlP("NgAsyncValidators");function XM(n){return function yf(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function gT(n){return null}function sR(n){return null!=n}function oR(n){const e=(0,a.QGY)(n)?(0,Dt.D)(n):n;return(0,a.CqO)(e),e}function aR(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function uR(n,e){return e.map(t=>t(n))}function lR(n){return n.map(e=>function L2(n){return!n.validate}(e)?e:t=>e.validate(t))}function YA(n){return null!=n?function cR(n){if(!n)return null;const e=n.filter(sR);return 0==e.length?null:function(t){return aR(uR(t,e))}}(lR(n)):null}function QA(n){return null!=n?function dR(n){if(!n)return null;const e=n.filter(sR);return 0==e.length?null:function(t){return function R2(...n){const e=(0,Qs.jO)(n),{args:t,keys:r}=px(n),i=new ns.y(l=>{const{length:d}=t;if(!d)return void l.complete();const p=new Array(d);let _=d,b=d;for(let A=0;A<d;A++){let x=!1;(0,K0.Xf)(t[A]).subscribe((0,br.x)(l,k=>{x||(x=!0,b--),p[A]=k},()=>_--,void 0,()=>{(!_||!x)&&(b||l.next(r?mx(r,p):p),l.complete())}))}});return e?i.pipe(gx(e)):i}(uR(t,e).map(oR)).pipe((0,xt.U)(aR))}}(lR(n)):null}function hR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function JA(n){return n?Array.isArray(n)?n:[n]:[]}function mT(n,e){return Array.isArray(n)?n.includes(e):n===e}function gR(n,e){const t=JA(e);return JA(n).forEach(i=>{mT(t,i)||t.push(i)}),t}function mR(n,e){return JA(e).filter(t=>!mT(n,t))}class _R{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=QA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class wf extends _R{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Us extends _R{get formDirective(){return null}get path(){return null}}class yR{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let yd=(()=>{class n extends yR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(wf,2))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&a.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[a.qOj]}),n})(),vd=(()=>{class n extends yR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Us,10))},n.\u0275dir=a.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&a.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[a.qOj]}),n})();function Rw(n,e){tS(n,e),e.valueAccessor.writeValue(n.value),function G2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&wR(n,e)})}(n,e),function z2(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Z2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&wR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function q2(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function wT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function tS(n,e){const t=function fR(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(hR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function pR(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(hR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();wT(e._rawValidators,i),wT(e._rawAsyncValidators,i)}function wR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function iS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Nw="VALID",bT="INVALID",fy="PENDING",Pw="DISABLED";function oS(n){return(CT(n)?n.validators:n)||null}function CR(n){return Array.isArray(n)?YA(n):n||null}function aS(n,e){return(CT(e)?e.asyncValidators:n)||null}function TR(n){return Array.isArray(n)?QA(n):n||null}function CT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const uS=n=>n instanceof cS;function DR(n){return(n=>n instanceof xR)(n)?n.value:n.getRawValue()}function AR(n,e){const t=uS(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new a.vHH(1e3,"");if(!r[e])throw new a.vHH(1001,"")}function SR(n,e){uS(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new a.vHH(1002,"")})}class lS{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=CR(this._rawValidators),this._composedAsyncValidatorFn=TR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Nw}get invalid(){return this.status===bT}get pending(){return this.status==fy}get disabled(){return this.status===Pw}get enabled(){return this.status!==Pw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=CR(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=TR(e)}addValidators(e){this.setValidators(gR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mR(e,this._rawAsyncValidators))}hasValidator(e){return mT(this._rawValidators,e)}hasAsyncValidator(e){return mT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=fy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Pw,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Nw,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nw||this.status===fy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pw:Nw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=fy,this._hasOwnPendingAsyncValidator=!0;const t=oR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Q2(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=uS(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof X2)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?Pw:this.errors?bT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fy)?fy:this._anyControlsHaveStatus(bT)?bT:Nw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){CT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class xR extends lS{constructor(e=null,t,r){super(oS(t),aS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),CT(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class cS extends lS{constructor(e,t,r){super(oS(t),aS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){SR(this,e),Object.keys(e).forEach(r=>{AR(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=DR(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,l)=>{r=t(r,i,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class X2 extends lS{constructor(e,t,r){super(oS(t),aS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){SR(this,e),e.forEach((r,i)=>{AR(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>DR(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const eU={provide:Us,useExisting:(0,a.Gpc)(()=>ju)},Ow=(()=>Promise.resolve(null))();let ju=(()=>{class n extends Us{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new a.vpe,this.form=new cS({},YA(t),QA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ow.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Rw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ow.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ow.then(()=>{const r=this._findContainer(t.path),i=new cS({});(function ER(n,e){tS(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ow.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ow.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function bR(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(as,10),a.Y36(vf,10))},n.\u0275dir=a.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&a.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[a._Bn([eU]),a.qOj]}),n})();const nU={provide:wf,useExisting:(0,a.Gpc)(()=>Kl)},NR=(()=>Promise.resolve(null))();let Kl=(()=>{class n extends wf{constructor(t,r,i,l,d){super(),this._changeDetectorRef=d,this.control=new xR,this._registered=!1,this.update=new a.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function rS(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(l=>{l.constructor===Bu?t=l:function Y2(n){return Object.getPrototypeOf(n.constructor)===Ug}(l)?r=l:i=l}),i||r||t||null}(0,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function nS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Rw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){NR.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;NR.then(()=>{var l;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(l=this._changeDetectorRef)||void 0===l||l.markForCheck()})}_getPath(t){return this._parent?function yT(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Us,9),a.Y36(as,10),a.Y36(vf,10),a.Y36(Wl,10),a.Y36(a.sBO,8))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([nU]),a.qOj,a.TTD]}),n})(),wd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=a.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),OR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const hU={provide:Wl,useExisting:(0,a.Gpc)(()=>TT),multi:!0};function jR(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let TT=(()=>{class n extends Ug{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=jR(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function fU(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&a.NdJ("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([hU]),a.qOj]}),n})(),HR=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(jR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(TT,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const pU={provide:Wl,useExisting:(0,a.Gpc)(()=>pS),multi:!0};function $R(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let pS=(()=>{class n extends Ug{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(l=>this._getOptionId(l));r=(l,d)=>{l._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,l)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],l=r.selectedOptions;if(void 0!==l){const d=l;for(let p=0;p<d.length;p++){const b=this._getOptionValue(d[p].value);i.push(b)}}else{const d=r.options;for(let p=0;p<d.length;p++){const _=d[p];if(_.selected){const b=this._getOptionValue(_.value);i.push(b)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function gU(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&a.NdJ("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([pU]),a.qOj]}),n})(),qR=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue($R(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue($R(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(pS,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Vg=(()=>{class n{constructor(){this._validator=gT}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):gT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=a.lG2({type:n,features:[a.TTD]}),n})();const vU={provide:as,useExisting:(0,a.Gpc)(()=>Bg),multi:!0};let Bg=(()=>{class n extends Vg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function mU(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>XM}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&a.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[a._Bn([vU]),a.qOj]}),n})(),IU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[OR]]}),n})(),gS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[IU]}),n})(),DU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[Hi,rM,zM,gS]]}),n})(),AU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[Wo,gf],imports:[[Hi,gS,DU,dA,zM]]}),n})();class eN{}class tN{}class Ed{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),l=i.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(i,l),this.headers.has(l)?this.headers.get(l).push(d):this.headers.set(l,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ed?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ed;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ed?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const l=e.value;if(l){let d=this.headers.get(t);if(!d)return;d=d.filter(p=>-1===l.indexOf(p)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class SU{encodeKey(e){return nN(e)}encodeValue(e){return nN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const MU=/%(\d[a-f0-9])/gi,RU={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function nN(n){return encodeURIComponent(n).replace(MU,(e,t)=>{var r;return null!==(r=RU[t])&&void 0!==r?r:e})}function rN(n){return`${n}`}class Ef{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new SU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function xU(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const l=i.indexOf("="),[d,p]=-1==l?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,l)),e.decodeValue(i.slice(l+1))],_=t.get(d)||[];_.push(p),t.set(d,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(l=>{t.push({param:r,value:l,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ef({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(rN(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(rN(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class NU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function iN(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function sN(n){return"undefined"!=typeof Blob&&n instanceof Blob}function oN(n){return"undefined"!=typeof FormData&&n instanceof FormData}class kw{constructor(e,t,r,i){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function PU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,l=i):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new Ed),this.context||(this.context=new NU),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+d}}else this.params=new Ef,this.urlWithParams=t}serializeBody(){return null===this.body?null:iN(this.body)||sN(this.body)||oN(this.body)||function OU(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ef?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||oN(this.body)?null:sN(this.body)?this.body.type||null:iN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ef?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,l=e.responseType||this.responseType,d=void 0!==e.body?e.body:this.body,p=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let b=e.headers||this.headers,A=e.params||this.params;const x=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(b=Object.keys(e.setHeaders).reduce((k,L)=>k.set(L,e.setHeaders[L]),b)),e.setParams&&(A=Object.keys(e.setParams).reduce((k,L)=>k.set(L,e.setParams[L]),A)),new kw(r,i,d,{params:A,headers:b,context:x,reportProgress:_,responseType:l,withCredentials:p})}}var Wr=(()=>((Wr=Wr||{})[Wr.Sent=0]="Sent",Wr[Wr.UploadProgress=1]="UploadProgress",Wr[Wr.ResponseHeader=2]="ResponseHeader",Wr[Wr.DownloadProgress=3]="DownloadProgress",Wr[Wr.Response=4]="Response",Wr[Wr.User=5]="User",Wr))();class mS{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ed,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class _S extends mS{constructor(e={}){super(e),this.type=Wr.ResponseHeader}clone(e={}){return new _S({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class IT extends mS{constructor(e={}){super(e),this.type=Wr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new IT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class aN extends mS{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function yS(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let uN=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let l;if(t instanceof kw)l=t;else{let _,b;_=i.headers instanceof Ed?i.headers:new Ed(i.headers),i.params&&(b=i.params instanceof Ef?i.params:new Ef({fromObject:i.params})),l=new kw(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=Qe(l).pipe(ry(_=>this.handler.handle(_)));if(t instanceof kw||"events"===i.observe)return d;const p=d.pipe(qo(_=>_ instanceof IT));switch(i.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return p.pipe((0,xt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return p.pipe((0,xt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return p.pipe((0,xt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return p.pipe((0,xt.U)(_=>_.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ef).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,yS(i,r))}post(t,r,i={}){return this.request("POST",t,yS(i,r))}put(t,r,i={}){return this.request("PUT",t,yS(i,r))}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(eN))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class lN{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const cN=new a.OlP("HTTP_INTERCEPTORS");let kU=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const FU=/^\)\]\}',?\n/;let dN=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ns.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((L,H)=>i.setRequestHeader(L,H.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const L=t.detectContentTypeHeader();null!==L&&i.setRequestHeader("Content-Type",L)}if(t.responseType){const L=t.responseType.toLowerCase();i.responseType="json"!==L?L:"text"}const l=t.serializeBody();let d=null;const p=()=>{if(null!==d)return d;const L=i.statusText||"OK",H=new Ed(i.getAllResponseHeaders()),ue=function LU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return d=new _S({headers:H,status:i.status,statusText:L,url:ue}),d},_=()=>{let{headers:L,status:H,statusText:ue,url:be}=p(),Be=null;204!==H&&(Be=void 0===i.response?i.responseText:i.response),0===H&&(H=Be?200:0);let rt=H>=200&&H<300;if("json"===t.responseType&&"string"==typeof Be){const ct=Be;Be=Be.replace(FU,"");try{Be=""!==Be?JSON.parse(Be):null}catch(Ze){Be=ct,rt&&(rt=!1,Be={error:Ze,text:Be})}}rt?(r.next(new IT({body:Be,headers:L,status:H,statusText:ue,url:be||void 0})),r.complete()):r.error(new aN({error:Be,headers:L,status:H,statusText:ue,url:be||void 0}))},b=L=>{const{url:H}=p(),ue=new aN({error:L,status:i.status||0,statusText:i.statusText||"Unknown Error",url:H||void 0});r.error(ue)};let A=!1;const x=L=>{A||(r.next(p()),A=!0);let H={type:Wr.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(H.total=L.total),"text"===t.responseType&&!!i.responseText&&(H.partialText=i.responseText),r.next(H)},k=L=>{let H={type:Wr.UploadProgress,loaded:L.loaded};L.lengthComputable&&(H.total=L.total),r.next(H)};return i.addEventListener("load",_),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),t.reportProgress&&(i.addEventListener("progress",x),null!==l&&i.upload&&i.upload.addEventListener("progress",k)),i.send(l),r.next({type:Wr.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",_),i.removeEventListener("timeout",b),t.reportProgress&&(i.removeEventListener("progress",x),null!==l&&i.upload&&i.upload.removeEventListener("progress",k)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(on))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const vS=new a.OlP("XSRF_COOKIE_NAME"),wS=new a.OlP("XSRF_HEADER_NAME");class hN{}let UU=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=wo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(ie),a.LFG(a.Lbi),a.LFG(vS))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),ES=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const l=this.tokenService.getToken();return null!==l&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,l)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(hN),a.LFG(wS))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),VU=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(cN,[]);this.chain=r.reduceRight((i,l)=>new lN(i,l),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(tN),a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),BU=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:ES,useClass:kU}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:vS,useValue:t.cookieName}:[],t.headerName?{provide:wS,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[ES,{provide:cN,useExisting:ES,multi:!0},{provide:hN,useClass:UU},{provide:vS,useValue:"XSRF-TOKEN"},{provide:wS,useValue:"X-XSRF-TOKEN"}]}),n})(),jU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[uN,{provide:eN,useClass:VU},dN,{provide:tN,useExisting:dN}],imports:[[BU.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),HU=(()=>{class n{constructor(t,r,i){this.auth=t,this.db=r,this.router=i}canActivate(){var t=this;return(0,X.Z)(function*(){if(!(yield t.auth.isLoggedIn()))return t.router.navigate(["/home"]),!1;let i;return t.auth.user$.subscribe(l=>{i=t.db.getStudentCourses(null==l?void 0:l.id)}),!0})()}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Wo),a.LFG(gf),a.LFG($n))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $U(n,e){1&n&&a._UZ(0,"img",15)}function qU(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div")(1,"div",13),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw().clickedNav(l)}),a._uU(2),a.qZA(),a.YNc(3,$U,1,0,"img",14),a.qZA()}if(2&n){const t=e.$implicit,r=a.oxw();a.xp6(2),a.Oqu(t),a.xp6(1),a.Q6J("ngIf",t!=r.navigation[r.navigation.length-1])}}function GU(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",20)(1,"div",21)(2,"div",22),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).navProfile()}),a._uU(3,"Account settings"),a.qZA(),a.TgZ(4,"a",23),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).logout()}),a._uU(5,"Logout"),a.qZA()()()}}function ZU(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",16),a.NdJ("mouseenter",function(){return a.CHM(t),a.oxw().toggleProfileCard()})("mouseleave",function(){return a.CHM(t),a.oxw().toggleProfileCard()}),a.TgZ(1,"div",17)(2,"p"),a._uU(3),a.qZA(),a._UZ(4,"img",18),a.YNc(5,GU,6,0,"div",19),a.qZA()()}if(2&n){const t=e.ngIf,r=a.oxw();a.xp6(3),a.Oqu(t.fname),a.xp6(1),a.s9C("src",r.imgSrc,a.LSH),a.xp6(1),a.Q6J("ngIf",r.onProfile)}}function zU(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",27)(1,"div",28),a._uU(2,"Your Profile"),a.qZA(),a.TgZ(3,"a",29),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).logout()}),a._uU(4,"Logout"),a.qZA()()}}function WU(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",24),a.NdJ("click",function(){return a.CHM(t),a.oxw().toggleProfileCard()}),a._UZ(1,"img",25),a.YNc(2,zU,5,0,"div",26),a.qZA()}if(2&n){const t=a.oxw();a.xp6(1),a.s9C("src",t.imgSrc,a.LSH),a.xp6(1),a.Q6J("ngIf",t.onProfile)}}let DT=(()=>{class n{constructor(t,r,i){this.auth=t,this.router=r,this.storage=i,this.onProfile=!1,this.clickEvent=new a.vpe}ngOnInit(){this.auth.user$.subscribe(t=>{"default"!=(null==t?void 0:t.imgSrc)?this.storage.ref("users/"+(null==t?void 0:t.id)+"_thumb").getDownloadURL().subscribe(r=>{this.imgSrc=r}):this.imgSrc="/assets/User.png"})}toggleProfileCard(){this.onProfile=!this.onProfile}navProfile(){this.router.navigate(["/profile"])}logout(){this.auth.logout()}clickedNav(t){this.clickEvent.emit(t)}mobileBack(){return this.clickEvent.emit("Lecture"===this.navigation[this.navigation.length-1]?"Course Page":"Dashboard")}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Wo),a.Y36($n),a.Y36(Pg))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-header"]],inputs:{navigation:"navigation"},outputs:{clickEvent:"clickEvent"},decls:16,vars:7,consts:[[1,"bg-orange-700"],[1,"hidden","md:flex","header"],[1,"flex","items-center","divide-x-2","divide-gray-300"],["src","assets/logos/InterVidsLogo2.png",1,"pr-3","h-10"],[1,"flex"],[4,"ngFor","ngForOf"],["class","flex",3,"mouseenter","mouseleave",4,"ngIf"],[1,"md:hidden","header"],[1,"headerElement","xs:w-28","w-24",3,"click"],["src","assets/ui-icons/arrow.png",1,"inline-flex","rotate-180","h-6","pb-1","pr-1"],[1,"xs:text-xl","text-lg"],["src","assets/logos/InterVidsLogo2.png",1,"h-10","rounded-sm"],["class","flex justify-center headerElement  xs:w-28 w-24",3,"click",4,"ngIf"],[1,"px-3","headerElement",3,"click"],["src","assets/ui-icons/arrow.png","class","headerDivider",4,"ngIf"],["src","assets/ui-icons/arrow.png",1,"headerDivider"],[1,"flex",3,"mouseenter","mouseleave"],[1,"headerElement","flex","justify-center","w-44","px-1"],[1,"image","h-10","ml-3",3,"src"],["class","headerDropdownCardDesktop w-44",4,"ngIf"],[1,"headerDropdownCardDesktop","w-44"],[1,"py-1"],[1,"headerDropdownText",3,"click"],["href","#",1,"headerDropdownText",3,"click"],[1,"flex","justify-center","headerElement","xs:w-28","w-24",3,"click"],[1,"image","h-10",3,"src"],["class","headerDropdownCardMobile",4,"ngIf"],[1,"headerDropdownCardMobile"],[1,"headerDropdownText","text-center","text-xl"],["href","#",1,"headerDropdownText","text-center","text-xl",3,"click"]],template:function(t,r){1&t&&(a.TgZ(0,"nav",0)(1,"section",1)(2,"div",2),a._UZ(3,"img",3),a.TgZ(4,"div",4),a.YNc(5,qU,4,2,"div",5),a.qZA()(),a.YNc(6,ZU,6,3,"div",6),a.ALo(7,"async"),a.qZA(),a.TgZ(8,"section",7)(9,"div",8),a.NdJ("click",function(){return r.mobileBack()}),a._UZ(10,"img",9),a.TgZ(11,"p",10),a._uU(12,"Go back"),a.qZA()(),a._UZ(13,"img",11),a.YNc(14,WU,3,2,"div",12),a.ALo(15,"async"),a.qZA()()),2&t&&(a.xp6(5),a.Q6J("ngForOf",r.navigation),a.xp6(1),a.Q6J("ngIf",a.lcZ(7,3,r.auth.user$)),a.xp6(8),a.Q6J("ngIf",a.lcZ(15,5,r.auth.user$)))},directives:[vn,fn],pipes:[ps],styles:["",".image[_ngcontent-%COMP%]{\n        aspect-ratio: 1/1;\n        border-radius: 9999px;\n    }"],data:{animation:[]}}),n})();function KU(n,e){1&n&&a._UZ(0,"img",7)}function YU(n,e){1&n&&a._UZ(0,"img",8)}function QU(n,e){if(1&n&&(a.TgZ(0,"div"),a._uU(1),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Oqu(t.course.title)}}function JU(n,e){1&n&&(a.TgZ(0,"h4"),a._uU(1,"Create a new Course"),a.qZA())}function XU(n,e){1&n&&(a.TgZ(0,"h4"),a._uU(1,"Join a Course"),a.qZA())}function eV(n,e){if(1&n&&(a.TgZ(0,"div"),a.YNc(1,JU,2,0,"h4",6),a.YNc(2,XU,2,0,"h4",6),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Q6J("ngIf","Teacher"===t.role),a.xp6(1),a.Q6J("ngIf","Student"===t.role)}}let tV=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-course-card"]],inputs:{role:"role",course:"course"},decls:8,vars:4,consts:[[1,"w-[360px]","h-80","bg-gradient-to-br","from-white","to-blue-500","cursor-pointer","rounded-t-sm","rounded-b-xl","hover:animateUp","active:animateUp"],[1,"h-3/4","flex","justify-center","items-center"],["class","h-[75%] rounded-xl","src","assets/default-course.png",4,"ngIf"],["class","h-[75%] ","src","assets/ui-icons/plus.png",4,"ngIf"],[1,"h-1/4","bg-orange-700","flex","justify-center","items-center","rounded-sm"],[1,"text-white","font-normal","text-2xl","pb-2"],[4,"ngIf"],["src","assets/default-course.png",1,"h-[75%]","rounded-xl"],["src","assets/ui-icons/plus.png",1,"h-[75%]"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0)(1,"div",1),a.YNc(2,KU,1,0,"img",2),a.YNc(3,YU,1,0,"img",3),a.qZA(),a.TgZ(4,"div",4)(5,"div",5),a.YNc(6,QU,2,1,"div",6),a.YNc(7,eV,3,2,"div",6),a.qZA()()()),2&t&&(a.xp6(2),a.Q6J("ngIf",r.course),a.xp6(1),a.Q6J("ngIf",!r.course),a.xp6(3),a.Q6J("ngIf",r.course),a.xp6(1),a.Q6J("ngIf",!r.course))},directives:[fn],styles:[""]}),n})();function nV(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"app-course-card",13),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).toggleDialog()}),a.qZA()}if(2&n){const t=a.oxw(2).ngIf;a.Q6J("role",t.role)}}function rV(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"app-course-card",13),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).toggleDialog1()}),a.qZA()}if(2&n){const t=a.oxw(2).ngIf;a.Q6J("role",t.role)}}function iV(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"app-course-card",14),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw(3).navigateToCourse(l)}),a.qZA()}if(2&n){const t=e.$implicit,r=a.oxw(2).ngIf;a.Q6J("course",t)("role",r.role)}}function sV(n,e){if(1&n&&(a.TgZ(0,"div",10),a.YNc(1,nV,1,1,"app-course-card",11),a.YNc(2,rV,1,1,"app-course-card",11),a.YNc(3,iV,1,2,"app-course-card",12),a.qZA()),2&n){const t=e.ngIf,r=a.oxw().ngIf;a.xp6(1),a.Q6J("ngIf","Teacher"===r.role),a.xp6(1),a.Q6J("ngIf","Student"===r.role),a.xp6(1),a.Q6J("ngForOf",t)}}function oV(n,e){1&n&&a.GkF(0)}function aV(n,e){1&n&&a.GkF(0)}function uV(n,e){if(1&n&&(a.TgZ(0,"div",5)(1,"div",6)(2,"h1",7),a._uU(3,"Your Courses"),a.qZA(),a.YNc(4,sV,4,3,"div",8),a.ALo(5,"async"),a.qZA(),a.YNc(6,oV,1,0,"ng-container",9),a.YNc(7,aV,1,0,"ng-container",9),a.qZA()),2&n){const t=a.oxw(),r=a.MAs(5),i=a.MAs(7);a.xp6(4),a.Q6J("ngIf",a.lcZ(5,3,t.courses)),a.xp6(2),a.Q6J("ngTemplateOutlet",r),a.xp6(1),a.Q6J("ngTemplateOutlet",i)}}function lV(n,e){if(1&n&&(a.TgZ(0,"p",32),a._uU(1),a.qZA()),2&n){const t=a.oxw(3);a.xp6(1),a.Oqu(t.alert)}}function cV(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"h1",21),a._uU(5,"Join a Course!"),a.qZA()(),a.TgZ(6,"div",22),a.YNc(7,lV,2,1,"p",23),a.TgZ(8,"div",24)(9,"form")(10,"ul",25)(11,"li")(12,"label",26),a._uU(13,"Enter the Course ID here!"),a.qZA()(),a.TgZ(14,"li",27)(15,"input",28),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(2).courseID=i}),a.qZA()()()()()(),a.TgZ(16,"div",29)(17,"button",30),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).toggleDialog1()}),a._uU(18," Close "),a.qZA(),a.TgZ(19,"button",31),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).addStudentToCourse()}),a._uU(20," Add course "),a.qZA()()()()()}if(2&n){const t=a.oxw(2);a.xp6(7),a.Q6J("ngIf",t.alert),a.xp6(8),a.Q6J("ngModel",t.courseID)}}function dV(n,e){1&n&&a._UZ(0,"div",33)}function hV(n,e){if(1&n&&(a.YNc(0,cV,21,2,"div",15),a.YNc(1,dV,1,0,"div",16)),2&n){const t=a.oxw();a.Q6J("ngIf",t.showDialog1),a.xp6(1),a.Q6J("ngIf",t.showDialog1)}}function fV(n,e){if(1&n&&(a.TgZ(0,"p",32),a._uU(1),a.qZA()),2&n){const t=a.oxw(3);a.xp6(1),a.Oqu(t.alert)}}function pV(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"h1",21),a._uU(5,"Create a Course!"),a.qZA()(),a.TgZ(6,"div",22),a.YNc(7,fV,2,1,"p",23),a.TgZ(8,"div",24)(9,"form")(10,"ul",25)(11,"li")(12,"label",34),a._uU(13,"Course Name"),a.qZA()(),a.TgZ(14,"li",27)(15,"input",35),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(2).courseName=i}),a.qZA()(),a.TgZ(16,"li")(17,"label",36),a._uU(18,"Upload Course Image"),a.qZA()(),a.TgZ(19,"li"),a._UZ(20,"input",37),a.qZA()()()()(),a.TgZ(21,"div",29)(22,"button",30),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).toggleDialog()}),a._uU(23," Close "),a.qZA(),a.TgZ(24,"button",31),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).createNewCourse()}),a._uU(25," Create course "),a.qZA()()()()()}if(2&n){const t=a.oxw(2);a.xp6(7),a.Q6J("ngIf",t.alert),a.xp6(8),a.Q6J("ngModel",t.courseName)}}function gV(n,e){1&n&&a._UZ(0,"div",33)}function mV(n,e){if(1&n&&(a.YNc(0,pV,26,2,"div",15),a.YNc(1,gV,1,0,"div",16)),2&n){const t=a.oxw();a.Q6J("ngIf",t.showDialog),a.xp6(1),a.Q6J("ngIf",t.showDialog)}}let _V=(()=>{class n{constructor(t,r,i){this.router=t,this.auth=r,this.db=i,this.headerTitle="Dashboard",this.navElements=["Dashboard"],this.showDialog=!1,this.showDialog1=!1}loggedIn(){return!0}ngOnInit(){this.auth.isLoggedIn().then(t=>{"Teacher"==(null==t?void 0:t.role)?this.courses=this.db.getTeacherCourses(null==t?void 0:t.id):"Student"==(null==t?void 0:t.role)&&(this.courses=this.db.getStudentCourses(null==t?void 0:t.id))})}toggleDialog(){this.showDialog=!this.showDialog,this.courseName=""}toggleDialog1(){this.showDialog1=!this.showDialog1,this.courseID=""}navigation(t){if(console.log(t),"Dashboard"===t)return location.reload()}addStudentToCourse(){var t=this;return(0,X.Z)(function*(){t.auth.user$.subscribe(r=>{"Student"===(null==r?void 0:r.role)&&t.db.addStudent(t.courseID,null==r?void 0:r.id).then(()=>{t.courseID="",t.alert="",t.toggleDialog1()}).catch(()=>{t.alert="Invalid Course ID"})})})()}createNewCourse(){var t=this;return(0,X.Z)(function*(){t.auth.user$.subscribe(r=>{"Teacher"===(null==r?void 0:r.role)&&t.db.createCourse({id:"",imgUrl:"",title:t.courseName,owner:null==r?void 0:r.id,students:[],lectures:[]}).then(()=>{t.toggleDialog()}).catch(()=>{t.alert="Invalid form entry"})})})()}navigateToCourse(t){this.router.navigate(["/course-page/"],{queryParams:{cid:t.id}})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36($n),a.Y36(Wo),a.Y36(gf))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-dashboard"]],decls:8,vars:4,consts:[[1,"viewBackground"],[1,"sticky","top-0","z-50",3,"navigation","clickEvent"],["class","sticky top-0",4,"ngIf"],["courseIDDialogBox",""],["addCourseDialogBox",""],[1,"sticky","top-0"],[1,"divide-y-2","divide-gray-200"],[1,"viewHeading"],["class","px-10",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"px-10"],["class","p-6 md:inline-flex flex justify-center",3,"role","click",4,"ngIf"],["class","p-6 md:inline-flex flex justify-center","routerLink","/course-page",3,"course","role","click",4,"ngFor","ngForOf"],[1,"p-6","md:inline-flex","flex","justify-center",3,"role","click"],["routerLink","/course-page",1,"p-6","md:inline-flex","flex","justify-center",3,"course","role","click"],["class","fade overflow-x-hidden overflow-y-auto fixed inset-0 z-50 justify-center items-center flex",4,"ngIf"],["class","opacity-25 fixed inset-0 z-40 bg-black",4,"ngIf"],[1,"fade","overflow-x-hidden","overflow-y-auto","fixed","inset-0","z-50","justify-center","items-center","flex"],[1,"relative","my-6","mx-auto","w-1/3","min-w-fit"],[1,"rounded-xl","shadow-2xl","relative","bg-white"],[1,"py-5","border-b","border-solid","border-gray-200","rounded-t"],[1,"text-4xl","font-semibold","text-center"],[1,"relative","p-6","flex-auto"],["class"," text-center text-xl text-red-600",4,"ngIf"],[1,"my-4","text-blueGray-500","text-lg","leading-relaxed"],[1,"text-center","text-base"],[1,"font-medium"],[1,"py-2"],["name","courseID","id","courseID","type","password","placeholder","Course ID",1,"rounded-md","bg-orange-100","shadow","appearance-none","border","font-lg","w-6/12","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],[1,"flex","items-center","justify-end","p-6","border-t","border-solid","border-blueGray-200","rounded-b"],["type","button",1,"text-red-500","background-transparent","font-bold","uppercase","px-6","py-2","text-sm","outline-none","focus:outline-none","mr-1","mb-1","ease-linear","transition-all","duration-150",3,"click"],["type","button",1,"bg-emerald-500","text-white","active:bg-emerald-600","font-bold","uppercase","text-sm","px-6","py-3","rounded","shadow","hover:shadow-lg","outline-none","focus:outline-none","mr-1","mb-1","ease-linear","transition-all","duration-150",3,"click"],[1,"text-center","text-xl","text-red-600"],[1,"opacity-25","fixed","inset-0","z-40","bg-black"],["for","courseName",1,"font-medium"],["name","courseName","id","courseName","placeholder","Enter your course name","required","",1,"w-6/12","p-2","rounded-md","border","font-lg","text-gray-700","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none","leading-tight","focus:shadow-outline",3,"ngModel","ngModelChange"],["for","imageURL",1,"font-semibold"],["type","file","accept","image/png, image/gif, image/jpeg"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0)(1,"app-header",1),a.NdJ("clickEvent",function(l){return r.navigation(l)}),a.qZA(),a.YNc(2,uV,8,5,"div",2),a.ALo(3,"async"),a.qZA(),a.YNc(4,hV,2,2,"ng-template",null,3,a.W1O),a.YNc(6,mV,2,2,"ng-template",null,4,a.W1O)),2&t&&(a.xp6(1),a.Q6J("navigation",r.navElements),a.xp6(1),a.Q6J("ngIf",a.lcZ(3,2,r.auth.user$)))},directives:[DT,fn,tV,vn,oy,ra,wd,vd,ju,Bu,yd,Kl,Bg],pipes:[ps],styles:[""]}),n})();function yV(n,e){if(1&n&&(a.TgZ(0,"h3",14),a._uU(1),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Oqu(t.alert)}}let vV=(()=>{class n{constructor(t,r){this.router=t,this.auth=r}ngOnInit(){}login(){this.auth.login(this.email,this.password).catch(()=>{this.alert="Invalid Email or Password"})}ngOnChanges(){}}return n.\u0275fac=function(t){return new(t||n)(a.Y36($n),a.Y36(Wo))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-home"]],features:[a.TTD],decls:26,vars:3,consts:[[1,"w-3/5","h-screen","absolute","left-0","top-0","text-center"],[1,"relative","top-1/3","py-2","text-black"],[1,"text-4xl","font-bold"],["class","pt-2 text-red-600 text-lg",4,"ngIf"],[1,"pt-2"],[1,"py-2"],["name","user.email","id","Email","type","text","placeholder","Email","required","",1,"text-base","rounded-md","bg-orange-100","shadow","appearance-none","border","w-1/2","max-w-md","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],["name","user.password","id","password","type","password","placeholder","Password","required","",1,"text-base","rounded-md","bg-orange-100","shadow","appearance-none","border","w-1/2","max-w-md","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","keydown.enter","ngModelChange"],[1,"px-4","py-2","bg-orange-700","bg-gradient-to-tr","from-ingidgo-500","text-xl","text-white","font-semibold","text-center","rounded-md","active:shadow-inner","active:shadow-black","transition","duration-100",3,"click"],[1,"py-4"],[1,"w-2/5","bg-orange-700","bg-gradient-to-tr","from-indigo-500","absolute","inset-y-0","right-0","text-center","shadow-inner","shadow-white"],[1,"relative","top-1/3","py-2","text-white"],[1,"w-1/2","relative","left-1/4","text-xl","font-medium","py-10"],["routerLink","/registration",1,"px-4","py-1","bg-white","text-lg","text-black","font-semibold","text-center","rounded-md","active:shadow-inner","active:shadow-black","transition","duration-100"],[1,"pt-2","text-red-600","text-lg"]],template:function(t,r){1&t&&(a.TgZ(0,"div")(1,"div")(2,"div",0)(3,"div",1)(4,"h1",2),a._uU(5,"Login to Your Account"),a.qZA(),a.YNc(6,yV,2,1,"h3",3),a.TgZ(7,"form",4)(8,"ul")(9,"li",5)(10,"input",6),a.NdJ("ngModelChange",function(l){return r.email=l}),a.qZA()(),a.TgZ(11,"li",5)(12,"input",7),a.NdJ("keydown.enter",function(){return r.login()})("ngModelChange",function(l){return r.password=l}),a.qZA()(),a.TgZ(13,"li",5)(14,"button",8),a.NdJ("click",function(){return r.login()}),a._uU(15," Sign In! "),a.qZA()()()(),a._UZ(16,"div",9),a.qZA()()(),a.TgZ(17,"div")(18,"div",10)(19,"div",11)(20,"h1",2),a._uU(21,"Don't Have an Account?"),a.qZA(),a.TgZ(22,"p",12),a._uU(23,"Click the button below to create an account and start using InterVids today!"),a.qZA(),a.TgZ(24,"button",13),a._uU(25," Sign Up! "),a.qZA()()()()()),2&t&&(a.xp6(6),a.Q6J("ngIf",r.alert),a.xp6(4),a.Q6J("ngModel",r.email),a.xp6(2),a.Q6J("ngModel",r.password))},directives:[fn,wd,vd,ju,Bu,Bg,yd,Kl,oy],styles:[""]}),n})();function wV(n,e){1&n&&a._UZ(0,"img",6)}function EV(n,e){1&n&&a._UZ(0,"img",7)}function bV(n,e){1&n&&(a.TgZ(0,"div",8),a._uU(1,"Upload new Video"),a.qZA())}function CV(n,e){if(1&n&&(a.TgZ(0,"div",9)(1,"p",10),a._uU(2),a.qZA(),a.TgZ(3,"div",11)(4,"span"),a._uU(5),a.qZA(),a.TgZ(6,"span"),a._uU(7),a.qZA()()()),2&n){const t=a.oxw();a.xp6(2),a.Oqu(t.lecture.title),a.xp6(3),a.hij("Uploader: ",t.owner,""),a.xp6(2),a.hij("Date: ",t.date,"")}}let TV=(()=>{class n{constructor(){}ngOnInit(){this.lecture&&(this.date=new Date(1e3*this.lecture.uploadDate.seconds).toLocaleDateString("en-us"))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-lecture-card"]],inputs:{owner:"owner",lecture:"lecture"},decls:6,vars:4,consts:[[1,"w-[360px]","h-80","bg-gradient-to-br","from-gray-700","to-white","cursor-pointer","rounded-sm","hover:animateUp"],[1,"h-3/4","flex","justify-center","items-center"],["class","h-[75%] rounded-xl","src","assets/default-lecture.png",4,"ngIf"],["class","h-[75%] ","src","assets\\ui-icons\\upload.png",4,"ngIf"],["class","h-1/4 rounded-b-sm bg-slate-900 text-white  text-xl flex justify-center items-center",4,"ngIf"],["class","h-1/4 rounded-b-sm bg-slate-900 text-white ",4,"ngIf"],["src","assets/default-lecture.png",1,"h-[75%]","rounded-xl"],["src","assets\\ui-icons\\upload.png",1,"h-[75%]"],[1,"h-1/4","rounded-b-sm","bg-slate-900","text-white","text-xl","flex","justify-center","items-center"],[1,"h-1/4","rounded-b-sm","bg-slate-900","text-white"],[1,"py-3","flex","justify-center","pl-2","font-normal","text-xl"],[1,"flex","justify-between","pl-2","pr-2","font-light","text-md"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0)(1,"div",1),a.YNc(2,wV,1,0,"img",2),a.YNc(3,EV,1,0,"img",3),a.qZA(),a.YNc(4,bV,2,0,"div",4),a.YNc(5,CV,8,3,"div",5),a.qZA()),2&t&&(a.xp6(2),a.Q6J("ngIf",r.lecture),a.xp6(1),a.Q6J("ngIf",!r.lecture),a.xp6(1),a.Q6J("ngIf",!r.lecture),a.xp6(1),a.Q6J("ngIf",r.lecture))},directives:[fn],styles:[""]}),n})();const IV=["titleInput"],DV=["thumbInput"],AV=["confirmDelete"];function SV(n,e){if(1&n&&(a.TgZ(0,"h1",12),a._uU(1),a.qZA()),2&n){const t=e.ngIf;a.xp6(1),a.AsE("Course Owner: Ms. ",t.fname," ",t.lname,"")}}function xV(n,e){if(1&n&&(a.TgZ(0,"span"),a.YNc(1,SV,2,2,"h1",11),a.ALo(2,"async"),a.qZA()),2&n){const t=a.oxw(3);a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,t.owner))}}function MV(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"span")(1,"h1",13),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).toggleSettings()}),a._uU(2,"Course Settings"),a.qZA()()}}function RV(n,e){if(1&n&&(a.TgZ(0,"div",10)(1,"h1"),a._uU(2),a.qZA(),a.YNc(3,xV,3,3,"span",8),a.YNc(4,MV,3,0,"span",8),a.qZA()),2&n){const t=e.ngIf,r=a.oxw().ngIf;a.xp6(2),a.Oqu(t.title),a.xp6(1),a.Q6J("ngIf","Student"==r.role),a.xp6(1),a.Q6J("ngIf","Teacher"==r.role)}}function NV(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"app-lecture-card",19),a.NdJ("click",function(){return a.CHM(t),a.oxw(4).toggleUploadLecture()}),a.qZA()}}function PV(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"app-lecture-card",20),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw(4).navigateToLecture(l)}),a.qZA()}if(2&n){const t=e.$implicit,r=a.oxw(2).ngIf;a.Q6J("lecture",t)("owner",r.fname+" "+r.lname)}}function OV(n,e){1&n&&(a.TgZ(0,"div",21),a._uU(1,"The owner of this course has not yet published any videos."),a._UZ(2,"br"),a.qZA())}function kV(n,e){if(1&n&&(a.TgZ(0,"div",15),a.YNc(1,NV,1,0,"app-lecture-card",16),a.YNc(2,PV,1,2,"app-lecture-card",17),a.YNc(3,OV,3,0,"div",18),a.qZA()),2&n){const t=e.ngIf,r=a.oxw(2).ngIf,i=a.oxw();a.xp6(1),a.Q6J("ngIf","Teacher"===r.role),a.xp6(1),a.Q6J("ngForOf",i.sortedLectures),a.xp6(1),a.Q6J("ngIf",0===t.length)("ngIfAnd","Student"===r.role)}}function FV(n,e){if(1&n&&(a.TgZ(0,"div"),a.YNc(1,kV,4,4,"div",14),a.ALo(2,"async"),a.qZA()),2&n){const t=a.oxw(2);a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,t.lectures))}}function LV(n,e){1&n&&a.GkF(0)}function UV(n,e){1&n&&a.GkF(0)}function VV(n,e){if(1&n&&(a.TgZ(0,"div",5)(1,"div",6),a.YNc(2,RV,5,3,"div",7),a.ALo(3,"async"),a.YNc(4,FV,3,3,"div",8),a.ALo(5,"async"),a.qZA(),a.YNc(6,LV,1,0,"ng-container",9),a.YNc(7,UV,1,0,"ng-container",9),a.qZA()),2&n){const t=a.oxw(),r=a.MAs(5),i=a.MAs(7);a.xp6(2),a.Q6J("ngIf",a.lcZ(3,4,t.course)),a.xp6(2),a.Q6J("ngIf",a.lcZ(5,6,t.owner)),a.xp6(2),a.Q6J("ngTemplateOutlet",r),a.xp6(1),a.Q6J("ngTemplateOutlet",i)}}function BV(n,e){if(1&n&&(a.TgZ(0,"p",38),a._uU(1),a.qZA()),2&n){const t=a.oxw(4);a.xp6(1),a.Oqu(t.alert)}}function jV(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"form",25)(1,"h1",26),a._uU(2,"Upload a lecture!"),a.qZA(),a.TgZ(3,"div",27)(4,"div",28)(5,"ul")(6,"li"),a.YNc(7,BV,2,1,"p",29),a.qZA(),a.TgZ(8,"li",30)(9,"span"),a._uU(10,"Enter a title:"),a.qZA(),a.TgZ(11,"input",31),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(3).title=i}),a.qZA()(),a.TgZ(12,"li",32)(13,"span"),a._uU(14,"Enter a descripton:"),a.qZA(),a.TgZ(15,"textarea",33),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(3).description=i}),a._uU(16,"              "),a.qZA()(),a.TgZ(17,"li",30)(18,"span"),a._uU(19,"Upload Lecture:"),a.qZA(),a.TgZ(20,"input",34),a.NdJ("change",function(i){return a.CHM(t),a.oxw(3).videoSelected(i)}),a.qZA()(),a.TgZ(21,"li",30)(22,"span"),a._uU(23,"Upload Thumbnail:"),a.qZA(),a.TgZ(24,"input",34),a.NdJ("change",function(i){return a.CHM(t),a.oxw(3).imageSelected(i)}),a.qZA()()()()(),a.TgZ(25,"div",35)(26,"button",36),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).toggleUploadLecture()}),a._uU(27,"Close"),a.qZA(),a.TgZ(28,"button",37),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).uploadLecture()}),a._uU(29,"Upload Lecture"),a.qZA()()()}if(2&n){const t=a.oxw(3);a.xp6(7),a.Q6J("ngIf",t.alert),a.xp6(4),a.Q6J("ngModel",t.title),a.xp6(4),a.Q6J("ngModel",t.description)}}function HV(n,e){if(1&n&&(a.TgZ(0,"div",23),a.YNc(1,jV,30,3,"form",24),a.ALo(2,"async"),a.qZA()),2&n){const t=a.oxw(2);a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,t.course))}}function $V(n,e){if(1&n&&a.YNc(0,HV,3,3,"div",22),2&n){const t=a.oxw();a.Q6J("ngIf",t.showUploadLecture)}}function qV(n,e){if(1&n&&(a.TgZ(0,"p",38),a._uU(1),a.qZA()),2&n){const t=a.oxw(4);a.xp6(1),a.Oqu(t.alert)}}function GV(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"form",42)(1,"h1",26),a._uU(2,"Course Settings"),a.qZA(),a.TgZ(3,"div",27)(4,"div",28)(5,"ul")(6,"li"),a.YNc(7,qV,2,1,"p",29),a.qZA(),a.TgZ(8,"li",30)(9,"span"),a._uU(10,"Course Invite Code:"),a.qZA(),a.TgZ(11,"span",43),a._uU(12),a.qZA()(),a.TgZ(13,"li",30)(14,"span"),a._uU(15,"Change Course Title: "),a.qZA(),a._UZ(16,"input",44,45),a.qZA(),a.TgZ(18,"li",30)(19,"span"),a._uU(20,"Change Course Image:"),a.qZA(),a.TgZ(21,"input",46,47),a.NdJ("change",function(i){return a.CHM(t),a.oxw(3).thumbnailSelected(i)}),a.qZA()(),a.TgZ(23,"li",30)(24,"span"),a._uU(25,"Delete Course:"),a.qZA(),a.TgZ(26,"span",48),a._UZ(27,"input",49,50),a.TgZ(29,"button",36),a.NdJ("click",function(){const l=a.CHM(t).ngIf;return a.oxw(3).deleteCourse(l.id)}),a._uU(30,"Confirm"),a.qZA()()()()()(),a.TgZ(31,"div",35)(32,"button",36),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).toggleSettings()}),a._uU(33,"Close"),a.qZA(),a.TgZ(34,"button",37),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).submitSettingsChange()}),a._uU(35,"Save Changes"),a.qZA()()()}if(2&n){const t=e.ngIf,r=a.oxw(3);a.xp6(7),a.Q6J("ngIf",r.alert),a.xp6(5),a.Oqu(r.cid),a.xp6(4),a.s9C("placeholder",t.title)}}function ZV(n,e){if(1&n&&(a.TgZ(0,"div",23),a.YNc(1,GV,36,3,"form",41),a.ALo(2,"async"),a.qZA()),2&n){const t=a.oxw(2);a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,t.course))}}function zV(n,e){1&n&&a._UZ(0,"div",51)}function WV(n,e){if(1&n&&(a.YNc(0,ZV,3,3,"div",39),a.YNc(1,zV,1,0,"div",40)),2&n){const t=a.oxw();a.Q6J("ngIf",t.courseDialog),a.xp6(1),a.Q6J("ngIf",t.courseDialog)}}let KV=(()=>{class n{constructor(t,r,i,l){this.router=t,this.activatedRoute=r,this.auth=i,this.db=l,this.navElements=["Dashboard","Course Page"],this.showUploadLecture=!1,this.showDialog=!1,this.courseDialog=!1,this.thumbSelected=!1,this.activatedRoute.queryParams.subscribe(d=>{this.cid=d.cid})}ngOnInit(){this.course=this.db.getCourse(this.cid),this.lectures=this.db.getCourseLectures(this.cid),this.lectures.subscribe(t=>{this.sortedLectures=null==t?void 0:t.sort((r,i)=>i.uploadDate.seconds-r.uploadDate.seconds)}),this.course.subscribe(t=>this.owner=this.db.getUser(null==t?void 0:t.owner))}deleteCourse(t){"Delete"===this.confirmDelete.nativeElement.value?(this.db.deleteCourse(t),this.router.navigate(["/dashboard"])):this.alert="Type 'Delete' to confirm"}navigation(t){return"Dashboard"===t?this.router.navigate(["/dashboard/"]):"Course Page"===t?location.reload():void 0}navigateToLecture(t){this.router.navigate(["/lecture/"],{queryParams:{cid:t.courseID,lid:t.id}})}uploadLecture(){var t=this;this.videoFile?this.auth.user$.pipe((0,pi.q)(1)).subscribe(function(){var r=(0,X.Z)(function*(i){if("Teacher"===(null==i?void 0:i.role)){let l=new Ln(Date.now()/1e3,0),d={id:"",courseID:t.cid,description:t.description,ownerID:i.id,thumbnailUrl:"",threads:[],title:t.title,uploadDate:l,videoUrl:""};yield t.db.createLecture(d,t.cid,t.thumbnailFile,t.videoFile).then(p=>{t.alert="",t.toggleUploadLecture(),console.log(p)}).catch(()=>{t.alert="Invalid form entry"})}});return function(i){return r.apply(this,arguments)}}()):this.alert="Invalid form entry"}submitSettingsChange(){var t=this;return(0,X.Z)(function*(){let r=!1;if(t.titleInput.nativeElement.value&&(yield t.db.editCourse(t.cid,t.titleInput.nativeElement.value).then(()=>r=!0).catch(()=>{t.alert="Could not change title"})),t.thumbInput&&(yield t.db.editCourse(t.cid,"",t.thumbInput.nativeElement).then(()=>{t.thumbSelected=!1,t.thumbInput.nativeElement.value=""}).catch(()=>{t.alert="Could not upload thumbnail"})),r)return t.toggleSettings();t.alert="No changes made"})()}thumbnailSelected(t){this.newThumb=t.target.files[0],this.thumbSelected=!0}toggleUploadLecture(){this.showUploadLecture=!this.showUploadLecture,this.alert=""}toggleSettings(){this.courseDialog=!this.courseDialog,this.alert="",this.thumbSelected=!1}videoSelected(t){this.videoFile=t.target.files[0]}imageSelected(t){this.thumbnailFile=t.target.files[0]}}return n.\u0275fac=function(t){return new(t||n)(a.Y36($n),a.Y36(hf),a.Y36(Wo),a.Y36(gf))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-course-page"]],viewQuery:function(t,r){if(1&t&&(a.Gf(IV,5),a.Gf(DV,5),a.Gf(AV,5)),2&t){let i;a.iGM(i=a.CRH())&&(r.titleInput=i.first),a.iGM(i=a.CRH())&&(r.thumbInput=i.first),a.iGM(i=a.CRH())&&(r.confirmDelete=i.first)}},decls:8,vars:4,consts:[[1,"viewBackground"],[1,"sticky","top-0","z-50",3,"navigation","clickEvent"],["class","sticky top-0 z-40",4,"ngIf"],["uploadVideoDialogBox",""],["courseSettings",""],[1,"sticky","top-0","z-40"],[1,"divide-y-2","divide-gray-200"],["class","viewHeading",4,"ngIf"],[4,"ngIf"],[4,"ngTemplateOutlet"],[1,"viewHeading"],["class","text-xl md:flex hidden",4,"ngIf"],[1,"text-xl","md:flex","hidden"],[1,"cursor-pointer","hover:underline","text-xl","md:flex","hidden",3,"click"],["class","px-10",4,"ngIf"],[1,"px-10"],["class","p-6 md:inline-flex flex justify-center",3,"click",4,"ngIf"],["class","p-6 md:inline-flex flex justify-center",3,"lecture","owner","click",4,"ngFor","ngForOf"],["class","text-white text-lg p-5",4,"ngIf","ngIfAnd"],[1,"p-6","md:inline-flex","flex","justify-center",3,"click"],[1,"p-6","md:inline-flex","flex","justify-center",3,"lecture","owner","click"],[1,"text-white","text-lg","p-5"],["class","fade overflow-x-hidden overflow-y-auto fixed inset-0 z-50 flex justify-center items-center",4,"ngIf"],[1,"fade","overflow-x-hidden","overflow-y-auto","fixed","inset-0","z-50","flex","justify-center","items-center"],["class","modal2 bg-white rounded-xl",4,"ngIf"],[1,"modal2","bg-white","rounded-xl"],[1,"header","text-4xl","font-semibold","flex","justify-center","items-center","py-10"],[1,"body"],[1,"mx-5","text-lg","font-medium"],["class"," flex justify-center text-red-600 py-2",4,"ngIf"],[1,"element"],["name","title","id","title","type","text","placeholder","Lecture title",1,"inputField","w-3/4","p-2",3,"ngModel","ngModelChange"],[1,"flex","justify-between","py-2"],["name","description","id","description","type","text","rows","5","placeholder","Description",1,"w-3/4","form-control","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","shadow-lg","border-gray-300","rounded","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"ngModel","ngModelChange"],["type","file","accept","video/*",1,"inputField","text-sm","w-3/4",3,"change"],[1,"footer","flex","justify-between","items-center","py-5","px-6"],["type","button",1,"text-red-500","modalButton",3,"click"],["type","button",1,"modalButtonFilled",3,"click"],[1,"flex","justify-center","text-red-600","py-2"],["class","fade overflow-x-hidden overflow-y-auto fixed inset-0 z-50 flex justify-center items-center ",4,"ngIf"],["class","opacity-25 fixed inset-0 z-40 bg-black",4,"ngIf"],["class","modal bg-white rounded-xl",4,"ngIf"],[1,"modal","bg-white","rounded-xl"],[1,"font-normal","italic","text-gray-700","w-1/2"],["name","newPassword","id","newPassword","type","text",1,"inputField","w-1/2","p-2",3,"placeholder"],["titleInput",""],["accept","image/*","name","thumb","id","thumb","type","file","type","file",1,"inputField","text-sm","w-1/2",3,"change"],["thumbInput",""],[1,"w-1/2","flex","justify-between"],["name","confirmDelete","id","confirmDelete","type","password","placeholder","Type 'Delete'",1,"inputField","p-2","focus:border-red-500","w-3/4"],["confirmDelete",""],[1,"opacity-25","fixed","inset-0","z-40","bg-black"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0)(1,"app-header",1),a.NdJ("clickEvent",function(l){return r.navigation(l)}),a.qZA(),a.YNc(2,VV,8,8,"div",2),a.ALo(3,"async"),a.qZA(),a.YNc(4,$V,1,1,"ng-template",null,3,a.W1O),a.YNc(6,WV,2,2,"ng-template",null,4,a.W1O)),2&t&&(a.xp6(1),a.Q6J("navigation",r.navElements),a.xp6(1),a.Q6J("ngIf",a.lcZ(3,2,r.auth.user$)))},directives:[DT,fn,TV,vn,ra,wd,vd,ju,Bu,yd,Kl],pipes:[ps],styles:["",".modal[_ngcontent-%COMP%]{\n    aspect-ratio: 20/10;\n    height: 26rem;\n    display:flex;\n    flex-direction: column;\n    justify-content: space-between;\n  }\n  .modal2[_ngcontent-%COMP%]{\n    aspect-ratio: 15/10;\n    height: 32rem;\n    display:flex;\n    flex-direction: column;\n    justify-content: space-between;\n  }\n  .header[_ngcontent-%COMP%]{\n    flex: 0;\n    width: 100%;\n    border-bottom-width: 1px;\n    --tw-border-opacity: 1;\n    border-color: rgb(229 231 235 / var(--tw-border-opacity));\n  }\n  .body[_ngcontent-%COMP%]{\n    flex: 1;\n    width: 100%;\n    border-bottom-width: 1px;\n    --tw-border-opacity: 1;\n    border-color: rgb(229 231 235 / var(--tw-border-opacity));\n  }\n  .footer[_ngcontent-%COMP%]{\n    flex: 0;\n    width: 100%;\n  }\n  .element[_ngcontent-%COMP%]{\n    display:flex;\n    justify-content: space-between;\n    align-items: center;\n    padding-top: 0.5rem;\n    padding-bottom: 0.5rem;\n  }"]}),n})(),YV=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-page-not-found"]],decls:2,vars:0,template:function(t,r){1&t&&(a.TgZ(0,"p"),a._uU(1,"Oops that page does not exist!"),a.qZA())},styles:[""]}),n})();function QV(n,e){if(1&n&&(a.TgZ(0,"h3",26),a._uU(1),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.Oqu(t.alert)}}let JV=(()=>{class n{constructor(t,r){this.router=t,this.auth=r}ngOnInit(){}register(){this.password===this.cpassword?this.auth.register(this.email,this.fname,this.lname,this.password,this.role,this.img).catch(()=>{this.alert="Invalid Entry"}):this.alert="Make sure passwords match!"}redirect(){this.router.navigate(["/home"])}fileSelected(t){this.img=t.target.files[0]}}return n.\u0275fac=function(t){return new(t||n)(a.Y36($n),a.Y36(Wo))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-registration"]],decls:53,vars:7,consts:[[1,"w-full","h-screen","bg-orange-700","bg-gradient-to-tr","from-indigo-500"],[1,"relative","top-24","left-1/4","w-1/2","bg-white","rounded-xl","py-10","shadow-inner","shadow-black"],[1,"text-4xl","font-semibold","text-center"],["class","text-red-600 text-lg text-center",4,"ngIf"],[1,"py-5"],[1,"relative","left-1/4","text-base"],["for","fname",1,"font-medium"],[1,"py-2"],["name","fname","id","fname","placeholder","Enter your first name","required","",1,"rounded-md","bg-orange-100","shadow","appearance-none","border","font-lg","w-6/12","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],["for","lname",1,"font-medium"],["name","lname","id","lname","placeholder","Enter your last name","required","",1,"rounded-md","bg-orange-100","shadow","appearance-none","border","font-lg","w-6/12","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],["for","Email",1,"font-medium"],["name","email","id","Email","type","text","placeholder","Enter your email","required","",1,"rounded-md","bg-orange-100","shadow","appearance-none","border","font-lg","w-6/12","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],["for","Password",1,"font-medium"],[1,"pt-2"],["name","password","id","password","type","password","placeholder","Password","required","",1,"rounded-md","bg-orange-100","shadow","appearance-none","border","font-lg","w-6/12","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],["name","password","id","cpassword","type","password","placeholder","Confirm Password","required","",1,"rounded-md","bg-orange-100","shadow","appearance-none","border","font-lg","w-6/12","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],["for","type",1,"font-medium"],["name","type","id","type",1,"rounded-md","bg-orange-100","shadow","appearance-none","border","font-lg","w-6/12","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],["value","Student"],["value","Teacher"],["for","file",1,"font-medium"],["type","file","accept","image/png, image/gif, image/jpeg",3,"change"],[1,"text-center"],[1,"px-4","py-1","bg-orange-700","text-xl","text-white","font-semibold","rounded-md","active:shadow-inner","active:shadow-black","transition","duration-100",3,"click"],["routerLink","/home",1,"text-blue-800","font-medium"],[1,"text-red-600","text-lg","text-center"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),a._uU(3,"Create an Account"),a.qZA(),a.YNc(4,QV,2,1,"h3",3),a.TgZ(5,"form",4)(6,"ul",5)(7,"li")(8,"label",6),a._uU(9,"First Name"),a.qZA()(),a.TgZ(10,"li",7)(11,"input",8),a.NdJ("ngModelChange",function(l){return r.fname=l}),a.qZA()(),a.TgZ(12,"li")(13,"label",9),a._uU(14,"Last Name"),a.qZA()(),a.TgZ(15,"li",7)(16,"input",10),a.NdJ("ngModelChange",function(l){return r.lname=l}),a.qZA()(),a.TgZ(17,"li")(18,"label",11),a._uU(19,"Email"),a.qZA()(),a.TgZ(20,"li",7)(21,"input",12),a.NdJ("ngModelChange",function(l){return r.email=l}),a.qZA()(),a.TgZ(22,"li")(23,"label",13),a._uU(24,"Password"),a.qZA()(),a.TgZ(25,"li",14)(26,"input",15),a.NdJ("ngModelChange",function(l){return r.password=l}),a.qZA()(),a.TgZ(27,"li",7)(28,"input",16),a.NdJ("ngModelChange",function(l){return r.cpassword=l}),a.qZA()(),a.TgZ(29,"li")(30,"label",17),a._uU(31,"Account Type"),a.qZA()(),a.TgZ(32,"li",7)(33,"select",18),a.NdJ("ngModelChange",function(l){return r.role=l}),a.TgZ(34,"option",19),a._uU(35,"Student"),a.qZA(),a.TgZ(36,"option",20),a._uU(37,"Teacher"),a.qZA()()(),a.TgZ(38,"li")(39,"label",21),a._uU(40,"Upload Profile Picture"),a.qZA()(),a.TgZ(41,"li")(42,"input",22),a.NdJ("change",function(l){return r.fileSelected(l)}),a.qZA()()()(),a.TgZ(43,"div",23)(44,"button",24),a.NdJ("click",function(){return r.register()}),a._uU(45," Sign Up! "),a.qZA(),a._UZ(46,"br")(47,"br"),a.TgZ(48,"span"),a._uU(49,"Already got an account?"),a._UZ(50,"br"),a.TgZ(51,"a",25),a._uU(52,"Sign In Instead"),a.qZA()()()()()),2&t&&(a.xp6(4),a.Q6J("ngIf",r.alert),a.xp6(7),a.Q6J("ngModel",r.fname),a.xp6(5),a.Q6J("ngModel",r.lname),a.xp6(5),a.Q6J("ngModel",r.email),a.xp6(5),a.Q6J("ngModel",r.password),a.xp6(2),a.Q6J("ngModel",r.cpassword),a.xp6(5),a.Q6J("ngModel",r.role))},directives:[fn,wd,vd,ju,Bu,Bg,yd,Kl,TT,HR,qR,qC],styles:[""]}),n})(),fN=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}canActivate(){var t=this;return(0,X.Z)(function*(){return!(yield t.auth.isLoggedIn())||(t.router.navigate(["/dashboard"]),!1)})()}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Wo),a.LFG($n))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fw=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}canActivate(){var t=this;return(0,X.Z)(function*(){return!!(yield t.auth.isLoggedIn())||(t.router.navigate(["/home"]),!1)})()}}return n.\u0275fac=function(t){return new(t||n)(a.LFG(Wo),a.LFG($n))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XV(n,e){if(1&n&&(a.TgZ(0,"p",16),a._uU(1),a.qZA()),2&n){const t=a.oxw(3);a.xp6(1),a.Oqu(t.alert)}}function eB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div")(1,"app-header",2),a.NdJ("clickEvent",function(i){return a.CHM(t),a.oxw(2).navigation(i)}),a.qZA(),a.TgZ(2,"div",3)(3,"h1",4),a._uU(4,"Create a Course"),a.qZA(),a.YNc(5,XV,2,1,"p",5),a.TgZ(6,"form",6)(7,"ul",7)(8,"li")(9,"label",8),a._uU(10,"Course Name"),a.qZA()(),a.TgZ(11,"li",9)(12,"input",10),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(2).courseName=i}),a.qZA()(),a.TgZ(13,"li")(14,"label",11),a._uU(15,"Upload Course Image"),a.qZA()(),a.TgZ(16,"li"),a._UZ(17,"input",12),a.qZA()()(),a.TgZ(18,"div",13)(19,"button",14),a._uU(20," Cancel "),a.qZA(),a.TgZ(21,"button",15),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).addCourse()}),a._uU(22," Create Course "),a.qZA()()()()}if(2&n){const t=a.oxw(2);a.xp6(1),a.Q6J("navigation",t.navElements),a.xp6(4),a.Q6J("ngIf",t.alert),a.xp6(7),a.Q6J("ngModel",t.courseName)}}function tB(n,e){if(1&n&&(a.TgZ(0,"div"),a.YNc(1,eB,23,3,"div",1),a.qZA()),2&n){const t=e.ngIf;a.xp6(1),a.Q6J("ngIf","Teacher"===t.role)}}let nB=(()=>{class n{constructor(t,r,i){this.auth=t,this.db=r,this.router=i,this.navElements=["Dashboard","Create a Course"]}ngOnInit(){}navigation(t){return"Dashboard"===t?this.router.navigate(["/dashboard"]):"Create a Course"===t?location.reload:void 0}addCourse(){this.auth.user$.subscribe(t=>{this.db.createCourse({id:"",imgUrl:"",title:this.courseName,owner:null==t?void 0:t.id,students:[],lectures:[]}).then(()=>{this.router.navigate(["/dashboard"])}).catch(()=>{this.alert="Invalid form entry"})})}openDialog(){}uploadImage(){}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Wo),a.Y36(gf),a.Y36($n))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-add-course-form"]],decls:3,vars:3,consts:[[1,"min-h-screen","bg-orange-800","bg-gradient-to-tr","from-indigo-500"],[4,"ngIf"],[3,"navigation","clickEvent"],[1,"relative","top-24","left-1/4","w-1/2","bg-white","rounded-xl","py-10","shadow-inner","shadow-black"],[1,"text-4xl","font-semibold","text-center"],["class"," text-center text-xl text-red-600 pt-2",4,"ngIf"],[1,"py-5"],[1,"relative","left-1/4","text-base"],["for","courseName",1,"font-medium"],[1,"py-2"],["name","courseName","id","courseName","placeholder","Enter your course name","required","",1,"w-6/12","p-2","rounded-md","border","font-lg","text-gray-700","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none","leading-tight","focus:shadow-outline",3,"ngModel","ngModelChange"],["for","imageURL",1,"font-semibold"],["type","file","accept","image/png, image/gif, image/jpeg"],[1,"flex","justify-evenly"],["routerLink","/dashboard","type","button",1,"cursor-pointer","text-red-500","background-transparent","font-bold","uppercase","px-6","py-2","text-sm","outline-none","focus:outline-none","mr-1","mb-1","ease-linear","transition-all","duration-150"],[1,"cursor-pointer","bg-emerald-500","text-white","active:bg-emerald-600","font-bold","uppercase","text-sm","px-6","py-3","rounded","shadow","hover:shadow-lg","outline-none","focus:outline-none","mr-1","mb-1","ease-linear","transition-all","duration-150",3,"click"],[1,"text-center","text-xl","text-red-600","pt-2"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0),a.YNc(1,tB,2,1,"div",1),a.ALo(2,"async"),a.qZA()),2&t&&(a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,r.auth.user$)))},directives:[fn,DT,wd,vd,ju,Bu,Bg,yd,Kl,oy],pipes:[ps],styles:[""]}),n})();function rB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",10)(1,"span",11),a._uU(2),a.qZA(),a.TgZ(3,"span",12),a._UZ(4,"img",13),a.TgZ(5,"ul",14)(6,"li",15),a._uU(7),a.TgZ(8,"span",16),a._uU(9),a.qZA()(),a.TgZ(10,"li",17),a._uU(11),a.qZA()()(),a.TgZ(12,"ul",18)(13,"li",19),a.NdJ("click",function(){const l=a.CHM(t).$implicit;return a.oxw(2).openReplyWindow(l)}),a._uU(14,"Reply"),a.qZA()()()}if(2&n){const t=e.$implicit,r=a.oxw(2);let i,l;a.xp6(2),a.hij(" @ ",r.convertTime(t.timePosted),""),a.xp6(2),a.s9C("src",null==(i=r.threadOwners.get(t.id))?null:i.imgSrc,a.LSH),a.xp6(3),a.AsE("",null==(l=r.threadOwners.get(t.id))?null:l.fname," ",null==(l=r.threadOwners.get(t.id))?null:l.lname," "),a.xp6(2),a.hij("\u25e6 ",r.getDate(t.datePosted),""),a.xp6(2),a.hij(" ",t.message," ")}}function iB(n,e){if(1&n&&(a.TgZ(0,"div",8),a.YNc(1,rB,15,6,"div",9),a.qZA()),2&n){const t=e.ngIf;a.xp6(1),a.Q6J("ngForOf",t)}}let sB=(()=>{class n{constructor(t,r){this.db=t,this.storage=r}setImage(t){if("default"===t.imgSrc)return"assets/User.png";let r;return this.storage.ref("users/"+(null==t?void 0:t.id)+"_thumb").getDownloadURL().subscribe(i=>{r=i}),r}ngOnInit(){let t=new Map;this.threads=this.db.getLectureThreads(null==this?void 0:this.lid),this.threads.subscribe(r=>{this.threads=Qe(null==r?void 0:r.sort((i,l)=>Number(i.timePosted)-Number(l.timePosted))),null==r||r.forEach(i=>{this.db.getUser(i.threadOwnerID).subscribe(l=>{if(l){let d={id:"",email:l.email,fname:l.fname,lname:l.lname,role:l.role,imgSrc:""};""!=l.imgSrc?this.storage.ref("users/"+i.threadOwnerID+"_thumb").getDownloadURL().subscribe(p=>{d.imgSrc=p}):d.imgSrc="/assets/User.png",t.set(i.id,d)}})})}),this.threadOwners=t}sendChat(){let r={datePosted:new Ln(Date.now()/1e3,0),threadOwnerID:this.uid,message:this.message,replies:[],timePosted:this.currentTime?JSON.stringify(this.currentTime):"0",id:"",lectureID:this.lid};this.db.createThread(r),this.message=""}openReplyWindow(t){}convertTime(t){let r=Number(t)/100;if(0===r)return"0:00";let i=r.toString().replace(".",":");return i.slice(0,i.indexOf(":")+3)}getDate(t){return new Date(1e3*t.seconds).toLocaleDateString("en-us")}getThreadOwnerImg(t){return this.storage.ref("users/"+t+"_thumb").getDownloadURL().subscribe(r=>console.log(r))}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(gf),a.Y36(Pg))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-chat"]],inputs:{lid:"lid",uid:"uid",currentTime:"currentTime"},decls:12,vars:4,consts:[[1,"w-full","h-full","max-h-full","flex","flex-col","bg-white","border-l-2","border-t-2","border-b-2","rounded-l-2xl"],[1,"text-center","text-3xl","text-black","font-semibold","p-2","border-b-2"],["class","h-[70%] overflow-y-auto ",4,"ngIf"],[1,"flex-col","grow","w-full","rounded-t-xl","border-gray-300"],[1,"text-center","font-semibold","bg-gray-100","rounded-t-lg","p-1"],["name","message","placeholder","Type to Chat",1,"h-1/2","resize-none","w-full","px-3","py-1.5","text-base","font-normal","text-gray-700","outline-0",3,"ngModel","ngModelChange"],[1,"flex","justify-end","px-3"],[1,"py-1","cursor-pointer","text-black","font-medium","hover:animateUp",3,"click"],[1,"h-[70%]","overflow-y-auto"],["class","px-3 py-1 border-b-2 hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"px-3","py-1","border-b-2","hover:bg-gray-50"],[1,"w-full","flex","justify-center","font-semibold","text-blue-700"],[1,"w-full","flex","items-center"],[1,"image","h-10",3,"src"],[1,"pl-3"],[1,"text-sm","font-semibold"],[1,"font-normal"],[1,"text-sm","font-normal"],[1,"w-full","flex","justify-end","text-sm"],[1,"cursor-pointer","text-black","font-medium","text","hover:animateUp",3,"click"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0)(1,"h1",1),a._uU(2,"Lecture Chat"),a.qZA(),a.YNc(3,iB,2,1,"div",2),a.ALo(4,"async"),a.TgZ(5,"form",3)(6,"h1",4),a._uU(7,"Add your comment"),a.qZA(),a.TgZ(8,"textarea",5),a.NdJ("ngModelChange",function(l){return r.message=l}),a.qZA(),a.TgZ(9,"div",6)(10,"span",7),a.NdJ("click",function(){return r.sendChat()}),a._uU(11,"Send"),a.qZA()()()()),2&t&&(a.xp6(3),a.Q6J("ngIf",a.lcZ(4,2,r.threads)),a.xp6(5),a.Q6J("ngModel",r.message))},directives:[fn,vn,wd,vd,ju,Bu,yd,Kl],pipes:[ps],styles:["",".image[_ngcontent-%COMP%]{\n        aspect-ratio: 1/1;\n        border-radius: 9999px;\n    }"]}),n})();const oB=["titleInput"],aB=["thumbInput"],uB=["descInput"],lB=["confirmDelete"];function cB(n,e){if(1&n&&(a.TgZ(0,"h1",22),a._uU(1),a.qZA()),2&n){const t=e.ngIf;a.xp6(1),a.AsE("Course Owner: Ms. ",t.fname," ",t.lname,"")}}function dB(n,e){if(1&n&&(a.TgZ(0,"span"),a.YNc(1,cB,2,2,"h1",21),a.ALo(2,"async"),a.qZA()),2&n){const t=a.oxw(4);a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,t.owner))}}function hB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"span")(1,"h1",23),a.NdJ("click",function(){return a.CHM(t),a.oxw(4).toggleSettings()}),a._uU(2,"Lecture Settings"),a.qZA()()}}function fB(n,e){if(1&n&&(a.TgZ(0,"div",20)(1,"h1"),a._uU(2),a.qZA(),a.YNc(3,dB,3,3,"span",19),a.YNc(4,hB,3,0,"span",19),a.qZA()),2&n){const t=e.ngIf,r=a.oxw().ngIf,i=a.oxw().ngIf;a.xp6(2),a.AsE("",i.title," - ",t.title,""),a.xp6(1),a.Q6J("ngIf","Student"==r.role),a.xp6(1),a.Q6J("ngIf","Teacher"==r.role)}}function pB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"video",28),a.NdJ("timeupdate",function(i){return a.CHM(t),a.oxw(4).time(i)}),a._UZ(1,"source",29),a.qZA()}if(2&n){const t=a.oxw(4);a.xp6(1),a.s9C("src",t.src,a.LSH)}}function gB(n,e){if(1&n&&a._UZ(0,"app-chat",30),2&n){const t=a.oxw().ngIf,r=a.oxw(3);a.Q6J("lid",r.lid)("uid",t.id)("currentTime",r.currentTime)}}function mB(n,e){if(1&n&&(a.TgZ(0,"div",24)(1,"div",25),a.YNc(2,pB,2,1,"video",26),a.qZA(),a.YNc(3,gB,1,3,"app-chat",27),a.qZA()),2&n){const t=a.oxw(3);a.xp6(2),a.Q6J("ngIf",t.src),a.xp6(1),a.Q6J("ngIf",t.showChat)}}function _B(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"button",31),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).toggleChat()}),a._uU(1,"Hide Chat"),a.qZA()}}function yB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"button",31),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).toggleChat()}),a._uU(1,"Expand Chat"),a.qZA()}}function vB(n,e){if(1&n&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&n){const t=e.ngIf;a.xp6(1),a.AsE("Uploaded by: ",t.fname," ",t.lname,"")}}function wB(n,e){if(1&n&&(a.TgZ(0,"div",7),a.YNc(1,fB,5,4,"div",8),a.ALo(2,"async"),a.YNc(3,mB,4,2,"div",9),a.ALo(4,"async"),a.TgZ(5,"div",10)(6,"div",11)(7,"div",12)(8,"div",13)(9,"h1",14),a._uU(10,"Description"),a.qZA(),a.YNc(11,_B,2,0,"button",15),a.YNc(12,yB,2,0,"button",15),a.qZA(),a.TgZ(13,"div",16)(14,"p",17),a._uU(15),a.qZA(),a.TgZ(16,"ul",18),a.YNc(17,vB,2,2,"p",19),a.ALo(18,"async"),a.TgZ(19,"p"),a._uU(20),a.qZA()()()()()()()),2&n){const t=a.oxw().ngIf,r=a.oxw();a.xp6(1),a.Q6J("ngIf",a.lcZ(2,7,r.course)),a.xp6(2),a.Q6J("ngIf",a.lcZ(4,9,r.auth.user$)),a.xp6(8),a.Q6J("ngIf",r.showChat),a.xp6(1),a.Q6J("ngIf",!r.showChat),a.xp6(3),a.Oqu(t.description),a.xp6(2),a.Q6J("ngIf",a.lcZ(18,11,r.owner)),a.xp6(3),a.hij("Uploaded on: ",r.date,"")}}function EB(n,e){1&n&&a.GkF(0)}function bB(n,e){if(1&n&&(a.TgZ(0,"p",54),a._uU(1),a.qZA()),2&n){const t=a.oxw(5);a.xp6(1),a.Oqu(t.alert)}}function CB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"form",35)(1,"h1",36),a._uU(2,"Lecture Settings"),a.qZA(),a.TgZ(3,"div",37)(4,"div",38)(5,"ul")(6,"li"),a.YNc(7,bB,2,1,"p",39),a.qZA(),a.TgZ(8,"li",40)(9,"span"),a._uU(10,"Edit Lecture Title:"),a.qZA(),a._UZ(11,"input",41,42),a.qZA(),a.TgZ(13,"li",43)(14,"span"),a._uU(15,"Edit Lecture Description:"),a.qZA(),a.TgZ(16,"textarea",44),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(4).description=i}),a._uU(17,"                    "),a.qZA()(),a.TgZ(18,"li",40)(19,"span"),a._uU(20,"Edit Thumbnail:"),a.qZA(),a.TgZ(21,"input",45,46),a.NdJ("change",function(i){return a.CHM(t),a.oxw(4).thumbnailSelected(i)}),a.qZA()(),a.TgZ(23,"li",40)(24,"span"),a._uU(25,"Delete Lecture:"),a.qZA(),a.TgZ(26,"span",47),a._UZ(27,"input",48,49),a.TgZ(29,"button",50),a.NdJ("click",function(){const l=a.CHM(t).ngIf,d=a.oxw(3).ngIf;return a.oxw().deleteLecture(l.id,d.id)}),a._uU(30,"Confirm"),a.qZA()()()()()(),a.TgZ(31,"div",51)(32,"button",52),a.NdJ("click",function(){return a.CHM(t),a.oxw(4).toggleSettings()}),a._uU(33,"Close"),a.qZA(),a.TgZ(34,"button",53),a.NdJ("click",function(){return a.CHM(t),a.oxw(4).submitSettingsChange()}),a._uU(35,"Save Changes"),a.qZA()()()}if(2&n){const t=a.oxw(3).ngIf,r=a.oxw();a.xp6(7),a.Q6J("ngIf",r.alert),a.xp6(4),a.s9C("placeholder",t.title),a.xp6(5),a.s9C("placeholder",t.description),a.Q6J("ngModel",r.description)}}function TB(n,e){if(1&n&&(a.TgZ(0,"div",33),a.YNc(1,CB,36,4,"form",34),a.ALo(2,"async"),a.qZA()),2&n){const t=a.oxw(3);a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,t.course))}}function IB(n,e){if(1&n&&a.YNc(0,TB,3,3,"div",32),2&n){const t=a.oxw(2);a.Q6J("ngIf",t.lectureDialog)}}function DB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",1)(1,"app-header",2),a.NdJ("clickEvent",function(i){return a.CHM(t),a.oxw().navigation(i)}),a.qZA(),a.TgZ(2,"div",3),a.YNc(3,wB,21,13,"div",4),a.ALo(4,"async"),a.YNc(5,EB,1,0,"ng-container",5),a.TgZ(6,"div")(7,"div"),a.YNc(8,IB,1,1,"ng-template",null,6,a.W1O),a.qZA()()()()}if(2&n){const t=a.MAs(9),r=a.oxw();a.xp6(1),a.Q6J("navigation",r.navElements),a.xp6(2),a.Q6J("ngIf",a.lcZ(4,3,r.auth.user$)),a.xp6(2),a.Q6J("ngTemplateOutlet",t)}}let AB=(()=>{class n{constructor(t,r,i,l,d){this.router=t,this.activatedRoute=r,this.db=i,this.storage=l,this.auth=d,this.navElements=["Dashboard","Course Page","Lecture"],this.showChat=!0,this.videoDescription="",this.videoTitle="",this.lectureDialog=!1,this.thumbSelected=!1,this.activatedRoute.queryParams&&this.activatedRoute.queryParams.subscribe(p=>{this.cid=p.cid,this.lid=p.lid})}ngOnInit(){this.lecture=this.db.getLecture(this.lid),this.lecture.subscribe(t=>{t&&(this.course=this.db.getCourse(t.courseID),this.storage.ref(null==t?void 0:t.videoUrl).getDownloadURL().subscribe(r=>{this.src=r}),this.course.subscribe(r=>this.owner=this.db.getUser(null==r?void 0:r.owner)),this.date=new Date(1e3*t.uploadDate.seconds).toLocaleDateString("en-us"))})}toggleSettings(){this.lectureDialog=!this.lectureDialog,this.alert="",this.thumbSelected=!1}changeDesc(t,r){var i=this;return(0,X.Z)(function*(){yield i.db.editLecture(r,t,"",i.descInput.nativeElement.value).catch(()=>{i.alert="Could not change description"})})()}changeThumbnail(t,r){var i=this;return(0,X.Z)(function*(){yield i.db.editLecture(r,t,"","",i.newThumb).then(()=>{i.thumbSelected=!1,i.thumbInput.nativeElement.value=""}).catch(()=>{i.alert="Could not upload thumbnail"})})()}deleteLecture(t,r){"Delete"===this.confirmDelete.nativeElement.value?(this.db.deleteLecture(r,t),this.navigateBackToCourse()):this.alert="Type 'Delete' to confirm"}thumbnailSelected(t){this.newThumb=t.target.files[0],this.thumbSelected=!0}navigation(t){return"Dashboard"===t?this.router.navigate(["/dashboard/"]):"Course Page"===t?this.navigateBackToCourse():"Lecture"===t?location.reload():void 0}toggleChat(){this.showChat=!this.showChat}time(t){this.currentTime=t.target.currentTime}navigateBackToCourse(){this.router.navigate(["/course-page/"],{queryParams:{cid:this.cid}})}submitSettingsChange(){var t=this;return(0,X.Z)(function*(){let r=!1;t.titleInput&&(yield t.db.editLecture(t.lid,t.cid,t.titleInput.nativeElement.value,"").then(()=>r=!0).catch(()=>{t.alert="Could not change title"})),t.description&&(yield t.db.editLecture(t.lid,t.cid,"",t.description).then(()=>{r=!0,t.description=""}).catch(()=>{t.alert="Could not upload thumbnail"})),t.thumbInput&&(yield t.db.editLecture(t.lid,t.cid,"","",t.newThumb).then(()=>{t.thumbSelected=!1,t.thumbInput.nativeElement.value=""}).catch(()=>{t.alert="Could not upload thumbnail"})),""===t.alert&&t.toggleSettings()})()}}return n.\u0275fac=function(t){return new(t||n)(a.Y36($n),a.Y36(hf),a.Y36(gf),a.Y36(Pg),a.Y36(Wo))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-lecture-vid-page"]],viewQuery:function(t,r){if(1&t&&(a.Gf(oB,5),a.Gf(aB,5),a.Gf(uB,5),a.Gf(lB,5)),2&t){let i;a.iGM(i=a.CRH())&&(r.titleInput=i.first),a.iGM(i=a.CRH())&&(r.thumbInput=i.first),a.iGM(i=a.CRH())&&(r.descInput=i.first),a.iGM(i=a.CRH())&&(r.confirmDelete=i.first)}},decls:2,vars:3,consts:[["class","viewBackground",4,"ngIf"],[1,"viewBackground"],[1,"sticky","top-0","z-50",3,"navigation","clickEvent"],[1,"sticky","top-0","z-40"],["class","h-[94vh] max-h-full flex flex-col divide-y-2 divide-gray-300",4,"ngIf"],[4,"ngTemplateOutlet"],["lectureSettings",""],[1,"h-[94vh]","max-h-full","flex","flex-col","divide-y-2","divide-gray-300"],["class","viewHeading my-5",4,"ngIf"],["class","video-and-chat-container py-2",4,"ngIf"],[1,"hidden","xs:flex","justify-between","items-center","w-full","pb-2"],[1,"w-full","sm:mx-16","mx-8"],[1,"divide-y-[1px]","divide-gray-300"],[1,"flex","items-center","justify-between"],[1,"text-xl","text-white","font-semibold"],["class","chatButton","type","button",3,"click",4,"ngIf"],[1,"text-white","font-normal"],[1,"text-lg"],[1,"flex","justify-between","italic","text-sm"],[4,"ngIf"],[1,"viewHeading","my-5"],["class","text-xl md:flex hidden",4,"ngIf"],[1,"text-xl","md:flex","hidden"],[1,"cursor-pointer","hover:underline","text-xl","md:flex","hidden",3,"click"],[1,"video-and-chat-container","py-2"],[1,"video-container","w-full"],["controls","","controlslist","nodownload",3,"timeupdate",4,"ngIf"],["class","w-1/2 md:flex hidden",3,"lid","uid","currentTime",4,"ngIf"],["controls","","controlslist","nodownload",3,"timeupdate"],[3,"src"],[1,"w-1/2","md:flex","hidden",3,"lid","uid","currentTime"],["type","button",1,"chatButton",3,"click"],["class","fade overflow-x-hidden overflow-y-auto fixed inset-0 z-50 flex justify-center items-center ",4,"ngIf"],[1,"fade","overflow-x-hidden","overflow-y-auto","fixed","inset-0","z-50","flex","justify-center","items-center"],["class","modal2 bg-white rounded-xl border-[1px] border-gray-300",4,"ngIf"],[1,"modal2","bg-white","rounded-xl","border-[1px]","border-gray-300"],[1,"header","text-4xl","font-semibold","flex","justify-center","items-center","py-10"],[1,"body"],[1,"mx-5","text-lg","font-medium"],["class"," flex justify-center text-red-600 py-2",4,"ngIf"],[1,"element"],["name","title","id","title","type","text",1,"inputField","w-2/3","p-2",3,"placeholder"],["titleInput",""],[1,"flex","justify-between","py-2"],["name","description","id","description","type","text","rows","5",1,"w-2/3","form-control","px-3","py-1.5","text-base","font-normal","text-gray-700","bg-white","bg-clip-padding","border","border-solid","shadow-lg","border-gray-300","rounded","transition","ease-in-out","m-0","focus:text-gray-700","focus:bg-white","focus:border-blue-600","focus:outline-none",3,"ngModel","placeholder","ngModelChange"],["accept","image/*","name","thumb","id","thumb","type","file","type","file",1,"inputField","text-sm","w-2/3",3,"change"],["thumbInput",""],[1,"w-2/3","flex","justify-between"],["name","confirmDelete","id","confirmDelete","type","password","placeholder","Type 'Delete'",1,"inputField","p-2","focus:border-red-500","w-3/4"],["confirmDelete",""],["type","button",1,"text-red-500","modalButton","pr-3",3,"click"],[1,"footer","flex","justify-between","items-center","py-5","px-6"],["type","button",1,"text-red-500","modalButton",3,"click"],["type","button",1,"modalButtonFilled",3,"click"],[1,"flex","justify-center","text-red-600","py-2"]],template:function(t,r){1&t&&(a.YNc(0,DB,10,5,"div",0),a.ALo(1,"async")),2&t&&a.Q6J("ngIf",a.lcZ(1,1,r.lecture))},directives:[fn,DT,sB,ra,wd,vd,ju,Bu,yd,Kl],pipes:[ps],styles:["",".video-and-chat-container[_ngcontent-%COMP%]{\n                    overflow: hidden;\n                    display: flex;\n                }\n                .video-container[_ngcontent-%COMP%] {\n                    overflow: hidden;\n                    display: flex;\n                    justify-content: space-evenly;\n                }\n                .video[_ngcontent-%COMP%] {\n                    height: 100%;\n                    width: 177.77777778vh; \n                    min-width: 100%;\n                    min-height: 56.25vw; \n                }",".modal[_ngcontent-%COMP%]{\n      aspect-ratio: 20/10;\n      height: 26rem;\n      display:flex;\n      flex-direction: column;\n      justify-content: space-between;\n    }\n    .modal2[_ngcontent-%COMP%]{\n      aspect-ratio: 15/10;\n      height: 32rem;\n      display:flex;\n      flex-direction: column;\n      justify-content: space-between;\n    }\n    .header[_ngcontent-%COMP%]{\n      flex: 0;\n      width: 100%;\n      border-bottom-width: 1px;\n      --tw-border-opacity: 1;\n      border-color: rgb(229 231 235 / var(--tw-border-opacity));\n    }\n    .body[_ngcontent-%COMP%]{\n      flex: 1;\n      width: 100%;\n      border-bottom-width: 1px;\n      --tw-border-opacity: 1;\n      border-color: rgb(229 231 235 / var(--tw-border-opacity));\n    }\n    .footer[_ngcontent-%COMP%]{\n      flex: 0;\n      width: 100%;\n    }\n    .element[_ngcontent-%COMP%]{\n      display:flex;\n      justify-content: space-between;\n      align-items: center;\n      padding-top: 0.5rem;\n      padding-bottom: 0.5rem;\n    }"]}),n})();const SB=["target"];function xB(n,e){if(1&n&&(a.TgZ(0,"video",3),a._UZ(1,"source",4),a.qZA()),2&n){const t=a.oxw();a.xp6(1),a.s9C("src",t.src,a.LSH)}}let MB=(()=>{class n{constructor(t,r){this.http=t,this.storage=r}ngOnInit(){this.storage.ref("190828_27_SuperTrees_HD_17.mp4").getDownloadURL().subscribe(t=>{console.log(t),this.src=t})}fileSelected(t){this.file=t.target.files[0],console.log("file selected")}uploadData(){if(!this.file)return;console.log("Tried to send");const t=new FormData;t.append("video",this.file),this.upload$=this.http.post("http://localhost:3000/uploadVideo",t),this.upload$.subscribe(r=>{console.log(r)})}hello(){this.http.get("http://localhost:3000/").subscribe(t=>{console.log(t)})}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(uN),a.Y36(Pg))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-file-form"]],viewQuery:function(t,r){if(1&t&&a.Gf(SB,7),2&t){let i;a.iGM(i=a.CRH())&&(r.target=i.first)}},decls:6,vars:1,consts:[["type","file","accept",".mp4, .mkv",3,"change"],[3,"click"],["id","vid1","width","600","height","300","class","vjs-default-skin","controls","","autoplay","true",4,"ngIf"],["id","vid1","width","600","height","300","controls","","autoplay","true",1,"vjs-default-skin"],["type","video/mp4",3,"src"]],template:function(t,r){1&t&&(a.TgZ(0,"input",0),a.NdJ("change",function(l){return r.fileSelected(l)}),a.qZA(),a.TgZ(1,"button",1),a.NdJ("click",function(){return r.uploadData()}),a._uU(2,"Upload"),a.qZA(),a.TgZ(3,"button",1),a.NdJ("click",function(){return r.hello()}),a._uU(4,"Hello"),a.qZA(),a.YNc(5,xB,2,1,"video",2)),2&t&&(a.xp6(5),a.Q6J("ngIf",r.src))},directives:[fn],styles:[""]}),n})();function RB(n,e){if(1&n&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&n){const t=a.oxw().ngIf;a.xp6(1),a.Oqu(t.fname)}}function NB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"button",19),a.NdJ("click",function(){a.CHM(t);const i=a.oxw(2);return i.fEdit=!i.fEdit}),a._uU(1,"Edit First Name"),a.qZA()}}function PB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"input",20),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(2).fname=i}),a.qZA()}if(2&n){const t=a.oxw().ngIf,r=a.oxw();a.s9C("placeholder",t.fname),a.Q6J("ngModel",r.fname)}}function OB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div")(1,"button",19),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().ngIf,l=a.oxw();return l.fEdit=!l.fEdit,l.fname=i.fname}),a._uU(2,"Cancel"),a.qZA(),a.TgZ(3,"button",19),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().ngIf,l=a.oxw();return l.fEdit=!l.fEdit,l.edit(i.id,l.fname,"")}),a._uU(4,"Save Changes"),a.qZA()()}}function kB(n,e){if(1&n&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&n){const t=a.oxw().ngIf;a.xp6(1),a.Oqu(t.lname)}}function FB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"button",19),a.NdJ("click",function(){a.CHM(t);const i=a.oxw(2);return i.lEdit=!i.lEdit}),a._uU(1,"Edit Last Name"),a.qZA()}}function LB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"input",20),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(2).lname=i}),a.qZA()}if(2&n){const t=a.oxw().ngIf,r=a.oxw();a.s9C("placeholder",t.lname),a.Q6J("ngModel",r.lname)}}function UB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div")(1,"button",19),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().ngIf,l=a.oxw();return l.lEdit=!l.lEdit,l.lname=i.lname}),a._uU(2,"Cancel"),a.qZA(),a.TgZ(3,"button",19),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().ngIf,l=a.oxw();return l.lEdit=!l.lEdit,l.edit(i.id,"",l.lname)}),a._uU(4,"Save Changes"),a.qZA()()}}function VB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"button",19),a.NdJ("click",function(){a.CHM(t);const i=a.oxw().ngIf;return a.oxw().edit(i.id,"","")}),a._uU(1,"Upload Image"),a.qZA()}}function BB(n,e){1&n&&a.GkF(0)}function jB(n,e){1&n&&a.GkF(0)}function HB(n,e){1&n&&a.GkF(0)}function $B(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"p",7),a._uU(4),a.qZA(),a._UZ(5,"img",8),a.qZA(),a._UZ(6,"br"),a.TgZ(7,"p",9),a._uU(8,"General"),a.qZA(),a.TgZ(9,"div",10)(10,"div",11),a.YNc(11,RB,2,1,"p",12),a.YNc(12,NB,2,0,"button",13),a.qZA(),a.TgZ(13,"div",11),a.YNc(14,PB,1,2,"input",14),a.YNc(15,OB,5,0,"div",12),a.qZA(),a.TgZ(16,"div",11),a.YNc(17,kB,2,1,"p",12),a.YNc(18,FB,2,0,"button",13),a.qZA(),a.TgZ(19,"div",11),a.YNc(20,LB,1,2,"input",14),a.YNc(21,UB,5,0,"div",12),a.qZA()(),a._UZ(22,"br"),a.TgZ(23,"p",9),a._uU(24,"Change Profile Image"),a.qZA(),a.TgZ(25,"div",11)(26,"input",15),a.NdJ("change",function(i){return a.CHM(t),a.oxw().fileSelected(i)}),a.qZA(),a.YNc(27,VB,2,0,"button",13),a.qZA(),a._UZ(28,"br"),a.TgZ(29,"p",9),a._uU(30,"Credentials"),a.qZA(),a.TgZ(31,"div")(32,"p",16),a.NdJ("click",function(){return a.CHM(t),a.oxw().toggleEmail()}),a._uU(33,"Change Email"),a.qZA(),a.TgZ(34,"p",16),a.NdJ("click",function(){return a.CHM(t),a.oxw().togglePassword()}),a._uU(35,"Change Password"),a.qZA(),a.TgZ(36,"p",16),a.NdJ("click",function(){return a.CHM(t),a.oxw().toggleDelete()}),a._uU(37,"Delete Account"),a.qZA()(),a._UZ(38,"br"),a.TgZ(39,"div")(40,"button",17),a.NdJ("click",function(){return a.CHM(t),a.oxw().navDash()}),a._uU(41,"Return to Dashboard"),a.qZA()()(),a.YNc(42,BB,1,0,"ng-container",18),a.YNc(43,jB,1,0,"ng-container",18),a.YNc(44,HB,1,0,"ng-container",18),a.qZA()}if(2&n){const t=e.ngIf,r=a.oxw(),i=a.MAs(3),l=a.MAs(5),d=a.MAs(7);a.xp6(4),a.AsE("",t.fname," ",t.lname,""),a.xp6(7),a.Q6J("ngIf",!r.fEdit),a.xp6(1),a.Q6J("ngIf",!r.fEdit),a.xp6(2),a.Q6J("ngIf",r.fEdit),a.xp6(1),a.Q6J("ngIf",r.fEdit),a.xp6(2),a.Q6J("ngIf",!r.lEdit),a.xp6(1),a.Q6J("ngIf",!r.lEdit),a.xp6(2),a.Q6J("ngIf",r.lEdit),a.xp6(1),a.Q6J("ngIf",r.lEdit),a.xp6(6),a.Q6J("ngIf",r.img),a.xp6(15),a.Q6J("ngTemplateOutlet",i),a.xp6(1),a.Q6J("ngTemplateOutlet",l),a.xp6(1),a.Q6J("ngTemplateOutlet",d)}}function qB(n,e){if(1&n&&(a.TgZ(0,"p",37),a._uU(1),a.qZA()),2&n){const t=a.oxw(3);a.xp6(1),a.Oqu(t.alert)}}function GB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",38)(1,"button",39),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).toggleEmail()}),a._uU(2," Close "),a.qZA(),a.TgZ(3,"button",40),a.NdJ("click",function(){const l=a.CHM(t).ngIf;return a.oxw(3).updateEmail(l.email)}),a._uU(4," Update Email "),a.qZA()()}}function ZB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"h1",27),a._uU(5,"Change Your Email"),a.qZA()(),a.TgZ(6,"div",28),a.YNc(7,qB,2,1,"p",29),a.TgZ(8,"div",30)(9,"form")(10,"ul",31)(11,"li")(12,"label",32),a._uU(13,"Enter new email here!"),a.qZA()(),a.TgZ(14,"li",33)(15,"input",34),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(2).newEmail=i}),a.qZA()(),a.TgZ(16,"li")(17,"label",32),a._uU(18,"Enter your password here!"),a.qZA()(),a.TgZ(19,"li",33)(20,"input",35),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(2).password=i}),a.qZA()()()()()(),a.YNc(21,GB,5,0,"div",36),a.ALo(22,"async"),a.qZA()()()}if(2&n){const t=a.oxw(2);a.xp6(7),a.Q6J("ngIf",t.alert),a.xp6(8),a.Q6J("ngModel",t.newEmail),a.xp6(5),a.Q6J("ngModel",t.password),a.xp6(1),a.Q6J("ngIf",a.lcZ(22,4,t.auth.user$))}}function zB(n,e){1&n&&a._UZ(0,"div",41)}function WB(n,e){if(1&n&&(a.YNc(0,ZB,23,6,"div",21),a.YNc(1,zB,1,0,"div",22)),2&n){const t=a.oxw();a.Q6J("ngIf",t.eDialog),a.xp6(1),a.Q6J("ngIf",t.eDialog)}}function KB(n,e){if(1&n&&(a.TgZ(0,"p",37),a._uU(1),a.qZA()),2&n){const t=a.oxw(3);a.xp6(1),a.Oqu(t.alert)}}function YB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",38)(1,"button",39),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).togglePassword()}),a._uU(2," Close "),a.qZA(),a.TgZ(3,"button",40),a.NdJ("click",function(){const l=a.CHM(t).ngIf;return a.oxw(3).updatePassword(l.email)}),a._uU(4," Update Password "),a.qZA()()}}function QB(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"h1",27),a._uU(5,"Change Your Password"),a.qZA()(),a.TgZ(6,"div",28),a.YNc(7,KB,2,1,"p",29),a.TgZ(8,"div",30)(9,"form")(10,"ul",31)(11,"li")(12,"label",32),a._uU(13,"Enter new password here!"),a.qZA()(),a.TgZ(14,"li",33)(15,"input",42),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(2).newPassword=i}),a.qZA()(),a.TgZ(16,"li")(17,"label",32),a._uU(18,"Enter old password here!"),a.qZA()(),a.TgZ(19,"li",33)(20,"input",43),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(2).password=i}),a.qZA()()()()()(),a.YNc(21,YB,5,0,"div",36),a.ALo(22,"async"),a.qZA()()()}if(2&n){const t=a.oxw(2);a.xp6(7),a.Q6J("ngIf",t.alert),a.xp6(8),a.Q6J("ngModel",t.newPassword),a.xp6(5),a.Q6J("ngModel",t.password),a.xp6(1),a.Q6J("ngIf",a.lcZ(22,4,t.auth.user$))}}function JB(n,e){1&n&&a._UZ(0,"div",41)}function XB(n,e){if(1&n&&(a.YNc(0,QB,23,6,"div",21),a.YNc(1,JB,1,0,"div",22)),2&n){const t=a.oxw();a.Q6J("ngIf",t.pDialog),a.xp6(1),a.Q6J("ngIf",t.pDialog)}}function ej(n,e){if(1&n&&(a.TgZ(0,"p",37),a._uU(1),a.qZA()),2&n){const t=a.oxw(3);a.xp6(1),a.Oqu(t.alert)}}function tj(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",38)(1,"button",39),a.NdJ("click",function(){return a.CHM(t),a.oxw(3).toggleDelete()}),a._uU(2," Close "),a.qZA(),a.TgZ(3,"button",40),a.NdJ("click",function(){const l=a.CHM(t).ngIf;return a.oxw(3).deleteAccount(l.email,l.id)}),a._uU(4," Delete Account "),a.qZA()()}}function nj(n,e){if(1&n){const t=a.EpF();a.TgZ(0,"div",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"h1",27),a._uU(5,"Delete Your Account"),a.qZA()(),a.TgZ(6,"div",28),a.YNc(7,ej,2,1,"p",29),a.TgZ(8,"div",30)(9,"form")(10,"ul",31)(11,"li")(12,"label",32),a._uU(13,"Warning! Are you sure you want to delete your account? Once you delete your account, you will not be able to recover it or your content!"),a.qZA()(),a._UZ(14,"br"),a.TgZ(15,"li")(16,"label",32),a._uU(17,"Enter password here!"),a.qZA()(),a.TgZ(18,"li",33)(19,"input",35),a.NdJ("ngModelChange",function(i){return a.CHM(t),a.oxw(2).password=i}),a.qZA()()()()()(),a.YNc(20,tj,5,0,"div",36),a.ALo(21,"async"),a.qZA()()()}if(2&n){const t=a.oxw(2);a.xp6(7),a.Q6J("ngIf",t.alert),a.xp6(12),a.Q6J("ngModel",t.password),a.xp6(1),a.Q6J("ngIf",a.lcZ(21,3,t.auth.user$))}}function rj(n,e){1&n&&a._UZ(0,"div",41)}function ij(n,e){if(1&n&&(a.YNc(0,nj,22,5,"div",21),a.YNc(1,rj,1,0,"div",22)),2&n){const t=a.oxw();a.Q6J("ngIf",t.dDialog),a.xp6(1),a.Q6J("ngIf",t.dDialog)}}const sj=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:vV,canActivate:[fN]},{path:"dashboard",component:_V,canActivate:[Fw]},{path:"registration",component:JV,canActivate:[fN]},{path:"course-page",component:KV,canActivate:[HU,Fw]},{path:"lecture",component:AB,canActivate:[Fw]},{path:"add-course",component:nB,canActivate:[Fw]},{path:"test-upload",component:MB},{path:"profile",component:(()=>{class n{constructor(t,r,i){this.auth=t,this.db=r,this.router=i,this.fEdit=!1,this.lEdit=!1,this.eDialog=!1,this.pDialog=!1,this.dDialog=!1}ngOnInit(){}toggleEmail(){this.eDialog=!this.eDialog,this.alert="",this.password=""}togglePassword(){this.pDialog=!this.pDialog,this.alert="",this.password=""}toggleDelete(){this.dDialog=!this.dDialog,this.alert="",this.password=""}updateEmail(t){var r=this;return(0,X.Z)(function*(){yield r.auth.updateEmail(t,r.password,r.newEmail).then(i=>{console.log(i,"catch"),r.toggleEmail()}).catch(i=>{r.alert=i})})()}updatePassword(t){var r=this;return(0,X.Z)(function*(){yield r.auth.updatePassword(t,r.password,r.newPassword).then(i=>{console.log(i,"catch"),r.togglePassword()}).catch(i=>{r.alert=i})})()}deleteAccount(t,r){var i=this;return(0,X.Z)(function*(){i.db.deleteUser(r,t,i.password)})()}navDash(){this.router.navigate(["/dashboard"])}fileSelected(t){this.img=t.target.files[0]}edit(t,r,i){this.db.editUser(t,r,i,this.img)}}return n.\u0275fac=function(t){return new(t||n)(a.Y36(Wo),a.Y36(gf),a.Y36($n))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-profile"]],decls:8,vars:3,consts:[["class","min-h-screen bg-orange-800 bg-gradient-to-tr from-indigo-500",4,"ngIf"],["emailDialog",""],["passDialog",""],["deleteDialog",""],[1,"min-h-screen","bg-orange-800","bg-gradient-to-tr","from-indigo-500"],[1,"divide-y-2","divide-gray-200","relative","top-24","left-1/4","w-1/2","bg-white","rounded-xl","py-10","px-10","shadow-inner","shadow-black"],[1,"flex","justify-center","items-center","w-full"],[1,"font-semibold","text-2xl"],["src","assets/User.png",1,"h-10","pl-3"],[1,"font-semibold"],[1,""],[1,"flex"],[4,"ngIf"],["class","mx-2",3,"click",4,"ngIf"],["type","text",3,"ngModel","placeholder","ngModelChange",4,"ngIf"],["type","file","accept","image/png, image/gif, image/jpeg",3,"change"],[1,"cursor-pointer",3,"click"],[3,"click"],[4,"ngTemplateOutlet"],[1,"mx-2",3,"click"],["type","text",3,"ngModel","placeholder","ngModelChange"],["class","fade overflow-x-hidden overflow-y-auto fixed inset-0 z-50 justify-center items-center flex",4,"ngIf"],["class","opacity-25 fixed inset-0 z-40 bg-black",4,"ngIf"],[1,"fade","overflow-x-hidden","overflow-y-auto","fixed","inset-0","z-50","justify-center","items-center","flex"],[1,"relative","my-6","mx-auto","w-1/3","min-w-fit"],[1,"rounded-xl","shadow-2xl","relative","bg-white"],[1,"py-5","border-b","border-solid","border-gray-200","rounded-t"],[1,"text-4xl","font-semibold","text-center"],[1,"relative","p-6","flex-auto"],["class"," text-center text-xl text-red-600",4,"ngIf"],[1,"my-4","text-blueGray-500","text-lg","leading-relaxed"],[1,"text-center","text-base"],[1,"font-medium"],[1,"py-2"],["name","newEmail","id","newEmail","type","email","placeholder","example@email.com",1,"rounded-md","bg-orange-100","shadow","appearance-none","border","font-lg","w-6/12","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],["name","password","id","password","type","password","placeholder","Password",1,"rounded-md","bg-orange-100","shadow","appearance-none","border","font-lg","w-6/12","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],["class","flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b",4,"ngIf"],[1,"text-center","text-xl","text-red-600"],[1,"flex","items-center","justify-end","p-6","border-t","border-solid","border-blueGray-200","rounded-b"],["type","button",1,"text-red-500","background-transparent","font-bold","uppercase","px-6","py-2","text-sm","outline-none","focus:outline-none","mr-1","mb-1","ease-linear","transition-all","duration-150",3,"click"],["type","button",1,"bg-emerald-500","text-white","active:bg-emerald-600","font-bold","uppercase","text-sm","px-6","py-3","rounded","shadow","hover:shadow-lg","outline-none","focus:outline-none","mr-1","mb-1","ease-linear","transition-all","duration-150",3,"click"],[1,"opacity-25","fixed","inset-0","z-40","bg-black"],["name","newPassword","id","newPassword","type","password","placeholder","New Password",1,"rounded-md","bg-orange-100","shadow","appearance-none","border","font-lg","w-6/12","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"],["name","password","id","password","type","password","placeholder","Old Password",1,"rounded-md","bg-orange-100","shadow","appearance-none","border","font-lg","w-6/12","p-2","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModel","ngModelChange"]],template:function(t,r){1&t&&(a.YNc(0,$B,45,14,"div",0),a.ALo(1,"async"),a.YNc(2,WB,2,2,"ng-template",null,1,a.W1O),a.YNc(4,XB,2,2,"ng-template",null,2,a.W1O),a.YNc(6,ij,2,2,"ng-template",null,3,a.W1O)),2&t&&a.Q6J("ngIf",a.lcZ(1,1,r.auth.user$))},directives:[fn,Bu,yd,Kl,ra,wd,vd,ju],pipes:[ps],styles:[""]}),n})(),canActivate:[Fw]},{path:"**",component:YV}];let oj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[dA.forRoot(sj)],dA]}),n})(),aj=(()=>{class n{constructor(){}ngOnInit(){}print(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&a._UZ(0,"router-outlet")},directives:[sA],styles:[""]}),n})();const pN_firebase={projectId:"third-project-a76e2",appId:"1:858114061879:web:b5470bb29d2df62dc8b1b2",databaseURL:"https://third-project-a76e2-default-rtdb.firebaseio.com",storageBucket:"third-project-a76e2.appspot.com",apiKey:"AIzaSyAiYuzGb7rNayD2mcLQp_3DasWftjQf8S4",authDomain:"third-project-a76e2.firebaseapp.com",messagingSenderId:"858114061879"};let uj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=a.oAB({type:n,bootstrap:[aj]}),n.\u0275inj=a.cJS({providers:[],imports:[[Qu,oj,jU,AU,gS,rM,Fi.hO.initializeApp(pN_firebase),kF]]}),n})();(0,a.G48)(),Ud().bootstrapModule(uj).catch(n=>console.error(n))},5867:(ot,Ae,O)=>{"use strict";O.d(Ae,{Mq:()=>a.getApp,C6:()=>a.getApps});var a=O(9681);(0,a.registerVersion)("firebase","9.6.7","app")},127:(ot,Ae,O)=>{"use strict";O.d(Ae,{Z:()=>a.Z});var a=O(3942);a.Z.registerVersion("firebase","9.6.7","app-compat")},3059:(ot,Ae,O)=>{"use strict";O.r(Ae);var a=O(5861),J=O(3942),P=O(2090),me=O(9681),te=O(655),ge=O(1877),ie=O(4859);const Re=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function De(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},z=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xe=new ge.Yd("@firebase/auth");function Ne(y,...f){xe.logLevel<=ge.in.ERROR&&xe.error(`Auth (${me.SDK_VERSION}): ${y}`,...f)}function oe(y,...f){throw He(y,...f)}function _e(y,...f){return He(y,...f)}function Ee(y,f,m){const w=Object.assign(Object.assign({},Ue()),{[f]:m});return new P.LL("auth","Firebase",w).create(f,{appName:y.name})}function qe(y,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&oe(y,"argument-error"),Ee(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(y,...f){if("string"!=typeof y){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(m,...w)}return z.create(y,...f)}function ne(y,f,...m){if(!y)throw He(f,...m)}function K(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ne(f),new Error(f)}function se(y,f){y||K(f)}const ve=new Map;function ae(y){se(y instanceof Function,"Expected a class definition");let f=ve.get(y);return f?(se(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,ve.set(y,f),f)}function Et(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function $t(){return"http:"===Vn()||"https:"===Vn()}function Vn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class qn{constructor(f,m){this.shortDelay=f,this.longDelay=m,se(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&($t()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rn(y,f){se(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Tr{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void K("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void K("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void K("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Vi=new qn(3e4,6e4);function Jt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Ot(y,f,m,w){return us.apply(this,arguments)}function us(){return(us=(0,a.Z)(function*(y,f,m,w,D={}){return gr(y,D,(0,a.Z)(function*(){let N={},Z={};w&&("GET"===f?Z=w:N={body:JSON.stringify(w)});const ce=(0,P.xO)(Object.assign({key:y.config.apiKey},Z)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),Tr.fetch()(Hs(y,y.config.apiHost,m,ce),Object.assign({method:f,headers:Ve,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function gr(y,f,m){return js.apply(this,arguments)}function js(){return(js=(0,a.Z)(function*(y,f,m){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Qt),f);try{const D=new ui(y),N=yield Promise.race([m(),D.promise]);D.clearNetworkTimeout();const Z=yield N.json();if("needConfirmation"in Z)throw ji(y,"account-exists-with-different-credential",Z);if(N.ok&&!("errorMessage"in Z))return Z;{const ce=N.ok?Z.errorMessage:Z.error.message,[Ve,Je]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw ji(y,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Ve)throw ji(y,"email-already-in-use",Z);const it=w[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw Ee(y,it,Je);oe(y,it)}}catch(D){if(D instanceof P.ZR)throw D;oe(y,"network-request-failed")}})).apply(this,arguments)}function Lr(y,f,m,w){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,a.Z)(function*(y,f,m,w,D={}){const N=yield Ot(y,f,m,w,D);return"mfaPendingCredential"in N&&oe(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Hs(y,f,m,w){const D=`${f}${m}?${w}`;return y.config.emulator?rn(y.config,D):`${y.config.apiScheme}://${D}`}class ui{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(_e(this.auth,"network-request-failed")),Vi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ji(y,f,m){const w={appName:y.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const D=_e(y,f,w);return D.customData._tokenResponse=m,D}function Kr(){return(Kr=(0,a.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Gn(y,f){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,a.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function _o(y,f){return yt.apply(this,arguments)}function yt(){return(yt=(0,a.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function tt(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Ir(){return(Ir=(0,a.Z)(function*(y,f=!1){const m=(0,P.m9)(y),w=yield m.getIdToken(f),D=nt(w);ne(D&&D.exp&&D.auth_time&&D.iat,m.auth,"internal-error");const N="object"==typeof D.firebase?D.firebase:void 0,Z=null==N?void 0:N.sign_in_provider;return{claims:D,token:w,authTime:tt(Nt(D.auth_time)),issuedAtTime:tt(Nt(D.iat)),expirationTime:tt(Nt(D.exp)),signInProvider:Z||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Nt(y){return 1e3*Number(y)}function nt(y){const[f,m,w]=y.split(".");if(void 0===f||void 0===m||void 0===w)return Ne("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,P.tV)(m);return D?JSON.parse(D):(Ne("Failed to decode base64 JWT payload"),null)}catch(D){return Ne("Caught error parsing JWT payload as JSON",D),null}}function Ii(y,f){return ls.apply(this,arguments)}function ls(){return(ls=(0,a.Z)(function*(y,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof P.ZR&&Ft(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Ft({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Va{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const D=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,a.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,a.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class Yr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=tt(this.lastLoginAt),this.creationTime=tt(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function li(y){return V.apply(this,arguments)}function V(){return(V=(0,a.Z)(function*(y){var f;const m=y.auth,w=yield y.getIdToken(),D=yield Ii(y,_o(m,{idToken:w}));ne(null==D?void 0:D.users.length,m,"internal-error");const N=D.users[0];y._notifyReloadListener(N);const Z=(null===(f=N.providerUserInfo)||void 0===f?void 0:f.length)?ee(N.providerUserInfo):[],ce=Ce(y.providerData,Z),it=!!y.isAnonymous&&!(y.email&&N.passwordHash||(null==ce?void 0:ce.length)),lt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ce,metadata:new Yr(N.createdAt,N.lastLoginAt),isAnonymous:it};Object.assign(y,lt)})).apply(this,arguments)}function G(){return(G=(0,a.Z)(function*(y){const f=(0,P.m9)(y);yield li(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ce(y,f){return[...y.filter(w=>!f.some(D=>D.providerId===w.providerId)),...f]}function ee(y){return y.map(f=>{var{providerId:m}=f,w=(0,te._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function mt(){return(mt=(0,a.Z)(function*(y,f){const m=yield gr(y,{},(0,a.Z)(function*(){const w=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:D,apiKey:N}=y.config,Z=Hs(y,D,"/v1/token",`key=${N}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Tr.fetch()(Z,{method:"POST",headers:ce,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class sn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ne(f.idToken,"internal-error"),ne(void 0!==f.idToken,"internal-error"),ne(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function ht(y){const f=nt(y);return ne(f,"internal-error"),ne(void 0!==f.exp,"internal-error"),ne(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,a.Z)(function*(){return ne(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,a.Z)(function*(){const{accessToken:D,refreshToken:N,expiresIn:Z}=yield function We(y,f){return mt.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(D,N,Number(Z))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:D,expirationTime:N}=m,Z=new sn;return w&&(ne("string"==typeof w,"internal-error",{appName:f}),Z.refreshToken=w),D&&(ne("string"==typeof D,"internal-error",{appName:f}),Z.accessToken=D),N&&(ne("number"==typeof N,"internal-error",{appName:f}),Z.expirationTime=N),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new sn,this.toJSON())}_performRefresh(){return K("not implemented")}}function hn(y,f){ne("string"==typeof y||void 0===y,"internal-error",{appName:f})}class mn{constructor(f){var{uid:m,auth:w,stsTokenManager:D}=f,N=(0,te._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Va(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Yr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,a.Z)(function*(){const w=yield Ii(m,m.stsTokenManager.getToken(m.auth,f));return ne(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function gn(y){return Ir.apply(this,arguments)}(this,f)}reload(){return function q(y){return G.apply(this,arguments)}(this)}_assign(f){this!==f&&(ne(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new mn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,a.Z)(function*(){let D=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),D=!0),m&&(yield li(w)),yield w.auth._persistUserIfCurrent(w),D&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,a.Z)(function*(){const m=yield f.getIdToken();return yield Ii(f,function gt(y,f){return Kr.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,D,N,Z,ce,Ve,Je,it;const lt=null!==(w=m.displayName)&&void 0!==w?w:void 0,bn=null!==(D=m.email)&&void 0!==D?D:void 0,Rr=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,Dc=null!==(Z=m.photoURL)&&void 0!==Z?Z:void 0,fh=null!==(ce=m.tenantId)&&void 0!==ce?ce:void 0,Cu=null!==(Ve=m._redirectEventId)&&void 0!==Ve?Ve:void 0,ip=null!==(Je=m.createdAt)&&void 0!==Je?Je:void 0,Iy=null!==(it=m.lastLoginAt)&&void 0!==it?it:void 0,{uid:Lo,emailVerified:ph,isAnonymous:wl,providerData:sp,stsTokenManager:Ac}=m;ne(Lo&&Ac,f,"internal-error");const Nr=sn.fromJSON(this.name,Ac);ne("string"==typeof Lo,f,"internal-error"),hn(lt,f.name),hn(bn,f.name),ne("boolean"==typeof ph,f,"internal-error"),ne("boolean"==typeof wl,f,"internal-error"),hn(Rr,f.name),hn(Dc,f.name),hn(fh,f.name),hn(Cu,f.name),hn(ip,f.name),hn(Iy,f.name);const Aa=new mn({uid:Lo,auth:f,email:bn,emailVerified:ph,displayName:lt,isAnonymous:wl,photoURL:Dc,phoneNumber:Rr,tenantId:fh,stsTokenManager:Nr,createdAt:ip,lastLoginAt:Iy});return sp&&Array.isArray(sp)&&(Aa.providerData=sp.map(Sa=>Object.assign({},Sa))),Cu&&(Aa._redirectEventId=Cu),Aa}static _fromIdTokenResponse(f,m,w=!1){return(0,a.Z)(function*(){const D=new sn;D.updateFromServerResponse(m);const N=new mn({uid:m.localId,auth:f,stsTokenManager:D,isAnonymous:w});return yield li(N),N})()}}const Mt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(m,w){var D=this;return(0,a.Z)(function*(){D.storage[m]=w})()}_get(m){var w=this;return(0,a.Z)(function*(){const D=w.storage[m];return void 0===D?null:D})()}_remove(m){var w=this;return(0,a.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return y.type="NONE",y})();function Zn(y,f,m){return`firebase:${y}:${f}:${m}`}class Ur{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:D,name:N}=this.auth;this.fullUserKey=Zn(this.userKey,D.apiKey,N),this.fullPersistenceKey=Zn("persistence",D.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,a.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?mn._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,a.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,a.Z)(function*(){if(!m.length)return new Ur(ae(Mt),f,w);const D=(yield Promise.all(m.map(function(){var Je=(0,a.Z)(function*(it){if(yield it._isAvailable())return it});return function(it){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let N=D[0]||ae(Mt);const Z=Zn(w,f.config.apiKey,f.name);let ce=null;for(const Je of m)try{const it=yield Je._get(Z);if(it){const lt=mn._fromJSON(f,it);Je!==N&&(ce=lt),N=Je;break}}catch(it){}const Ve=D.filter(Je=>Je._shouldAllowMigration);return N._shouldAllowMigration&&Ve.length?(N=Ve[0],ce&&(yield N._set(Z,ce.toJSON())),yield Promise.all(m.map(function(){var Je=(0,a.Z)(function*(it){if(it!==N)try{yield it._remove(Z)}catch(lt){}});return function(it){return Je.apply(this,arguments)}}())),new Ur(N,f,w)):new Ur(N,f,w)})()}}function Hu(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(zn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ba(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(cs(f))return"Blackberry";if(Wn(f))return"Webos";if($u(f))return"Safari";if((f.includes("chrome/")||ja(f))&&!f.includes("edge/"))return"Chrome";if(Vr(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Ba(y=(0,P.z$)()){return/firefox\//i.test(y)}function $u(y=(0,P.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ja(y=(0,P.z$)()){return/crios\//i.test(y)}function zn(y=(0,P.z$)()){return/iemobile/i.test(y)}function Vr(y=(0,P.z$)()){return/android/i.test(y)}function cs(y=(0,P.z$)()){return/blackberry/i.test(y)}function Wn(y=(0,P.z$)()){return/webos/i.test(y)}function Jr(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function $s(y=(0,P.z$)()){return Jr(y)||Vr(y)||Wn(y)||cs(y)||/windows phone/i.test(y)||zn(y)}function Xo(y,f=[]){let m;switch(y){case"Browser":m=Hu((0,P.z$)());break;case"Worker":m=`${Hu((0,P.z$)())}-${y}`;break;default:m=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${me.SDK_VERSION}/${w}`}class Xr{constructor(f,m){this.app=f,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new St(this),this.idTokenSubscription=new St(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=ae(m)),this._initializationPromise=this.queue((0,a.Z)(function*(){var D,N;if(!w._deleted&&(w.persistenceManager=yield Ur.create(w,f),!w._deleted)){if(null===(D=w._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(Z){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,a.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m)}})()}initializeCurrentUser(f){var m=this;return(0,a.Z)(function*(){var w;let D=yield m.assertedPersistence.getCurrentUser();if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const N=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Z=null==D?void 0:D._redirectEventId,ce=yield m.tryRedirectSignIn(f);(!N||N===Z)&&(null==ce?void 0:ce.user)&&(D=ce.user)}return D?D._redirectEventId?(ne(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===D._redirectEventId?m.directlySetCurrentUser(D):m.reloadAndSetCurrentUserOrClear(D)):m.reloadAndSetCurrentUserOrClear(D):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var m=this;return(0,a.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(D){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,a.Z)(function*(){try{yield li(f)}catch(w){if("auth/network-request-failed"!==w.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function dt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,a.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,a.Z)(function*(){const w=f?(0,P.m9)(f):null;return w&&ne(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f){var m=this;return(0,a.Z)(function*(){if(!m._deleted)return f&&ne(m.tenantId===f.tenantId,m,"tenant-id-mismatch"),m.queue((0,a.Z)(function*(){yield m.directlySetCurrentUser(f),m.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,a.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var m=this;return this.queue((0,a.Z)(function*(){yield m.assertedPersistence.setPersistence(ae(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,a.Z)(function*(){const D=yield w.getOrInitRedirectPersistenceManager(m);return null===f?D.removeCurrentUser():D.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,a.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&ae(f)||m._popupRedirectResolver;ne(w,m,"argument-error"),m.redirectPersistenceManager=yield Ur.create(m,[ae(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,a.Z)(function*(){var w,D;return m._isInitialized&&(yield m.queue((0,a.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(D=m.redirectUser)||void 0===D?void 0:D._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,a.Z)(function*(){if(f===m.currentUser)return m.queue((0,a.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,D){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(Z,this,"internal-error"),Z.then(()=>N(this.currentUser)),"function"==typeof m?f.addObserver(m,w,D):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,a.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Xo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,a.Z)(function*(){const m={"X-Client-Version":f.clientVersion};return f.app.options.appId&&(m["X-Firebase-gmpid"]=f.app.options.appId),m})()}}function Oe(y){return(0,P.m9)(y)}class St{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(m=>this.observer=m)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Br(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function On(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class qt{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return K("not implemented")}_getIdTokenResponse(f){return K("not implemented")}_linkToIdToken(f,m){return K("not implemented")}_getReauthenticationResolver(f){return K("not implemented")}}function vo(y,f){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,a.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:resetPassword",Jt(y,f))})).apply(this,arguments)}function It(y,f){return wo.apply(this,arguments)}function wo(){return(wo=(0,a.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ea(y,f){return ta.apply(this,arguments)}function ta(){return(ta=(0,a.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",Jt(y,f))})).apply(this,arguments)}function vn(){return(vn=(0,a.Z)(function*(y,f){return Lr(y,"POST","/v1/accounts:signInWithPassword",Jt(y,f))})).apply(this,arguments)}function qs(y,f){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,a.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:sendOobCode",Jt(y,f))})).apply(this,arguments)}function fn(y,f){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,a.Z)(function*(y,f){return qs(y,f)})).apply(this,arguments)}function Td(y,f){return bo.apply(this,arguments)}function bo(){return(bo=(0,a.Z)(function*(y,f){return qs(y,f)})).apply(this,arguments)}function Di(y,f){return ci.apply(this,arguments)}function ci(){return(ci=(0,a.Z)(function*(y,f){return qs(y,f)})).apply(this,arguments)}function Id(y,f){return qu.apply(this,arguments)}function qu(){return(qu=(0,a.Z)(function*(y,f){return qs(y,f)})).apply(this,arguments)}function di(){return(di=(0,a.Z)(function*(y,f){return Lr(y,"POST","/v1/accounts:signInWithEmailLink",Jt(y,f))})).apply(this,arguments)}function ra(){return(ra=(0,a.Z)(function*(y,f){return Lr(y,"POST","/v1/accounts:signInWithEmailLink",Jt(y,f))})).apply(this,arguments)}class Gu extends qt{constructor(f,m,w,D=null){super("password",w),this._email=f,this._password=m,this._tenantId=D}static _fromEmailAndPassword(f,m){return new Gu(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new Gu(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,a.Z)(function*(){switch(m.signInMethod){case"password":return function na(y,f){return vn.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Gs(y,f){return di.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:oe(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,a.Z)(function*(){switch(w.signInMethod){case"password":return It(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Tf(y,f){return ra.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:oe(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Bn(y,f){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,a.Z)(function*(y,f){return Lr(y,"POST","/v1/accounts:signInWithIdp",Jt(y,f))})).apply(this,arguments)}class fs extends qt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new fs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):oe("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D}=m,N=(0,te._T)(m,["providerId","signInMethod"]);if(!w||!D)return null;const Z=new fs(w,D);return Z.idToken=N.idToken||void 0,Z.accessToken=N.accessToken||void 0,Z.secret=N.secret,Z.nonce=N.nonce,Z.pendingToken=N.pendingToken||null,Z}_getIdTokenResponse(f){return Bn(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,Bn(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Bn(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,P.xO)(m)}return f}}function Gg(y,f){return ps.apply(this,arguments)}function ps(){return(ps=(0,a.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:sendVerificationCode",Jt(y,f))})).apply(this,arguments)}function $a(){return($a=(0,a.Z)(function*(y,f){return Lr(y,"POST","/v1/accounts:signInWithPhoneNumber",Jt(y,f))})).apply(this,arguments)}function Ad(){return(Ad=(0,a.Z)(function*(y,f){const m=yield Lr(y,"POST","/v1/accounts:signInWithPhoneNumber",Jt(y,f));if(m.temporaryProof)throw ji(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const zg={USER_NOT_FOUND:"user-not-found"};function Sd(){return(Sd=(0,a.Z)(function*(y,f){return Lr(y,"POST","/v1/accounts:signInWithPhoneNumber",Jt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),zg)})).apply(this,arguments)}class sa extends qt{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new sa({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new sa({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Zg(y,f){return $a.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function ia(y,f){return Ad.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Wg(y,f){return Sd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:D}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:D}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:D,temporaryProof:N}=f;return w||m||D||N?new sa({verificationId:m,verificationCode:w,phoneNumber:D,temporaryProof:N}):null}}class gs{constructor(f){var m,w,D,N,Z,ce;const Ve=(0,P.zd)((0,P.pd)(f)),Je=null!==(m=Ve.apiKey)&&void 0!==m?m:null,it=null!==(w=Ve.oobCode)&&void 0!==w?w:null,lt=function Kg(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Ve.mode)&&void 0!==D?D:null);ne(Je&&it&&lt,"argument-error"),this.apiKey=Je,this.operation=lt,this.code=it,this.continueUrl=null!==(N=Ve.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(Z=Ve.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ce=Ve.tenantId)&&void 0!==ce?ce:null}static parseLink(f){const m=function If(y){const f=(0,P.zd)((0,P.pd)(y)).link,m=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,w=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(w?(0,P.zd)((0,P.pd)(w)).link:null)||w||m||f||y}(f);try{return new gs(m)}catch(w){return null}}}let qa=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,w){return Gu._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const D=gs.parseLink(w);return ne(D,"argument-error"),Gu._fromEmailAndCode(m,D.code,D.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Zs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class hi extends Zs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Co extends hi{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return ne("providerId"in m&&"signInMethod"in m,"argument-error"),fs._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ne(f.idToken||f.accessToken,"argument-error"),fs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Co.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Co.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:D,pendingToken:N,nonce:Z,providerId:ce}=f;if(!w&&!D&&!m&&!N||!ce)return null;try{return new Co(ce)._credential({idToken:m,accessToken:w,nonce:Z,pendingToken:N})}catch(Ve){return null}}}let oa=(()=>{class y extends hi{constructor(){super("facebook.com")}static credential(m){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),aa=(()=>{class y extends hi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:D}=m;if(!w&&!D)return null;try{return y.credential(w,D)}catch(N){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),xd=(()=>{class y extends hi{constructor(){super("github.com")}static credential(m){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Hi extends qt{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Bn(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,Bn(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Bn(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D,pendingToken:N}=m;return w&&D&&N&&w===D?new Hi(w,N):null}static _create(f,m){return new Hi(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ms extends Zs{constructor(f){ne(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ms.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ms.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Hi.fromJSON(f);return ne(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return Hi._create(w,m)}catch(D){return null}}}let fi=(()=>{class y extends hi{constructor(){super("twitter.com")}static credential(m,w){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:D}=m;if(!w||!D)return null;try{return y.credential(w,D)}catch(N){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Rd(y,f){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,a.Z)(function*(y,f){return Lr(y,"POST","/v1/accounts:signUp",Jt(y,f))})).apply(this,arguments)}class Ar{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,D=!1){return(0,a.Z)(function*(){const N=yield mn._fromIdTokenResponse(f,w,D),Z=Nd(w);return new Ar({user:N,providerId:Z,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,a.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const D=Nd(w);return new Ar({user:f,providerId:D,_tokenResponse:w,operationType:m})})()}}function Nd(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Zu(){return(Zu=(0,a.Z)(function*(y){var f;const m=Oe(y);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new Ar({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Rd(m,{returnSecureToken:!0}),D=yield Ar._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(D.user),D})).apply(this,arguments)}class zu extends P.ZR{constructor(f,m,w,D){var N;super(m.code,m.message),this.operationType=w,this.user=D,Object.setPrototypeOf(this,zu.prototype),this.customData={appName:f.name,tenantId:null!==(N=f.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,D){return new zu(f,m,w,D)}}function Wu(y,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?zu._fromErrorAndOperation(y,N,f,w):N})}function Ql(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Jl(){return(Jl=(0,a.Z)(function*(y,f){const m=(0,P.m9)(y);yield zs(!0,m,f);const{providerUserInfo:w}=yield Gn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),D=Ql(w||[]);return m.providerData=m.providerData.filter(N=>D.has(N.providerId)),D.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function on(y,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,a.Z)(function*(y,f,m=!1){const w=yield Ii(y,f._linkToIdToken(y.auth,yield y.getIdToken()),m);return Ar._forOperation(y,"link",w)})).apply(this,arguments)}function zs(y,f,m){return en.apply(this,arguments)}function en(){return(en=(0,a.Z)(function*(y,f,m){yield li(f);const D=!1===y?"provider-already-linked":"no-such-provider";ne(Ql(f.providerData).has(m)===y,f.auth,D)})).apply(this,arguments)}function Ku(y,f){return Za.apply(this,arguments)}function Za(){return(Za=(0,a.Z)(function*(y,f,m=!1){const{auth:w}=y,D="reauthenticate";try{const N=yield Ii(y,Wu(w,D,f,y),m);ne(N.idToken,w,"internal-error");const Z=nt(N.idToken);ne(Z,w,"internal-error");const{sub:ce}=Z;return ne(y.uid===ce,w,"user-mismatch"),Ar._forOperation(y,D,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&oe(w,"user-mismatch"),N}})).apply(this,arguments)}function To(y,f){return ir.apply(this,arguments)}function ir(){return(ir=(0,a.Z)(function*(y,f,m=!1){const w="signIn",D=yield Wu(y,w,f),N=yield Ar._fromIdTokenResponse(y,w,D);return m||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Yu(y,f){return An.apply(this,arguments)}function An(){return(An=(0,a.Z)(function*(y,f){return To(Oe(y),f)})).apply(this,arguments)}function ys(y,f){return sr.apply(this,arguments)}function sr(){return(sr=(0,a.Z)(function*(y,f){const m=(0,P.m9)(y);return yield zs(!1,m,f.providerId),on(m,f)})).apply(this,arguments)}function ua(y,f){return $i.apply(this,arguments)}function $i(){return($i=(0,a.Z)(function*(y,f){return Ku((0,P.m9)(y),f)})).apply(this,arguments)}function Xl(y,f){return ei.apply(this,arguments)}function ei(){return(ei=(0,a.Z)(function*(y,f){return Lr(y,"POST","/v1/accounts:signInWithCustomToken",Jt(y,f))})).apply(this,arguments)}function Ks(){return(Ks=(0,a.Z)(function*(y,f){const m=Oe(y),w=yield Xl(m,{token:f,returnSecureToken:!0}),D=yield Ar._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(D.user),D})).apply(this,arguments)}class ft{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?za._fromServerResponse(f,m):oe(f,"internal-error")}}class za extends ft{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new za(m)}}function Wa(y,f,m){var w;ne((null===(w=m.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),ne(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ne(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(ne(m.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Ka(){return(Ka=(0,a.Z)(function*(y,f,m){const w=(0,P.m9)(y),D={requestType:"PASSWORD_RESET",email:f};m&&Wa(w,D,m),yield Td(w,D)})).apply(this,arguments)}function Ya(){return(Ya=(0,a.Z)(function*(y,f,m){yield vo((0,P.m9)(y),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Te(){return(Te=(0,a.Z)(function*(y,f){yield ea((0,P.m9)(y),{oobCode:f})})).apply(this,arguments)}function Pt(y,f){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,a.Z)(function*(y,f){const m=(0,P.m9)(y),w=yield vo(m,{oobCode:f}),D=w.requestType;switch(ne(D,m,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(w.mfaInfo,m,"internal-error");default:ne(w.email,m,"internal-error")}let N=null;return w.mfaInfo&&(N=ft._fromServerResponse(Oe(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:D}})).apply(this,arguments)}function Ys(){return(Ys=(0,a.Z)(function*(y,f){const{data:m}=yield Pt((0,P.m9)(y),f);return m.email})).apply(this,arguments)}function jr(){return(jr=(0,a.Z)(function*(y,f,m){const w=Oe(y),D=yield Rd(w,{returnSecureToken:!0,email:f,password:m}),N=yield Ar._fromIdTokenResponse(w,"signIn",D);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function kd(){return(kd=(0,a.Z)(function*(y,f,m){const w=(0,P.m9)(y),D={requestType:"EMAIL_SIGNIN",email:f};ne(m.handleCodeInApp,w,"argument-error"),m&&Wa(w,D,m),yield Di(w,D)})).apply(this,arguments)}function la(){return(la=(0,a.Z)(function*(y,f,m){const w=(0,P.m9)(y),D=qa.credentialWithLink(f,m||Et());return ne(D._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Yu(w,D)})).apply(this,arguments)}function Kn(y,f){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,a.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:createAuthUri",Jt(y,f))})).apply(this,arguments)}function qi(){return(qi=(0,a.Z)(function*(y,f){const w={identifier:f,continueUri:$t()?Et():"http://localhost"},{signinMethods:D}=yield Kn((0,P.m9)(y),w);return D||[]})).apply(this,arguments)}function eu(){return(eu=(0,a.Z)(function*(y,f){const m=(0,P.m9)(y),D={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Wa(m.auth,D,f);const{email:N}=yield fn(m.auth,D);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function tu(){return(tu=(0,a.Z)(function*(y,f,m){const w=(0,P.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};m&&Wa(w.auth,N,m);const{email:Z}=yield Id(w.auth,N);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ud(y,f){return Io.apply(this,arguments)}function Io(){return(Io=(0,a.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function nu(){return(nu=(0,a.Z)(function*(y,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,P.m9)(y),N={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},Z=yield Ii(w,Ud(w.auth,N));w.displayName=Z.displayName||null,w.photoURL=Z.photoUrl||null;const ce=w.providerData.find(({providerId:Ve})=>"password"===Ve);ce&&(ce.displayName=w.displayName,ce.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Z)})).apply(this,arguments)}function Ju(y,f,m){return Do.apply(this,arguments)}function Do(){return(Do=(0,a.Z)(function*(y,f,m){const{auth:w}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(N.email=f),m&&(N.password=m);const Z=yield Ii(y,It(w,N));yield y._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Ao{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class Vd extends Ao{constructor(f,m,w,D){super(f,m,w),this.username=D}}class Af extends Ao{constructor(f,m){super(f,"facebook.com",m)}}class ca extends Vd{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Gi extends Ao{constructor(f,m){super(f,"google.com",m)}}class Sf extends Vd{constructor(f,m,w){super(f,"twitter.com",m,w)}}function or(y){const{user:f,_tokenResponse:m}=y;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function sc(y){var f,m;if(!y)return null;const{providerId:w}=y,D=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const Z=null===(m=null===(f=nt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(Z)return new Ao(N,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!w)return null;switch(w){case"facebook.com":return new Af(N,D);case"github.com":return new ca(N,D);case"google.com":return new Gi(N,D);case"twitter.com":return new Sf(N,D,y.screenName||null);case"custom":case"anonymous":return new Ao(N,null);default:return new Ao(N,w,D)}}(m)}class Es{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new Es("enroll",f)}static _fromMfaPendingCredential(f){return new Es("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Es._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return Es._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ru{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=Oe(f),D=m.customData._serverResponse,N=(D.mfaInfo||[]).map(ce=>ft._fromServerResponse(w,ce));ne(D.mfaPendingCredential,w,"internal-error");const Z=Es._fromMfaPendingCredential(D.mfaPendingCredential);return new ru(Z,N,function(){var ce=(0,a.Z)(function*(Ve){const Je=yield Ve._process(w,Z);delete D.mfaInfo,delete D.mfaPendingCredential;const it=Object.assign(Object.assign({},D),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(m.operationType){case"signIn":const lt=yield Ar._fromIdTokenResponse(w,m.operationType,it);return yield w._updateCurrentUser(lt.user),lt;case"reauthenticate":return ne(m.user,w,"internal-error"),Ar._forOperation(m.user,m.operationType,it);default:oe(w,"internal-error")}});return function(Ve){return ce.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,a.Z)(function*(){return m.signInResolver(f)})()}}function Xu(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:start",Jt(y,f))}class bs{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>ft._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new bs(f)}getSession(){var f=this;return(0,a.Z)(function*(){return Es._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var w=this;return(0,a.Z)(function*(){const D=f,N=yield w.getSession(),Z=yield Ii(w.user,D._process(w.user.auth,N,m));return yield w.user._updateTokensIfNecessary(Z),w.user.reload()})()}unenroll(f){var m=this;return(0,a.Z)(function*(){const w="string"==typeof f?f:f.uid,D=yield m.user.getIdToken(),N=yield Ii(m.user,function Mf(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(y,f))}(m.user.auth,{idToken:D,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Z})=>Z!==w),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(Z){if("auth/user-token-expired"!==Z.code)throw Z}})()}}const da=new WeakMap,iu="__sak";class su{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(iu,"1"),this.storage.removeItem(iu),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qs=(()=>{class y extends su{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function el(){const y=(0,P.z$)();return $u(y)||Jr(y)}()&&function mr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=$s(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const D=this.storage.getItem(w),N=this.localCache[w];D!==N&&m(w,N,D)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((ce,Ve,Je)=>{this.notifyListeners(ce,Je)});const D=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(D);if(m.newValue!==ce)null!==m.newValue?this.storage.setItem(D,m.newValue):this.storage.removeItem(D);else if(this.localCache[D]===m.newValue&&!w)return}const N=()=>{const ce=this.storage.getItem(D);!w&&this.localCache[D]===ce||this.notifyListeners(D,ce)},Z=this.storage.getItem(D);!function Ha(){return(0,P.w1)()&&10===document.documentMode}()||Z===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,w){this.localCache[m]=w;const D=this.listeners[m];if(D)for(const N of Array.from(D))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var D=()=>super._set,N=this;return(0,a.Z)(function*(){yield D().call(N,m,w),N.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,D=this;return(0,a.Z)(function*(){const N=yield w().call(D,m);return D.localCache[m]=JSON.stringify(N),N})()}_remove(m){var w=()=>super._remove,D=this;return(0,a.Z)(function*(){yield w().call(D,m),delete D.localCache[m]})()}}return y.type="LOCAL",y})(),Qe=(()=>{class y extends su{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return y.type="SESSION",y})();let Hr=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(N=>N.isListeningto(m));if(w)return w;const D=new y(m);return this.receivers.push(D),D}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,a.Z)(function*(){const D=m,{eventId:N,eventType:Z,data:ce}=D.data,Ve=w.handlersMap[Z];if(!(null==Ve?void 0:Ve.size))return;D.ports[0].postMessage({status:"ack",eventId:N,eventType:Z});const Je=Array.from(Ve).map(function(){var lt=(0,a.Z)(function*(bn){return bn(D.origin,ce)});return function(bn){return lt.apply(this,arguments)}}()),it=yield function pi(y){return Promise.all(y.map(function(){var f=(0,a.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(Je);D.ports[0].postMessage({status:"done",eventId:N,eventType:Z,response:it})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function gi(y="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return y+m}class Cs{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var D=this;return(0,a.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let Z,ce;return new Promise((Ve,Je)=>{const it=gi("",20);N.port1.start();const lt=setTimeout(()=>{Je(new Error("unsupported_event"))},w);ce={messageChannel:N,onMessage(bn){const Rr=bn;if(Rr.data.eventId===it)switch(Rr.data.status){case"ack":clearTimeout(lt),Z=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Ve(Rr.data.response);break;default:clearTimeout(lt),clearTimeout(Z),Je(new Error("invalid_response"))}}},D.handlers.add(ce),N.port1.addEventListener("message",ce.onMessage),D.target.postMessage({eventType:f,eventId:it,data:m},[N.port2])}).finally(()=>{ce&&D.removeMessageHandler(ce)})})()}}function ze(){return window}function _r(){return void 0!==ze().WorkerGlobalScope&&"function"==typeof ze().importScripts}function Ts(){return(Ts=(0,a.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const au="firebaseLocalStorageDb",tl="firebaseLocalStorage",Zi="fbase_key";class So{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Js(y,f){return y.transaction([tl],f?"readwrite":"readonly").objectStore(tl)}function Gt(){const y=indexedDB.open(au,1);return new Promise((f,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(tl,{keyPath:Zi})}catch(D){m(D)}}),y.addEventListener("success",(0,a.Z)(function*(){const w=y.result;w.objectStoreNames.contains(tl)?f(w):(w.close(),yield function nl(){const y=indexedDB.deleteDatabase(au);return new So(y).toPromise()}(),f(yield Gt()))}))})}function ha(y,f,m){return xn.apply(this,arguments)}function xn(){return(xn=(0,a.Z)(function*(y,f,m){const w=Js(y,!0).put({[Zi]:f,value:m});return new So(w).toPromise()})).apply(this,arguments)}function lu(){return(lu=(0,a.Z)(function*(y,f){const m=Js(y,!1).get(f),w=yield new So(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function rl(y,f){const m=Js(y,!0).delete(f);return new So(m).toPromise()}const Si=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,a.Z)(function*(){return m.db||(m.db=yield Gt()),m.db})()}_withRetries(m){var w=this;return(0,a.Z)(function*(){let D=0;for(;;)try{const N=yield w._openDb();return yield m(N)}catch(N){if(D++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,a.Z)(function*(){return _r()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,a.Z)(function*(){m.receiver=Hr._getInstance(function ou(){return _r()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,a.Z)(function*(D,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(D,N){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,a.Z)(function*(D,N){return["keyChanged"]});return function(D,N){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,a.Z)(function*(){var w,D;if(m.activeServiceWorker=yield function Ke(){return Ts.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Cs(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(D=N[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,a.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function wt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Gt();return yield ha(m,iu,"1"),yield rl(m,iu),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,a.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var D=this;return(0,a.Z)(function*(){return D._withPendingWrite((0,a.Z)(function*(){return yield D._withRetries(N=>ha(N,m,w)),D.localCache[m]=w,D.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,a.Z)(function*(){const D=yield w._withRetries(N=>function mi(y,f){return lu.apply(this,arguments)}(N,m));return w.localCache[m]=D,D})()}_remove(m){var w=this;return(0,a.Z)(function*(){return w._withPendingWrite((0,a.Z)(function*(){return yield w._withRetries(D=>rl(D,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,a.Z)(function*(){const w=yield m._withRetries(Z=>{const ce=Js(Z,!1).getAll();return new So(ce).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const D=[],N=new Set;for(const{fbase_key:Z,value:ce}of w)N.add(Z),JSON.stringify(m.localCache[Z])!==JSON.stringify(ce)&&(m.notifyListeners(Z,ce),D.push(Z));for(const Z of Object.keys(m.localCache))m.localCache[Z]&&!N.has(Z)&&(m.notifyListeners(Z,null),D.push(Z));return D})()}notifyListeners(m,w){this.localCache[m]=w;const D=this.listeners[m];if(D)for(const N of Array.from(D))N(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function lc(y,f){return Ot(y,"POST","/v2/accounts/mfaSignIn:start",Jt(y,f))}function En(){return(En=(0,a.Z)(function*(y){return(yield Ot(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Yn(y){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=D=>{const N=_e("internal-error");N.customData=D,m(N)},w.type="text/javascript",w.charset="UTF-8",function pa(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function xo(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Wi=1e12;class hu{constructor(f){this.auth=f,this.counter=Wi,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new cc(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||Wi;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Wi))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,a.Z)(function*(){var w;return null===(w=m._widgets.get(f||Wi))||void 0===w||w.execute(),""})()}}class cc{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof f?document.getElementById(f):f;ne(D,"argument-error",{appName:m}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xs(y){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Hd=xo("rcb"),dc=new qn(3e4,6e4);class Nf{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ze().grecaptcha}load(f,m=""){return ne(function Pf(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(ze().grecaptcha):new Promise((w,D)=>{const N=ze().setTimeout(()=>{D(_e(f,"network-request-failed"))},dc.get());ze()[Hd]=()=>{ze().clearTimeout(N),delete ze()[Hd];const ce=ze().grecaptcha;if(!ce)return void D(_e(f,"internal-error"));const Ve=ce.render;ce.render=(Je,it)=>{const lt=Ve(Je,it);return this.counter++,lt},this.hostLanguage=m,w(ce)},Yn(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Hd,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),D(_e(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!ze().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class em{load(f){return(0,a.Z)(function*(){return new hu(f)})()}clearedOneInstance(){}}const Of="recaptcha",$d={theme:"light",type:"image"};class sl{constructor(f,m=Object.assign({},$d),w){this.parameters=m,this.type=Of,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Oe(w),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof f?document.getElementById(f):f;ne(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new em:new Nf,this.validateStartingState()}verify(){var f=this;return(0,a.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(N=>{const Z=ce=>{!ce||(f.tokenChangeListeners.delete(Z),N(ce))};f.tokenChangeListeners.add(Z),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=ze()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,a.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,a.Z)(function*(){ne($t()&&!_r(),f.auth,"internal-error"),yield function qd(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function du(y){return En.apply(this,arguments)}(f.auth);ne(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Is{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=sa._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Mn(){return(Mn=(0,a.Z)(function*(y,f,m){const w=Oe(y),D=yield Sr(w,f,(0,P.m9)(m));return new Is(D,N=>Yu(w,N))})).apply(this,arguments)}function Ds(){return(Ds=(0,a.Z)(function*(y,f,m){const w=(0,P.m9)(y);yield zs(!1,w,"phone");const D=yield Sr(w.auth,f,(0,P.m9)(m));return new Is(D,N=>ys(w,N))})).apply(this,arguments)}function fc(){return(fc=(0,a.Z)(function*(y,f,m){const w=(0,P.m9)(y),D=yield Sr(w.auth,f,(0,P.m9)(m));return new Is(D,N=>ua(w,N))})).apply(this,arguments)}function Sr(y,f,m){return tn.apply(this,arguments)}function tn(){return(tn=(0,a.Z)(function*(y,f,m){var w;const D=yield m.verify();try{let N;if(ne("string"==typeof D,y,"argument-error"),ne(m.type===Of,y,"argument-error"),N="string"==typeof f?{phoneNumber:f}:f,"session"in N){const Z=N.session;if("phoneNumber"in N)return ne("enroll"===Z.type,y,"internal-error"),(yield Xu(y,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{ne("signin"===Z.type,y,"internal-error");const ce=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return ne(ce,y,"missing-multi-factor-info"),(yield lc(y,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield Gg(y,{phoneNumber:N.phoneNumber,recaptchaToken:D});return Z}}finally{m._reset()}})).apply(this,arguments)}function ma(){return(ma=(0,a.Z)(function*(y,f){yield on((0,P.m9)(y),f)})).apply(this,arguments)}let xr=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=Oe(m)}verifyPhoneNumber(m,w){return Sr(this.auth,m,(0,P.m9)(w))}static credential(m,w){return sa._fromVerification(m,w)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:D}=m;return w&&D?sa._fromTokenResponse(w,D):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ki(y,f){return f?ae(f):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class fu extends qt{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Bn(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Bn(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Bn(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function _a(y){return To(y.auth,new fu(y),y.bypassAuthState)}function pu(y){const{auth:f,user:m}=y;return ne(m,f,"internal-error"),Ku(m,new fu(y),y.bypassAuthState)}function ol(y){return eo.apply(this,arguments)}function eo(){return(eo=(0,a.Z)(function*(y){const{auth:f,user:m}=y;return ne(m,f,"internal-error"),on(m,new fu(y),y.bypassAuthState)})).apply(this,arguments)}class Mr{constructor(f,m,w,D,N=!1){this.auth=f,this.resolver=w,this.user=D,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,a.Z)(function*(w,D){f.pendingPromise={resolve:w,reject:D};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(N){f.reject(N)}});return function(w,D){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,a.Z)(function*(){const{urlResponse:w,sessionId:D,postBody:N,tenantId:Z,error:ce,type:Ve}=f;if(ce)return void m.reject(ce);const Je={auth:m.auth,requestUri:w,sessionId:D,tenantId:Z||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ve)(Je))}catch(it){m.reject(it)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return _a;case"linkViaPopup":case"linkViaRedirect":return ol;case"reauthViaPopup":case"reauthViaRedirect":return pu;default:oe(this.auth,"internal-error")}}resolve(f){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const al=new qn(2e3,1e4);function pc(){return(pc=(0,a.Z)(function*(y,f,m){const w=Oe(y);qe(y,f,Zs);const D=Ki(w,m);return new ul(w,"signInViaPopup",f,D).executeNotNull()})).apply(this,arguments)}function As(){return(As=(0,a.Z)(function*(y,f,m){const w=(0,P.m9)(y);qe(w.auth,f,Zs);const D=Ki(w.auth,m);return new ul(w.auth,"reauthViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}function gu(){return(gu=(0,a.Z)(function*(y,f,m){const w=(0,P.m9)(y);qe(w.auth,f,Zs);const D=Ki(w.auth,m);return new ul(w.auth,"linkViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}let ul=(()=>{class y extends Mr{constructor(m,w,D,N,Z){super(m,w,N,Z),this.provider=D,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,a.Z)(function*(){const w=yield m.execute();return ne(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,a.Z)(function*(){se(1===m.filter.length,"Popup operations only handle one event");const w=gi();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(D=>{m.reject(D)}),m.resolver._isIframeWebStorageSupported(m.auth,D=>{D||m.reject(_e(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,D;this.pollId=(null===(D=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,al.get())};m()}}return y.currentPopupAction=null,y})();const No=new Map;class xi extends Mr{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,a.Z)(function*(){let w=No.get(m.auth._key());if(!w){try{const N=(yield function va(y,f){return Qn.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(N)}catch(D){w=()=>Promise.reject(D)}No.set(m.auth._key(),w)}return m.bypassAuthState||No.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,a.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const D=yield w.auth._redirectUserForId(f.eventId);if(D)return w.user=D,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function Qn(){return(Qn=(0,a.Z)(function*(y,f){const m=T(f),w=kf(y);if(!(yield w._isAvailable()))return!1;const D="true"===(yield w._get(m));return yield w._remove(m),D})).apply(this,arguments)}function _n(y,f){return to.apply(this,arguments)}function to(){return(to=(0,a.Z)(function*(y,f){return kf(y)._set(T(f),"true")})).apply(this,arguments)}function kf(y){return ae(y._redirectPersistence)}function T(y){return Zn("pendingRedirect",y.config.apiKey,y.name)}function U(){return(U=(0,a.Z)(function*(y,f,m){const w=Oe(y);qe(y,f,Zs);const D=Ki(w,m);return yield _n(D,w),D._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function Me(){return(Me=(0,a.Z)(function*(y,f,m){const w=(0,P.m9)(y);qe(w.auth,f,Zs);const D=Ki(w.auth,m);yield _n(D,w.auth);const N=yield mu(w);return D._openRedirect(w.auth,f,"reauthViaRedirect",N)})).apply(this,arguments)}function Lt(){return(Lt=(0,a.Z)(function*(y,f,m){const w=(0,P.m9)(y);qe(w.auth,f,Zs);const D=Ki(w.auth,m);yield zs(!1,w,f.providerId),yield _n(D,w.auth);const N=yield mu(w);return D._openRedirect(w.auth,f,"linkViaRedirect",N)})).apply(this,arguments)}function Rn(){return(Rn=(0,a.Z)(function*(y,f){return yield Oe(y)._initializationPromise,ur(y,f,!1)})).apply(this,arguments)}function ur(y,f){return kn.apply(this,arguments)}function kn(){return(kn=(0,a.Z)(function*(y,f,m=!1){const w=Oe(y),D=Ki(w,f),Z=yield new xi(w,D,m).execute();return Z&&!m&&(delete Z.user._redirectEventId,yield w._persistUserIfCurrent(Z.user),yield w._setRedirectUser(null,f)),Z})).apply(this,arguments)}function mu(y){return ti.apply(this,arguments)}function ti(){return(ti=(0,a.Z)(function*(y){const f=gi(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Yi{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function nm(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ea(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!Ea(f)){const D=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(_e(this.auth,D))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ni(f))}saveEventToCache(f){this.cachedEventUids.add(ni(f)),this.lastProcessedEventTime=Date.now()}}function ni(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Ea({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function zd(y){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,a.Z)(function*(y,f={}){return Ot(y,"GET","/v1/projects",f)})).apply(this,arguments)}const rm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,my=/^https?/;function Po(){return(Po=(0,a.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield zd(y);for(const m of f)try{if(ba(m))return}catch(w){}oe(y,"unauthorized-domain")})).apply(this,arguments)}function ba(y){const f=Et(),{protocol:m,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const Z=new URL(y);return""===Z.hostname&&""===w?"chrome-extension:"===m&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&Z.hostname===w}if(!my.test(m))return!1;if(rm.test(y))return w===y;const D=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(w)}const im=new qn(3e4,6e4);function mc(){const y=ze().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let yr=null;function _y(y){return yr=yr||function Ff(y){return new Promise((f,m)=>{var w,D,N;function Z(){mc(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{mc(),m(_e(y,"network-request-failed"))},timeout:im.get()})}if(null===(D=null===(w=ze().gapi)||void 0===w?void 0:w.iframes)||void 0===D?void 0:D.Iframe)f(gapi.iframes.getContext());else{if(!(null===(N=ze().gapi)||void 0===N?void 0:N.load)){const ce=xo("iframefcb");return ze()[ce]=()=>{gapi.load?Z():m(_e(y,"network-request-failed"))},Yn(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Ve=>m(Ve))}Z()}}).catch(f=>{throw yr=null,f})}(y),yr}const _c=new qn(5e3,15e3),ll={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yu(y){const f=y.config;ne(f.authDomain,y,"auth-domain-config-required");const m=f.emulator?rn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:me.SDK_VERSION},D=Kd.get(y.config.apiHost);D&&(w.eid=D);const N=y._getFrameworks();return N.length&&(w.fw=N.join(",")),`${m}?${(0,P.xO)(w).slice(1)}`}function vc(){return vc=(0,a.Z)(function*(y){const f=yield _y(y),m=ze().gapi;return ne(m,y,"internal-error"),f.open({where:document.body,url:yu(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ll,dontclear:!0},w=>new Promise(function(){var D=(0,a.Z)(function*(N,Z){yield w.restyle({setHideOnLeave:!1});const ce=_e(y,"network-request-failed"),Ve=ze().setTimeout(()=>{Z(ce)},_c.get());function Je(){ze().clearTimeout(Ve),N(w)}w.ping(Je).then(Je,()=>{Z(ce)})});return function(N,Z){return D.apply(this,arguments)}}()))}),vc.apply(this,arguments)}const om={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Uf{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Jd(y,f,m,w,D,N){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const Z={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:w,v:me.SDK_VERSION,eventId:D};if(f instanceof Zs){f.setDefaultLanguage(y.languageCode),Z.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ve,Je]of Object.entries(N||{}))Z[Ve]=Je}if(f instanceof hi){const Ve=f.getScopes().filter(Je=>""!==Je);Ve.length>0&&(Z.scopes=Ve.join(","))}y.tenantId&&(Z.tid=y.tenantId);const ce=Z;for(const Ve of Object.keys(ce))void 0===ce[Ve]&&delete ce[Ve];return`${function um({config:y}){return y.emulator?rn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(ce).slice(1)}`}const no="webStorageSupport";class fl extends class jf{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return K("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new fl(f)}_finalizeEnroll(f,m,w){return function ar(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(y,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function cu(y,f){return Ot(y,"POST","/v2/accounts/mfaSignIn:finalize",Jt(y,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let pl=(()=>{class y{constructor(){}static assertion(m){return fl._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var Hf="@firebase/auth";class Xd{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,a.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{var D;f((null===(D=w)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ca(){return window}function yi(){return(yi=(0,a.Z)(function*(y,f,m){var w;const{BuildInfo:D}=Ca();se(f.sessionId,"AuthEvent did not contain a session ID");const N=yield jw(f.sessionId),Z={};return Jr()?Z.ibi=D.packageName:Vr()?Z.apn=D.packageName:oe(y,"operation-not-supported-in-this-environment"),D.displayName&&(Z.appDisplayName=D.displayName),Z.sessionId=N,Jd(y,m,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,Z)})).apply(this,arguments)}function ri(){return(ri=(0,a.Z)(function*(y){const{BuildInfo:f}=Ca(),m={};Jr()?m.iosBundleId=f.packageName:Vr()?m.androidPackageName=f.packageName:oe(y,"operation-not-supported-in-this-environment"),yield zd(y,m)})).apply(this,arguments)}function pn(){return(pn=(0,a.Z)(function*(y,f,m){const{cordova:w}=Ca();let D=()=>{};try{yield new Promise((N,Z)=>{let ce=null;function Ve(){var lt;N();const bn=null===(lt=w.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof bn&&bn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Je(){ce||(ce=window.setTimeout(()=>{Z(_e(y,"redirect-cancelled-by-user"))},2e3))}function it(){"visible"===(null==document?void 0:document.visibilityState)&&Je()}f.addPassiveListener(Ve),document.addEventListener("resume",Je,!1),Vr()&&document.addEventListener("visibilitychange",it,!1),D=()=>{f.removePassiveListener(Ve),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",it,!1),ce&&window.clearTimeout(ce)}})}finally{D()}})).apply(this,arguments)}function jw(y){return lm.apply(this,arguments)}function lm(){return(lm=(0,a.Z)(function*(y){const f=eh(y),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function eh(y){if(se(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),m=new Uint8Array(f);for(let w=0;w<y.length;w++)m[w]=y.charCodeAt(w);return m}!function $f(y){(0,me._registerComponent)(new ie.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),{apiKey:D,authDomain:N}=w.options;return(Z=>{ne(D&&!D.includes(":"),"invalid-api-key",{appName:Z.name}),ne(!(null==N?void 0:N.includes(":")),"argument-error",{appName:Z.name});const ce={apiKey:D,authDomain:N,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xo(y)},Ve=new Xr(Z,ce);return function fe(y,f){const m=(null==f?void 0:f.persistence)||[],w=(Array.isArray(m)?m:[m]).map(ae);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(Ve,m),Ve})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,me._registerComponent)(new ie.wA("auth-internal",f=>{const m=Oe(f.getProvider("auth").getImmediate());return new Xd(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,me.registerVersion)(Hf,"0.19.9",function gl(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,me.registerVersion)(Hf,"0.19.9","esm2017")}("Browser");class Gf extends Yi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,a.Z)(function*(){yield f.initPromise})()}}function vy(y){return nh.apply(this,arguments)}function nh(){return(nh=(0,a.Z)(function*(y){const f=yield ro()._get(rh(y));return f&&(yield ro()._remove(rh(y))),f})).apply(this,arguments)}function bc(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function ro(){return ae(Qs)}function rh(y){return Zn("authEvent",y.config.apiKey,y.name)}function ko(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...m]=y.split("?");return(0,P.zd)(m.join("?"))}function cm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Tc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function oh(y=(0,P.z$)()){return!("file:"!==Tc()&&"ionic:"!==Tc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jn(){try{const y=self.localStorage,f=gi();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Ia(y=(0,P.z$)()){return function $w(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function qw(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return Da()&&(0,P.hl)()}return!1}function Da(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function _l(){return(function hm(){return"http:"===Tc()||"https:"===Tc()}()||(0,P.ru)()||oh())&&!function by(){return(0,P.b$)()||(0,P.UG)()}()&&Jn()&&!Da()}function ah(){return oh()&&"undefined"!=typeof document}function xs(){return(xs=(0,a.Z)(function*(){return!!ah()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Zt={LOCAL:"local",NONE:"none",SESSION:"session"},yl=ne,Yf="persistence";function uh(y){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,a.Z)(function*(y){yield y._initializationPromise;const f=Xf(),m=Zn(Yf,y.config.apiKey,y.name);f&&f.setItem(m,y._getPersistence())})).apply(this,arguments)}function Xf(){var y;try{return(null===(y=function Kf(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const fm=ne;class Mi{constructor(){this.browserResolver=ae(class Oo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qe,this._completeRedirectFn=ur}_openPopup(f,m,w,D){var N=this;return(0,a.Z)(function*(){var Z;se(null===(Z=N.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ce=Jd(f,m,w,Et(),D);return function Yd(y,f,m,w=500,D=600){const N=Math.max((window.screen.availHeight-D)/2,0).toString(),Z=Math.max((window.screen.availWidth-w)/2,0).toString();let ce="";const Ve=Object.assign(Object.assign({},om),{width:w.toString(),height:D.toString(),top:N,left:Z}),Je=(0,P.z$)().toLowerCase();m&&(ce=ja(Je)?"_blank":m),Ba(Je)&&(f=f||"http://localhost",Ve.scrollbars="yes");const it=Object.entries(Ve).reduce((bn,[Rr,Dc])=>`${bn}${Rr}=${Dc},`,"");if(function yo(y=(0,P.z$)()){var f;return Jr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Je)&&"_self"!==ce)return function Qd(y,f){const m=document.createElement("a");m.href=y,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",ce),new Uf(null);const lt=window.open(f||"",ce,it);ne(lt,y,"popup-blocked");try{lt.focus()}catch(bn){}return new Uf(lt)}(f,ce,gi())})()}_openRedirect(f,m,w,D){var N=this;return(0,a.Z)(function*(){return yield N._originValidation(f),function uc(y){ze().location.href=y}(Jd(f,m,w,Et(),D)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:D,promise:N}=this.eventManagers[m];return D?Promise.resolve(D):(se(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,a.Z)(function*(){const w=yield function yc(y){return vc.apply(this,arguments)}(f),D=new Yi(f);return w.register("authEvent",N=>(ne(null==N?void 0:N.authEvent,f,"invalid-auth-event"),{status:D.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:D},m.iframes[f._key()]=w,D})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(no,{type:no},D=>{var N;const Z=null===(N=null==D?void 0:D[0])||void 0===N?void 0:N[no];void 0!==Z&&m(!!Z),oe(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function _u(y){return Po.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return $s()||$u()||Jr()}}),this.cordovaResolver=ae(class Ey{constructor(){this._redirectPersistence=Qe,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ur}_initialize(f){var m=this;return(0,a.Z)(function*(){const w=f._key();let D=m.eventManagers.get(w);return D||(D=new Gf(f),m.eventManagers.set(w,D),m.attachCallbackListeners(f,D)),D})()}_openPopup(f){oe(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,w,D){var N=this;return(0,a.Z)(function*(){!function Ec(y){var f,m,w,D,N,Z,ce,Ve,Je,it;const lt=Ca();ne("function"==typeof(null===(f=null==lt?void 0:lt.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(void 0!==(null===(m=null==lt?void 0:lt.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(N=null===(D=null===(w=null==lt?void 0:lt.cordova)||void 0===w?void 0:w.plugins)||void 0===D?void 0:D.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Ve=null===(ce=null===(Z=null==lt?void 0:lt.cordova)||void 0===Z?void 0:Z.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(it=null===(Je=null==lt?void 0:lt.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===it?void 0:it.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Z=yield N._initialize(f);yield Z.initialized(),Z.resetRedirect(),function wa(){No.clear()}(),yield N._originValidation(f);const ce=function th(y,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:bc(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(f,w,D);yield function Hw(y,f){return ro()._set(rh(y),f)}(f,ce);const Ve=yield function vu(y,f,m){return yi.apply(this,arguments)}(f,ce,m),Je=yield function Ta(y){const{cordova:f}=Ca();return new Promise(m=>{f.plugins.browsertab.isAvailable(w=>{let D=null;w?f.plugins.browsertab.openUrl(y):D=f.InAppBrowser.open(y,function Cd(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(D)})})}(Ve);return function qf(y,f,m){return pn.apply(this,arguments)}(f,Z,Je)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function wc(y){return ri.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:w,handleOpenURL:D,BuildInfo:N}=Ca(),Z=setTimeout((0,a.Z)(function*(){yield vy(f),m.onEvent(cm())}),500),ce=function(){var it=(0,a.Z)(function*(lt){clearTimeout(Z);const bn=yield vy(f);let Rr=null;bn&&(null==lt?void 0:lt.url)&&(Rr=function wy(y,f){var m,w;const D=function Cc(y){const f=ko(y),m=f.link?decodeURIComponent(f.link):void 0,w=ko(m).link,D=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return ko(D).link||D||w||m||y}(f);if(D.includes("/__/auth/callback")){const N=ko(D),Z=N.firebaseError?function Zf(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(N.firebaseError)):null,ce=null===(w=null===(m=null==Z?void 0:Z.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],Ve=ce?_e(ce):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:D,postBody:null}}return null}(bn,lt.url)),m.onEvent(Rr||cm())});return function(bn){return it.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,ce);const Ve=D,Je=`${N.packageName.toLowerCase()}://`;Ca().handleOpenURL=function(){var it=(0,a.Z)(function*(lt){if(lt.toLowerCase().startsWith(Je)&&ce({url:lt}),"function"==typeof Ve)try{Ve(lt)}catch(bn){console.error(bn)}});return function(lt){return it.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Qe,this._completeRedirectFn=ur}_initialize(f){var m=this;return(0,a.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,w,D){var N=this;return(0,a.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(f,m,w,D)})()}_openRedirect(f,m,w,D){var N=this;return(0,a.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(f,m,w,D)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return ah()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fm(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,a.Z)(function*(){if(f.underlyingResolver)return;const m=yield function Xn(){return xs.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function ep(y){return y.unwrap()}function lh(y){return ch(y)}function ch(y){const{_tokenResponse:f}=y instanceof P.ZR?y.customData:y;if(!f)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return xr.credentialFromResult(y);const m=f.providerId;if(!m||"password"===m)return null;let w;switch(m){case"google.com":w=aa;break;case"facebook.com":w=oa;break;case"github.com":w=xd;break;case"twitter.com":w=fi;break;default:const{oauthIdToken:D,oauthAccessToken:N,oauthTokenSecret:Z,pendingToken:ce,nonce:Ve}=f;return N||Z||D||ce?ce?m.startsWith("saml.")?Hi._create(m,ce):fs._fromParams({providerId:m,signInMethod:m,pendingToken:ce,idToken:D,accessToken:N}):new Co(m).credential({idToken:D,accessToken:N,rawNonce:Ve}):null}return y instanceof P.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function Fn(y,f){return f.catch(m=>{throw m instanceof P.ZR&&function Ty(y,f){var m;const w=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new hh(y,function ac(y,f){var m;const w=(0,P.m9)(y),D=f;return ne(f.customData.operationType,w,"argument-error"),ne(null===(m=D.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),ru._fromError(w,D)}(y,f));else if(w){const D=ch(f),N=f;D&&(N.credential=D,N.tenantId=w.tenantId||void 0,N.email=w.email||void 0,N.phoneNumber=w.phoneNumber||void 0)}}(y,m),m}).then(m=>{const D=m.user;return{operationType:m.operationType,credential:lh(m),additionalUserInfo:or(m),user:io.getOrCreate(D)}})}function dh(y,f){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,a.Z)(function*(y,f){const m=yield f;return{verificationId:m.verificationId,confirm:w=>Fn(y,m.confirm(w))}})).apply(this,arguments)}class hh{constructor(f,m){this.resolver=m,this.auth=function Fo(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Fn(ep(this.auth),this.resolver.resolveSignIn(f))}}class io{constructor(f){this._delegate=f,this.multiFactor=function Jg(y){const f=(0,P.m9)(y);return da.has(f)||da.set(f,bs._fromUser(f)),da.get(f)}(f)}static getOrCreate(f){return io.USER_MAP.has(f)||io.USER_MAP.set(f,new io(f)),io.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,a.Z)(function*(){return Fn(m.auth,ys(m._delegate,f))})()}linkWithPhoneNumber(f,m){var w=this;return(0,a.Z)(function*(){return dh(w.auth,function hc(y,f,m){return Ds.apply(this,arguments)}(w._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,a.Z)(function*(){return Fn(m.auth,function gc(y,f,m){return gu.apply(this,arguments)}(m._delegate,f,Mi))})()}linkWithRedirect(f){var m=this;return(0,a.Z)(function*(){return yield uh(Oe(m.auth)),function Le(y,f,m){return function Ye(y,f,m){return Lt.apply(this,arguments)}(y,f,m)}(m._delegate,f,Mi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,a.Z)(function*(){return Fn(m.auth,ua(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return dh(this.auth,function tm(y,f,m){return fc.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return Fn(this.auth,function Zd(y,f,m){return As.apply(this,arguments)}(this._delegate,f,Mi))}reauthenticateWithRedirect(f){var m=this;return(0,a.Z)(function*(){return yield uh(Oe(m.auth)),function W(y,f,m){return function re(y,f,m){return Me.apply(this,arguments)}(y,f,m)}(m._delegate,f,Mi)})()}sendEmailVerification(f){return function vs(y,f){return eu.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,a.Z)(function*(){return yield function _s(y,f){return Jl.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function ic(y,f){return Ju((0,P.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Qg(y,f){return Ju((0,P.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function ga(y,f){return ma.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Qu(y,f){return nu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Ld(y,f,m){return tu.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}io.USER_MAP=new WeakMap;const Eu=ne;let vl=(()=>{class y{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=m.options;Eu(D,"invalid-api-key",{appName:m.name}),Eu(D,"invalid-api-key",{appName:m.name});const N="undefined"!=typeof window?Mi:void 0;this._delegate=w.initialize({options:{persistence:gm(D,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?io.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function un(y,f,m){const w=Oe(y);ne(w._canInitEmulator,w,"emulator-config-failed"),ne(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const D=!!(null==m?void 0:m.disableWarnings),N=Br(f),{host:Z,port:ce}=function ds(y){const f=Br(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(w);if(D){const N=D[1];return{host:N,port:On(w.substr(N.length+1))}}{const[N,Z]=w.split(":");return{host:N,port:On(Z)}}}(f);w.config.emulator={url:`${N}//${Z}${null===ce?"":`:${ce}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Z,port:ce,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function hs(){function y(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,w)}applyActionCode(m){return function Df(y,f){return Te.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Pt(this._delegate,m)}confirmPasswordReset(m,w){return function ec(y,f,m){return Ya.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var D=this;return(0,a.Z)(function*(){return Fn(D._delegate,function Ja(y,f,m){return jr.apply(this,arguments)}(D._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function rc(y,f){return qi.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Fd(y,f){const m=gs.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,a.Z)(function*(){Eu(_l(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function jt(y,f){return Rn.apply(this,arguments)}(m._delegate,Mi);return w?Fn(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function dm(y,f){Oe(y)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,w,D){const{next:N,error:Z,complete:ce}=pm(m,w,D);return this._delegate.onAuthStateChanged(N,Z,ce)}onIdTokenChanged(m,w,D){const{next:N,error:Z,complete:ce}=pm(m,w,D);return this._delegate.onIdTokenChanged(N,Z,ce)}sendSignInLinkToEmail(m,w){return function nc(y,f,m){return kd.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function Od(y,f,m){return Ka.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,a.Z)(function*(){let D;switch(function Cy(y,f){yl(Object.values(Zt).includes(f),y,"invalid-persistence-type"),(0,P.b$)()?yl(f!==Zt.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?yl(f===Zt.NONE,y,"unsupported-persistence-type"):Da()?yl(f===Zt.NONE||f===Zt.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):yl(f===Zt.NONE||Jn(),y,"unsupported-persistence-type")}(w._delegate,m),m){case Zt.SESSION:D=Qe;break;case Zt.LOCAL:D=(yield ae(Si)._isAvailable())?Si:Qs;break;case Zt.NONE:D=Mt;break;default:return oe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Fn(this._delegate,function Pd(y){return Zu.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Fn(this._delegate,Yu(this._delegate,m))}signInWithCustomToken(m){return Fn(this._delegate,function Ws(y,f){return Ks.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return Fn(this._delegate,function tc(y,f,m){return Yu((0,P.m9)(y),qa.credential(f,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return Fn(this._delegate,function Xa(y,f,m){return la.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return dh(this._delegate,function Gd(y,f,m){return Mn.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,a.Z)(function*(){return Eu(_l(),w._delegate,"operation-not-supported-in-this-environment"),Fn(w._delegate,function ya(y,f,m){return pc.apply(this,arguments)}(w._delegate,m,Mi))})()}signInWithRedirect(m){var w=this;return(0,a.Z)(function*(){return Eu(_l(),w._delegate,"operation-not-supported-in-this-environment"),yield uh(w._delegate),function I(y,f,m){return function R(y,f,m){return U.apply(this,arguments)}(y,f,m)}(w._delegate,m,Mi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function wn(y,f){return Ys.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Zt,y})();function pm(y,f,m){let w=y;"function"!=typeof y&&({next:w,error:f,complete:m}=y);const D=w;return{next:Z=>D(Z&&io.getOrCreate(Z)),error:f,complete:m}}function gm(y,f){const m=function Jf(y,f){const m=Xf();if(!m)return[];const w=Zn(Yf,y,f);switch(m.getItem(w)){case Zt.NONE:return[Mt];case Zt.LOCAL:return[Si,Qe];case Zt.SESSION:return[Qe];default:return[]}}(y,f);if("undefined"!=typeof self&&!m.includes(Si)&&m.push(Si),"undefined"!=typeof window)for(const w of[Qs,Qe])m.includes(w)||m.push(w);return m.includes(Mt)||m.push(Mt),m}class bu{constructor(){this.providerId="phone",this._delegate=new xr(ep(J.Z.auth()))}static credential(f,m){return xr.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}bu.PHONE_SIGN_IN_METHOD=xr.PHONE_SIGN_IN_METHOD,bu.PROVIDER_ID=xr.PROVIDER_ID;const mm=ne;class tp{constructor(f,m,w=J.Z.app()){var D;mm(null===(D=w.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new sl(f,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function rp(y){y.INTERNAL.registerComponent(new ie.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new vl(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:qa,FacebookAuthProvider:oa,GithubAuthProvider:xd,GoogleAuthProvider:aa,OAuthProvider:Co,SAMLAuthProvider:ms,PhoneAuthProvider:bu,PhoneMultiFactorGenerator:pl,RecaptchaVerifier:tp,TwitterAuthProvider:fi,Auth:vl,AuthCredential:qt,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.9")}(J.Z)},2940:function(ot,Ae){!function(O){"use strict";function a(z){return Array.prototype.slice.call(z)}function J(z){return new Promise(function(le,xe){z.onsuccess=function(){le(z.result)},z.onerror=function(){xe(z.error)}})}function P(z,le,xe){var Ne,oe=new Promise(function(_e,Ee){J(Ne=z[le].apply(z,xe)).then(_e,Ee)});return oe.request=Ne,oe}function me(z,le,xe){var Ne=P(z,le,xe);return Ne.then(function(oe){if(oe)return new $(oe,Ne.request)})}function te(z,le,xe){xe.forEach(function(Ne){Object.defineProperty(z.prototype,Ne,{get:function(){return this[le][Ne]},set:function(oe){this[le][Ne]=oe}})})}function ge(z,le,xe,Ne){Ne.forEach(function(oe){oe in xe.prototype&&(z.prototype[oe]=function(){return P(this[le],oe,arguments)})})}function ie(z,le,xe,Ne){Ne.forEach(function(oe){oe in xe.prototype&&(z.prototype[oe]=function(){return this[le][oe].apply(this[le],arguments)})})}function de(z,le,xe,Ne){Ne.forEach(function(oe){oe in xe.prototype&&(z.prototype[oe]=function(){return me(this[le],oe,arguments)})})}function he(z){this._index=z}function $(z,le){this._cursor=z,this._request=le}function B(z){this._store=z}function Q(z){this._tx=z,this.complete=new Promise(function(le,xe){z.oncomplete=function(){le()},z.onerror=function(){xe(z.error)},z.onabort=function(){xe(z.error)}})}function je(z,le,xe){this._db=z,this.oldVersion=le,this.transaction=new Q(xe)}function De(z){this._db=z}te(he,"_index",["name","keyPath","multiEntry","unique"]),ge(he,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),de(he,"_index",IDBIndex,["openCursor","openKeyCursor"]),te($,"_cursor",["direction","key","primaryKey","value"]),ge($,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(z){z in IDBCursor.prototype&&($.prototype[z]=function(){var le=this,xe=arguments;return Promise.resolve().then(function(){return le._cursor[z].apply(le._cursor,xe),J(le._request).then(function(Ne){if(Ne)return new $(Ne,le._request)})})})}),B.prototype.createIndex=function(){return new he(this._store.createIndex.apply(this._store,arguments))},B.prototype.index=function(){return new he(this._store.index.apply(this._store,arguments))},te(B,"_store",["name","keyPath","indexNames","autoIncrement"]),ge(B,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),de(B,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ie(B,"_store",IDBObjectStore,["deleteIndex"]),Q.prototype.objectStore=function(){return new B(this._tx.objectStore.apply(this._tx,arguments))},te(Q,"_tx",["objectStoreNames","mode"]),ie(Q,"_tx",IDBTransaction,["abort"]),je.prototype.createObjectStore=function(){return new B(this._db.createObjectStore.apply(this._db,arguments))},te(je,"_db",["name","version","objectStoreNames"]),ie(je,"_db",IDBDatabase,["deleteObjectStore","close"]),De.prototype.transaction=function(){return new Q(this._db.transaction.apply(this._db,arguments))},te(De,"_db",["name","version","objectStoreNames"]),ie(De,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(z){[B,he].forEach(function(le){z in le.prototype&&(le.prototype[z.replace("open","iterate")]=function(){var xe=a(arguments),Ne=xe[xe.length-1],oe=this._store||this._index,_e=oe[z].apply(oe,xe.slice(0,-1));_e.onsuccess=function(){Ne(_e.result)}})})}),[he,B].forEach(function(z){z.prototype.getAll||(z.prototype.getAll=function(le,xe){var Ne=this,oe=[];return new Promise(function(_e){Ne.iterateCursor(le,function(Ee){Ee?(oe.push(Ee.value),void 0===xe||oe.length!=xe?Ee.continue():_e(oe)):_e(oe)})})})}),O.openDb=function Re(z,le,xe){var Ne=P(indexedDB,"open",[z,le]),oe=Ne.request;return oe&&(oe.onupgradeneeded=function(_e){xe&&xe(new je(oe.result,_e.oldVersion,oe.transaction))}),Ne.then(function(_e){return new De(_e)})},O.deleteDb=function Ue(z){return P(indexedDB,"deleteDatabase",[z])},Object.defineProperty(O,"__esModule",{value:!0})}(Ae)},8306:(ot,Ae,O)=>{"use strict";O.d(Ae,{y:()=>$});var a=O(2961),J=O(727),P=O(8822),me=O(4671);var ie=O(2416),de=O(576),he=O(2806);let $=(()=>{class De{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const z=new De;return z.source=this,z.operator=Ue,z}subscribe(Ue,z,le){const xe=function je(De){return De&&De instanceof a.Lv||function Q(De){return De&&(0,de.m)(De.next)&&(0,de.m)(De.error)&&(0,de.m)(De.complete)}(De)&&(0,J.Nn)(De)}(Ue)?Ue:new a.Hp(Ue,z,le);return(0,he.x)(()=>{const{operator:Ne,source:oe}=this;xe.add(Ne?Ne.call(xe,oe):oe?this._subscribe(xe):this._trySubscribe(xe))}),xe}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(z){Ue.error(z)}}forEach(Ue,z){return new(z=B(z))((le,xe)=>{const Ne=new a.Hp({next:oe=>{try{Ue(oe)}catch(_e){xe(_e),Ne.unsubscribe()}},error:xe,complete:le});this.subscribe(Ne)})}_subscribe(Ue){var z;return null===(z=this.source)||void 0===z?void 0:z.subscribe(Ue)}[P.L](){return this}pipe(...Ue){return function ge(De){return 0===De.length?me.y:1===De.length?De[0]:function(Ue){return De.reduce((z,le)=>le(z),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=B(Ue))((z,le)=>{let xe;this.subscribe(Ne=>xe=Ne,Ne=>le(Ne),()=>z(xe))})}}return De.create=Re=>new De(Re),De})();function B(De){var Re;return null!==(Re=null!=De?De:ie.v.Promise)&&void 0!==Re?Re:Promise}},7579:(ot,Ae,O)=>{"use strict";O.d(Ae,{x:()=>ie});var a=O(8306),J=O(727);const me=(0,O(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=O(8737),ge=O(2806);let ie=(()=>{class he extends a.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const Q=new de(this,this);return Q.operator=B,Q}_throwIfClosed(){if(this.closed)throw new me}next(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Q=this.observers.slice();for(const je of Q)je.next(B)}})}error(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:Q}=this;for(;Q.length;)Q.shift().error(B)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:Q,isStopped:je,observers:De}=this;return Q||je?J.Lc:(De.push(B),new J.w0(()=>(0,te.P)(De,B)))}_checkFinalizedStatuses(B){const{hasError:Q,thrownError:je,isStopped:De}=this;Q?B.error(je):De&&B.complete()}asObservable(){const B=new a.y;return B.source=this,B}}return he.create=($,B)=>new de($,B),he})();class de extends ie{constructor($,B){super(),this.destination=$,this.source=B}next($){var B,Q;null===(Q=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===Q||Q.call(B,$)}error($){var B,Q;null===(Q=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===Q||Q.call(B,$)}complete(){var $,B;null===(B=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===B||B.call($)}_subscribe($){var B,Q;return null!==(Q=null===(B=this.source)||void 0===B?void 0:B.subscribe($))&&void 0!==Q?Q:J.Lc}}},2961:(ot,Ae,O)=>{"use strict";O.d(Ae,{Hp:()=>Ue,Lv:()=>Q});var a=O(576),J=O(727),P=O(2416),me=O(7849);function te(){}const ge=he("C",void 0,void 0);function he(oe,_e,Ee){return{kind:oe,value:_e,error:Ee}}var $=O(3410),B=O(2806);class Q extends J.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,J.Nn)(_e)&&_e.add(this)):this.destination=Ne}static create(_e,Ee,qe){return new Ue(_e,Ee,qe)}next(_e){this.isStopped?xe(function de(oe){return he("N",oe,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?xe(function ie(oe){return he("E",void 0,oe)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?xe(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function De(oe,_e){return je.call(oe,_e)}class Re{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(_e)}catch(qe){z(qe)}}error(_e){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(_e)}catch(qe){z(qe)}else z(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ee){z(Ee)}}}class Ue extends Q{constructor(_e,Ee,qe){let He;if(super(),(0,a.m)(_e)||!_e)He={next:null!=_e?_e:void 0,error:null!=Ee?Ee:void 0,complete:null!=qe?qe:void 0};else{let ne;this&&P.v.useDeprecatedNextContext?(ne=Object.create(_e),ne.unsubscribe=()=>this.unsubscribe(),He={next:_e.next&&De(_e.next,ne),error:_e.error&&De(_e.error,ne),complete:_e.complete&&De(_e.complete,ne)}):He=_e}this.destination=new Re(He)}}function z(oe){P.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(oe):(0,me.h)(oe)}function xe(oe,_e){const{onStoppedNotification:Ee}=P.v;Ee&&$.z.setTimeout(()=>Ee(oe,_e))}const Ne={closed:!0,next:te,error:function le(oe){throw oe},complete:te}},727:(ot,Ae,O)=>{"use strict";O.d(Ae,{Lc:()=>ge,w0:()=>te,Nn:()=>ie});var a=O(576);const P=(0,O(3888).d)(he=>function(B){he(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((Q,je)=>`${je+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var me=O(8737);class te{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const De of B)De.remove(this);else B.remove(this);const{initialTeardown:Q}=this;if((0,a.m)(Q))try{Q()}catch(De){$=De instanceof P?De.errors:[De]}const{_teardowns:je}=this;if(je){this._teardowns=null;for(const De of je)try{de(De)}catch(Re){$=null!=$?$:[],Re instanceof P?$=[...$,...Re.errors]:$.push(Re)}}if($)throw new P($)}}add($){var B;if($&&$!==this)if(this.closed)de($);else{if($ instanceof te){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._teardowns=null!==(B=this._teardowns)&&void 0!==B?B:[]).push($)}}_hasParent($){const{_parentage:B}=this;return B===$||Array.isArray(B)&&B.includes($)}_addParent($){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push($),B):B?[B,$]:$}_removeParent($){const{_parentage:B}=this;B===$?this._parentage=null:Array.isArray(B)&&(0,me.P)(B,$)}remove($){const{_teardowns:B}=this;B&&(0,me.P)(B,$),$ instanceof te&&$._removeParent(this)}}te.EMPTY=(()=>{const he=new te;return he.closed=!0,he})();const ge=te.EMPTY;function ie(he){return he instanceof te||he&&"closed"in he&&(0,a.m)(he.remove)&&(0,a.m)(he.add)&&(0,a.m)(he.unsubscribe)}function de(he){(0,a.m)(he)?he():he.unsubscribe()}},2416:(ot,Ae,O)=>{"use strict";O.d(Ae,{v:()=>a});const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Ae,O)=>{"use strict";O.d(Ae,{E:()=>J});const J=new(O(8306).y)(te=>te.complete())},8996:(ot,Ae,O)=>{"use strict";O.d(Ae,{D:()=>_e});var a=O(8421),J=O(5363),P=O(9468),ge=O(8306),de=O(2202),he=O(576),$=O(9672);function Q(Ee,qe){if(!Ee)throw new Error("Iterable cannot be null");return new ge.y(He=>{(0,$.f)(He,qe,()=>{const ne=Ee[Symbol.asyncIterator]();(0,$.f)(He,qe,()=>{ne.next().then(K=>{K.done?He.complete():He.next(K.value)})},0,!0)})})}var je=O(3670),De=O(8239),Re=O(1144),Ue=O(6495),z=O(2206),le=O(4532),xe=O(3260);function _e(Ee,qe){return qe?function oe(Ee,qe){if(null!=Ee){if((0,je.c)(Ee))return function me(Ee,qe){return(0,a.Xf)(Ee).pipe((0,P.R)(qe),(0,J.Q)(qe))}(Ee,qe);if((0,Re.z)(Ee))return function ie(Ee,qe){return new ge.y(He=>{let ne=0;return qe.schedule(function(){ne===Ee.length?He.complete():(He.next(Ee[ne++]),He.closed||this.schedule())})})}(Ee,qe);if((0,De.t)(Ee))return function te(Ee,qe){return(0,a.Xf)(Ee).pipe((0,P.R)(qe),(0,J.Q)(qe))}(Ee,qe);if((0,z.D)(Ee))return Q(Ee,qe);if((0,Ue.T)(Ee))return function B(Ee,qe){return new ge.y(He=>{let ne;return(0,$.f)(He,qe,()=>{ne=Ee[de.h](),(0,$.f)(He,qe,()=>{let K,se;try{({value:K,done:se}=ne.next())}catch(ve){return void He.error(ve)}se?He.complete():He.next(K)},0,!0)}),()=>(0,he.m)(null==ne?void 0:ne.return)&&ne.return()})}(Ee,qe);if((0,xe.L)(Ee))return function Ne(Ee,qe){return Q((0,xe.Q)(Ee),qe)}(Ee,qe)}throw(0,le.z)(Ee)}(Ee,qe):(0,a.Xf)(Ee)}},8421:(ot,Ae,O)=>{"use strict";O.d(Ae,{Xf:()=>je});var a=O(655),J=O(1144),P=O(8239),me=O(8306),te=O(3670),ge=O(2206),ie=O(4532),de=O(6495),he=O(3260),$=O(576),B=O(7849),Q=O(8822);function je(oe){if(oe instanceof me.y)return oe;if(null!=oe){if((0,te.c)(oe))return function De(oe){return new me.y(_e=>{const Ee=oe[Q.L]();if((0,$.m)(Ee.subscribe))return Ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(oe);if((0,J.z)(oe))return function Re(oe){return new me.y(_e=>{for(let Ee=0;Ee<oe.length&&!_e.closed;Ee++)_e.next(oe[Ee]);_e.complete()})}(oe);if((0,P.t)(oe))return function Ue(oe){return new me.y(_e=>{oe.then(Ee=>{_e.closed||(_e.next(Ee),_e.complete())},Ee=>_e.error(Ee)).then(null,B.h)})}(oe);if((0,ge.D)(oe))return le(oe);if((0,de.T)(oe))return function z(oe){return new me.y(_e=>{for(const Ee of oe)if(_e.next(Ee),_e.closed)return;_e.complete()})}(oe);if((0,he.L)(oe))return function xe(oe){return le((0,he.Q)(oe))}(oe)}throw(0,ie.z)(oe)}function le(oe){return new me.y(_e=>{(function Ne(oe,_e){var Ee,qe,He,ne;return(0,a.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,a.KL)(oe);!(qe=yield Ee.next()).done;)if(_e.next(qe.value),_e.closed)return}catch(K){He={error:K}}finally{try{qe&&!qe.done&&(ne=Ee.return)&&(yield ne.call(Ee))}finally{if(He)throw He.error}}_e.complete()})})(oe,_e).catch(Ee=>_e.error(Ee))})}},6451:(ot,Ae,O)=>{"use strict";O.d(Ae,{T:()=>ge});var a=O(8189),J=O(8421),P=O(515),me=O(7669),te=O(8996);function ge(...ie){const de=(0,me.yG)(ie),he=(0,me._6)(ie,1/0),$=ie;return $.length?1===$.length?(0,J.Xf)($[0]):(0,a.J)(he)((0,te.D)($,de)):P.E}},5403:(ot,Ae,O)=>{"use strict";O.d(Ae,{x:()=>J});var a=O(2961);function J(me,te,ge,ie,de){return new P(me,te,ge,ie,de)}class P extends a.Lv{constructor(te,ge,ie,de,he,$){super(te),this.onFinalize=he,this.shouldUnsubscribe=$,this._next=ge?function(B){try{ge(B)}catch(Q){te.error(Q)}}:super._next,this._error=de?function(B){try{de(B)}catch(Q){te.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(B){te.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(ot,Ae,O)=>{"use strict";O.d(Ae,{U:()=>P});var a=O(4482),J=O(5403);function P(me,te){return(0,a.e)((ge,ie)=>{let de=0;ge.subscribe((0,J.x)(ie,he=>{ie.next(me.call(te,he,de++))}))})}},8189:(ot,Ae,O)=>{"use strict";O.d(Ae,{J:()=>P});var a=O(5577),J=O(4671);function P(me=1/0){return(0,a.z)(J.y,me)}},5577:(ot,Ae,O)=>{"use strict";O.d(Ae,{z:()=>de});var a=O(4004),J=O(8421),P=O(4482),me=O(9672),te=O(5403),ie=O(576);function de(he,$,B=1/0){return(0,ie.m)($)?de((Q,je)=>(0,a.U)((De,Re)=>$(Q,De,je,Re))((0,J.Xf)(he(Q,je))),B):("number"==typeof $&&(B=$),(0,P.e)((Q,je)=>function ge(he,$,B,Q,je,De,Re,Ue){const z=[];let le=0,xe=0,Ne=!1;const oe=()=>{Ne&&!z.length&&!le&&$.complete()},_e=qe=>le<Q?Ee(qe):z.push(qe),Ee=qe=>{De&&$.next(qe),le++;let He=!1;(0,J.Xf)(B(qe,xe++)).subscribe((0,te.x)($,ne=>{null==je||je(ne),De?_e(ne):$.next(ne)},()=>{He=!0},void 0,()=>{if(He)try{for(le--;z.length&&le<Q;){const ne=z.shift();Re?(0,me.f)($,Re,()=>Ee(ne)):Ee(ne)}oe()}catch(ne){$.error(ne)}}))};return he.subscribe((0,te.x)($,_e,()=>{Ne=!0,oe()})),()=>{null==Ue||Ue()}}(Q,je,he,B)))}},5363:(ot,Ae,O)=>{"use strict";O.d(Ae,{Q:()=>me});var a=O(9672),J=O(4482),P=O(5403);function me(te,ge=0){return(0,J.e)((ie,de)=>{ie.subscribe((0,P.x)(de,he=>(0,a.f)(de,te,()=>de.next(he),ge),()=>(0,a.f)(de,te,()=>de.complete(),ge),he=>(0,a.f)(de,te,()=>de.error(he),ge)))})}},3099:(ot,Ae,O)=>{"use strict";O.d(Ae,{B:()=>ge});var a=O(8996),J=O(5698),P=O(7579),me=O(2961),te=O(4482);function ge(de={}){const{connector:he=(()=>new P.x),resetOnError:$=!0,resetOnComplete:B=!0,resetOnRefCountZero:Q=!0}=de;return je=>{let De=null,Re=null,Ue=null,z=0,le=!1,xe=!1;const Ne=()=>{null==Re||Re.unsubscribe(),Re=null},oe=()=>{Ne(),De=Ue=null,le=xe=!1},_e=()=>{const Ee=De;oe(),null==Ee||Ee.unsubscribe()};return(0,te.e)((Ee,qe)=>{z++,!xe&&!le&&Ne();const He=Ue=null!=Ue?Ue:he();qe.add(()=>{z--,0===z&&!xe&&!le&&(Re=ie(_e,Q))}),He.subscribe(qe),De||(De=new me.Hp({next:ne=>He.next(ne),error:ne=>{xe=!0,Ne(),Re=ie(oe,$,ne),He.error(ne)},complete:()=>{le=!0,Ne(),Re=ie(oe,B),He.complete()}}),(0,a.D)(Ee).subscribe(De))})(je)}}function ie(de,he,...$){return!0===he?(de(),null):!1===he?null:he(...$).pipe((0,J.q)(1)).subscribe(()=>de())}},9468:(ot,Ae,O)=>{"use strict";O.d(Ae,{R:()=>J});var a=O(4482);function J(P,me=0){return(0,a.e)((te,ge)=>{ge.add(P.schedule(()=>te.subscribe(ge),me))})}},5698:(ot,Ae,O)=>{"use strict";O.d(Ae,{q:()=>me});var a=O(515),J=O(4482),P=O(5403);function me(te){return te<=0?()=>a.E:(0,J.e)((ge,ie)=>{let de=0;ge.subscribe((0,P.x)(ie,he=>{++de<=te&&(ie.next(he),te<=de&&ie.complete())}))})}},8505:(ot,Ae,O)=>{"use strict";O.d(Ae,{b:()=>te});var a=O(576),J=O(4482),P=O(5403),me=O(4671);function te(ge,ie,de){const he=(0,a.m)(ge)||ie||de?{next:ge,error:ie,complete:de}:ge;return he?(0,J.e)(($,B)=>{var Q;null===(Q=he.subscribe)||void 0===Q||Q.call(he);let je=!0;$.subscribe((0,P.x)(B,De=>{var Re;null===(Re=he.next)||void 0===Re||Re.call(he,De),B.next(De)},()=>{var De;je=!1,null===(De=he.complete)||void 0===De||De.call(he),B.complete()},De=>{var Re;je=!1,null===(Re=he.error)||void 0===Re||Re.call(he,De),B.error(De)},()=>{var De,Re;je&&(null===(De=he.unsubscribe)||void 0===De||De.call(he)),null===(Re=he.finalize)||void 0===Re||Re.call(he)}))}):me.y}},4408:(ot,Ae,O)=>{"use strict";O.d(Ae,{o:()=>te});var a=O(727);class J extends a.w0{constructor(ie,de){super()}schedule(ie,de=0){return this}}const P={setInterval(...ge){const{delegate:ie}=P;return((null==ie?void 0:ie.setInterval)||setInterval)(...ge)},clearInterval(ge){const{delegate:ie}=P;return((null==ie?void 0:ie.clearInterval)||clearInterval)(ge)},delegate:void 0};var me=O(8737);class te extends J{constructor(ie,de){super(ie,de),this.scheduler=ie,this.work=de,this.pending=!1}schedule(ie,de=0){if(this.closed)return this;this.state=ie;const he=this.id,$=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId($,he,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId($,this.id,de),this}requestAsyncId(ie,de,he=0){return P.setInterval(ie.flush.bind(ie,this),he)}recycleAsyncId(ie,de,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return de;P.clearInterval(de)}execute(ie,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ie,de);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,de){let $,he=!1;try{this.work(ie)}catch(B){he=!0,$=B||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ie,scheduler:de}=this,{actions:he}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,me.P)(he,this),null!=ie&&(this.id=this.recycleAsyncId(de,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Ae,O)=>{"use strict";O.d(Ae,{v:()=>P});var a=O(6063);class J{constructor(te,ge=J.now){this.schedulerActionCtor=te,this.now=ge}schedule(te,ge=0,ie){return new this.schedulerActionCtor(this,te).schedule(ie,ge)}}J.now=a.l.now;class P extends J{constructor(te,ge=J.now){super(te,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(te){const{actions:ge}=this;if(this._active)return void ge.push(te);let ie;this._active=!0;do{if(ie=te.execute(te.state,te.delay))break}while(te=ge.shift());if(this._active=!1,ie){for(;te=ge.shift();)te.unsubscribe();throw ie}}}},4986:(ot,Ae,O)=>{"use strict";O.d(Ae,{z:()=>P});var a=O(4408);const P=new(O(7565).v)(a.o)},6063:(ot,Ae,O)=>{"use strict";O.d(Ae,{l:()=>a});const a={now:()=>(a.delegate||Date).now(),delegate:void 0}},3410:(ot,Ae,O)=>{"use strict";O.d(Ae,{z:()=>a});const a={setTimeout(...J){const{delegate:P}=a;return((null==P?void 0:P.setTimeout)||setTimeout)(...J)},clearTimeout(J){const{delegate:P}=a;return((null==P?void 0:P.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(ot,Ae,O)=>{"use strict";O.d(Ae,{h:()=>J});const J=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Ae,O)=>{"use strict";O.d(Ae,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Ae,O)=>{"use strict";O.d(Ae,{_6:()=>ge,jO:()=>me,yG:()=>te});var a=O(576);function P(ie){return ie[ie.length-1]}function me(ie){return(0,a.m)(P(ie))?ie.pop():void 0}function te(ie){return function J(ie){return ie&&(0,a.m)(ie.schedule)}(P(ie))?ie.pop():void 0}function ge(ie,de){return"number"==typeof P(ie)?ie.pop():de}},8737:(ot,Ae,O)=>{"use strict";function a(J,P){if(J){const me=J.indexOf(P);0<=me&&J.splice(me,1)}}O.d(Ae,{P:()=>a})},3888:(ot,Ae,O)=>{"use strict";function a(J){const me=J(te=>{Error.call(te),te.stack=(new Error).stack});return me.prototype=Object.create(Error.prototype),me.prototype.constructor=me,me}O.d(Ae,{d:()=>a})},2806:(ot,Ae,O)=>{"use strict";O.d(Ae,{x:()=>P,O:()=>me});var a=O(2416);let J=null;function P(te){if(a.v.useDeprecatedSynchronousErrorHandling){const ge=!J;if(ge&&(J={errorThrown:!1,error:null}),te(),ge){const{errorThrown:ie,error:de}=J;if(J=null,ie)throw de}}else te()}function me(te){a.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=te)}},9672:(ot,Ae,O)=>{"use strict";function a(J,P,me,te=0,ge=!1){const ie=P.schedule(function(){me(),ge?J.add(this.schedule(null,te)):this.unsubscribe()},te);if(J.add(ie),!ge)return ie}O.d(Ae,{f:()=>a})},4671:(ot,Ae,O)=>{"use strict";function a(J){return J}O.d(Ae,{y:()=>a})},1144:(ot,Ae,O)=>{"use strict";O.d(Ae,{z:()=>a});const a=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(ot,Ae,O)=>{"use strict";O.d(Ae,{D:()=>J});var a=O(576);function J(P){return Symbol.asyncIterator&&(0,a.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(ot,Ae,O)=>{"use strict";function a(J){return"function"==typeof J}O.d(Ae,{m:()=>a})},3670:(ot,Ae,O)=>{"use strict";O.d(Ae,{c:()=>P});var a=O(8822),J=O(576);function P(me){return(0,J.m)(me[a.L])}},6495:(ot,Ae,O)=>{"use strict";O.d(Ae,{T:()=>P});var a=O(2202),J=O(576);function P(me){return(0,J.m)(null==me?void 0:me[a.h])}},8239:(ot,Ae,O)=>{"use strict";O.d(Ae,{t:()=>J});var a=O(576);function J(P){return(0,a.m)(null==P?void 0:P.then)}},3260:(ot,Ae,O)=>{"use strict";O.d(Ae,{Q:()=>P,L:()=>me});var a=O(655),J=O(576);function P(te){return(0,a.FC)(this,arguments,function*(){const ie=te.getReader();try{for(;;){const{value:de,done:he}=yield(0,a.qq)(ie.read());if(he)return yield(0,a.qq)(void 0);yield yield(0,a.qq)(de)}}finally{ie.releaseLock()}})}function me(te){return(0,J.m)(null==te?void 0:te.getReader)}},4482:(ot,Ae,O)=>{"use strict";O.d(Ae,{A:()=>J,e:()=>P});var a=O(576);function J(me){return(0,a.m)(null==me?void 0:me.lift)}function P(me){return te=>{if(J(te))return te.lift(function(ge){try{return me(ge,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ot,Ae,O)=>{"use strict";O.d(Ae,{h:()=>P});var a=O(2416),J=O(3410);function P(me){J.z.setTimeout(()=>{const{onUnhandledError:te}=a.v;if(!te)throw me;te(me)})}},4532:(ot,Ae,O)=>{"use strict";function a(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ae,{z:()=>a})},655:(ot,Ae,O)=>{"use strict";function me(K,se){var ve={};for(var ae in K)Object.prototype.hasOwnProperty.call(K,ae)&&se.indexOf(ae)<0&&(ve[ae]=K[ae]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ae=Object.getOwnPropertySymbols(K);Pe<ae.length;Pe++)se.indexOf(ae[Pe])<0&&Object.prototype.propertyIsEnumerable.call(K,ae[Pe])&&(ve[ae[Pe]]=K[ae[Pe]])}return ve}function de(K,se,ve,ae){return new(ve||(ve=Promise))(function(fe,Et){function $t(dt){try{ut(ae.next(dt))}catch(qn){Et(qn)}}function Vn(dt){try{ut(ae.throw(dt))}catch(qn){Et(qn)}}function ut(dt){dt.done?fe(dt.value):function Pe(fe){return fe instanceof ve?fe:new ve(function(Et){Et(fe)})}(dt.value).then($t,Vn)}ut((ae=ae.apply(K,se||[])).next())})}function z(K){return this instanceof z?(this.v=K,this):new z(K)}function le(K,se,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ae=ve.apply(K,se||[]),fe=[];return Pe={},Et("next"),Et("throw"),Et("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function Et(rn){ae[rn]&&(Pe[rn]=function(Tr){return new Promise(function(Qt,Vi){fe.push([rn,Tr,Qt,Vi])>1||$t(rn,Tr)})})}function $t(rn,Tr){try{!function Vn(rn){rn.value instanceof z?Promise.resolve(rn.value.v).then(ut,dt):qn(fe[0][2],rn)}(ae[rn](Tr))}catch(Qt){qn(fe[0][3],Qt)}}function ut(rn){$t("next",rn)}function dt(rn){$t("throw",rn)}function qn(rn,Tr){rn(Tr),fe.shift(),fe.length&&$t(fe[0][0],fe[0][1])}}function Ne(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,se=K[Symbol.asyncIterator];return se?se.call(K):(K=function Q(K){var se="function"==typeof Symbol&&Symbol.iterator,ve=se&&K[se],ae=0;if(ve)return ve.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ae>=K.length&&(K=void 0),{value:K&&K[ae++],done:!K}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ve={},ae("next"),ae("throw"),ae("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function ae(fe){ve[fe]=K[fe]&&function(Et){return new Promise(function($t,Vn){!function Pe(fe,Et,$t,Vn){Promise.resolve(Vn).then(function(ut){fe({value:ut,done:$t})},Et)}($t,Vn,(Et=K[fe](Et)).done,Et.value)})}}}O.d(Ae,{_T:()=>me,mG:()=>de,qq:()=>z,FC:()=>le,KL:()=>Ne})},5e3:(ot,Ae,O)=>{"use strict";O.d(Ae,{deG:()=>Nf,tb:()=>Jb,AFp:()=>jl,ip1:()=>G_,CZH:()=>uf,hGG:()=>$D,z2F:()=>Lu,sBO:()=>rw,Sil:()=>eC,_Vd:()=>Xp,EJc:()=>CD,SBq:()=>tg,qLn:()=>Fn,vpe:()=>$o,tBr:()=>ti,XFs:()=>gt,OlP:()=>ln,zs3:()=>dr,ZZ4:()=>uw,aQg:()=>Q_,soG:()=>lf,YKP:()=>kl,h0i:()=>rd,PXZ:()=>SD,R0b:()=>mo,FiY:()=>_i,Lbi:()=>gg,g9A:()=>Y0,Qsj:()=>US,FYo:()=>Pa,JOm:()=>ce,tp0:()=>ni,Rgc:()=>Ll,dDg:()=>rC,q4F:()=>Sb,GfV:()=>Ab,s_b:()=>ka,ifc:()=>Nt,eFA:()=>_g,G48:()=>ND,Gpc:()=>B,X6Q:()=>RD,_c5:()=>HD,VLi:()=>DD,c2e:()=>Xb,zSh:()=>Qy,wAp:()=>_t,vHH:()=>Re,cg1:()=>Jv,kL8:()=>tb,dqk:()=>Ft,sIi:()=>kh,CqO:()=>OE,QGY:()=>bv,F4k:()=>Ym,RDi:()=>Ql,AaK:()=>de,qOj:()=>xu,TTD:()=>oa,_Bn:()=>fr,xp6:()=>Cl,uIk:()=>Mp,ekj:()=>Ml,Suo:()=>B0,Xpm:()=>hn,lG2:()=>$u,Yz7:()=>Qt,cJS:()=>Jt,oAB:()=>Ur,Yjl:()=>ja,Y36:()=>Hh,_UZ:()=>wv,GkF:()=>Km,qZA:()=>Vp,TgZ:()=>Wm,EpF:()=>Ev,n5z:()=>pa,LFG:()=>Le,$8M:()=>xo,$Z:()=>yv,NdJ:()=>Hp,CRH:()=>j0,oxw:()=>Fr,ALo:()=>Fb,lcZ:()=>P0,Q6J:()=>Up,s9C:()=>Tv,iGM:()=>hD,MAs:()=>Rp,CHM:()=>Qa,LSH:()=>ih,YNc:()=>lv,W1O:()=>ki,_uU:()=>Fv,Oqu:()=>s_,hij:()=>o_,AsE:()=>Yp,Gf:()=>fD});var a=O(7579),J=O(727),P=O(8306),me=O(6451),te=O(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function ie(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function de(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(de).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function he(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=ge({__forward_ref__:ge});function B(s){return s.__forward_ref__=B,s.toString=function(){return de(this())},s}function Q(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===B}class Re extends Error{constructor(o,u){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function z(s){return"string"==typeof s?s:null==s?"":String(s)}function le(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():z(s)}function _e(s,o){const u=o?` in ${o}`:"";throw new Re(-201,`No provider for ${le(s)} found${u}`)}function ut(s,o){null==s&&function dt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Qt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Jt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ot(s){return us(s,Bi)||us(s,ui)}function us(s,o){return s.hasOwnProperty(o)?s[o]:null}function Lr(s){return s&&(s.hasOwnProperty(Hs)||s.hasOwnProperty(ji))?s[Hs]:null}const Bi=ge({\u0275prov:ge}),Hs=ge({\u0275inj:ge}),ui=ge({ngInjectableDef:ge}),ji=ge({ngInjectorDef:ge});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let Kr;function Pn(s){const o=Kr;return Kr=s,o}function _o(s,o,u){const c=Ot(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&gt.Optional?null:void 0!==o?o:void _e(de(s),"Injector")}function tt(s){return{toString:s}.toString()}var Rt=(()=>((Rt=Rt||{})[Rt.OnPush=0]="OnPush",Rt[Rt.Default=1]="Default",Rt))(),Nt=(()=>{return(s=Nt||(Nt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Nt;var s})();const nt="undefined"!=typeof globalThis&&globalThis,ht="undefined"!=typeof window&&window,Ii="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft=nt||"undefined"!=typeof global&&global||ht||Ii,li={},V=[],q=ge({\u0275cmp:ge}),G=ge({\u0275dir:ge}),Ce=ge({\u0275pipe:ge}),ee=ge({\u0275mod:ge}),We=ge({\u0275fac:ge}),mt=ge({__NG_ELEMENT_ID__:ge});let sn=0;function hn(s){return tt(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Rt.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||V,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Nt.Emulated,id:"c",styles:s.styles||V,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,g=s.features,v=s.pipes;return c.id+=sn++,c.inputs=Ba(s.inputs,u),c.outputs=Ba(s.outputs),g&&g.forEach(E=>E(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(Qr):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(Mt):null,c})}function Qr(s){return zn(s)||function Vr(s){return s[G]||null}(s)}function Mt(s){return function cs(s){return s[Ce]||null}(s)}const Zn={};function Ur(s){return tt(()=>{const o={type:s.type,bootstrap:s.bootstrap||V,declarations:s.declarations||V,imports:s.imports||V,exports:s.exports||V,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Zn[s.id]=s.type),o})}function Ba(s,o){if(null==s)return li;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),u[h]=c,o&&(o[h]=g)}return u}const $u=hn;function ja(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function zn(s){return s[q]||null}function Wn(s,o){const u=s[ee]||null;if(!u&&!0===o)throw new Error(`Type ${de(s)} does not have '\u0275mod' property.`);return u}function Di(s){return Array.isArray(s)&&"object"==typeof s[1]}function ci(s){return Array.isArray(s)&&!0===s[1]}function Id(s){return 0!=(8&s.flags)}function qu(s){return 2==(2&s.flags)}function Gs(s){return 1==(1&s.flags)}function di(s){return null!==s.template}function Tf(s){return 0!=(512&s[2])}function hi(s,o){return s.hasOwnProperty(We)?s[We]:null}class Co{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function oa(){return aa}function aa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Yg),xd}function xd(){const s=Md(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===li)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Yg(s,o,u,c){const h=Md(s)||function ms(s,o){return s[Hi]=o}(s,{previous:li,current:null}),g=h.current||(h.current={}),v=h.previous,E=this.declaredInputs[u],C=v[E];g[E]=new Co(C&&C.currentValue,o,v===li),s[c]=o}oa.ngInherit=!0;const Hi="__ngSimpleChanges__";function Md(s){return s[Hi]||null}let Wu;function Ql(s){Wu=s}function on(s){return!!s.listen}const Ga={createRenderer:(s,o)=>function _s(){return void 0!==Wu?Wu:"undefined"!=typeof document?document:void 0}()};function en(s){for(;Array.isArray(s);)s=s[0];return s}function To(s,o){return en(o[s])}function ir(s,o){return en(o[s.index])}function An(s,o){return s.data[o]}function ys(s,o){return s[o]}function sr(s,o){const u=o[s];return Di(u)?u:u[0]}function ua(s){return 4==(4&s[2])}function $i(s){return 128==(128&s[2])}function ei(s,o){return null==o?null:s[o]}function Ws(s){s[18]=0}function Ks(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const ft={lFrame:Ao(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ec(){return ft.bindingsEnabled}function Te(){return ft.lFrame.lView}function Pt(){return ft.lFrame.tView}function Qa(s){return ft.lFrame.contextLView=s,s[8]}function wn(){let s=Ys();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ys(){return ft.lFrame.currentTNode}function jr(s,o){const u=ft.lFrame;u.currentTNode=s,u.isParent=o}function tc(){return ft.lFrame.isParent}function nc(){ft.lFrame.isParent=!1}function Xa(){return ft.isInCheckNoChangesMode}function la(s){ft.isInCheckNoChangesMode=s}function qi(){return ft.lFrame.bindingIndex++}function vs(s){const o=ft.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function tu(s,o){const u=ft.lFrame;u.bindingIndex=u.bindingRootIndex=s,Io(o)}function Io(s){ft.lFrame.currentDirectiveIndex=s}function nu(){return ft.lFrame.currentQueryIndex}function ic(s){ft.lFrame.currentQueryIndex=s}function Qg(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ju(s,o,u){if(u&gt.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||u&gt.Host||(h=Qg(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const c=ft.lFrame=sc();return c.currentTNode=o,c.lView=s,!0}function Do(s){const o=sc(),u=s[1];ft.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function sc(){const s=ft.lFrame,o=null===s?null:s.child;return null===o?Ao(s):o}function Ao(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Vd(){const s=ft.lFrame;return ft.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Af=Vd;function ca(){const s=Vd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function or(){return ft.lFrame.selectedIndex}function ws(s){ft.lFrame.selectedIndex=s}function Sn(){const s=ft.lFrame;return An(s.tView,s.selectedIndex)}function Es(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:M}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),S&&((s.viewHooks||(s.viewHooks=[])).push(u,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,S)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(u,M)}}function ru(s,o,u){ar(s,o,3,u)}function ac(s,o,u,c){(3&s[2])===u&&ar(s,o,u,c)}function Xu(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function ar(s,o,u,c){const g=null!=c?c:-1,v=o.length-1;let E=0;for(let C=void 0!==c?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=c&&E>=c)break}else o[C]<0&&(s[18]+=65536),(E<g||-1==g)&&(Mf(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Mf(s,o,u,c){const h=u[c]<0,g=u[c+1],E=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class da{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Dt(s,o,u){const c=on(s);let h=0;for(;h<u.length;){const g=u[h];if("number"==typeof g){if(0!==g)break;h++;const v=u[h++],E=u[h++],C=u[h++];c?s.setAttribute(o,E,C,v):o.setAttributeNS(v,E,C)}else{const v=g,E=u[++h];pi(v)?c&&s.setProperty(o,v,E):c?s.setAttribute(o,v,E):o.setAttribute(v,E),h++}}return h}function Qe(s){return 3===s||4===s||6===s}function pi(s){return 64===s.charCodeAt(0)}function Hr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||gi(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function gi(s,o,u,c,h){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==h&&(s[g+1]=h));if(c===s[g+1])return void(s[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==h&&s.splice(g++,0,h)}function Cs(s){return-1!==s}function ze(s){return 32767&s}function _r(s,o){let u=function uc(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Ke=!0;function Ts(s){const o=Ke;return Ke=s,o}let uu=0;function Zi(s,o){const u=Js(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,So(c.data,s),So(o,null),So(c.blueprint,null));const h=nl(s,o),g=s.injectorIndex;if(Cs(h)){const v=ze(h),E=_r(h,o),C=E[1].data;for(let S=0;S<8;S++)o[g+S]=E[v+S]|C[v+S]}return o[g+8]=h,g}function So(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Js(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function nl(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){const g=h[1],v=g.type;if(c=2===v?g.declTNode:1===v?h[6]:null,null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Gt(s,o,u){!function tl(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(mt)&&(c=u[mt]),null==c&&(c=u[mt]=uu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function xn(s,o,u){if(u&gt.Optional)return s;_e(o,"NodeInjector")}function mi(s,o,u,c){if(u&gt.Optional&&void 0===c&&(c=null),0==(u&(gt.Self|gt.Host))){const h=s[9],g=Pn(void 0);try{return h?h.get(o,c,u&gt.Optional):_o(o,c,u&gt.Optional)}finally{Pn(g)}}return xn(c,o,u)}function lu(s,o,u,c=gt.Default,h){if(null!==s){const g=function lc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(mt)?s[mt]:void 0;return"number"==typeof o?o>=0?255&o:fa:o}(u);if("function"==typeof g){if(!Ju(o,s,c))return c&gt.Host?xn(h,u,c):mi(o,u,c,h);try{const v=g(c);if(null!=v||c&gt.Optional)return v;_e(u)}finally{Af()}}else if("number"==typeof g){let v=null,E=Js(s,o),C=-1,S=c&gt.Host?o[16][6]:null;for((-1===E||c&gt.SkipSelf)&&(C=-1===E?nl(s,o):o[E+8],-1!==C&&du(c,!1)?(v=o[1],E=ze(C),o=_r(C,o)):E=-1);-1!==E;){const M=o[1];if(cu(g,E,M.data)){const F=il(E,o,u,v,c,S);if(F!==rl)return F}C=o[E+8],-1!==C&&du(c,o[1].data[E+8]===S)&&cu(g,E,o)?(v=M,E=ze(C),o=_r(C,o)):E=-1}}}return mi(o,u,c,h)}const rl={};function fa(){return new En(wn(),Te())}function il(s,o,u,c,h,g){const v=o[1],E=v.data[s+8],M=jd(E,v,u,null==c?qu(E)&&Ke:c!=v&&0!=(3&E.type),h&gt.Host&&g===E);return null!==M?Si(o,v,M,E):rl}function jd(s,o,u,c,h){const g=s.providerIndexes,v=o.data,E=1048575&g,C=s.directiveStart,M=g>>20,j=h?E+M:s.directiveEnd;for(let Y=c?E:E+M;Y<j;Y++){const we=v[Y];if(Y<C&&u===we||Y>=C&&we.type===u)return Y}if(h){const Y=v[C];if(Y&&di(Y)&&Y.type===u)return C}return null}function Si(s,o,u,c){let h=s[u];const g=o.data;if(function Jg(s){return s instanceof da}(h)){const v=h;v.resolving&&function xe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Re(-200,`Circular dependency in DI detected for ${s}${u}`)}(le(g[u]));const E=Ts(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?Pn(v.injectImpl):null;Ju(s,c,gt.Default);try{h=s[u]=v.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function oc(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(c){const v=aa(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==C&&Pn(C),Ts(E),v.resolving=!1,Af()}}return h}function cu(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function du(s,o){return!(s&gt.Self||s&gt.Host&&o)}class En{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return lu(this._tNode,this._lView,o,c,u)}}function pa(s){return tt(()=>{const o=s.prototype.constructor,u=o[We]||Yn(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const g=h[We]||Yn(h);if(g&&g!==u)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Yn(s){return je(s)?()=>{const o=Yn(Q(s));return o&&o()}:hi(s)}function xo(s){return function ha(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const g=u[h];if(Qe(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(g===o)return u[h+1];h+=2}}}return null}(wn(),s)}const zi="__parameters__";function Xs(s,o,u){return tt(()=>{const c=function cc(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...g){if(this instanceof h)return c.apply(this,g),this;const v=new h(...g);return E.annotation=v,E;function E(C,S,M){const F=C.hasOwnProperty(zi)?C[zi]:Object.defineProperty(C,zi,{value:[]})[zi];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(v),C}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class ln{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Qt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Nf=new ln("AnalyzeForEntryComponents");function Sr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Sr(c,o)):o!==s&&o.push(c)}return o}function tn(s,o){s.forEach(u=>Array.isArray(u)?tn(u,o):o(u))}function ga(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function ma(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Mr(s,o,u){let c=ya(s,o);return c>=0?s[1|c]=u:(c=~c,function _a(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function al(s,o){const u=ya(s,o);if(u>=0)return s[1|u]}function ya(s,o){return function Zd(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const g=c+(h-c>>1),v=s[g<<u];if(o===v)return g<<u;v>o?h=g:c=g+1}return~(h<<u)}(s,o,1)}const _n={},to="__NG_DI_FLAG__",wa="ngTempTokenPath",T=/\n/gm,R="__source",U=ge({provide:String,useValue:ge});let W;function re(s){const o=W;return W=s,o}function Me(s,o=gt.Default){if(void 0===W)throw new Re(203,"");return null===W?_o(s,void 0,o):W.get(s,o&gt.Optional?null:void 0,o)}function Le(s,o=gt.Default){return(function Gn(){return Kr}()||Me)(Q(s),o)}function jt(s){const o=[];for(let u=0;u<s.length;u++){const c=Q(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Re(900,"");let h,g=gt.Default;for(let v=0;v<c.length;v++){const E=c[v],C=ur(E);"number"==typeof C?-1===C?h=E.token:g|=C:h=E}o.push(Le(h,g))}else o.push(Le(c))}return o}function Rn(s,o){return s[to]=o,s.prototype[to]=o,s}function ur(s){return s[to]}const ti=Rn(Xs("Inject",s=>({token:s})),-1),_i=Rn(Xs("Optional"),8),ni=Rn(Xs("SkipSelf"),4);class Yd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function no(s){return s instanceof Yd?s.changingThisBreaksApplicationSecurity:s}const Ca=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,vu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var jn=(()=>((jn=jn||{})[jn.NONE=0]="NONE",jn[jn.HTML=1]="HTML",jn[jn.STYLE=2]="STYLE",jn[jn.SCRIPT=3]="SCRIPT",jn[jn.URL=4]="URL",jn[jn.RESOURCE_URL=5]="RESOURCE_URL",jn))();function ih(s){const o=function Ia(){const s=Te();return s&&s[12]}();return o?o.sanitize(jn.URL,s)||"":function Oo(s,o){const u=function Bf(s){return s instanceof Yd&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?no(s):function yi(s){return(s=String(s)).match(Ca)||s.match(vu)?s:"unsafe:"+s}(z(s))}const ah="__ngContext__";function Xn(s,o){s[ah]=o}function Kf(s){const o=function xs(s){return s[ah]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function lh(s){return s.ngOriginalError}function ch(s,...o){s.error(...o)}class Fn{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function Ty(s){return s&&s.ngErrorLogger||ch}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&lh(o);for(;u&&lh(u);)u=lh(u);return u||null}}const tp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function m(s){return s instanceof Function?s():s}var ce=(()=>((ce=ce||{})[ce.Important=1]="Important",ce[ce.DashCase=2]="DashCase",ce))();function Je(s,o){return undefined(s,o)}function bn(s){const o=s[3];return ci(o)?o[3]:o}function fh(s){return ip(s[13])}function Cu(s){return ip(s[4])}function ip(s){for(;null!==s&&!ci(s);)s=s[4];return s}function Lo(s,o,u,c,h){if(null!=c){let g,v=!1;ci(c)?g=c:Di(c)&&(v=!0,c=c[0]);const E=en(c);0===s&&null!==u?null==h?Pr(o,u,E):Se(o,u,E,h||null,!0):1===s&&null!==u?Se(o,u,E,h||null,!0):2===s?function xc(s,o,u){const c=ym(s,o);c&&function xT(s,o,u,c){on(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,E,v):3===s&&o.destroyNode(E),null!=g&&function Mc(s,o,u,c,h){const g=u[7];g!==en(u)&&Lo(o,s,c,g,h);for(let E=10;E<u.length;E++){const C=u[E];Ln(C[1],C,s,o,c,g)}}(o,s,g,u,h)}}function Ac(s,o,u){if(on(s))return s.createElement(o,u);{const c=null!==u?function zu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function lr(s,o){const u=s[9],c=u.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Ks(h,-1)),u.splice(c,1)}function Sc(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&lr(h,c),o>0&&(s[u-1][4]=c[4]);const g=ma(s,10+o);!function Nr(s,o){Ln(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function _m(s,o){if(!(256&o[2])){const u=o[11];on(u)&&u.destroyNode&&Ln(s,o,u,3,null,null),function Dy(s){let o=s[13];if(!o)return st(s[1],s);for(;o;){let u=null;if(Di(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Di(o)&&st(o[1],o),o=o[3];null===o&&(o=s),Di(o)&&st(o[1],o),u=o&&o[4]}o=u}}(o)}}function st(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function ST(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof da)){const g=u[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=h[g[v]],C=g[v+1];try{C.call(E)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function Ct(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+1],E="function"==typeof v?v(o):en(o[v]),C=c[h=u[g+2]],S=u[g+3];"boolean"==typeof S?E.removeEventListener(u[g],C,S):S>=0?c[h=S]():c[h=-S].unsubscribe(),g+=2}else{const v=c[h=u[g+1]];u[g].call(v)}if(null!==c){for(let g=h+1;g<c.length;g++)c[g]();o[7]=null}}(s,o),1===o[1].type&&on(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&ci(o[3])){u!==o[3]&&lr(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function Ge(s,o,u){return function pe(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===Nt.None||h===Nt.Emulated)return null}return ir(c,u)}(s,o.parent,u)}function Se(s,o,u,c,h){on(s)?s.insertBefore(o,u,c,h):o.insertBefore(u,c,h)}function Pr(s,o,u){on(s)?s.appendChild(o,u):o.appendChild(u)}function Ay(s,o,u,c,h){null!==c?Se(s,o,u,c,h):Pr(s,o,u)}function ym(s,o){return on(s)?s.parentNode(o):o.parentNode}let Sy=function Zw(s,o,u){return 40&s.type?ir(s,u):null};function vi(s,o,u,c){const h=Ge(s,c,o),g=o[11],E=function Gw(s,o,u){return Sy(s,o,u)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let C=0;C<u.length;C++)Ay(g,h,u[C],E,!1);else Ay(g,h,u,E,!1)}function vm(s,o){if(null!==o){const u=o.type;if(3&u)return ir(o,s);if(4&u)return kt(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return vm(s,c);{const h=s[o.index];return ci(h)?kt(-1,h):en(h)}}if(32&u)return Je(o,s)()||en(s[o.index]);{const c=My(s,o);return null!==c?Array.isArray(c)?c[0]:vm(bn(s[16]),c):vm(s,o.next)}}return null}function My(s,o){return null!==o?s[16][6].projection[o.projection]:null}function kt(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return vm(c,h)}return o[7]}function wm(s,o,u,c,h,g,v){for(;null!=u;){const E=c[u.index],C=u.type;if(v&&0===o&&(E&&Xn(en(E),c),u.flags|=4),64!=(64&u.flags))if(8&C)wm(s,o,u.child,c,h,g,!1),Lo(o,s,h,E,g);else if(32&C){const S=Je(u,c);let M;for(;M=S();)Lo(o,s,h,M,g);Lo(o,s,h,E,g)}else 16&C?Ry(s,o,c,u,h,g):Lo(o,s,h,E,g);u=v?u.projectionNext:u.next}}function Ln(s,o,u,c,h,g){wm(u,c,s.firstChild,o,h,g,!1)}function Ry(s,o,u,c,h,g){const v=u[16],C=v[6].projection[c.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)Lo(o,s,h,C[S],g);else wm(s,o,C,v[3],h,g,!0)}function gh(s,o,u){on(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function zt(s,o,u){on(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function Ww(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===c||s.charCodeAt(h+g)<=32)return h}u=h+1}}const Rc="ng-template";function NT(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==Ww(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function vr(s){return 4===s.type&&s.value!==Rc}function PT(s,o,u){return o===(4!==s.type||u?s.value:Rc)}function El(s,o,u){let c=4;const h=s.attrs||[],g=function op(s){for(let o=0;o<s.length;o++)if(Qe(s[o]))return o;return s.length}(h);let v=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!PT(s,C,u)||""===C&&1===o.length){if(nn(c))return!1;v=!0}}else{const S=8&c?C:o[++E];if(8&c&&null!==s.attrs){if(!NT(s.attrs,S,u)){if(nn(c))return!1;v=!0}continue}const F=Nc(8&c?"class":C,h,vr(s),u);if(-1===F){if(nn(c))return!1;v=!0;continue}if(""!==S){let j;j=F>g?"":h[F+1].toLowerCase();const Y=8&c?j:null;if(Y&&-1!==Ww(Y,S,0)||2&c&&S!==j){if(nn(c))return!1;v=!0}}}}else{if(!v&&!nn(c)&&!nn(C))return!1;if(v&&nn(C))continue;v=!1,c=C|1&c}}return nn(c)||v}function nn(s){return 0==(1&s)}function Nc(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let g=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function OT(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Em(s,o,u=!1){for(let c=0;c<o.length;c++)if(El(s,o[c],u))return!0;return!1}function bl(s,o){return s?":not("+o.trim()+")":o}function ap(s){let o=s[0],u=1,c=2,h="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const E=s[++u];h+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!nn(v)&&(o+=bl(g,h),h=""),c=v,g=g||!nn(c);u++}return""!==h&&(o+=bl(g,h)),o}const At={};function Cl(s){so(Pt(),Te(),or()+s,Xa())}function so(s,o,u,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&ru(o,g,u)}else{const g=s.preOrderHooks;null!==g&&ac(o,g,0,u)}ws(u)}function Tu(s,o){return s<<17|o<<2}function oo(s){return s>>17&32767}function _h(s){return 2|s}function Uo(s){return(131068&s)>>2}function yh(s,o){return-131069&s|o<<2}function bm(s){return 1|s}function Vy(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],g=u[c+1];if(-1!==g){const v=s.data[g];ic(h),v.contentQueries(2,o[g],g)}}}function Ch(s,o,u,c,h,g,v,E,C,S){const M=o.blueprint.slice();return M[0]=h,M[2]=140|c,Ws(M),M[3]=M[15]=s,M[8]=u,M[10]=v||s&&s[10],M[11]=E||s&&s[11],M[12]=C||s&&s[12]||null,M[9]=S||s&&s[9]||null,M[6]=g,M[16]=2==o.type?s[16]:M,M}function Fc(s,o,u,c,h){let g=s.data[o];if(null===g)g=function Th(s,o,u,c,h){const g=Ys(),v=tc(),C=s.data[o]=function Am(s,o,u,c,h,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,o,u,c,h),function eu(){return ft.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=c,g.attrs=h;const v=function Ja(){const s=ft.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return jr(g,!0),g}function Ih(s,o,u,c){if(0===u)return-1;const h=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function mp(s,o,u){Do(o);try{const c=s.viewQuery;null!==c&&Wy(1,c,u);const h=s.template;null!==h&&Dl(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Vy(s,o),s.staticViewQueries&&Wy(2,s.viewQuery,u);const g=s.components;null!==g&&function nE(s,o){for(let u=0;u<o.length;u++)vp(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ca()}}function Lc(s,o,u,c){const h=o[2];if(256==(256&h))return;Do(o);const g=Xa();try{Ws(o),function rc(s){return ft.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Dl(s,o,u,2,c);const v=3==(3&h);if(!g)if(v){const S=s.preOrderCheckHooks;null!==S&&ru(o,S,null)}else{const S=s.preOrderHooks;null!==S&&ac(o,S,0,null),Xu(o,0)}if(function GT(s){for(let o=fh(s);null!==o;o=Cu(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],g=h[3];0==(1024&h[2])&&Ks(g,1),h[2]|=1024}}}(o),function cn(s){for(let o=fh(s);null!==o;o=Cu(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];$i(c)&&Lc(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Vy(s,o),!g)if(v){const S=s.contentCheckHooks;null!==S&&ru(o,S)}else{const S=s.contentHooks;null!==S&&ac(o,S,1),Xu(o,1)}!function Uy(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)ws(~h);else{const g=h,v=u[++c],E=u[++c];tu(v,g),E(2,o[g])}}}finally{ws(-1)}}(s,o);const E=s.components;null!==E&&function BT(s,o){for(let u=0;u<o.length;u++)Rm(s,o[u])}(o,E);const C=s.viewQuery;if(null!==C&&Wy(2,C,c),!g)if(v){const S=s.viewCheckHooks;null!==S&&ru(o,S)}else{const S=s.viewHooks;null!==S&&ac(o,S,2),Xu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ks(o[3],-1))}finally{ca()}}function Dh(s,o,u,c){const h=o[10],g=!Xa(),v=ua(o);try{g&&!v&&h.begin&&h.begin(),v&&mp(s,o,c),Lc(s,o,u,c)}finally{g&&!v&&h.end&&h.end()}}function Dl(s,o,u,c,h){const g=or(),v=2&c;try{ws(-1),v&&o.length>20&&so(s,o,20,Xa()),u(c,h)}finally{ws(g)}}function By(s,o,u){if(Id(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}function Du(s,o,u){!ec()||(function wr(s,o,u,c){const h=u.directiveStart,g=u.directiveEnd;s.firstCreatePass||Zi(u,o),Xn(c,o);const v=u.initialInputs;for(let E=h;E<g;E++){const C=s.data[E],S=di(C);S&&xh(o,u,C);const M=Si(o,s,E,u);Xn(M,o),null!==v&&qT(0,E-h,M,C,0,v),S&&(sr(u.index,o)[8]=M)}}(s,o,u,ir(u,o)),128==(128&u.flags)&&function Wt(s,o,u){const c=u.directiveStart,h=u.directiveEnd,v=u.index,E=function Ud(){return ft.lFrame.currentDirectiveIndex}();try{ws(v);for(let C=c;C<h;C++){const S=s.data[C],M=o[C];Io(C),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&$y(S,M)}}finally{ws(-1),Io(E)}}(s,o,u))}function Dm(s,o,u=ir){const c=o.localNames;if(null!==c){let h=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],E=-1===v?u(o,s):s[v];s[h++]=E}}}function Uc(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=_p(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function _p(s,o,u,c,h,g,v,E,C,S){const M=20+c,F=M+h,j=function rE(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:At);return u}(M,F),Y="function"==typeof S?S():S;return j[1]={type:s,blueprint:j,template:u,queries:null,viewQuery:E,declTNode:o,data:j.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:Y,incompleteFirstPass:!1}}function cr(s,o,u,c){const h=hE(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&Or(s).push(c,h.length-1))}function yp(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function Rs(s,o,u,c,h,g,v,E){const C=ir(o,u);let M,S=o.inputs;!E&&null!=S&&(M=S[c])?(Mh(s,u,M,c,h),qu(o)&&function sE(s,o){const u=sr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function jy(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,o.value||"",c):h,on(g)?g.setProperty(C,c,h):pi(c)||(C.setProperty?C.setProperty(c,h):C[c]=h))}function Vc(s,o,u,c){let h=!1;if(ec()){const g=function uE(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];Em(u,v.selectors,!1)&&(h||(h=[]),Gt(Zi(u,o),s,v.type),di(v)?(er(s,u),h.unshift(v)):h.push(v))}return h}(s,o,u),v=null===c?null:{"":-1};if(null!==g){h=!0,Nn(u,s.data.length,g.length);for(let M=0;M<g.length;M++){const F=g[M];F.providersResolver&&F.providersResolver(F)}let E=!1,C=!1,S=Ih(s,o,g.length,null);for(let M=0;M<g.length;M++){const F=g[M];u.mergedAttrs=Hr(u.mergedAttrs,F.hostAttrs),qy(s,u,o,S,F),si(S,F,v),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const j=F.type.prototype;!E&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!C&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),S++}!function jT(s,o){const c=o.directiveEnd,h=s.data,g=o.attrs,v=[];let E=null,C=null;for(let S=o.directiveStart;S<c;S++){const M=h[S],F=M.inputs,j=null===g||vr(o)?null:Gy(F,g);v.push(j),E=yp(F,S,E),C=yp(M.outputs,S,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=C}(s,u)}v&&function Mm(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=u[o[h+1]];if(null==g)throw new Re(-301,!1);c.push(o[h],g)}}}(u,c,v)}return u.mergedAttrs=Hr(u.mergedAttrs,u.attrs),h}function xm(s,o,u,c,h,g){const v=g.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function $T(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=C&&E.push(C),E.push(c,h,v)}}function $y(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function er(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function si(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;di(o)&&(u[""]=s)}}function Nn(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function qy(s,o,u,c,h){s.data[c]=h;const g=h.factory||(h.factory=hi(h.type)),v=new da(g,di(h),null);s.blueprint[c]=v,u[c]=v,xm(s,o,0,c,Ih(s,u,h.hostVars,At),h)}function xh(s,o,u){const c=ir(o,s),h=Uc(u),g=s[10],v=wp(s,Ch(s,h,null,u.onPush?64:16,c,o,g,g.createRenderer(c,u),null,null));s[o.index]=v}function xa(s,o,u,c,h,g){const v=ir(s,o);!function Qi(s,o,u,c,h,g,v){if(null==g)on(s)?s.removeAttribute(o,h,u):o.removeAttribute(h);else{const E=null==v?z(g):v(g,c||"",h);on(s)?s.setAttribute(o,h,E,u):u?o.setAttributeNS(u,h,E):o.setAttribute(h,E)}}(o[11],v,g,s.value,u,c,h)}function qT(s,o,u,c,h,g){const v=g[o];if(null!==v){const E=c.setInput;for(let C=0;C<v.length;){const S=v[C++],M=v[C++],F=v[C++];null!==E?c.setInput(u,F,S,M):u[M]=F}}}function Gy(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function lE(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Rm(s,o){const u=sr(o,s);if($i(u)){const c=u[1];80&u[2]?Lc(c,u,c.template,u[8]):u[5]>0&&Bc(u)}}function Bc(s){for(let c=fh(s);null!==c;c=Cu(c))for(let h=10;h<c.length;h++){const g=c[h];if(1024&g[2]){const v=g[1];Lc(v,g,v.template,g[8])}else g[5]>0&&Bc(g)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=sr(u[c],s);$i(h)&&h[5]>0&&Bc(h)}}function vp(s,o){const u=sr(o,s),c=u[1];(function Nm(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),mp(c,u,u[8])}function wp(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Pm(s){for(;s;){s[2]|=64;const o=bn(s);if(Tf(s)&&!o)return s;s=o}return null}function Om(s,o,u){const c=o[10];c.begin&&c.begin();try{Lc(s,o,s.template,u)}catch(h){throw Ky(o,h),h}finally{c.end&&c.end()}}function zy(s){!function Zy(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=Kf(u),h=c[1];Dh(h,c,h.template,u)}}(s[8])}function Wy(s,o,u){ic(0),o(s,u)}const dE=(()=>Promise.resolve(null))();function hE(s){return s[7]||(s[7]=[])}function Or(s){return s.cleanup||(s.cleanup=[])}function Ky(s,o){const u=s[9],c=u?u.get(Fn,null):null;c&&c.handleError(o)}function Mh(s,o,u,c,h){for(let g=0;g<u.length;){const v=u[g++],E=u[g++],C=o[v],S=s.data[v];null!==S.setInput?S.setInput(C,h,c,E):C[E]=h}}function $r(s,o,u){const c=To(o,s);!function wl(s,o,u){on(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function Rh(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?g=E:1==g?h=he(h,E):2==g&&(c=he(c,E+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}const Lm=new ln("INJECTOR",-1);class Yy{get(o,u=_n){if(u===_n){const c=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw c.name="NullInjectorError",c}return u}}const Qy=new ln("Set Injector scope."),bp={},Cp={};let Tp;function pE(){return void 0===Tp&&(Tp=new Yy),Tp}function Jy(s,o=null,u=null,c){const h=Xy(s,o,u,c);return h._resolveInjectorDefTypes(),h}function Xy(s,o=null,u=null,c){return new gE(s,u,o||pE(),c)}class gE{constructor(o,u,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];u&&tn(u,E=>this.processProvider(E,o,u)),tn([o],E=>this.processInjectorType(E,[],g)),this.records.set(Lm,Vo(void 0,this));const v=this.records.get(Qy);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:de(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=_n,c=gt.Default){this.assertNotDestroyed();const h=re(this),g=Pn(void 0);try{if(!(c&gt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function vE(s){return"function"==typeof s||"object"==typeof s&&s instanceof ln}(o)&&Ot(o);E=C&&this.injectableDefInScope(C)?Vo(ev(o),bp):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&gt.Self?pE():this.parent).get(o,u=c&gt.Optional&&u===_n?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[wa]=v[wa]||[]).unshift(de(o)),h)throw v;return function kn(s,o,u,c){const h=s[wa];throw o[R]&&h.unshift(o[R]),s.message=function mu(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=de(o);if(Array.isArray(o))h=o.map(de).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):de(E)))}h=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(T,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[wa]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Pn(g),re(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(de(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(o,u,c){if(!(o=Q(o)))return!1;let h=Lr(o);const g=null==h&&o.ngModule||void 0,v=void 0===g?o:g,E=-1!==c.indexOf(v);if(void 0!==g&&(h=Lr(g)),null==h)return!1;if(null!=h.imports&&!E){let M;c.push(v);try{tn(h.imports,F=>{this.processInjectorType(F,u,c)&&(void 0===M&&(M=[]),M.push(F))})}finally{}if(void 0!==M)for(let F=0;F<M.length;F++){const{ngModule:j,providers:Y}=M[F];tn(Y,we=>this.processProvider(we,j,Y||V))}}this.injectorDefTypes.add(v);const C=hi(v)||(()=>new v);this.records.set(v,Vo(C,bp));const S=h.providers;if(null!=S&&!E){const M=o;tn(S,F=>this.processProvider(F,M,S))}return void 0!==g&&void 0!==o.providers}processProvider(o,u,c){let h=Nh(o=Q(o))?o:Q(o&&o.provide);const g=function KT(s,o,u){return jc(s)?Vo(void 0,s.useValue):Vo(_E(s),bp)}(o);if(Nh(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=Vo(void 0,bp,!0),v.factory=()=>jt(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,g)}hydrate(o,u){return u.value===bp&&(u.value=Cp,u.value=u.factory()),"object"==typeof u.value&&u.value&&function JT(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Q(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function ev(s){const o=Ot(s),u=null!==o?o.factory:hi(s);if(null!==u)return u;if(s instanceof ln)throw new Re(204,!1);if(s instanceof Function)return function mE(s){const o=s.length;if(o>0)throw function xr(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Re(204,!1);const u=function gr(s){const o=s&&(s[Bi]||s[ui]);if(o){const u=function js(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Re(204,!1)}function _E(s,o,u){let c;if(Nh(s)){const h=Q(s);return hi(h)||ev(h)}if(jc(s))c=()=>Q(s.useValue);else if(function QT(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...jt(s.deps||[]));else if(function YT(s){return!(!s||!s.useExisting)}(s))c=()=>Le(Q(s.useExisting));else{const h=Q(s&&(s.useClass||s.provide));if(!function qr(s){return!!s.deps}(s))return hi(h)||ev(h);c=()=>new h(...jt(s.deps))}return c}function Vo(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function jc(s){return null!==s&&"object"==typeof s&&U in s}function Nh(s){return"function"==typeof s}let dr=(()=>{class s{static create(u,c){var h;if(Array.isArray(u))return Jy({name:""},c,u,"");{const g=null!==(h=u.name)&&void 0!==h?h:"";return Jy({name:g},u.parent,u.providers,g)}}}return s.THROW_IF_NOT_FOUND=_n,s.NULL=new Yy,s.\u0275prov=Qt({token:s,providedIn:"any",factory:()=>Le(Lm)}),s.__NG_ELEMENT_ID__=-1,s})();function Bo(s,o){Es(Kf(s)[1],wn())}function xu(s){let o=function Ph(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(di(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Re(903,"");h=o.\u0275dir}if(h){if(u){c.push(h);const v=s;v.inputs=Mu(s.inputs),v.declaredInputs=Mu(s.declaredInputs),v.outputs=Mu(s.outputs);const E=h.hostBindings;E&&EE(s,E);const C=h.viewQuery,S=h.contentQueries;if(C&&wE(s,C),S&&rv(s,S),ie(s.inputs,h.inputs),ie(s.declaredInputs,h.declaredInputs),ie(s.outputs,h.outputs),di(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(s),E===xu&&(u=!1)}}o=Object.getPrototypeOf(o)}!function rI(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Hr(h.hostAttrs,u=Hr(u,h.hostAttrs))}}(c)}function Mu(s){return s===li?{}:s===V?[]:s}function wE(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function rv(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,g)=>{o(c,h,g),u(c,h,g)}:o}function EE(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let Oh=null;function Ps(){if(!Oh){const s=Ft.Symbol;if(s&&s.iterator)Oh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Oh=c)}}}return Oh}function kh(s){return!!Sp(s)&&(Array.isArray(s)||!(s instanceof Map)&&Ps()in s)}function Sp(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function hr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Mp(s,o,u,c){const h=Te();return hr(h,qi(),o)&&(Pt(),xa(Sn(),h,s,o,u,c)),Mp}function Fh(s,o,u,c){return hr(s,qi(),u)?o+z(u)+c:At}function qc(s,o,u,c,h,g){const E=function Ho(s,o,u,c){const h=hr(s,o,u);return hr(s,o+1,c)||h}(s,function Ai(){return ft.lFrame.bindingIndex}(),u,h);return vs(2),E?o+z(u)+c+z(h)+g:At}function lv(s,o,u,c,h,g,v,E){const C=Te(),S=Pt(),M=s+20,F=S.firstCreatePass?function iI(s,o,u,c,h,g,v,E,C){const S=o.consts,M=Fc(o,s,4,v||null,ei(S,E));Vc(o,u,M,ei(S,C)),Es(o,M);const F=M.tViews=_p(2,M,c,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,M),F.queries=o.queries.embeddedTView(M)),M}(M,S,C,o,u,c,h,g,v):S.data[M];jr(F,!1);const j=C[11].createComment("");vi(S,C,j,F),Xn(j,C),wp(C,C[M]=lE(j,C,j,F)),Gs(F)&&Du(S,C,F),null!=v&&Dm(C,F,E)}function Rp(s){return ys(function Fd(){return ft.lFrame.contextLView}(),20+s)}function Hh(s,o=gt.Default){const u=Te();return null===u?Le(s,o):lu(wn(),u,Q(s),o)}function yv(){throw new Error("invalid")}function Up(s,o,u){const c=Te();return hr(c,qi(),o)&&Rs(Pt(),Sn(),c,s,o,c[11],u,!1),Up}function vv(s,o,u,c,h){const v=h?"class":"style";Mh(s,u,o.inputs[v],v,c)}function Wm(s,o,u,c){const h=Te(),g=Pt(),v=20+s,E=h[11],C=h[v]=Ac(E,o,function Bd(){return ft.lFrame.currentNamespace}()),S=g.firstCreatePass?function PE(s,o,u,c,h,g,v){const E=o.consts,S=Fc(o,s,2,h,ei(E,g));return Vc(o,u,S,ei(E,v)),null!==S.attrs&&Rh(S,S.attrs,!1),null!==S.mergedAttrs&&Rh(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,g,h,0,o,u,c):g.data[v];jr(S,!0);const M=S.mergedAttrs;null!==M&&Dt(E,C,M);const F=S.classes;null!==F&&zt(E,C,F);const j=S.styles;return null!==j&&gh(E,C,j),64!=(64&S.flags)&&vi(g,h,C,S),0===function Wa(){return ft.lFrame.elementDepthCount}()&&Xn(C,h),function Od(){ft.lFrame.elementDepthCount++}(),Gs(S)&&(Du(g,h,S),By(g,S,h)),null!==c&&Dm(h,S),Wm}function Vp(){let s=wn();tc()?nc():(s=s.parent,jr(s,!1));const o=s;!function Ka(){ft.lFrame.elementDepthCount--}();const u=Pt();return u.firstCreatePass&&(Es(u,s),Id(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Rf(s){return 0!=(16&s.flags)}(o)&&vv(u,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Xg(s){return 0!=(32&s.flags)}(o)&&vv(u,o,Te(),o.stylesWithoutHost,!1),Vp}function wv(s,o,u,c){return Wm(s,o,u,c),Vp(),wv}function jp(s,o,u){const c=Te(),h=Pt(),g=s+20,v=h.firstCreatePass?function $h(s,o,u,c,h){const g=o.consts,v=ei(g,c),E=Fc(o,s,8,"ng-container",v);return null!==v&&Rh(E,v,!0),Vc(o,u,E,ei(g,h)),null!==o.queries&&o.queries.elementStart(o,E),E}(g,h,c,o,u):h.data[g];jr(v,!0);const E=c[g]=c[11].createComment("");return vi(h,c,E,v),Xn(E,c),Gs(v)&&(Du(h,c,v),By(h,v,c)),null!=u&&Dm(c,v),jp}function qh(){let s=wn();const o=Pt();return tc()?nc():(s=s.parent,jr(s,!1)),o.firstCreatePass&&(Es(o,s),Id(s)&&o.queries.elementEnd(s)),qh}function Km(s,o,u){return jp(s,o,u),qh(),Km}function Ev(){return Te()}function bv(s){return!!s&&"function"==typeof s.then}function Ym(s){return!!s&&"function"==typeof s.subscribe}const OE=Ym;function Hp(s,o,u,c){const h=Te(),g=Pt(),v=wn();return function FE(s,o,u,c,h,g,v,E){const C=Gs(c),M=s.firstCreatePass&&Or(s),F=o[8],j=hE(o);let Y=!0;if(3&c.type||E){const $e=ir(c,o),et=E?E($e):$e,Ie=j.length,pt=E?Vt=>E(en(Vt[c.index])):c.index;if(on(u)){let Vt=null;if(!E&&C&&(Vt=function Cv(s,o,u,c){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===u&&h[g+1]===c){const E=o[7],C=h[g+2];return E.length>C?E[C]:null}"string"==typeof v&&(g+=2)}return null}(s,o,h,c.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=g,Vt.__ngLastListenerFn__=g,Y=!1;else{g=$p(c,o,F,g,!1);const dn=u.listen(et,h,g);j.push(g,dn),M&&M.push(h,pt,Ie,Ie+1)}}else g=$p(c,o,F,g,!0),et.addEventListener(h,g,v),j.push(g),M&&M.push(h,pt,Ie,v)}else g=$p(c,o,F,g,!1);const we=c.outputs;let ke;if(Y&&null!==we&&(ke=we[h])){const $e=ke.length;if($e)for(let et=0;et<$e;et+=2){const is=o[ke[et]][ke[et+1]].subscribe(g),hd=j.length;j.push(g,is),M&&M.push(h,c.index,hd,-(hd+1))}}}(g,h,h[11],v,s,o,!!u,c),Hp}function LE(s,o,u,c){try{return!1!==u(c)}catch(h){return Ky(s,h),!1}}function $p(s,o,u,c,h){return function g(v){if(v===Function)return c;const E=2&s.flags?sr(s.index,o):o;0==(32&o[2])&&Pm(E);let C=LE(o,0,c,v),S=g.__ngNextListenerFn__;for(;S;)C=LE(o,0,S,v)&&C,S=S.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Fr(s=1){return function Gi(s){return(ft.lFrame.contextLView=function Sf(s,o){for(;s>0;)o=o[15],s--;return o}(s,ft.lFrame.contextLView))[8]}(s)}function Tv(s,o,u){return Iv(s,"",o,"",u),Tv}function Iv(s,o,u,c,h){const g=Te(),v=Fh(g,o,u,c);return v!==At&&Rs(Pt(),Sn(),g,s,v,g[11],h,!1),Iv}function Mv(s,o,u,c,h){const g=s[u+1],v=null===o;let E=c?oo(g):Uo(g),C=!1;for(;0!==E&&(!1===C||v);){const M=s[E+1];fI(s[E],o)&&(C=!0,s[E+1]=c?bm(M):_h(M)),E=c?oo(M):Uo(M)}C&&(s[u+1]=c?_h(g):bm(g))}function fI(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ya(s,o)>=0}function Ml(s,o){return function fo(s,o,u,c){const h=Te(),g=Pt(),v=vs(2);g.firstUpdatePass&&function Pu(s,o,u,c){const h=s.data;if(null===h[u+1]){const g=h[or()],v=function i_(s,o){return o>=s.expandoStartIndex}(s,u);(function qE(s,o){return 0!=(s.flags&(o?16:32))})(g,c)&&null===o&&!v&&(o=!1),o=function $E(s,o,u,c){const h=function Qu(s){const o=ft.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=Wp(u=zp(null,s,o,u,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(u=zp(h,s,o,u,c),null===g){let C=function vI(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Uo(c))return s[oo(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=zp(null,s,o,C[1],c),C=Wp(C,o.attrs,c),function Nv(s,o,u,c){s[oo(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else g=function wI(s,o,u){let c;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)c=Wp(c,s[g].hostAttrs,u);return Wp(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(h,g,o,c),function Sv(s,o,u,c,h,g){let v=g?o.classBindings:o.styleBindings,E=oo(v),C=Uo(v);s[c]=u;let M,S=!1;if(Array.isArray(u)){const F=u;M=F[1],(null===M||ya(F,M)>0)&&(S=!0)}else M=u;if(h)if(0!==C){const j=oo(s[E+1]);s[c+1]=Tu(j,E),0!==j&&(s[j+1]=yh(s[j+1],c)),s[E+1]=function Ny(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=Tu(E,0),0!==E&&(s[E+1]=yh(s[E+1],c)),E=c;else s[c+1]=Tu(C,0),0===E?E=c:s[C+1]=yh(s[C+1],c),C=c;S&&(s[c+1]=_h(s[c+1])),Mv(s,M,c,!0),Mv(s,M,c,!1),function xv(s,o,u,c,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&ya(g,o)>=0&&(u[c+1]=bm(u[c+1]))}(o,M,s,c,g),v=Tu(E,C),g?o.classBindings=v:o.styleBindings=v}(h,g,o,u,v,c)}}(g,s,v,c),o!==At&&hr(h,v,o)&&function kv(s,o,u,c,h,g,v,E){if(!(3&o.type))return;const C=s.data,S=C[E+1];zh(function Py(s){return 1==(1&s)}(S)?Kc(C,o,u,h,Uo(S),v):void 0)||(zh(g)||function Oc(s){return 2==(2&s)}(S)&&(g=Kc(C,null,u,h,E,v)),function zw(s,o,u,c,h){const g=on(s);if(o)h?g?s.addClass(u,c):u.classList.add(c):g?s.removeClass(u,c):u.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:ce.DashCase;if(null==h)g?s.removeStyle(u,c,v):u.style.removeProperty(c);else{const E="string"==typeof h&&h.endsWith("!important");E&&(h=h.slice(0,-10),v|=ce.Important),g?s.setStyle(u,c,h,v):u.style.setProperty(c,h,E?"important":"")}}}(c,v,To(or(),u),h,g))}(g,g.data[or()],h,h[11],s,h[v+1]=function EI(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=de(no(s)))),s}(o,u),c,v)}(s,o,null,!0),Ml}function zp(s,o,u,c,h){let g=null;const v=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<v&&(g=o[E],c=Wp(c,g.hostAttrs,h),g!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function Wp(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?h=v:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Mr(s,v,!!u||o[++g]))}return void 0===s?null:s}function Kc(s,o,u,c,h,g){const v=null===o;let E;for(;h>0;){const C=s[h],S=Array.isArray(C),M=S?C[1]:C,F=null===M;let j=u[h+1];j===At&&(j=F?V:void 0);let Y=F?al(j,c):M===c?j:void 0;if(S&&!zh(Y)&&(Y=al(C,c)),zh(Y)&&(E=Y,v))return E;const we=s[h+1];h=v?oo(we):Uo(we)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(E=al(C,c))}return E}function zh(s){return void 0!==s}function Fv(s,o=""){const u=Te(),c=Pt(),h=s+20,g=c.firstCreatePass?Fc(c,h,1,o,null):c.data[h],v=u[h]=function ph(s,o){return on(s)?s.createText(o):s.createTextNode(o)}(u[11],o);vi(c,u,v,g),jr(g,!1)}function s_(s){return o_("",s,""),s_}function o_(s,o,u){const c=Te(),h=Fh(c,s,o,u);return h!==At&&$r(c,or(),h),o_}function Yp(s,o,u,c,h){const g=Te(),v=qc(g,s,o,u,c,h);return v!==At&&$r(g,or(),v),Yp}const Yc=void 0;var Qv=["en",[["a","p"],["AM","PM"],Yc],[["AM","PM"],Yc,Yc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yc,"{1} 'at' {0}",Yc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function DI(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Nl={};function Jv(s){const o=function nb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=h_(o);if(u)return u;const c=o.split("-")[0];if(u=h_(c),u)return u;if("en"===c)return Qv;throw new Error(`Missing locale data for the locale "${s}".`)}function tb(s){return Jv(s)[_t.PluralCase]}function h_(s){return s in Nl||(Nl[s]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[s]),Nl[s]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const f_="en-US";let g_=f_;function S_(s,o,u,c,h){if(s=Q(s),Array.isArray(s))for(let g=0;g<s.length;g++)S_(s[g],o,u,c,h);else{const g=Pt(),v=Te();let E=Nh(s)?s:Q(s.provide),C=_E(s);const S=wn(),M=1048575&S.providerIndexes,F=S.directiveStart,j=S.providerIndexes>>20;if(Nh(s)||!s.multi){const Y=new da(C,h,Hh),we=C0(E,o,h?M:M+j,F);-1===we?(Gt(Zi(S,v),g,E),b0(g,s,o.length),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),u.push(Y),v.push(Y)):(u[we]=Y,v[we]=Y)}else{const Y=C0(E,o,M+j,F),we=C0(E,o,M,M+j),ke=Y>=0&&u[Y],$e=we>=0&&u[we];if(h&&!$e||!h&&!ke){Gt(Zi(S,v),g,E);const et=function FS(s,o,u,c,h){const g=new da(s,u,Hh);return g.multi=[],g.index=o,g.componentProviders=0,x_(g,h,c&&!u),g}(h?Un:qI,u.length,h,c,C);!h&&$e&&(u[we].providerFactory=et),b0(g,s,o.length,0),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),u.push(et),v.push(et)}else b0(g,s,Y>-1?Y:we,x_(u[h?we:Y],C,!h&&c));!h&&c&&$e&&u[we].componentProviders++}}}function b0(s,o,u,c){const h=Nh(o),g=function yE(s){return!!s.useClass}(o);if(h||g){const C=(g?Q(o.useClass):o).prototype.ngOnDestroy;if(C){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=S.indexOf(u);-1===M?S.push(u,[c,C]):S[M+1].push(c,C)}else S.push(u,C)}}}function x_(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function C0(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function qI(s,o,u,c){return Tb(this.multi,[])}function Un(s,o,u,c){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Si(u,u[1],this.providerFactory.index,c);g=E.slice(0,v),Tb(h,g);for(let C=v;C<E.length;C++)g.push(E[C])}else g=[],Tb(h,g);return g}function Tb(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function fr(s,o=[]){return u=>{u.providersResolver=(c,h)=>function Cb(s,o,u){const c=Pt();if(c.firstCreatePass){const h=di(s);S_(u,c.data,c.blueprint,h,!0),S_(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class Db{}class ZI{resolveComponentFactory(o){throw function GI(s){const o=Error(`No component factory found for ${de(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Xp=(()=>{class s{}return s.NULL=new ZI,s})();function zI(){return eg(wn(),Te())}function eg(s,o){return new tg(ir(s,o))}let tg=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=zI,s})();function WI(s){return s instanceof tg?s.nativeElement:s}class Pa{}let US=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function nd(){const s=Te(),u=sr(wn().index,s);return function Oa(s){return s[11]}(Di(u)?u:s)}(),s})(),M_=(()=>{class s{}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:()=>null}),s})();class Ab{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Sb=new Ab("13.2.4"),R_={};function ng(s,o,u,c,h=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(en(g)),ci(g))for(let E=10;E<g.length;E++){const C=g[E],S=C[1].firstChild;null!==S&&ng(C[1],C,S,c)}const v=u.type;if(8&v)ng(s,o,u.child,c);else if(32&v){const E=Je(u,o);let C;for(;C=E();)c.push(C)}else if(16&v){const E=My(o,u);if(Array.isArray(E))c.push(...E);else{const C=bn(o[16]);ng(C[1],C,E,c,!0)}}u=h?u.projectionNext:u.next}return c}class Pl{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return ng(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ci(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Sc(o,c),ma(u,c))}this._attachedToViewContainer=!1}_m(this._lView[1],this._lView)}onDestroy(o){cr(this._lView[1],this._lView,null,o)}markForCheck(){Pm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Om(this._lView[1],this._lView,this.context)}checkNoChanges(){!function ZT(s,o,u){la(!0);try{Om(s,o,u)}finally{la(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Sa(s,o){Ln(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=o}}class YI extends Pl{constructor(o){super(o),this._view=o}detectChanges(){zy(this._view)}checkNoChanges(){!function zT(s){la(!0);try{zy(s)}finally{la(!1)}}(this._view)}get context(){return null}}class Ol extends Xp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=zn(o);return new D0(u,this.ngModule)}}function rg(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const xb=new ln("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>tp});class D0 extends Db{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Yw(s){return s.map(ap).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return rg(this.componentDef.inputs)}get outputs(){return rg(this.componentDef.outputs)}create(o,u,c,h){const g=(h=h||this.ngModule)?function I0(s,o){return{get:(u,c,h)=>{const g=s.get(u,R_,h);return g!==R_||c===R_?g:o.get(u,c,h)}}}(o,h.injector):o,v=g.get(Pa,Ga),E=g.get(M_,null),C=v.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",M=c?function iE(s,o,u){if(on(s))return s.selectRootElement(o,u===Nt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):Ac(v.createRenderer(null,this.componentDef),S,function ig(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(S)),F=this.componentDef.onPush?576:528,j=function Ap(s,o){return{components:[],scheduler:s||tp,clean:dE,playerHandler:o||null,flags:0}}(),Y=_p(0,null,null,1,0,null,null,null,null,null),we=Ch(null,Y,j,F,null,null,v,C,E,g);let ke,$e;Do(we);try{const et=function nv(s,o,u,c,h,g){const v=u[1];u[20]=s;const C=Fc(v,20,2,"#host",null),S=C.mergedAttrs=o.hostAttrs;null!==S&&(Rh(C,S,!0),null!==s&&(Dt(h,s,S),null!==C.classes&&zt(h,s,C.classes),null!==C.styles&&gh(h,s,C.styles)));const M=c.createRenderer(s,o),F=Ch(u,Uc(o),null,o.onPush?64:16,u[20],C,c,M,g||null,null);return v.firstCreatePass&&(Gt(Zi(C,u),v,o.type),er(v,C),Nn(C,u.length,1)),wp(u,F),u[20]=F}(M,this.componentDef,we,v,C);if(M)if(c)Dt(C,M,["ng-version",Sb.full]);else{const{attrs:Ie,classes:pt}=function Xe(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++c]):8===h&&u.push(g);else{if(!nn(h))break;h=g}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ie&&Dt(C,M,Ie),pt&&pt.length>0&&zt(C,M,pt.join(" "))}if($e=An(Y,20),void 0!==u){const Ie=$e.projection=[];for(let pt=0;pt<this.ngContentSelectors.length;pt++){const Vt=u[pt];Ie.push(null!=Vt?Array.from(Vt):null)}}ke=function ye(s,o,u,c,h){const g=u[1],v=function aE(s,o,u){const c=wn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),qy(s,c,o,Ih(s,o,1,null),u));const h=Si(o,s,c.directiveStart,c);Xn(h,o);const g=ir(c,o);return g&&Xn(g,o),h}(g,u,o);if(c.components.push(v),s[8]=v,h&&h.forEach(C=>C(v,o)),o.contentQueries){const C=wn();o.contentQueries(1,v,C.directiveStart)}const E=wn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ws(E.index),xm(u[1],E,0,E.directiveStart,E.directiveEnd,o),$y(o,v)),v}(et,this.componentDef,we,j,[Bo]),mp(Y,we,null)}finally{ca()}return new A0(this.componentType,ke,eg($e,we),we,$e)}}class A0 extends class Ib{}{constructor(o,u,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new YI(h),this.componentType=o}get injector(){return new En(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class rd{}class kl{}const id=new Map;class R0 extends rd{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ol(this);const c=Wn(o);this._bootstrapComponents=m(c.bootstrap),this._r3Injector=Xy(o,u,[{provide:rd,useValue:this},{provide:Xp,useValue:this.componentFactoryResolver}],de(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=dr.THROW_IF_NOT_FOUND,c=gt.Default){return o===dr||o===rd||o===Lm?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class sd extends kl{constructor(o){super(),this.moduleType=o,null!==Wn(o)&&function x0(s){const o=new Set;!function u(c){const h=Wn(c,!0),g=h.id;null!==g&&(function N_(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${de(o)} vs ${de(o.name)}`)}(g,id.get(g),c),id.set(g,c));const v=m(h.imports);for(const E of v)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new R0(this.moduleType,o)}}function Nb(s,o,u,c,h,g){const v=o+u;return hr(s,v,h)?function Ei(s,o,u){return s[o]=u}(s,v+1,g?c.call(g,h):c(h)):function po(s,o){const u=s[o];return u===At?void 0:u}(s,v+1)}function Fb(s,o){const u=Pt();let c;const h=s+20;u.firstCreatePass?(c=function tD(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}}(o,u.pipeRegistry),u.data[h]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(h,c.onDestroy)):c=u.data[h];const g=c.factory||(c.factory=hi(c.type)),v=Pn(Hh);try{const E=Ts(!1),C=g();return Ts(E),function jm(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,Te(),h,C),C}finally{Pn(v)}}function P0(s,o,u){const c=s+20,h=Te(),g=ys(h,c);return function ug(s,o){return s[1].data[o].pure}(h,c)?Nb(h,function Kn(){const s=ft.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,g.transform,u,g):g.transform(u)}function O_(s){return o=>{setTimeout(s,void 0,o)}}const $o=class Ub extends a.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var h,g,v;let E=o,C=u||(()=>null),S=c;if(o&&"object"==typeof o){const F=o;E=null===(h=F.next)||void 0===h?void 0:h.bind(F),C=null===(g=F.error)||void 0===g?void 0:g.bind(F),S=null===(v=F.complete)||void 0===v?void 0:v.bind(F)}this.__isAsync&&(C=O_(C),E&&(E=O_(E)),S&&(S=O_(S)));const M=super.subscribe({next:E,error:C,complete:S});return o instanceof J.w0&&o.add(M),M}};function Vb(){return this._results[Ps()]()}class lg{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Ps(),c=lg.prototype;c[u]||(c[u]=Vb)}get changes(){return this._changes||(this._changes=new $o)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=Sr(o);(this._changesDetected=!function fc(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],g=o[c];if(u&&(h=u(h),g=u(g)),g!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ll=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ul,s})();const sD=Ll,Bb=class extends sD{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Ch(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(c[19]=g.createEmbeddedView(u)),mp(u,c,o),new Pl(c)}};function Ul(){return k_(wn(),Te())}function k_(s,o){return 4&s.type?new Bb(o,s,eg(s,o)):null}let ka=(()=>{class s{}return s.__NG_ELEMENT_ID__=oD,s})();function oD(){return k0(wn(),Te())}const aD=ka,jb=class extends aD{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return eg(this._hostTNode,this._hostLView)}get injector(){return new En(this._hostTNode,this._hostLView)}get parentInjector(){const o=nl(this._hostTNode,this._hostLView);if(Cs(o)){const u=_r(o,this._hostLView),c=ze(o);return new En(u[1].data[c+8],u)}return new En(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Hb(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const h=o.createEmbeddedView(u||{});return this.insert(h,c),h}createComponent(o,u,c,h,g){const v=o&&!function Ds(s){return"function"==typeof s}(o);let E;if(v)E=u;else{const F=u||{};E=F.index,c=F.injector,h=F.projectableNodes,g=F.ngModuleRef}const C=v?o:new D0(zn(o)),S=c||this.parentInjector;if(!g&&null==C.ngModule){const j=(v?S:this.parentInjector).get(rd,null);j&&(g=j)}const M=C.create(S,h,void 0,g);return this.insert(M.hostView,E),M}insert(o,u){const c=o._lView,h=c[1];if(function Xl(s){return ci(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const F=c[3],j=new jb(F,F[6],F[3]);j.detach(j.indexOf(o))}}const g=this._adjustIndex(u),v=this._lContainer;!function AT(s,o,u,c){const h=10+c,g=u.length;c>0&&(u[h-1][4]=o),c<g-10?(o[4]=u[h],ga(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function Fe(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(h,c,v,g);const E=kt(g,v),C=c[11],S=ym(C,v[7]);return null!==S&&function Aa(s,o,u,c,h,g){c[0]=h,c[6]=o,Ln(s,c,u,1,h,g)}(h,v[6],C,c,S,E),o.attachToViewContainerRef(),ga(O0(v),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Hb(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Sc(this._lContainer,u);c&&(ma(O0(this._lContainer),u),_m(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Sc(this._lContainer,u);return c&&null!=ma(O0(this._lContainer),u)?new Pl(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function Hb(s){return s[8]}function O0(s){return s[8]||(s[8]=[])}function k0(s,o){let u;const c=o[s.index];if(ci(c))u=c;else{let h;if(8&s.type)h=en(c);else{const g=o[11];h=g.createComment("");const v=ir(s,o);Se(g,ym(g,v),h,function MT(s,o){return on(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=u=lE(c,o,h,s),wp(o,u)}return new jb(u,s,o)}class F_{constructor(o){this.queryList=o,this.matches=null}clone(){return new F_(this.queryList)}setDirty(){this.queryList.setDirty()}}class F0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let g=0;g<c;g++){const v=u.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new F0(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==L_(o,u).matches&&this.queries[u].setDirty()}}class ad{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class cg{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,h);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new cg(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class L0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new L0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(o,u,lD(u,g)),this.matchTNodeWithReadOption(o,u,jd(u,o,g,!1,!1))}else c===Ll?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,jd(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===tg||h===ka||h===Ll&&4&u.type)this.addMatch(u.index,-2);else{const g=jd(u,o,h,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function lD(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function dD(s,o,u,c){return-1===u?function cD(s,o){return 11&s.type?eg(s,o):4&s.type?k_(s,o):null}(o,s):-2===u?function U0(s,o,u){return u===tg?eg(o,s):u===Ll?k_(o,s):u===ka?k0(o,s):void 0}(s,o,c):Si(s,s[1],u,o)}function dg(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const g=s.data,v=u.matches,E=[];for(let C=0;C<v.length;C+=2){const S=v[C];E.push(S<0?null:dD(o,g[S],v[C+1],u.metadata.read))}h.matches=E}return h.matches}function V0(s,o,u,c){const h=s.queries.getByIndex(u),g=h.matches;if(null!==g){const v=dg(s,o,h,u);for(let E=0;E<g.length;E+=2){const C=g[E];if(C>0)c.push(v[E/2]);else{const S=g[E+1],M=o[-C];for(let F=10;F<M.length;F++){const j=M[F];j[17]===j[3]&&V0(j[1],j,S,c)}if(null!==M[9]){const F=M[9];for(let j=0;j<F.length;j++){const Y=F[j];V0(Y[1],Y,S,c)}}}}}return c}function hD(s){const o=Te(),u=Pt(),c=nu();ic(c+1);const h=L_(u,c);if(s.dirty&&ua(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?V0(u,o,c,[]):dg(u,o,h,c);s.reset(g,WI),s.notifyOnChanges()}return!0}return!1}function fD(s,o,u){const c=Pt();c.firstCreatePass&&(hg(c,new ad(s,o,u),-1),2==(2&o)&&(c.staticViewQueries=!0)),Hn(c,Te(),o)}function B0(s,o,u,c){const h=Pt();if(h.firstCreatePass){const g=wn();hg(h,new ad(o,u,c),g.index),function pD(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}Hn(h,Te(),u)}function j0(){return function ns(s,o){return s[19].queries[o].queryList}(Te(),nu())}function Hn(s,o,u){const c=new lg(4==(4&u));cr(s,o,c,c.destroy),null===o[19]&&(o[19]=new F0),o[19].queries.push(new F_(c))}function hg(s,o,u){null===s.queries&&(s.queries=new cg),s.queries.track(new L0(o,u))}function L_(s,o){return s.queries.getByIndex(o)}function ki(s,o){return k_(s,o)}function cd(...s){}const G_=new ln("Application Initializer");let uf=(()=>{class s{constructor(u){this.appInits=u,this.resolve=cd,this.reject=cd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(bv(g))u.push(g);else if(OE(g)){const v=new Promise((E,C)=>{g.subscribe({complete:E,error:C})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Le(G_,8))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})();const jl=new ln("AppId"),Qb={provide:jl,useFactory:function Yb(){return`${pg()}${pg()}${pg()}`},deps:[]};function pg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Y0=new ln("Platform Initializer"),gg=new ln("Platform ID"),Jb=new ln("appBootstrapListener");let Xb=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})();const lf=new ln("LocaleId"),CD=new ln("DefaultCurrencyCode");class YS{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let eC=(()=>{class s{compileModuleSync(u){return new sd(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=m(Wn(u).declarations).reduce((v,E)=>{const C=zn(E);return C&&v.push(new D0(C)),v},[]);return new YS(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})();const JS=(()=>Promise.resolve(0))();function tC(s){"undefined"==typeof Zone?JS.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class mo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $o(!1),this.onMicrotaskEmpty=new $o(!1),this.onStable=new $o(!1),this.onError=new $o(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function XS(){let s=Ft.requestAnimationFrame,o=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function zr(s){const o=()=>{!function TD(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ft,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ks(s),s.isCheckStableRunning=!0,Q0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ks(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,g,v,E)=>{try{return mg(s),u.invokeTask(h,g,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Z_(s)}},onInvoke:(u,c,h,g,v,E,C)=>{try{return mg(s),u.invoke(h,g,v,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Z_(s)}},onHasTask:(u,c,h,g)=>{u.hasTask(h,g),c===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,ks(s),Q0(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,h,g)=>(u.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(mo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,o,nC,cd,cd);try{return g.runTask(v,u,c)}finally{g.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const nC={};function Q0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ks(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function mg(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Z_(s){s._nesting--,Q0(s)}class ID{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $o,this.onMicrotaskEmpty=new $o,this.onStable=new $o,this.onError=new $o}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}let rC=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mo.assertNotInAngularZone(),tC(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())tC(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(Le(mo))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})(),iC=(()=>{class s{constructor(){this._applications=new Map,J0.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return J0.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})();class sC{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function DD(s){J0=s}let Go,J0=new sC;const X0=new ln("AllowMultipleToken");class SD{constructor(o,u){this.name=o,this.token=u}}function _g(s,o,u=[]){const c=`Platform: ${o}`,h=new ln(c);return(g=[])=>{let v=aC();if(!v||v.injector.get(X0,!1))if(s)s(u.concat(g).concat({provide:h,useValue:!0}));else{const E=u.concat(g).concat({provide:h,useValue:!0},{provide:Qy,useValue:"platform"});!function ew(s){if(Go&&!Go.destroyed&&!Go.injector.get(X0,!1))throw new Re(400,"");Go=s.get(uC);const o=s.get(Y0,null);o&&o.forEach(u=>u())}(dr.create({providers:E,name:c}))}return function tw(s){const o=aC();if(!o)throw new Re(401,"");return o}()}}function aC(){return Go&&!Go.destroyed?Go:null}let uC=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const E=function xD(s,o){let u;return u="noop"===s?new ID:("zone.js"===s?void 0:s)||new mo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:mo,useValue:E}];return E.run(()=>{const S=dr.create({providers:C,parent:this.injector,name:u.moduleType.name}),M=u.create(S),F=M.injector.get(Fn,null);if(!F)throw new Re(402,"");return E.runOutsideAngular(()=>{const j=E.onError.subscribe({next:Y=>{F.handleError(Y)}});M.onDestroy(()=>{W_(this._modules,M),j.unsubscribe()})}),function MD(s,o,u){try{const c=u();return bv(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(F,E,()=>{const j=M.injector.get(uf);return j.runInitializers(),j.donePromise.then(()=>(function t0(s){ut(s,"Expected localeId to be defined"),"string"==typeof s&&(g_=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(lf,f_)||f_),this._moduleDoBootstrap(M),M))})})}bootstrapModule(u,c=[]){const h=lC({},c);return function AD(s,o,u){const c=new sd(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(u){const c=u.injector.get(Lu);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Re(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Le(dr))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})();function lC(s,o){return Array.isArray(o)?o.reduce(lC,s):Object.assign(Object.assign({},s),o)}let Lu=(()=>{class s{constructor(u,c,h,g,v){this._zone=u,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new P.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),C=new P.y(S=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{mo.assertNotInAngularZone(),tC(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{mo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{M.unsubscribe(),F.unsubscribe()}});this.isStable=(0,me.T)(E,C.pipe((0,te.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Re(405,"");let h;h=u instanceof Db?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(h.componentType);const g=function z_(s){return s.isBoundToModule}(h)?void 0:this._injector.get(rd),E=h.create(dr.NULL,[],c||h.selector,g),C=E.location.nativeElement,S=E.injector.get(rC,null),M=S&&E.injector.get(iC);return S&&M&&M.registerApplication(C,S),E.onDestroy(()=>{this.detachView(E.hostView),W_(this.components,E),M&&M.unregisterApplication(C)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;W_(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Jb,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(Le(mo),Le(dr),Le(Fn),Le(Xp),Le(uf))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})();function W_(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let dC=!0,hC=!1;function RD(){return hC=!0,dC}function ND(){if(hC)throw new Error("Cannot enable prod mode after platform setup.");dC=!1}let rw=(()=>{class s{}return s.__NG_ELEMENT_ID__=pC,s})();function pC(s){return function vg(s,o,u){if(qu(s)&&!u){const c=sr(s.index,o);return new Pl(c,c)}return 47&s.type?new Pl(o[16],o):null}(wn(),Te(),16==(16&s))}class vC{constructor(){}supports(o){return kh(o)}create(o){return new LD(o)}}const FD=(s,o)=>o;class LD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||FD}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,g=null;for(;u||c;){const v=!c||u&&u.currentIndex<EC(c,h,g)?u:c,E=EC(v,h,g),C=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)h++;else{g||(g=[]);const S=E-h,M=C-h;if(S!=M){for(let j=0;j<S;j++){const Y=j<g.length?g[j]:g[j]=0,we=Y+j;M<=we&&we<S&&(g[j]=Y+1)}g[v.previousIndex]=M-S}}E!==C&&o(v,E,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!kh(o))throw new Re(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)g=o[E],v=this._trackByFn(E,g),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,g,v,E)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,E),c=!0),u=u._next}else h=0,function ov(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Ps()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{v=this._trackByFn(h,E),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,E,v,h)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,v,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,h)):o=this._addAfter(new UD(u,c),g,h),o}_verifyReinsertion(o,u,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new wC),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class UD{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class wC{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new VD,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function EC(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class Ig{constructor(){}supports(o){return o instanceof Map||Sp(o)}create(){return new bC}}class bC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Sp(o)))throw new Re(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const c=new CC(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class CC{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Y_(){return new uw([new vC])}let uw=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Y_()),deps:[[s,new ni,new _i]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Re(901,"")}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:Y_}),s})();function TC(){return new Q_([new Ig])}let Q_=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||TC()),deps:[[s,new ni,new _i]]}}find(u){const c=this.factories.find(g=>g.supports(u));if(c)return c;throw new Re(901,"")}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:TC}),s})();const HD=_g(null,"core",[{provide:gg,useValue:"unknown"},{provide:uC,deps:[dr]},{provide:iC,deps:[]},{provide:Xb,deps:[]}]),lw=[{provide:Lu,useClass:Lu,deps:[mo,dr,Fn,Xp,uf]},{provide:xb,deps:[mo],useFactory:function ux(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:uf,useClass:uf,deps:[[new _i,G_]]},{provide:eC,useClass:eC,deps:[]},Qb,{provide:lf,useFactory:function ox(s){return s||function ax(){return"undefined"!=typeof $localize&&$localize.locale||f_}()},deps:[[new ti(lf),new _i,new ni]]},{provide:CD,useValue:"USD"}];let $D=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Le(Lu))},s.\u0275mod=Ur({type:s}),s.\u0275inj=Jt({providers:lw}),s})()},3942:(ot,Ae,O)=>{"use strict";O.d(Ae,{Z:()=>Re});var a=O(2090),J=O(4859),P=O(9681),me=O(1877);class te{constructor(z,le){this._delegate=z,this.firebase=le,(0,P._addComponent)(z,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=z.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(z){this._delegate.automaticDataCollectionEnabled=z}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(z=>{this._delegate.checkDestroyed(),z()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(z,le=P._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const Ne=this._delegate.container.getProvider(z);return!Ne.isInitialized()&&"EXPLICIT"===(null===(xe=Ne.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&Ne.initialize(),Ne.getImmediate({identifier:le})}_removeServiceInstance(z,le=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(z).clearInstance(le)}_addComponent(z){(0,P._addComponent)(this._delegate,z)}_addOrOverwriteComponent(z){(0,P._addOrOverwriteComponent)(this._delegate,z)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function he(){const Ue=function de(Ue){const z={},le={__esModule:!0,initializeApp:function oe(He,ne={}){const K=P.initializeApp(He,ne);if((0,a.r3)(z,K.name))return z[K.name];const se=new Ue(K,le);return z[K.name]=se,se},app:Ne,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ee(He){const ne=He.name,K=ne.replace("-compat","");if(P._registerComponent(He)&&"PUBLIC"===He.type){const se=(ve=Ne())=>{if("function"!=typeof ve[K])throw ie.create("invalid-app-argument",{appName:ne});return ve[K]()};void 0!==He.serviceProps&&(0,a.ZB)(se,He.serviceProps),le[K]=se,Ue.prototype[K]=function(...ve){return this._getService.bind(this,ne).apply(this,He.multipleInstances?ve:[])}}return"PUBLIC"===He.type?le[K]:null},removeApp:function xe(He){delete z[He]},useAsService:function qe(He,ne){return"serverAuth"===ne?null:ne},modularAPIs:P}};function Ne(He){if(!(0,a.r3)(z,He=He||P._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:He});return z[He]}return le.default=le,Object.defineProperty(le,"apps",{get:function _e(){return Object.keys(z).map(He=>z[He])}}),Ne.App=Ue,le}(te);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function z(le){(0,a.ZB)(Ue,le)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),Ue}(),B=new me.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=$;!function De(Ue){(0,P.registerVersion)("@firebase/app-compat","0.1.18",Ue)}()},9681:(ot,Ae,O)=>{"use strict";O.r(Ae),O.d(Ae,{FirebaseError:()=>me.ZR,SDK_VERSION:()=>Lr,_DEFAULT_ENTRY_NAME:()=>Vn,_addComponent:()=>rn,_addOrOverwriteComponent:()=>Tr,_apps:()=>dt,_clearComponents:()=>Ot,_components:()=>qn,_getProvider:()=>Vi,_registerComponent:()=>Qt,_removeServiceInstance:()=>Jt,deleteApp:()=>ji,getApp:()=>Hs,getApps:()=>ui,initializeApp:()=>Bi,onLog:()=>Gn,registerVersion:()=>Kr,setLogLevel:()=>Pn});var a=O(5861),J=O(4859),P=O(1877),me=O(2090);class te{constructor(tt){this.container=tt}getPlatformInfoString(){return this.container.getProviders().map(Rt=>{if(function ge(yt){const tt=yt.getComponent();return"VERSION"===(null==tt?void 0:tt.type)}(Rt)){const gn=Rt.getImmediate();return`${gn.library}/${gn.version}`}return null}).filter(Rt=>Rt).join(" ")}}const ie="@firebase/app",he=new P.Yd("@firebase/app"),Vn="[DEFAULT]",ut={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dt=new Map,qn=new Map;function rn(yt,tt){try{yt.container.addComponent(tt)}catch(Rt){he.debug(`Component ${tt.name} failed to register with FirebaseApp ${yt.name}`,Rt)}}function Tr(yt,tt){yt.container.addOrOverwriteComponent(tt)}function Qt(yt){const tt=yt.name;if(qn.has(tt))return he.debug(`There were multiple attempts to register component ${tt}.`),!1;qn.set(tt,yt);for(const Rt of dt.values())rn(Rt,yt);return!0}function Vi(yt,tt){return yt.container.getProvider(tt)}function Jt(yt,tt,Rt=Vn){Vi(yt,tt).clearInstance(Rt)}function Ot(){qn.clear()}const gr=new me.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class js{constructor(tt,Rt,gn){this._isDeleted=!1,this._options=Object.assign({},tt),this._config=Object.assign({},Rt),this._name=Rt.name,this._automaticDataCollectionEnabled=Rt.automaticDataCollectionEnabled,this._container=gn,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this.checkDestroyed(),this._automaticDataCollectionEnabled=tt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(tt){this._isDeleted=tt}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}const Lr="9.6.7";function Bi(yt,tt={}){"object"!=typeof tt&&(tt={name:tt});const Rt=Object.assign({name:Vn,automaticDataCollectionEnabled:!1},tt),gn=Rt.name;if("string"!=typeof gn||!gn)throw gr.create("bad-app-name",{appName:String(gn)});const Ir=dt.get(gn);if(Ir){if((0,me.vZ)(yt,Ir.options)&&(0,me.vZ)(Rt,Ir.config))return Ir;throw gr.create("duplicate-app",{appName:gn})}const Nt=new J.H0(gn);for(const ht of qn.values())Nt.addComponent(ht);const nt=new js(yt,Rt,Nt);return dt.set(gn,nt),nt}function Hs(yt=Vn){const tt=dt.get(yt);if(!tt)throw gr.create("no-app",{appName:yt});return tt}function ui(){return Array.from(dt.values())}function ji(yt){return gt.apply(this,arguments)}function gt(){return(gt=(0,a.Z)(function*(yt){const tt=yt.name;dt.has(tt)&&(dt.delete(tt),yield Promise.all(yt.container.getProviders().map(Rt=>Rt.delete())),yt.isDeleted=!0)})).apply(this,arguments)}function Kr(yt,tt,Rt){var gn;let Ir=null!==(gn=ut[yt])&&void 0!==gn?gn:yt;Rt&&(Ir+=`-${Rt}`);const Nt=Ir.match(/\s|\//),nt=tt.match(/\s|\//);if(Nt||nt){const ht=[`Unable to register library "${Ir}" with version "${tt}":`];return Nt&&ht.push(`library name "${Ir}" contains illegal characters (whitespace or "/")`),Nt&&nt&&ht.push("and"),nt&&ht.push(`version name "${tt}" contains illegal characters (whitespace or "/")`),void he.warn(ht.join(" "))}Qt(new J.wA(`${Ir}-version`,()=>({library:Ir,version:tt}),"VERSION"))}function Gn(yt,tt){if(null!==yt&&"function"!=typeof yt)throw gr.create("invalid-log-argument");(0,P.Am)(yt,tt)}function Pn(yt){(0,P.Ub)(yt)}!function _o(yt){Qt(new J.wA("platform-logger",tt=>new te(tt),"PRIVATE")),Kr(ie,"0.7.17",yt),Kr(ie,"0.7.17","esm2017"),Kr("fire-js","")}("")},4859:(ot,Ae,O)=>{"use strict";O.d(Ae,{wA:()=>P,H0:()=>de});var a=O(5861),J=O(2090);class P{constructor($,B,Q){this.name=$,this.instanceFactory=B,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const me="[DEFAULT]";class te{constructor($,B){this.name=$,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const B=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(B)){const Q=new J.BH;if(this.instancesDeferred.set(B,Q),this.isInitialized(B)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:B});je&&Q.resolve(je)}catch(je){}}return this.instancesDeferred.get(B).promise}getImmediate($){var B;const Q=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),je=null!==(B=null==$?void 0:$.optional)&&void 0!==B&&B;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(De){if(je)return null;throw De}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ie(he){return"EAGER"===he.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:me})}catch(B){}for(const[B,Q]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(B);try{const De=this.getOrInitializeService({instanceIdentifier:je});Q.resolve(De)}catch(De){}}}}clearInstance($=me){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,a.Z)(function*(){const B=Array.from($.instances.values());yield Promise.all([...B.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...B.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=me){return this.instances.has($)}getOptions($=me){return this.instancesOptions.get($)||{}}initialize($={}){const{options:B={}}=$,Q=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Q,options:B});for(const[De,Re]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(De)&&Re.resolve(je);return je}onInit($,B){var Q;const je=this.normalizeInstanceIdentifier(B),De=null!==(Q=this.onInitCallbacks.get(je))&&void 0!==Q?Q:new Set;De.add($),this.onInitCallbacks.set(je,De);const Re=this.instances.get(je);return Re&&$(Re,je),()=>{De.delete($)}}invokeOnInitCallbacks($,B){const Q=this.onInitCallbacks.get(B);if(Q)for(const je of Q)try{je($,B)}catch(De){}}getOrInitializeService({instanceIdentifier:$,options:B={}}){let Q=this.instances.get($);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(he=$,he===me?void 0:he),options:B}),this.instances.set($,Q),this.instancesOptions.set($,B),this.invokeOnInitCallbacks(Q,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,Q)}catch(je){}var he;return Q||null}normalizeInstanceIdentifier($=me){return this.component?this.component.multipleInstances?$:me:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor($){this.name=$,this.providers=new Map}addComponent($){const B=this.getProvider($.name);if(B.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);B.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const B=new te($,this);return this.providers.set($,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Ae,O)=>{"use strict";O.d(Ae,{in:()=>J,Yd:()=>ie,Ub:()=>de,Am:()=>he});const a=[];var J=(()=>{return($=J||(J={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",J;var $})();const P={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},me=J.INFO,te={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ge=($,B,...Q)=>{if(B<$.logLevel)return;const je=(new Date).toISOString(),De=te[B];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[De](`[${je}]  ${$.name}:`,...Q)};class ie{constructor(B){this.name=B,this._logLevel=me,this._logHandler=ge,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in J))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?P[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...B),this._logHandler(this,J.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...B),this._logHandler(this,J.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,J.INFO,...B),this._logHandler(this,J.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,J.WARN,...B),this._logHandler(this,J.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...B),this._logHandler(this,J.ERROR,...B)}}function de($){a.forEach(B=>{B.setLogLevel($)})}function he($,B){for(const Q of a){let je=null;B&&B.level&&(je=P[B.level]),Q.userLogHandler=null===$?null:(De,Re,...Ue)=>{const z=Ue.map(le=>{if(null==le)return null;if("string"==typeof le)return le;if("number"==typeof le||"boolean"==typeof le)return le.toString();if(le instanceof Error)return le.message;try{return JSON.stringify(le)}catch(xe){return null}}).filter(le=>le).join(" ");Re>=(null!=je?je:De.logLevel)&&$({level:J[Re].toLowerCase(),message:z,args:Ue,type:De.name})}}}},5861:(ot,Ae,O)=>{"use strict";function a(P,me,te,ge,ie,de,he){try{var $=P[de](he),B=$.value}catch(Q){return void te(Q)}$.done?me(B):Promise.resolve(B).then(ge,ie)}function J(P){return function(){var me=this,te=arguments;return new Promise(function(ge,ie){var de=P.apply(me,te);function he(B){a(de,ge,ie,he,$,"next",B)}function $(B){a(de,ge,ie,he,$,"throw",B)}he(void 0)})}}O.d(Ae,{Z:()=>J})}},ot=>{ot(ot.s=8035)}]);