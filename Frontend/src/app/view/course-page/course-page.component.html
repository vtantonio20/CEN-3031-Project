<div class="flex flex-col h-screen overflow-hidden min-h-screen bg-transparent bg-orange-800 bg-gradient-to-tr from-indigo-500 ">
  <app-header [title]="courseTitle" ></app-header>
  <div class="flex-1 overflow-y-scroll">
        <div *ngIf="course | async as thisCourse">
            <div  class="divide-y-2 divide-gray-200">
                <!--Breadcrumbs-->
                <div class="grid place-items-end pr-3">
                    <div class="px py-1 rounded-lg">
                        <ul class="flex space-x-4">
                            <li routerLink="/home" class="cursor-pointer text-blue-500 ">Home</li>
                            <p class="text-white">>></p>
                            <li routerLink="/dashboard" class="cursor-pointer text-blue-500 ">Dashboard</li>
                            <p class="text-white">>></p>
                            <li class="text-blue-500 ">Course</li>
                        </ul>
                    </div>
                </div>
                <!--header-->
                <div class=" pt-6 pl-16 pb-8 flex justify-between">
                    <h1 class="text-4xl font-bold text-white ">{{thisCourse.title}}</h1>
                    <div *ngIf="owner | async as owner">
                        <h3 class="text-xl font-medium text-white  pr-3"> Course Owner: Ms. {{owner.fname}} {{owner.lname}}</h3>
                    </div>
                </div>
                <!--body-->
                <div class="flex pl-10">
                    <div *ngIf="auth.user$ | async as user" class="flex"> 
                        <div *ngIf="lectures | async as lectures">  
                            <app-lecture-card *ngIf="user.role === 'Teacher'" class="p-6 inline-flex" (click)="toggleDialog()"></app-lecture-card>   
                            <div *ngFor="let lecture of sortedLectures" class="p-6 inline-flex">
                                <div *ngIf="owner | async as owner">
                                    <app-lecture-card [lecture]="lecture" [owner]="owner.fname + ' ' + owner.lname" (click)="navigateToLecture(lecture)"></app-lecture-card>
                                </div>
                            </div>

                            <div *ngIf="lectures.length === 0">
                                <h1 *ngIf="user.role === 'Student'" class="text-white text-lg pt-2">
                                    The owner of this course has not yet published any videos.<br>
                                </h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <ng-container *ngTemplateOutlet="uploadVideoDialogBox"></ng-container>

    </div>
</div>


<!--Dialog Box-->
<ng-template #uploadVideoDialogBox>
    <div  *ngIf="showDialog" class="overflow-x-hidden overflow-y-auto fixed inset-0 z-50 justify-center items-center flex">
       <div class="relative my-6 mx-auto w-1/3 min-w-fit">
        <div class="rounded-xl shadow-2xl relative bg-white">
          <!--Heading-->
          <div class="py-5 border-b border-solid border-gray-200 rounded-t">
            <h1 class="text-4xl font-semibold text-center">Upload a lecture!</h1>
          </div>
          <!--Body-->
          <div class="relative p-6 flex-auto">
            <p *ngIf="alert" class=" text-center text-xl text-red-600">{{alert}}</p>
            <div class="my-4 text-blueGray-500 text-lg leading-relaxed">
              <form>
                <ul class="text-base ">
                    <li class="flex justify-center"><label class="font-medium">Enter a title</label></li>
                    <li class="py-2 flex justify-center"><input [(ngModel)]="title" name="title" id="title" type="text" placeholder="Lecture title" 
                        class="
                        w-3/4 p-2 
                        text-base
                        font-normal
                        text-gray-700
                        bg-white bg-clip-padding
                        border border-solid border-gray-300
                        rounded-md
                        shadow appearance-none
                        transition
                        ease-in-out
                        m-0
                        focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none leading-tight focus:shadow-outline">
                    </li>
                    <li class="flex justify-center"><label class="font-medium">Enter a description</label></li>
                    <li class="py-2 flex justify-center">
                        <textarea 
                        [(ngModel)]="description"
                        class="
                          form-control
                          w-3/4
                          px-3
                          py-1.5
                          text-base
                          font-normal
                          text-gray-700
                          bg-white bg-clip-padding
                          border border-solid border-gray-300
                          rounded
                          transition
                          ease-in-out
                          m-0
                          focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none
                        "
                        name="description" id="description" type="text" 
                        rows="5"
                        placeholder="Description"
                      ></textarea>  
                    </li>
                    <li class="flex justify-center items-center ">
                        <div class="w-3/4">
                          <div class="text-center">
                            <li class="py-2"><label for="imageURL" class="font-medium" >Upload lecture video</label></li>
                            <li><input type = "file" accept="video/*" (change)="videoSelected($event)"></li>
                            <li class="py-2 "><label for="imageURL" class="font-medium">Upload thumbnail</label></li>
                            <li><input type = "file" accept="image/*" (change)="imageSelected($event)"></li>
                          </div>
                        </div>
                    </li>


                </ul>
                </form>  
              </div>
          </div>
          <!--Footer-->
          <div class="flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b">
            <button (click)="toggleDialog()" class="text-red-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150" type="button" >
              Close
            </button>
            <button (click)="uploadLecture()" class="bg-emerald-500 text-white active:bg-emerald-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150" type="button">
              Upload
            </button>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="showDialog" class="opacity-25 fixed inset-0 z-40 bg-black"></div>
  </ng-template>